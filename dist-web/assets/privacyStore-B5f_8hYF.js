import{c as n}from"./proxy-BIEmBbur.js";import{c,i as t}from"./index-BquUM_dP.js";const p=n("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);const u=n("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),a={running:!1,bootstrapped:!1,circuitEstablished:!1,progress:0,stub:!1,error:null,loading:!1,lastChecked:null},i={connected:!1,type:void 0,name:void 0,stub:!1,loading:!1,lastChecked:null},f=c((e,o)=>({tor:a,vpn:i,async refreshTor(){e(r=>({tor:{...r.tor,loading:!0}}));try{const r=await t.tor.status();e({tor:{running:!!r?.running,bootstrapped:!!r?.bootstrapped,circuitEstablished:!!r?.circuitEstablished,progress:typeof r?.progress=="number"?r.progress:0,stub:!!r?.stub,error:typeof r?.error=="string"?r.error:null,loading:!1,lastChecked:Date.now()}})}catch(r){e({tor:{...o().tor,loading:!1,error:r instanceof Error?r.message:String(r),lastChecked:Date.now()}})}},async refreshVpn(){e(r=>({vpn:{...r.vpn,loading:!0}}));try{const r=await t.vpn.status();e({vpn:{connected:!!r?.connected,type:r?.type??void 0,name:r?.name??void 0,stub:!!r?.stub,loading:!1,lastChecked:Date.now()}})}catch{e({vpn:{...o().vpn,loading:!1,lastChecked:Date.now()}})}},async startTor(){e(r=>({tor:{...r.tor,loading:!0,error:null}}));try{const r=await t.tor.start();await o().refreshTor(),r?.stub&&e(s=>({tor:{...s.tor,stub:!0,error:r?.warning??"Tor binary not found; running in stub mode."}}))}catch(r){e({tor:{...a,error:r instanceof Error?r.message:String(r),loading:!1,lastChecked:Date.now()}})}},async stopTor(){e(r=>({tor:{...r.tor,loading:!0}}));try{await t.tor.stop()}catch(r){e({tor:{...o().tor,error:r instanceof Error?r.message:String(r)}})}finally{e({tor:{...a,lastChecked:Date.now()}})}},async newTorIdentity(){try{await t.tor.newIdentity(),await o().refreshTor()}catch(r){e({tor:{...o().tor,error:r instanceof Error?r.message:String(r)}})}},async checkVpn(){e(r=>({vpn:{...r.vpn,loading:!0}}));try{const r=await t.vpn.check();e({vpn:{connected:!!r?.connected,type:r?.type??void 0,name:r?.name??void 0,stub:!!r?.stub,loading:!1,lastChecked:Date.now()}})}catch{e({vpn:{...o().vpn,loading:!1,lastChecked:Date.now()}})}}}));export{p as E,u as W,f as u};
//# sourceMappingURL=privacyStore-B5f_8hYF.js.map

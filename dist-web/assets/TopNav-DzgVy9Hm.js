import{r as i,j as s,f as Sr,u as _e,k as Nr,a as Ps,i as U,d as kr,b as Er,c as Ms,l as jr,h as Rr,R as De,m as Is}from"./index-dj7m1cGj.js";import{u as In,a as Ts,b as Os}from"./AppShell-DzVtN4M2.js";import{u as ze,W as Tn,E as Ds}from"./privacyStore-CknxRZFg.js";import{u as _s,T as Ls,C as pn,R as Fs,c as On,F as Dn,W as _n}from"./OmniDesk-XqA-NCuc.js";import{B as $s}from"./brain-BOF2plVW.js";import{G as zs}from"./gamepad-2-CkYAMJPd.js";import{Z as Bs}from"./zap-BOkdKR3W.js";import{c as xe,b as Ws,f as Gs,L as Ln,m as re}from"./proxy-C7NQ8sMs.js";import{u as he}from"./use-ipc-event-Mlq2GWsh.js";import{d as Fn,a as Ks,C as mn,H as Us}from"./debounce-CrBEO-ON.js";import{L as Hs}from"./lock-Do5xV_Pm.js";import{G as Vs}from"./globe-CkFFXIIw.js";import{S as we}from"./shield-wz6Nan5a.js";import{S as Ke}from"./search-DY2JFyPs.js";import{A as Oe}from"./index-D3V9pHtR.js";import{S as Xe}from"./sparkles-BXvEuSDZ.js";import{C as $n}from"./clock-C2CbMN6U.js";import{P as It}from"./plus-BA3m4G4e.js";import{X as Xs}from"./x-kCWGjBIF.js";import{L as St}from"./loader-circle-B2cekLv2.js";import{f as Ys}from"./formatDistanceToNow-Ctx6mZEP.js";import{u as zn,e as qs}from"./profileStore-yzAJ5kKU.js";import{D as Ar}from"./download-B1WlPeuz.js";import{E as Zs}from"./eye-off-BihoSOdE.js";import{G as Qs,B as Js,S as ea}from"./sun-gjWoxaw5.js";import{C as Pr}from"./camera-CRUc-Z54.js";import{M as ta,S as na}from"./settings-CRuJdu6q.js";import{N as Ue}from"./network-BKgZ1MJV.js";import{C as ft}from"./circle-check-big-CnSYYo6U.js";import{C as Ut}from"./circle-x-DhN9FEyB.js";import{R as vt}from"./refresh-cw-81QnrOuz.js";import{C as ra}from"./chevron-right-De8SIpIA.js";import{A as Bn}from"./arrow-right-DHDEBQ_I.js";import{B as Wn}from"./agentStreamStore-DATaLJlE.js";import{A as oa}from"./activity-CJFxjceS.js";import"./Portal-Cws6ez_F.js";import"./external-link-uxSLXU_6.js";import"./trustDashboardStore-CE7KmIta.js";import"./triangle-alert-CX1V0b5r.js";import"./copy-r_Uv8dWa.js";import"./cloud-RM87ovcD.js";import"./circle-check-J1xVWsPI.js";const Gn=xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const sa=xe("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);const aa=xe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const Mr=xe("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);const ia=xe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const ca=xe("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);const Kn=xe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const la=xe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const ua=xe("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const da=xe("PictureInPicture",[["path",{d:"M8 4.5v5H3m-1-6 6 6m13 0v-3c0-1.16-.84-2-2-2h-7m-9 9v2c0 1.05.95 2 2 2h3",key:"bcd8fb"}],["rect",{width:"10",height:"7",x:"12",y:"13.5",ry:"2",key:"136fx3"}]]);const fa=xe("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);const pa=xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ma=i.createContext(null);function ha(){const e=i.useRef(!1);return Ws(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function ga(){const e=ha(),[t,n]=i.useState(0),r=i.useCallback(()=>{e.current&&n(t+1)},[t]);return[i.useCallback(()=>Gs.postRender(r),[r]),t]}const xa=e=>!e.isLayoutDirty&&e.willUpdate(!1);function Un(){const e=new Set,t=new WeakMap,n=()=>e.forEach(xa);return{add:r=>{e.add(r),t.set(r,r.addEventListener("willUpdate",n))},remove:r=>{e.delete(r);const o=t.get(r);o&&(o(),t.delete(r)),n()},dirty:n}}const Ir=e=>e===!0,ya=e=>Ir(e===!0)||e==="id",va=({children:e,id:t,inherit:n=!0})=>{const r=i.useContext(Ln),o=i.useContext(ma),[a,l]=ga(),c=i.useRef(null),p=r.id||o;c.current===null&&(ya(n)&&p&&(t=t?p+"-"+t:p),c.current={id:t,group:Ir(n)&&r.group||Un()});const d=i.useMemo(()=>({...c.current,forceRender:a}),[l]);return s.jsx(Ln.Provider,{value:d,children:e})},ba=[{id:"Research",icon:$s,label:"Research",color:"text-purple-400",glowColor:"from-purple-500 via-purple-600 to-purple-500"},{id:"Trade",icon:Ls,label:"Trade",color:"text-green-400",glowColor:"from-green-500 via-emerald-600 to-green-500"},{id:"Games",icon:zs,label:"Game",color:"text-yellow-400",glowColor:"from-yellow-500 via-amber-600 to-yellow-500"},{id:"Browse",icon:Bs,label:"Browse",color:"text-cyan-400",glowColor:"from-cyan-500 via-blue-600 to-cyan-500"}];function wa(){const{mode:e,setMode:t}=_s(),n=Sr(),r=a=>{t(a.id),n("/")},o=e||"Research";return s.jsx("div",{className:"flex items-center gap-1 bg-gray-800/60 rounded-lg p-1 border border-gray-700/50 shadow-sm",children:ba.map(a=>{const l=a.icon,c=o===a.id;return s.jsxs(re.button,{onClick:()=>r(a),whileHover:{scale:1.02},whileTap:{scale:.98},className:`
              relative flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium
              transition-all duration-200 cursor-pointer
              ${c?`bg-gradient-to-r ${a.glowColor} text-white shadow-lg`:"text-gray-400 hover:text-gray-200 hover:bg-gray-700/30"}
            `,title:a.label,children:[s.jsx(l,{size:16,className:c?"text-white":a.color}),s.jsx("span",{children:a.label}),c&&s.jsx(re.div,{className:`absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r ${a.glowColor} rounded-full`,initial:{scaleX:0},animate:{scaleX:1},transition:{type:"spring",stiffness:500,damping:30}})]},a.id)})})}const Hn=kr(),Ca={google:"https://www.google.com/search?q=",duckduckgo:"https://duckduckgo.com/?q=",wiki:"https://en.wikipedia.org/wiki/Special:Search?search=",youtube:"https://www.youtube.com/results?search_query=",twitter:"https://twitter.com/search?q="},He=(e,t)=>`${Ca[e]}${encodeURIComponent(t)}`,Tr=(e,t)=>{if(t===null||Number.isNaN(t)||!Number.isFinite(t))return null;const n=Math.abs(t)>1e6||Math.abs(t)<1e-4?t.toExponential(6):Number.isInteger(t)?t.toString():t.toPrecision(8).replace(/\.?0+$/,"");return`${e} = ${n}`},Or=e=>{const t=e.replace(/,/g,"").trim();if(!t||!/^[0-9+\-*/().%\s^]+$/.test(t))return null;try{const n=Function(`"use strict"; return (${t.replace(/\^/g,"**")})`)();if(typeof n=="number"&&Number.isFinite(n))return n}catch{return null}return null},Vn=e=>{const t=e.trim();if(!t)return null;const n=t.toLowerCase();if(n.startsWith("/calc")){const r=t.slice(5).trim(),o=r?Or(r):null;return{type:"calc",expr:r,result:o??void 0}}return n.startsWith("/ai")?{type:"ai",prompt:t.slice(3).trim()}:n.startsWith("/g ")?{type:"search",engine:"google",query:t.slice(3).trim()}:n.startsWith("/ddg ")?{type:"search",engine:"duckduckgo",query:t.slice(5).trim()}:n.startsWith("/wiki ")?{type:"search",engine:"wiki",query:t.slice(6).trim()}:n.startsWith("/yt ")?{type:"search",engine:"youtube",query:t.slice(4).trim()}:n.startsWith("/t ")?{type:"search",engine:"twitter",query:t.slice(3).trim()}:t.startsWith("?")?{type:"agent",prompt:t.slice(1).trim()}:n.startsWith("ask ")?{type:"agent",prompt:t.slice(4).trim()}:t.startsWith("/")?{type:"command",command:t.slice(1).trim()}:null},Sa=(e,t)=>{switch(e.type){case"calc":{if(!e.expr)return{type:"command",title:"Calculate…",subtitle:"Enter an expression to evaluate",action:e};const n=Tr(e.expr,e.result??null);return{type:"command",title:`Calculate: ${e.expr}`,subtitle:n??"Press enter to evaluate",action:e}}case"ai":return{type:"command",title:`Ask AI assistant${e.prompt?`: ${e.prompt}`:""}`,subtitle:e.prompt?"OmniBrowser agent":"Provide a prompt to continue",action:e};case"agent":return{type:"command",title:`Ask agent${e.prompt?`: ${e.prompt}`:""}`,subtitle:"Query the current page context",action:e};case"search":return{type:"search",title:`${e.engine==="duckduckgo"?"DuckDuckGo":e.engine==="wiki"?"Wikipedia":e.engine==="youtube"?"YouTube":e.engine==="twitter"?"Twitter/X":"Google"}: ${e.query||t}`,subtitle:He(e.engine,e.query||t),action:e};case"command":return{type:"command",title:`Run command: ${e.command||t}`,subtitle:"Press enter to execute via command palette",action:e};default:return null}},Xn="omnibox:recent",Yn=20,Dr=i.forwardRef(({onCommandPalette:e},t)=>{const{tabs:n,activeId:r}=_e(),o=Nr(g=>g.activeContainerId),a=Ps(),l=g=>g.map(N=>({id:N.id,title:N.title||"New Tab",url:N.url||"about:blank",active:!!N.active,mode:N.mode,containerId:N.containerId,containerName:N.containerName,containerColor:N.containerColor,createdAt:N.createdAt,lastActiveAt:N.lastActiveAt,sessionId:N.sessionId,profileId:N.profileId,sleeping:N.sleeping})),[c,p]=i.useState(""),[d,u]=i.useState(!1),[f,m]=i.useState([]),[x,v]=i.useState(-1),[h,y]=i.useState(null),[S,A]=i.useState(0),[k,R]=i.useState(!1),[P,L]=i.useState([]),C=i.useRef(null),[O,I]=i.useState([]),[G,F]=i.useState(null),[q,Y]=i.useState(!1),V=i.useRef(null),ne=i.useRef(null),K=i.useCallback((g,N)=>{const M=window?.ipc;if(M){if(typeof M.on=="function"){M.on(g,N);return}typeof M.addListener=="function"&&M.addListener(g,N)}},[]),J=i.useCallback((g,N)=>{const M=window?.ipc;if(M){if(typeof M.removeListener=="function"){M.removeListener(g,N);return}if(typeof M.off=="function"){M.off(g,N);return}typeof M.removeEventListener=="function"&&M.removeEventListener(g,N)}},[]);i.useImperativeHandle(t,()=>({focus:(g=!0)=>{const N=C.current;N&&(N.focus(),g&&N.select(),u(!0),Y(!0))},blur:()=>{C.current?.blur(),u(!1)}}),[]),i.useEffect(()=>{if(!q)return;const g=setTimeout(()=>Y(!1),500);return()=>clearTimeout(g)},[q]);const _=n.find(g=>g.id===r);i.useEffect(()=>{try{const g=localStorage.getItem(Xn);if(g){const N=JSON.parse(g);Array.isArray(N)&&L(N.filter(M=>typeof M?.url=="string").slice(0,Yn))}}catch(g){console.warn("Failed to restore omnibox recents:",g)}},[]);const b=i.useCallback((g,N)=>{!N||N.startsWith("about:")||N.startsWith("ob://")||L(M=>{const T=M.filter($=>$.url!==N),X=[{title:g||N,url:N,timestamp:Date.now()},...T].slice(0,Yn);try{localStorage.setItem(Xn,JSON.stringify(X))}catch($){console.warn("Failed to persist omnibox recents:",$)}return X})},[]),z=i.useCallback(()=>{if(ne.current){try{ne.current()}catch{}ne.current=null}V.current=null},[]),Z=i.useCallback(g=>{if(!(!g||typeof g!="object")){if(g.type==="status"){F(g.value||null);return}if(g.type==="result"&&g.result){I(N=>{const M=N.findIndex(T=>T.url===g.result.url);if(M>=0){const T=N.slice();return T[M]={...T[M],...g.result},T}return[...N,g.result]});return}if(g.type==="complete"){F(N=>N??"Live results updated");return}if(g.type==="error"){F(g.message||"Live search failed");return}}},[]),E=i.useCallback(async g=>{const N=g.trim();if(N){z(),I([]),F("Searching…");try{const M=await U.liveSearch.start(N,{maxResults:10});V.current=M;const T=(X,$)=>{Z($)};K(M.channel,T),ne.current=()=>J(M.channel,T)}catch(M){console.error("Live search start failed:",M),F("Live search failed")}}},[K,J,Z,z]);he("tabs:updated",g=>{const N=Array.isArray(g)?g.find(M=>M.active):null;if(N&&!d){p(N.url||"");try{const M=new URL(N.url||"about:blank");y({secure:M.protocol==="https:"})}catch{y(null)}}},[r,d]),he("tabs:progress",g=>{g.tabId===r&&(A(g.progress),R(g.progress<100&&g.progress>0))},[r]);const D=i.useCallback(Fn(async g=>{const N=g??"",M=N.toLowerCase().trim(),T=[];if(M.startsWith("@live")){m([]);return}const X=typeof navigator<"u"&&navigator.onLine===!1,$=(B,oe=!1)=>{if(!B.title)return;T.some(le=>le.title===B.title&&le.subtitle===B.subtitle&&le.url===B.url&&le.type===B.type)||(oe?T.unshift(B):T.push(B))},ce=Vn(N);if(ce){const B=Sa(ce,N);B&&$(B)}const w=N.trim();if(w.length>0&&!w.startsWith("@")&&!w.startsWith("/")&&!(ce&&(ce.type==="agent"||ce.type==="ai")))$({type:"command",title:`Ask @redix: ${w}`,subtitle:"Stream the Redix agent answer inline",action:{type:"agent",prompt:w},badge:"@redix",icon:"sparkles"},!0);else if(!w){const B=[_?.title?`Summarize "${_.title}"`:"Summarize this tab","Why did regen mode fire?","What related sources am I tracking?"];B.slice().reverse().forEach((oe,se)=>$({type:"command",title:`Ask @redix: ${oe}`,subtitle:se===B.length-1?"Redix agent":void 0,action:{type:"agent",prompt:oe},badge:"@redix",icon:"sparkles"},!0))}M.length>0&&!M.startsWith("http")&&!M.includes(".")&&((!ce||ce.type!=="search")&&$({type:"search",title:`Search: ${N}`,subtitle:He("google",N),action:{type:"search",engine:"google",query:N}}),$({type:"search",title:`DuckDuckGo: ${N}`,subtitle:He("duckduckgo",N),action:{type:"search",engine:"duckduckgo",query:N}})),n.forEach(B=>{const oe=B.title||"Untitled",se=B.url||"";(oe.toLowerCase().includes(M)||se.toLowerCase().includes(M))&&$({type:"tab",title:oe,subtitle:se||void 0,action:se?{type:"nav",url:se}:void 0})});try{let B=[];if(!X)if(M.trim().length===0||M.length<2)try{B=await U.history.search("")}catch(oe){Hn&&console.warn("History search failed:",oe),B=[]}else try{B=await U.history.search(N)}catch(oe){Hn&&console.warn("History search failed:",oe),B=[]}Array.isArray(B)&&B.length>0&&B.slice(0,5).forEach(oe=>{$({type:"history",title:oe.title||oe.url||"Untitled",subtitle:oe.url,action:oe.url?{type:"nav",url:oe.url}:void 0})})}catch(B){console.warn("History search failed:",B)}P.filter(B=>!M||B.title.toLowerCase().includes(M)||B.url.toLowerCase().includes(M)).slice(0,5).forEach(B=>{$({type:"history",title:B.title,subtitle:B.url,action:{type:"nav",url:B.url}})}),m(T.slice(0,8))},150),[n,P,_?.id,_?.title]),H=i.useMemo(()=>Fn(g=>{E(g)},250),[E]);i.useEffect(()=>()=>H.cancel(),[H]),i.useEffect(()=>()=>{z()},[z]),i.useEffect(()=>{const g=c.trim();if(g.toLowerCase().startsWith("@live")){const N=g.replace(/^@live\\s*/i,"").trim();if(N.length<2){H.cancel(),I([]),F("Type at least 2 characters to stream results"),z();return}H(N)}else H.cancel(),I([]),F(null),z()},[c,H,z]),i.useEffect(()=>{const g=c.trim();if(!g.toLowerCase().startsWith("@live"))return;const N=g.replace(/^@live\s*/i,"").trim(),M=[{type:"command",title:`Redix Live Search${N?` • ${N}`:""}`,subtitle:G??(N.length<2?"Type at least 2 characters to begin streaming":O.length===0?"Streaming results…":"Live results ready"),interactive:!1,icon:"sparkles"}];O.forEach(T=>{M.push({type:"search",title:T.title||T.url,subtitle:T.snippet||T.url,url:T.url,action:{type:"nav",url:T.url,title:T.title},icon:"search"})}),m(M)},[c,O,G]),i.useEffect(()=>{d?D(c):m([])},[c,d,D]),i.useEffect(()=>{v(-1)},[f.length]),i.useEffect(()=>{const g=N=>{const T=navigator.platform.toUpperCase().indexOf("MAC")>=0?N.metaKey:N.ctrlKey;T&&N.key==="l"&&(N.preventDefault(),C.current?.focus(),C.current?.select()),T&&N.key==="k"&&(N.preventDefault(),e())};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[e]);const Q=async(g,N={})=>{const{background:M=!1,newWindow:T=!1,titleOverride:X}=N;let $=g.trim();if(!$)return;!$.startsWith("http://")&&!$.startsWith("https://")&&!$.startsWith("about:")&&!$.startsWith("file://")&&!$.startsWith("ob://")&&(/^[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]*\.[a-zA-Z]{2,}$/.test($)||$.includes(".")?$=`https://${$}`:$=He("google",$.trim()));const ce=M&&!T;if(!a){const w=X||$,j=_e.getState(),W=(j.tabs??[]).map(se=>({...se}));let B=W,oe=j.activeId??null;if(!j.activeId||W.length===0){const se=`local-${Date.now()}`;B=W.map(le=>({...le,active:!1})),B.push({id:se,title:w,url:$,active:!0,mode:"normal"}),oe=se}else if(ce){const se=`local-${Date.now()}`;B=W.map(le=>({...le})),B.push({id:se,title:w,url:$,active:!1,mode:"normal"})}else B=W.map(se=>({...se,title:se.id===j.activeId?w:se.title,url:se.id===j.activeId?$:se.url,active:se.id===j.activeId})),oe=j.activeId;_e.setState({tabs:B,activeId:oe}),Er.emit("tabs:updated",l(B)),u(!1),m([]),ce||p($),b(w,$);try{T||ce?window.open($,"_blank","noopener,noreferrer"):p($)}catch(se){console.warn("Failed to handle navigation in browser runtime:",se)}return}if(T){try{await U.private.createWindow({url:$}),u(!1),m([]),b(X||$,$)}catch(w){console.error("Failed to open new window for navigation:",w)}return}try{if((!window.ipc||typeof window.ipc.invoke!="function")&&(console.warn("[Omnibox] IPC not ready for navigation, waiting..."),await new Promise(w=>setTimeout(w,500))),console.log("[Omnibox] Navigating to:",$,{activeId:r,openInBackground:ce,activeContainerId:o}),r)if(ce){console.log("[Omnibox] Creating background tab");const w=await U.tabs.create({url:$,containerId:o,activate:!1});console.log("[Omnibox] Background tab created:",w)}else console.log("[Omnibox] Navigating active tab:",r),await U.tabs.navigate(r,$),console.log("[Omnibox] Navigation complete");else{console.log("[Omnibox] Creating new tab (no active tab)");const w=await U.tabs.create({url:$,containerId:o,activate:!ce});console.log("[Omnibox] Tab created:",w)}u(!1),m([]),ce||p($),b(X||$,$)}catch(w){console.error("Navigation failed:",w);try{(!window.ipc||typeof window.ipc.invoke!="function")&&(console.warn("IPC not ready for tab creation, waiting..."),await new Promise(W=>setTimeout(W,500)));const j=await U.tabs.create({url:$,containerId:o,activate:!ce});j&&j.id?(u(!1),m([]),ce||p($),b(X||$,$)):console.warn("Tab creation returned invalid result:",j)}catch(j){console.error("Failed to create new tab:",j)}}},ie=async(g,N,M={})=>{if(!g){await Q(N,M);return}switch(g.type){case"nav":await Q(g.url,{...M,titleOverride:g.title??M.titleOverride});return;case"search":{const T=g.query||N.trim();if(!T)return;const X=g.engine==="duckduckgo"?"DuckDuckGo":g.engine==="wiki"?"Wikipedia":g.engine==="youtube"?"YouTube":g.engine==="twitter"?"Twitter/X":"Google";await Q(He(g.engine,T),{...M,titleOverride:`${X}: ${T}`});return}case"ai":{const T=g.prompt||N.trim();if(!T){e();return}try{const X=_?.url;await U.agent.ask(T,X?{url:X}:void 0)}catch(X){console.error("AI search error:",X)}await Q(`ob://agent?q=${encodeURIComponent(T)}`,{...M,titleOverride:`AI: ${T}`});return}case"agent":{const T=g.prompt||N.trim();if(!T){e();return}try{const X=_?.url;await U.agent.ask(T,X?{url:X}:void 0)}catch(X){console.error("Agent error:",X)}await Q(`ob://agent?q=${encodeURIComponent(T)}`,{...M,titleOverride:`Agent: ${T}`});return}case"calc":{const T=g.expr||N.trim();if(!T){u(!0);return}const X=g.result??Or(T),$=T?Tr(T,X??null):null;if($){if(p($),u(!1),m([]),typeof navigator<"u"&&navigator.clipboard?.writeText)try{await navigator.clipboard.writeText($)}catch{}}else await Q(He("google",T),{...M,titleOverride:`Calculate: ${T}`});return}case"command":u(!1),m([]),e();return;default:await Q(N,M)}},te=async(g,N={})=>{if(g.interactive!==!1){if(g.action){await ie(g.action,g.subtitle||g.url||c,{...N,titleOverride:g.title});return}if(g.url){await Q(g.url,{...N,titleOverride:g.title});return}await Q(c,{...N,titleOverride:g.title})}},ae=async g=>{if(g.key==="Enter"){console.log("[Omnibox] Enter key pressed, url:",c),g.preventDefault();const N=g.shiftKey&&!g.altKey,M=g.altKey;if(x>=0&&f[x]){console.log("[Omnibox] Activating suggestion:",f[x]);const T=f[x];await te(T,{background:N,newWindow:M})}else{if(c.trim().toLowerCase().startsWith("@live")){const X=O[0];if(X?.url){await Q(X.url,{background:N,newWindow:M,titleOverride:X.title});return}}const T=Vn(c);await ie(T,c,{background:N,newWindow:M})}}else g.key==="ArrowDown"?(g.preventDefault(),v(N=>Math.min(N+1,f.length-1))):g.key==="ArrowUp"?(g.preventDefault(),v(N=>Math.max(N-1,-1))):g.key==="Escape"&&(u(!1),m([]),C.current?.blur())};return i.useEffect(()=>{!d&&_&&p(_.url||"")},[_,d]),s.jsxs("div",{className:"relative flex-1 max-w-2xl",children:[s.jsx(re.div,{className:`relative rounded-2xl transition-shadow duration-200 ${q?"ring-2 ring-blue-500/40 shadow-[0_0_0_3px_rgba(59,130,246,0.18)]":""}`,animate:{scale:d?1.02:1},transition:{duration:.2},children:s.jsxs("div",{className:"relative flex items-center",children:[h&&c&&!d&&s.jsxs("div",{className:"absolute left-3 flex items-center gap-2 z-10 pointer-events-none","aria-hidden":"true",children:[h.secure?s.jsx(Hs,{size:14,className:"text-green-400","aria-label":"Secure connection"}):c.startsWith("http://")?s.jsx(Ks,{size:14,className:"text-amber-400","aria-label":"Insecure connection"}):s.jsx(Vs,{size:14,className:"text-gray-400","aria-label":"Web page"}),h.shieldCount!==void 0&&h.shieldCount>0&&s.jsxs("div",{className:"flex items-center gap-1","aria-label":`${h.shieldCount} shields active`,children:[s.jsx(we,{size:14,className:"text-blue-400"}),s.jsx("span",{className:"text-xs text-gray-400",children:h.shieldCount})]})]}),s.jsx("input",{ref:C,type:"text",value:c,onChange:g=>p(g.target.value),onFocus:()=>u(!0),onBlur:()=>setTimeout(()=>u(!1),200),onKeyDown:ae,"aria-label":"Address bar - Search or enter URL","aria-autocomplete":"list","aria-expanded":d&&f.length>0,placeholder:"Search or enter URL",autoComplete:"off","data-omnibox-input":!0,className:`
              w-full h-10 px-4 ${h&&!d?"pl-20":"pl-4"} pr-14
              bg-white/12 backdrop-blur-md border border-white/12 rounded-2xl
              text-sm text-white font-medium placeholder-white/50
              focus:outline-none focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500/40
              hover:bg-white/16 transition-all
            `,style:{color:"#ffffff",WebkitTextFillColor:"#ffffff"}}),k&&S>0&&s.jsx(re.div,{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-500 rounded-b-xl",initial:{scaleX:0},animate:{scaleX:S/100},transition:{duration:.1}}),s.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2 text-[11px] uppercase tracking-[0.28em] text-white/40",children:[s.jsx("span",{className:"hidden sm:inline",children:typeof navigator<"u"&&navigator.platform?.toUpperCase().includes("MAC")?"⌘ K":"CTRL K"}),s.jsx(Ke,{size:14,className:"text-white/50"})]})]})}),s.jsx(Oe,{children:d&&f.length>0&&s.jsx(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-2 bg-gray-900/95 backdrop-blur-xl border border-gray-700/50 rounded-lg shadow-2xl overflow-hidden z-50",children:f.map((g,N)=>s.jsxs(re.button,{type:"button",disabled:g.interactive===!1,onMouseDown:async M=>{if(M.preventDefault(),g.interactive===!1)return;const T=M.shiftKey&&!M.altKey,X=M.altKey;await te(g,{background:T,newWindow:X})},onMouseEnter:()=>v(N),onKeyDown:M=>{if(M.key==="Enter"||M.key===" "){if(M.preventDefault(),g.interactive===!1)return;const T=M.shiftKey&&!M.altKey,X=M.altKey;te(g,{background:T,newWindow:X})}},role:"option","aria-selected":x===N,"aria-label":`${g.type} suggestion: ${g.title}`,className:`
                  w-full flex items-center gap-3 px-4 py-2.5 text-left
                  transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset
                  ${x===N?"bg-gray-800/60 text-gray-100":"text-gray-300 hover:bg-gray-800/40"}
                  ${g.interactive===!1?"cursor-default opacity-80":""}
                `,children:[s.jsxs("div",{className:"flex-shrink-0 w-5 h-5 flex items-center justify-center",children:[g.icon==="sparkles"&&s.jsx(Xe,{size:14,className:"text-emerald-400"}),g.icon==="search"&&s.jsx(Ke,{size:14,className:"text-purple-400"}),g.icon==="history"&&s.jsx($n,{size:13,className:"text-gray-400"}),!g.icon&&g.action?.type==="calc"&&s.jsx(aa,{size:14,className:"text-amber-400"}),!g.icon&&g.action?.type==="ai"&&s.jsx(Xe,{size:14,className:"text-violet-400"}),!g.icon&&g.action?.type==="agent"&&s.jsx(Xe,{size:14,className:"text-blue-400"}),!g.icon&&g.action?.type==="search"&&s.jsx(Ke,{size:14,className:"text-purple-400"}),!g.icon&&g.type==="tab"&&s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),!g.icon&&g.type==="history"&&s.jsx($n,{size:13,className:"text-gray-400"}),!g.icon&&!g.action&&g.type==="command"&&s.jsx(Ke,{size:14,className:"text-blue-400"}),!g.icon&&!g.action&&g.type==="search"&&s.jsx(Ke,{size:14,className:"text-purple-400"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium truncate",children:g.title}),(g.subtitle||g.url)&&s.jsx("div",{className:"text-xs text-gray-500 truncate",children:g.subtitle||g.url})]}),g.badge&&s.jsx("div",{className:"ml-auto flex-shrink-0 rounded-full border border-purple-500/40 bg-purple-500/15 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-purple-200",children:g.badge})]},N))})})]})});Dr.displayName="Omnibox";function Na(){const[e,t]=i.useState(0),[n,r]=i.useState(!1);return he("tabs:loading-start",()=>{r(!0),t(0)},[]),he("tabs:loading-progress",o=>{t(o.progress||0)},[]),he("tabs:loading-complete",()=>{r(!0),t(100),setTimeout(()=>{r(!1),t(0)},300)},[]),i.useEffect(()=>{if(n&&e<90){const o=setInterval(()=>{t(a=>a>=90?(clearInterval(o),a):a+Math.random()*15)},100);return()=>clearInterval(o)}},[n,e]),s.jsx(Oe,{children:n&&s.jsx(re.div,{initial:{opacity:0,scaleX:0},animate:{opacity:1,scaleX:1},exit:{opacity:0,scaleX:0},className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-purple-500 via-blue-500 to-cyan-500 origin-left",style:{scaleX:e/100}})})}function ka({compact:e=!1}){const t=kr(),[n,r]=i.useState([]),[o,a]=i.useState(null),[l,c]=i.useState(!1),[p,d]=i.useState(!1),[u,f]=i.useState(""),[m,x]=i.useState(null),[v,h]=i.useState(""),[y,S]=i.useState(null),[A,k]=i.useState(!1),[R,P]=i.useState(!1),[L,C]=i.useState(null),O=i.useRef(""),I=async()=>{try{if(!window.ipc||typeof window.ipc.invoke!="function"){setTimeout(I,300);return}const[b,z]=await Promise.all([U.sessions.list(),U.sessions.getActive()]);let Z=Array.isArray(b)?b:[];Z.length===0&&(Z=[{id:"default",name:"Default",profileId:"default",createdAt:Date.now(),tabCount:0,color:"#3b82f6"}]);const E=Z.map(ie=>ie.id).sort().join(",");O.current!==E&&(O.current=E,r(Z));let D=z&&typeof z=="object"?z:null;D||(D=Z.find(ie=>ie.id==="default")??Z[0]??null);const H=D?.id||null,Q=o?.id||null;H!==Q&&a(D)}catch(b){t&&b instanceof Error&&!b.message.includes("not available")&&console.warn("Failed to load sessions:",b)}};i.useEffect(()=>{const b=setTimeout(()=>{I()},500),z=setInterval(I,5e3);return()=>{clearTimeout(b),clearInterval(z)}},[]),i.useEffect(()=>{if(!l)return;let b=!1;return k(!0),U.sessionState.summary().then(z=>{b||S(z?.summary??null)}).catch(()=>{b||S(null)}).finally(()=>{b||k(!1)}),()=>{b=!0}},[l]);const G=async()=>{if(u.trim())try{await U.sessions.create({name:u.trim()}),f(""),d(!1),await I()}catch(b){t&&console.error("Failed to create session:",b)}},F=async b=>{try{await U.sessions.setActive({sessionId:b}),await I(),c(!1)}catch(z){t&&console.error("Failed to switch session:",z)}},q=async(b,z)=>{if(z.stopPropagation(),!!confirm(`Delete session "${n.find(Z=>Z.id===b)?.name}"? This will close all tabs in this session.`))try{await U.sessions.delete({sessionId:b}),await I()}catch(Z){t&&console.error("Failed to delete session:",Z)}},Y=b=>{x(b.id),h(b.name)},V=async b=>{try{await U.sessions.update({sessionId:b,name:v.trim()}),x(null),await I()}catch(z){console.error("Failed to update session:",z)}},ne=async()=>{P(!0),C(null);try{const b=await U.sessionState.restore();if(b?.restored){const z=b.tabCount??0;C(`Restored ${z} tab${z===1?"":"s"} from last session.`),await I()}else b?.error?C(`Restore failed: ${b.error}`):C("No session snapshot available to restore.")}catch(b){console.error("Failed to restore session snapshot:",b),C("Failed to restore session snapshot.")}finally{P(!1)}},K=!o||o.id==="default"||o.name.toLowerCase()==="default",J=!e&&!K,_=J?"gap-2 px-3":"gap-1.5 px-2";return s.jsxs("div",{className:"relative",children:[s.jsxs(re.button,{onClick:()=>c(!l),whileHover:{scale:1.05},whileTap:{scale:.95},className:`relative flex items-center ${_} py-1.5 rounded-lg bg-gray-800/60 hover:bg-gray-800/80 border border-gray-700/50 text-gray-300 hover:text-gray-100 transition-all`,title:"Multi-Session Manager",children:[s.jsx(pa,{size:16}),J&&s.jsx("span",{className:"text-sm font-medium",children:o?.name||"Default"}),!K&&o?.color&&s.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-700",style:{backgroundColor:o.color}}),J&&n.length>1&&s.jsxs("span",{className:"text-xs text-gray-500",children:["(",n.length,")"]})]}),s.jsx(Oe,{children:l&&s.jsxs(re.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute right-0 mt-2 w-80 bg-gray-900/95 backdrop-blur-xl border border-gray-800/50 rounded-lg shadow-xl overflow-hidden z-40",children:[s.jsxs("div",{className:"p-3 border-b border-gray-800/50 flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-200",children:"Browser Sessions"}),s.jsx("button",{onClick:()=>{d(!0),f("")},className:"p-1.5 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-blue-400 transition-colors",title:"New Session",children:s.jsx(It,{size:16})})]}),s.jsxs("div",{className:"max-h-96 overflow-y-auto",children:[p&&s.jsxs("div",{className:"p-3 border-b border-gray-800/50",children:[s.jsx("input",{type:"text",value:u,onChange:b=>f(b.target.value),onKeyDown:b=>{b.key==="Enter"&&G(),b.key==="Escape"&&(d(!1),f(""))},placeholder:"Session name...",autoFocus:!0,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-sm text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx("button",{onClick:G,className:"flex-1 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm font-medium text-white",children:"Create"}),s.jsx("button",{onClick:()=>{d(!1),f("")},className:"px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm text-gray-300",children:"Cancel"})]})]}),n.map(b=>{const z=o?.id===b.id,Z=m===b.id;return s.jsx("div",{onClick:()=>!z&&F(b.id),className:`
                      p-3 border-b border-gray-800/50 cursor-pointer transition-colors
                      ${z?"bg-blue-600/20 border-blue-500/30":"hover:bg-gray-800/50"}
                    `,children:s.jsxs("div",{className:"flex items-center gap-3",children:[b.color&&s.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-700 flex-shrink-0",style:{backgroundColor:b.color}}),s.jsxs("div",{className:"flex-1 min-w-0",children:[Z?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:v,onChange:E=>h(E.target.value),onKeyDown:E=>{E.key==="Enter"&&V(b.id),E.key==="Escape"&&(x(null),h(""))},onClick:E=>E.stopPropagation(),autoFocus:!0,className:"flex-1 px-2 py-1 bg-gray-800 border border-gray-700 rounded text-sm text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{onClick:E=>{E.stopPropagation(),V(b.id)},className:"p-1 text-green-400 hover:text-green-300",children:s.jsx(pn,{size:14})})]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-gray-200 truncate",children:b.name}),z&&s.jsx("span",{className:"text-xs text-blue-400 font-medium",children:"Active"})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("span",{className:"text-xs text-gray-400",children:[b.tabCount," tab",b.tabCount!==1?"s":""]}),b.id==="default"&&s.jsx("span",{className:"text-xs text-gray-500",children:"• Default"})]})]}),!Z&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:E=>{E.stopPropagation(),Y(b)},className:"p-1.5 rounded-lg hover:bg-gray-700 text-gray-400 hover:text-blue-400 transition-colors",title:"Rename",children:s.jsx(ua,{size:14})}),b.id!=="default"&&s.jsx("button",{onClick:E=>q(b.id,E),className:"p-1.5 rounded-lg hover:bg-gray-700 text-gray-400 hover:text-red-400 transition-colors",title:"Delete",children:s.jsx(Xs,{size:14})})]})]})},b.id)})]}),s.jsxs("div",{className:"p-3 border-t border-gray-800/50 bg-gray-900/50 space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Crash-safe snapshot"}),s.jsxs("p",{className:"text-sm text-gray-300",children:[A&&s.jsxs("span",{className:"inline-flex items-center gap-1 text-gray-400",children:[s.jsx(St,{className:"h-3.5 w-3.5 animate-spin"}),"Checking…"]}),!A&&y&&s.jsxs("span",{children:[y.tabCount," tab",y.tabCount===1?"":"s"," saved"," ",Ys(y.updatedAt,{addSuffix:!0})]}),!A&&!y&&s.jsx("span",{children:"No snapshot captured yet."})]})]}),s.jsxs("button",{onClick:ne,disabled:R||A||!y,className:`inline-flex items-center gap-2 rounded-lg border px-3 py-1.5 text-xs font-medium transition-colors ${R||A||!y?"border-gray-700 text-gray-500 cursor-not-allowed":"border-blue-500/40 bg-blue-500/10 text-blue-200 hover:border-blue-500/60"}`,children:[R?s.jsx(St,{className:"h-3.5 w-3.5 animate-spin"}):s.jsx(Fs,{className:"h-3.5 w-3.5"}),"Restore"]})]}),L&&s.jsx("p",{className:"text-xs text-blue-300",children:L}),s.jsx("p",{className:"text-xs text-gray-500",children:"Each session keeps cookies, storage, and login state isolated. Autosave runs every few seconds."})]})]})})]})}const tt=[{key:"allowDownloads",label:"Downloads",icon:Ar,description:"File downloads to local storage"},{key:"allowPrivateWindows",label:"Private windows",icon:Zs,description:"Open dedicated private windows"},{key:"allowGhostTabs",label:"Ghost tabs",icon:Qs,description:"Create ephemeral ghost tabs"},{key:"allowScreenshots",label:"Screenshots",icon:Pr,description:"Capture browser screenshots"},{key:"allowClipping",label:"Clip text",icon:fa,description:"Use web clipper to capture highlights"}],Ht={work:sa,personal:Xe,default:Mr};function qn(e){return e.kind&&Ht[e.kind]?Ht[e.kind]:Ht.default}function Ea(e){if(!e)return"Unknown policy";const t=tt.filter(({key:n})=>!e[n]);return t.length===0?"All capabilities enabled":t.length===tt.length?"Strict mode: most features disabled":`Restricted: ${t.map(n=>n.label.toLowerCase()).join(", ")}`}function ja(e){return[...e].sort((t,n)=>{const r=+!!t.system,o=+!!n.system;if(r!==o)return o-r;const a=c=>{switch(c){case"work":return 0;case"personal":return 1;case"default":return 2;default:return 3}},l=a(t.kind)-a(n.kind);return l!==0?l:t.name.localeCompare(n.name)})}function Zn(e){if(e.color)return e.color;switch(e.kind){case"work":return"#4f46e5";case"personal":return"#f97316";default:return"#3b82f6"}}function Ra({compact:e=!1}){const{profiles:t,activeProfileId:n,policies:r,loading:o,setActiveProfile:a,lastPolicyBlock:l,markPolicyMessageRead:c}=zn(C=>({profiles:C.profiles,activeProfileId:C.activeProfileId,policies:C.policies,loading:C.loading,setActiveProfile:C.setActiveProfile,lastPolicyBlock:C.lastPolicyBlock,markPolicyMessageRead:C.markPolicyMessageRead})),[p,d]=i.useState(!1),[u,f]=i.useState(!1),[m,x]=i.useState(""),[v,h]=i.useState(null);i.useEffect(()=>{qs()},[]),i.useEffect(()=>{!p&&u&&(f(!1),x(""))},[p,u]);const y=i.useMemo(()=>t.find(C=>C.id===n)??t[0],[t,n]),S=i.useMemo(()=>ja(t),[t]),A=async C=>{if(C===n){d(!1);return}try{h(C),await a(C),d(!1)}catch(O){console.error("Failed to switch profile",O)}finally{h(null)}},k=async()=>{const C=m.trim();if(C)try{await U.profiles.create({name:C}),await zn.getState().loadProfiles(!0),f(!1),x("")}catch(O){console.error("Failed to create profile",O)}},R=!y||y.id==="default"||y.name.toLowerCase()==="default",P=!e&&!R,L=P?"gap-2 px-3":"gap-1.5 px-2";return s.jsxs("div",{className:"relative",children:[s.jsxs(re.button,{onClick:()=>d(C=>!C),whileHover:{scale:1.03},whileTap:{scale:.97},className:`flex items-center ${L} py-1.5 rounded-lg bg-gray-800/60 hover:bg-gray-800/80 border border-gray-700/50 text-gray-300 hover:text-gray-100 transition-all`,title:y?`${y.name} profile`:"Profiles",children:[(()=>{const C=y?qn(y):Mr;return s.jsx(C,{size:16})})(),P&&s.jsx("span",{className:"text-sm font-medium",children:y?y.name:"Profiles"}),!R&&y&&s.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full border border-gray-900/40",style:{backgroundColor:Zn(y)}}),o&&s.jsx(St,{size:14,className:"animate-spin text-gray-400"})]}),s.jsx(Oe,{children:p&&s.jsxs(re.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:4},className:"absolute right-0 mt-2 w-72 bg-gray-900/95 backdrop-blur-xl border border-gray-800/60 rounded-xl shadow-2xl z-50 overflow-hidden",children:[s.jsxs("div",{className:"p-3 border-b border-gray-800/60 flex items-center justify-between",children:[s.jsx("span",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Profiles"}),s.jsx("button",{onClick:()=>f(C=>!C),className:"p-1.5 rounded-md hover:bg-gray-800/60 text-gray-400 hover:text-gray-100 transition-colors",title:"Create new profile",children:s.jsx(It,{size:14})})]}),u&&s.jsxs("div",{className:"px-3 pb-3 border-b border-gray-800/60 space-y-2",children:[s.jsx("input",{value:m,onChange:C=>x(C.target.value),placeholder:"Profile name",className:"w-full px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 text-sm text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0,onKeyDown:C=>{C.key==="Enter"?k():C.key==="Escape"&&(f(!1),x(""))}}),s.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[s.jsx("button",{onClick:()=>{f(!1),x("")},className:"text-xs text-gray-400 hover:text-gray-200",children:"Cancel"}),s.jsx("button",{onClick:k,className:"text-xs font-medium px-3 py-1.5 rounded-lg bg-blue-600 hover:bg-blue-500 text-white",children:"Create"})]})]}),s.jsxs("div",{className:"max-h-80 overflow-y-auto divide-y divide-gray-800/50",children:[S.map(C=>{const O=qn(C),I=C.id===n,G=r[C.id],F=G?tt.filter(({key:q})=>!G[q]):[];return s.jsxs("button",{onClick:()=>A(C.id),className:`w-full text-left px-3 py-2 transition-colors ${I?"bg-blue-600/15 border-l-2 border-blue-500/60":"hover:bg-gray-800/60 border-l-2 border-transparent"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-200",children:[s.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full",style:{backgroundColor:Zn(C)}}),s.jsx(O,{size:16,className:"text-gray-300"}),s.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:C.name}),I&&s.jsx(pn,{size:14,className:"text-blue-400"}),v===C.id&&s.jsx(St,{size:14,className:"animate-spin text-gray-400"})]}),s.jsx("div",{className:"mt-1 text-xs text-gray-500 line-clamp-2",children:C.description||Ea(G)}),s.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[tt.map(({key:q,label:Y,icon:V})=>{const ne=G?G[q]:!0;return s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-md text-[11px] border ${ne?"border-emerald-500/40 text-emerald-200 bg-emerald-500/10":"border-rose-500/40 text-rose-200 bg-rose-500/10 line-through decoration-rose-300/70"}`,title:tt.find(K=>K.key===q)?.description,children:[s.jsx(V,{size:11}),Y]},`${C.id}-${q}`)}),F.length===0&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-md text-[11px] border border-emerald-400/40 text-emerald-200 bg-emerald-500/10",children:[s.jsx(we,{size:11}),"Compliant"]})]})]},C.id)}),S.length===0&&s.jsx("div",{className:"px-3 py-4 text-xs text-gray-500 text-center",children:"No profiles yet. Create one to get started."})]}),l&&s.jsxs("div",{className:"px-3 py-2 border-t border-gray-800/60 bg-amber-500/10 text-xs text-amber-200 flex items-start gap-2",children:[s.jsx(we,{size:12,className:"mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-amber-100",children:"Action blocked by policy"}),s.jsxs("div",{className:"mt-1 text-amber-200/80",children:[l.action.replace("-"," ")," is disabled for this profile."]}),s.jsx("button",{onClick:c,className:"mt-2 text-[11px] text-amber-200 hover:text-amber-100 underline",children:"Dismiss"})]})]})]})})]})}const Aa=[{key:"media",label:"Camera & microphone",description:"Allow access to audio / video input devices."},{key:"display-capture",label:"Screen capture",description:"Enable screen or window sharing requests."},{key:"notifications",label:"Desktop notifications",description:"Permit this container to show system notifications."},{key:"fullscreen",label:"Fullscreen & PIP",description:"Allow fullscreen transitions and picture-in-picture."}];function Pa({compact:e=!1}){const{containers:t,activeContainerId:n,setContainers:r,setActiveContainer:o}=Nr(),{activeId:a,tabs:l}=_e(E=>({activeId:E.activeId,tabs:E.tabs})),[c,p]=i.useState(!1),[d,u]=i.useState(!1),[f,m]=i.useState(""),[x,v]=i.useState("#22c55e"),[h,y]=i.useState({}),[S,A]=i.useState({}),k=i.useCallback(async E=>{try{const D=await U.containers.getPermissions(E);return Array.isArray(D?.permissions)?D.permissions:[]}catch(D){return console.error("Failed to fetch container permissions:",D),[]}},[]),R=i.useCallback(async E=>{const D=await k(E);y(H=>({...H,[E]:D}))},[k]),P=i.useCallback(async E=>{try{const D=await U.containers.getSitePermissions(E);Array.isArray(D)&&A(H=>({...H,[E]:D}))}catch(D){console.error("Failed to load site permissions:",D)}},[]),L=i.useCallback(async()=>{try{const[E,D]=await Promise.all([U.containers.list(),U.containers.getActive()]);if(Array.isArray(E)){const H=E;r(H);const Q=await Promise.all(H.map(te=>k(te.id))),ie={};H.forEach((te,ae)=>{ie[te.id]=Q[ae]??[]}),y(ie)}D&&(o(D),await R(D.id),await P(D.id))}catch(E){console.error("Failed to load containers:",E)}},[k,R,P,o,r]);i.useEffect(()=>{L()},[L]),i.useEffect(()=>{const E=Er.on("containers:sitePermissions",D=>{D?.containerId&&A(H=>({...H,[D.containerId]:[...H[D.containerId]?.filter(Q=>Q.permission!==D.permission)??[],{permission:D.permission,origins:D.origins}]}))});return()=>{E()}},[]);const C=async E=>{try{const D=await U.containers.setActive(E.id);o(D||E),await R(E.id),await P(E.id),p(!1)}catch(D){console.error("Failed to set active container:",D)}},O=async()=>{if(f.trim())try{const E=await U.containers.create({name:f.trim(),color:x});E&&(await L(),await R(E.id),await P(E.id)),m(""),u(!1),p(!1)}catch(E){console.error("Failed to create container:",E)}},I=t.find(E=>E.id===n),G=i.useMemo(()=>l.find(E=>E.id===a),[l,a]),F=i.useMemo(()=>{if(!G?.url)return null;try{const E=new URL(G.url);return E.protocol.startsWith("http")?`${E.protocol}//${E.host}`:null}catch{return null}},[G?.url]),q=i.useMemo(()=>F?F.replace(/^https?:\/\//,""):null,[F]),Y=I?h[I.id]??[]:[],V=I?S[I.id]??[]:[],ne=E=>V.find(D=>D.permission===E)?.origins??[],K=async E=>{if(!I)return;const D=Y.includes(E);try{const H=await U.containers.setPermission(I.id,E,!D);y(Q=>({...Q,[I.id]:Array.isArray(H?.permissions)?H.permissions:[]})),await P(I.id)}catch(H){console.error("Failed to update container permission:",H)}},J=async(E,D)=>{if(I)try{const H=await U.containers.revokeSitePermission(I.id,E,D);Array.isArray(H)&&A(Q=>({...Q,[I.id]:H}))}catch(H){console.error("Failed to revoke site permission:",H)}},_=async E=>{if(!(!I||!F))try{const D=await U.containers.allowSitePermission(I.id,E,F);Array.isArray(D)&&A(H=>({...H,[I.id]:D}))}catch(D){console.error("Failed to allow site permission:",D)}},b=!I||I.id==="default"||I.name.toLowerCase()==="default",z=!e&&!b,Z=z?"gap-2 px-3":"gap-1.5 px-2";return s.jsxs("div",{className:"relative",children:[s.jsxs(re.button,{onClick:()=>p(!c),whileHover:{scale:1.05},whileTap:{scale:.95},className:`relative flex items-center ${Z} py-1.5 rounded-lg bg-gray-800/60 hover:bg-gray-800/80 border border-gray-700/50 text-gray-300 hover:text-gray-100 transition-all`,title:"Container (isolated storage)",children:[s.jsx(Js,{size:16}),z&&s.jsx("span",{className:"text-sm font-medium",children:I?.name||"Default"}),!b&&I?.color&&s.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-700",style:{backgroundColor:I.color}})]}),s.jsx(Oe,{children:c&&s.jsxs(re.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute right-0 mt-2 w-72 bg-gray-900/95 backdrop-blur-xl border border-gray-800/50 rounded-lg shadow-xl overflow-hidden z-40",children:[s.jsxs("div",{className:"p-3 border-b border-gray-800/50 flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-200",children:"Containers"}),s.jsx("button",{onClick:()=>{u(!0),m(""),v("#22c55e")},className:"p-1.5 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-blue-400 transition-colors",children:s.jsx(It,{size:16})})]}),s.jsxs("div",{className:"max-h-80 overflow-y-auto",children:[d&&s.jsxs("div",{className:"p-3 border-b border-gray-800/50",children:[s.jsx("input",{type:"text",value:f,onChange:E=>m(E.target.value),placeholder:"Container name",autoFocus:!0,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-sm text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx("label",{className:"text-xs text-gray-400",children:"Color"}),s.jsx("input",{type:"color",value:x,onChange:E=>v(E.target.value),className:"h-7 w-16 bg-transparent border border-gray-700 rounded"})]}),s.jsxs("div",{className:"flex gap-2 mt-3",children:[s.jsx("button",{onClick:O,className:"flex-1 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm font-medium text-white",children:"Create"}),s.jsx("button",{onClick:()=>{u(!1),m("")},className:"px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm text-gray-300",children:"Cancel"})]})]}),t.map(E=>{const D=E.id===n;return s.jsxs("button",{onClick:()=>C(E),className:`w-full flex items-center gap-3 px-3 py-2 text-left border-b border-gray-800/50 transition-colors ${D?"bg-blue-600/20 border-blue-500/30":"hover:bg-gray-800/50"}`,children:[s.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-700",style:{backgroundColor:E.color}}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium text-gray-200 truncate",children:E.name}),s.jsx("div",{className:"text-xs text-gray-500 truncate",children:E.scope?`${E.scope.charAt(0).toUpperCase()}${E.scope.slice(1)} scope`:"Session scope"})]}),D&&s.jsx("span",{className:"text-xs text-blue-400",children:"Active"})]},E.id)}),t.length===0&&!d&&s.jsx("div",{className:"p-3 text-xs text-gray-500",children:"No containers yet"})]}),I&&s.jsxs("div",{className:"border-t border-gray-800/50 bg-gray-900/60 p-3",children:[s.jsxs("span",{className:"text-xs uppercase tracking-wide text-gray-500",children:["Permissions for ",I.name]}),s.jsx("div",{className:"mt-3 space-y-3",children:Aa.map(E=>{const D=Y.includes(E.key),H=ne(E.key),Q=F?H.includes(F):!1,ie=!F||!Q&&!D,te=q||F||"this site";return s.jsxs("label",{className:"flex items-start gap-3 rounded-lg border border-transparent px-2 py-2 hover:border-gray-700/60 hover:bg-gray-800/40 transition-colors cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 rounded border-gray-600 bg-gray-800 text-blue-500 focus:ring-blue-500",checked:D,onChange:()=>K(E.key)}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm font-medium text-gray-200",children:E.label}),s.jsx("p",{className:"text-xs text-gray-500 leading-snug",children:E.description}),F&&s.jsx("p",{className:`text-[11px] ${Q?"text-emerald-400":"text-gray-500"}`,children:Q?`Allowed for ${te}`:`Not allowed for ${te}`}),!D&&s.jsx("p",{className:"text-[11px] text-amber-400",children:"Container-level access disabled"})]}),s.jsx("button",{type:"button",onClick:ae=>{ae.preventDefault(),ae.stopPropagation(),F&&(Q?J(E.key,F):_(E.key))},disabled:ie,className:`rounded-full border px-2 py-1 text-[11px] font-medium transition-colors ${ie?"cursor-not-allowed border-gray-800 bg-gray-900/60 text-gray-500":Q?"border-amber-400/60 bg-amber-500/10 text-amber-200 hover:bg-amber-500/20":"border-blue-400/60 bg-blue-500/10 text-blue-100 hover:bg-blue-500/20"}`,children:F?Q?"Revoke site":"Allow site":"Open a site"})]}),H.length>0&&s.jsxs("div",{className:"mt-2 space-y-1",children:[s.jsx("span",{className:"text-[11px] uppercase tracking-wide text-gray-500",children:"Allowed sites"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:H.map(ae=>{const g=F&&ae===F;return s.jsxs("span",{className:`group inline-flex items-center gap-2 rounded-full border px-2 py-0.5 text-[11px] transition-colors ${g?"border-blue-400 bg-blue-500/20 text-blue-100":"border-gray-700 bg-gray-800/60 text-gray-300"}`,title:ae,children:[s.jsx("span",{className:"max-w-[140px] truncate",children:ae.replace(/^https?:\/\//,"")}),s.jsx("button",{type:"button",onClick:N=>{N.preventDefault(),N.stopPropagation(),J(E.key,ae)},className:`rounded-full bg-transparent p-0.5 transition-colors ${g?"text-blue-200 hover:bg-blue-500/20":"text-gray-500 hover:bg-gray-700 hover:text-gray-200"}`,"aria-label":`Remove ${ae} from ${E.label}`,children:"×"})]},`${E.key}-${ae}`)})})]})]})]},E.key)})})]}),s.jsx("div",{className:"p-3 border-t border-gray-800/50 bg-gray-900/50",children:s.jsx("p",{className:"text-xs text-gray-500",children:"Containers isolate cookies, storage, and login state per tab."})})]})})]})}const _r="omnibrowser:theme-preference",Tt=typeof window<"u",Ot=()=>!Tt||typeof window.matchMedia!="function"||window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",hn=e=>{if(typeof document>"u")return;const t=e==="system"?Ot():e;document.documentElement.dataset.theme=t,document.documentElement.setAttribute("data-theme-resolved",t)},Nt=(()=>{if(!Tt)return"system";const e=window.localStorage.getItem(_r);return e==="light"||e==="dark"||e==="system"?e:"system"})(),Ma=Nt==="system"?Ot():Nt;typeof document<"u"&&hn(Nt);const Ve=Ms((e,t)=>({preference:Nt,resolved:Ma,setPreference:n=>{Tt&&window.localStorage.setItem(_r,n),hn(n);const r=n==="system"?Ot():n;e({preference:n,resolved:r})},cyclePreference:()=>{const n=["system","light","dark"],r=t().preference,o=n[(n.indexOf(r)+1)%n.length];t().setPreference(o)}}));if(Tt&&typeof window.matchMedia=="function"){const e=window.matchMedia("(prefers-color-scheme: dark)"),t=()=>{const{preference:n}=Ve.getState();if(n==="system"){hn("system");const r=Ot();Ve.setState({resolved:r})}};try{e.addEventListener("change",t)}catch{e.addListener(t)}}const Ia=[{id:"system",label:"Auto",icon:ta},{id:"light",label:"Light",icon:ea},{id:"dark",label:"Dark",icon:la}];function Ta(){const e=Ve(o=>o.preference),t=Ve(o=>o.resolved),n=Ve(o=>o.setPreference),r=Ve(o=>o.cyclePreference);return s.jsx(va,{id:"theme-switcher",children:s.jsx("div",{className:"no-drag button-surface px-2 py-1.5 rounded-lg flex items-center gap-1 text-[11px]",role:"radiogroup","aria-label":"Theme preference",title:`Theme: ${e==="system"?`Auto (${t})`:e}`,onDoubleClick:r,children:Ia.map(o=>{const a=o.icon,l=e===o.id||e==="system"&&o.id===t;return s.jsxs(re.button,{type:"button",onClick:()=>n(o.id),whileHover:{scale:1.05},whileTap:{scale:.95},className:`relative flex items-center gap-1 px-2.5 py-1 rounded-md transition-all duration-150 text-xs font-medium focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 focus-visible:ring-offset-transparent ${l?"theme-pill-active":"theme-pill"}`,role:"radio","aria-checked":l,children:[s.jsx(a,{size:13}),s.jsx("span",{className:"hidden sm:inline",children:o.label}),l&&s.jsx(re.span,{layoutId:"theme-pill-indicator",className:"absolute inset-0 -z-10 rounded-md bg-blue-500/15 border border-blue-500/40",transition:{type:"spring",stiffness:400,damping:40}})]},o.id)})})})}const Oa=15e3;function Da(e){switch(e){case"high":return"bg-red-500/80 text-white";case"moderate":return"bg-amber-500/80 text-white";default:return"bg-emerald-500/80 text-white"}}function _a(e){switch(e){case"high":return"High risk";case"moderate":return"Watch";default:return"Clean"}}function La(){const e=_e(d=>d.activeId),[t,n]=i.useState(null),[r,o]=i.useState(!1),a=i.useCallback(async()=>{if(!e){n(null);return}o(!0);try{const d=await U.privacy.sentinel.audit(e);n(d??null)}catch(d){console.warn("[PrivacySentinel] audit failed",d)}finally{o(!1)}},[e]);i.useEffect(()=>{a()},[a]),i.useEffect(()=>{if(!e)return;const d=window.setInterval(a,Oa);return()=>window.clearInterval(d)},[e,a]);const l=i.useMemo(()=>r?"Scanning…":t?_a(t.grade):"No data",[t,r]),c=i.useMemo(()=>{if(!t)return"Privacy Sentinel has no data for this tab yet.";const d=[t.message];return t.trackers.length>0&&d.push(`Trackers: ${t.trackers.slice(0,3).map(u=>u.host).join(", ")}`),t.thirdPartyHosts.length>0&&d.push(`3rd-party: ${t.thirdPartyHosts.slice(0,3).map(u=>u.host).join(", ")}`),d.push(...t.suggestions),d.join(`
`)},[t]),p=t?Da(t.grade):"bg-slate-500/70 text-white";return s.jsxs("button",{type:"button",className:`no-drag flex items-center gap-2 rounded-full px-3 py-1 text-xs font-medium transition-colors ${p}`,title:c,onClick:a,children:[s.jsx("span",{className:"inline-flex h-2 w-2 items-center justify-center",children:s.jsx("span",{className:"h-2 w-2 rounded-full bg-current"})}),s.jsx("span",{children:l})]})}function Fa(){const{activeId:e}=_e(),[t,n]=i.useState(!1),[r,o]=i.useState(null),[a,l]=i.useState({ads:!0,cookies:"3p",httpsOnly:!1,fingerprinting:!0,scripts:"all",webrtc:!0}),[c,p]=i.useState(0);he("shields:counters",u=>{(!u.tabId||u.tabId===""||u.tabId===e)&&(o(u),p((u.ads||0)+(u.trackers||0)+(u.cookiesBlocked||0)))},[e]),i.useEffect(()=>{},[e]);const d=async(u,f)=>{const m={...a,[u]:f};l(m)};return s.jsxs("div",{className:"relative",children:[s.jsxs(re.button,{"data-shields-button":!0,onClick:()=>n(!t),whileHover:{scale:1.05},whileTap:{scale:.95},className:`
          relative flex items-center gap-2 px-3 py-1.5 rounded-lg
          bg-gray-800/60 hover:bg-gray-800/80 border border-gray-700/50
          text-gray-300 hover:text-gray-100 transition-colors
        `,children:[s.jsx(we,{size:16,className:c>0?"text-blue-400":"text-gray-500"}),c>0&&s.jsx("span",{className:"px-1.5 py-0.5 bg-blue-500/20 text-blue-400 text-xs font-medium rounded",children:c}),s.jsx(mn,{size:14,className:`transition-transform ${t?"rotate-180":""}`})]}),s.jsx(Oe,{children:t&&s.jsxs(s.Fragment,{children:[s.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40",onClick:()=>n(!1)}),s.jsxs(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full right-0 mt-2 w-80 bg-gray-900/95 backdrop-blur-xl border border-gray-700/50 rounded-lg shadow-2xl z-50",children:[s.jsxs("div",{className:"p-4 border-b border-gray-800/50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-200",children:"Shields"}),r&&s.jsxs("div",{className:"text-xs text-gray-400",children:[r.ads," ads · ",r.trackers," trackers · ",r.httpsUpgrades," upgraded"]})]}),r&&s.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[s.jsxs("div",{className:"bg-gray-800/40 rounded p-2 text-center",children:[s.jsx("div",{className:"text-lg font-bold text-red-400",children:r.ads}),s.jsx("div",{className:"text-xs text-gray-500",children:"Ads Blocked"})]}),s.jsxs("div",{className:"bg-gray-800/40 rounded p-2 text-center",children:[s.jsx("div",{className:"text-lg font-bold text-orange-400",children:r.trackers}),s.jsx("div",{className:"text-xs text-gray-500",children:"Trackers"})]}),s.jsxs("div",{className:"bg-gray-800/40 rounded p-2 text-center",children:[s.jsx("div",{className:"text-lg font-bold text-green-400",children:r.httpsUpgrades}),s.jsx("div",{className:"text-xs text-gray-500",children:"HTTPS"})]})]})]}),s.jsxs("div",{className:"p-4 space-y-3",children:[[{key:"ads",label:"Block ads & trackers",icon:we},{key:"fingerprinting",label:"Anti-fingerprinting",icon:we},{key:"webrtc",label:"Block WebRTC leaks",icon:we}].map(({key:u,label:f})=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-300",children:f}),s.jsx("button",{onClick:()=>d(u,!a[u]),className:`
                        relative w-11 h-6 rounded-full transition-colors
                        ${a[u]?"bg-blue-600":"bg-gray-700"}
                      `,children:s.jsx(re.div,{className:"absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow-sm",animate:{x:a[u]?20:0},transition:{type:"spring",stiffness:500,damping:30}})})]},u)),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-300",children:"3rd-party cookies"}),s.jsxs("select",{value:a.cookies,onChange:u=>d("cookies",u.target.value),className:"bg-gray-800 border border-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:[s.jsx("option",{value:"all",children:"Allow"}),s.jsx("option",{value:"3p",children:"Block 3P"}),s.jsx("option",{value:"none",children:"Block All"})]})]})]})]})]})})]})}function $a(){const[e,t]=i.useState(!1),[n,r]=i.useState({doh:{enabled:!1,provider:"cloudflare"}});he("net:status",l=>{r(l)},[]),i.useEffect(()=>{const l=async()=>{if(!window.ipc||typeof window.ipc.invoke!="function"){setTimeout(l,500);return}try{const c=await U.dns.status();r(p=>({...p,doh:c}))}catch{}};setTimeout(l,300)},[]);const o=async()=>{try{await U.tor.newIdentity()}catch(l){console.error("Failed to get new Tor identity:",l)}},a=n.tor?.circuitEstablished||n.vpn?.connected||n.proxy?.enabled;return s.jsxs("div",{className:"relative",children:[s.jsxs(re.button,{"data-network-button":!0,onClick:()=>t(!e),whileHover:{scale:1.05},whileTap:{scale:.95},className:`
          relative flex items-center gap-2 px-3 py-1.5 rounded-lg
          bg-gray-800/60 hover:bg-gray-800/80 border border-gray-700/50
          text-gray-300 hover:text-gray-100 transition-colors
        `,children:[s.jsx(Ue,{size:16,className:a?"text-green-400":"text-gray-500"}),a&&s.jsx(re.div,{className:"w-2 h-2 bg-green-400 rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0}}),s.jsx(mn,{size:14,className:`transition-transform ${e?"rotate-180":""}`})]}),s.jsx(Oe,{children:e&&s.jsxs(s.Fragment,{children:[s.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40",onClick:()=>t(!1)}),s.jsx(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full right-0 mt-2 w-72 bg-gray-900/95 backdrop-blur-xl border border-gray-700/50 rounded-lg shadow-2xl z-50",children:s.jsxs("div",{className:"p-4 space-y-4",children:[n.tor&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ue,{size:16,className:"text-purple-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Tor"})]}),n.tor.circuitEstablished?s.jsx(ft,{size:16,className:"text-green-400"}):s.jsx(Ut,{size:16,className:"text-red-400"})]}),n.tor.enabled&&n.tor.circuitEstablished&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-xs text-gray-400",children:["Identity: ",n.tor.identity.slice(0,8),"..."]}),s.jsxs("button",{onClick:o,className:"w-full flex items-center justify-center gap-2 px-3 py-1.5 bg-purple-600/20 hover:bg-purple-600/30 border border-purple-500/30 rounded text-xs text-purple-300 transition-colors",children:[s.jsx(vt,{size:14}),"New Identity"]})]})]}),n.vpn&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ue,{size:16,className:"text-blue-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-200",children:"VPN"})]}),n.vpn.connected?s.jsx(ft,{size:16,className:"text-green-400"}):s.jsx(Ut,{size:16,className:"text-gray-500"})]}),n.vpn.provider&&s.jsxs("div",{className:"text-xs text-gray-400",children:["Provider: ",n.vpn.provider]})]}),n.proxy&&n.proxy.enabled&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ue,{size:16,className:"text-cyan-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Proxy"})]}),s.jsx(ft,{size:16,className:"text-green-400"})]}),n.proxy.host&&s.jsxs("div",{className:"text-xs text-gray-400",children:[n.proxy.type.toUpperCase(),": ",n.proxy.host]})]}),n.doh&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ue,{size:16,className:"text-green-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-200",children:"DNS-over-HTTPS"})]}),n.doh.enabled?s.jsx(ft,{size:16,className:"text-green-400"}):s.jsx(Ut,{size:16,className:"text-gray-500"})]}),n.doh.enabled&&s.jsxs("div",{className:"text-xs text-gray-400",children:["Provider: ",n.doh.provider]})]})]})})]})})]})}function ee(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e?.(o),n===!1||!o.defaultPrevented)return t?.(o)}}function Qn(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Dt(...e){return t=>{let n=!1;const r=e.map(o=>{const a=Qn(o,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let o=0;o<r.length;o++){const a=r[o];typeof a=="function"?a():Qn(e[o],null)}}}}function fe(...e){return i.useCallback(Dt(...e),e)}function at(e,t=[]){let n=[];function r(a,l){const c=i.createContext(l),p=n.length;n=[...n,l];const d=f=>{const{scope:m,children:x,...v}=f,h=m?.[e]?.[p]||c,y=i.useMemo(()=>v,Object.values(v));return s.jsx(h.Provider,{value:y,children:x})};d.displayName=a+"Provider";function u(f,m){const x=m?.[e]?.[p]||c,v=i.useContext(x);if(v)return v;if(l!==void 0)return l;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[d,u]}const o=()=>{const a=n.map(l=>i.createContext(l));return function(c){const p=c?.[e]||a;return i.useMemo(()=>({[`__scope${e}`]:{...c,[e]:p}}),[c,p])}};return o.scopeName=e,[r,za(o,...t)]}function za(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const l=r.reduce((c,{useScope:p,scopeName:d})=>{const f=p(a)[`__scope${d}`];return{...c,...f}},{});return i.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}var Me=globalThis?.document?i.useLayoutEffect:()=>{},Ba=jr[" useInsertionEffect ".trim().toString()]||Me;function Lr({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[o,a,l]=Wa({defaultProp:t,onChange:n}),c=e!==void 0,p=c?e:o;{const u=i.useRef(e!==void 0);i.useEffect(()=>{const f=u.current;f!==c&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=c},[c,r])}const d=i.useCallback(u=>{if(c){const f=Ga(u)?u(e):u;f!==e&&l.current?.(f)}else a(u)},[c,e,a,l]);return[p,d]}function Wa({defaultProp:e,onChange:t}){const[n,r]=i.useState(e),o=i.useRef(n),a=i.useRef(t);return Ba(()=>{a.current=t},[t]),i.useEffect(()=>{o.current!==n&&(a.current?.(n),o.current=n)},[n,o]),[n,r,a]}function Ga(e){return typeof e=="function"}function kt(e){const t=Ka(e),n=i.forwardRef((r,o)=>{const{children:a,...l}=r,c=i.Children.toArray(a),p=c.find(Ha);if(p){const d=p.props.children,u=c.map(f=>f===p?i.Children.count(d)>1?i.Children.only(null):i.isValidElement(d)?d.props.children:null:f);return s.jsx(t,{...l,ref:o,children:i.isValidElement(d)?i.cloneElement(d,void 0,u):null})}return s.jsx(t,{...l,ref:o,children:a})});return n.displayName=`${e}.Slot`,n}function Ka(e){const t=i.forwardRef((n,r)=>{const{children:o,...a}=n;if(i.isValidElement(o)){const l=Xa(o),c=Va(a,o.props);return o.type!==i.Fragment&&(c.ref=r?Dt(r,l):l),i.cloneElement(o,c)}return i.Children.count(o)>1?i.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ua=Symbol("radix.slottable");function Ha(e){return i.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ua}function Va(e,t){const n={...t};for(const r in t){const o=e[r],a=t[r];/^on[A-Z]/.test(r)?o&&a?n[r]=(...c)=>{const p=a(...c);return o(...c),p}:o&&(n[r]=o):r==="style"?n[r]={...o,...a}:r==="className"&&(n[r]=[o,a].filter(Boolean).join(" "))}return{...e,...n}}function Xa(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Ya=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ue=Ya.reduce((e,t)=>{const n=kt(`Primitive.${t}`),r=i.forwardRef((o,a)=>{const{asChild:l,...c}=o,p=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(p,{...c,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Fr(e,t){e&&Rr.flushSync(()=>e.dispatchEvent(t))}function $r(e){const t=e+"CollectionProvider",[n,r]=at(t),[o,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),l=h=>{const{scope:y,children:S}=h,A=De.useRef(null),k=De.useRef(new Map).current;return s.jsx(o,{scope:y,itemMap:k,collectionRef:A,children:S})};l.displayName=t;const c=e+"CollectionSlot",p=kt(c),d=De.forwardRef((h,y)=>{const{scope:S,children:A}=h,k=a(c,S),R=fe(y,k.collectionRef);return s.jsx(p,{ref:R,children:A})});d.displayName=c;const u=e+"CollectionItemSlot",f="data-radix-collection-item",m=kt(u),x=De.forwardRef((h,y)=>{const{scope:S,children:A,...k}=h,R=De.useRef(null),P=fe(y,R),L=a(u,S);return De.useEffect(()=>(L.itemMap.set(R,{ref:R,...k}),()=>void L.itemMap.delete(R))),s.jsx(m,{[f]:"",ref:P,children:A})});x.displayName=u;function v(h){const y=a(e+"CollectionConsumer",h);return De.useCallback(()=>{const A=y.collectionRef.current;if(!A)return[];const k=Array.from(A.querySelectorAll(`[${f}]`));return Array.from(y.itemMap.values()).sort((L,C)=>k.indexOf(L.ref.current)-k.indexOf(C.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:l,Slot:d,ItemSlot:x},v,r]}var qa=i.createContext(void 0);function zr(e){const t=i.useContext(qa);return e||t||"ltr"}function Ee(e){const t=i.useRef(e);return i.useEffect(()=>{t.current=e}),i.useMemo(()=>(...n)=>t.current?.(...n),[])}function Za(e,t=globalThis?.document){const n=Ee(e);i.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Qa="DismissableLayer",on="dismissableLayer.update",Ja="dismissableLayer.pointerDownOutside",ei="dismissableLayer.focusOutside",Jn,Br=i.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wr=i.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:l,onDismiss:c,...p}=e,d=i.useContext(Br),[u,f]=i.useState(null),m=u?.ownerDocument??globalThis?.document,[,x]=i.useState({}),v=fe(t,C=>f(C)),h=Array.from(d.layers),[y]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),S=h.indexOf(y),A=u?h.indexOf(u):-1,k=d.layersWithOutsidePointerEventsDisabled.size>0,R=A>=S,P=ri(C=>{const O=C.target,I=[...d.branches].some(G=>G.contains(O));!R||I||(o?.(C),l?.(C),C.defaultPrevented||c?.())},m),L=oi(C=>{const O=C.target;[...d.branches].some(G=>G.contains(O))||(a?.(C),l?.(C),C.defaultPrevented||c?.())},m);return Za(C=>{A===d.layers.size-1&&(r?.(C),!C.defaultPrevented&&c&&(C.preventDefault(),c()))},m),i.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Jn=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),er(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Jn)}},[u,m,n,d]),i.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),er())},[u,d]),i.useEffect(()=>{const C=()=>x({});return document.addEventListener(on,C),()=>document.removeEventListener(on,C)},[]),s.jsx(ue.div,{...p,ref:v,style:{pointerEvents:k?R?"auto":"none":void 0,...e.style},onFocusCapture:ee(e.onFocusCapture,L.onFocusCapture),onBlurCapture:ee(e.onBlurCapture,L.onBlurCapture),onPointerDownCapture:ee(e.onPointerDownCapture,P.onPointerDownCapture)})});Wr.displayName=Qa;var ti="DismissableLayerBranch",ni=i.forwardRef((e,t)=>{const n=i.useContext(Br),r=i.useRef(null),o=fe(t,r);return i.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),s.jsx(ue.div,{...e,ref:o})});ni.displayName=ti;function ri(e,t=globalThis?.document){const n=Ee(e),r=i.useRef(!1),o=i.useRef(()=>{});return i.useEffect(()=>{const a=c=>{if(c.target&&!r.current){let p=function(){Gr(Ja,n,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=p,t.addEventListener("click",o.current,{once:!0})):p()}else t.removeEventListener("click",o.current);r.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",a),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function oi(e,t=globalThis?.document){const n=Ee(e),r=i.useRef(!1);return i.useEffect(()=>{const o=a=>{a.target&&!r.current&&Gr(ei,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function er(){const e=new CustomEvent(on);document.dispatchEvent(e)}function Gr(e,t,n,{discrete:r}){const o=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?Fr(o,a):o.dispatchEvent(a)}var Vt=0;function si(){i.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??tr()),document.body.insertAdjacentElement("beforeend",e[1]??tr()),Vt++,()=>{Vt===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Vt--}},[])}function tr(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Xt="focusScope.autoFocusOnMount",Yt="focusScope.autoFocusOnUnmount",nr={bubbles:!1,cancelable:!0},ai="FocusScope",Kr=i.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...l}=e,[c,p]=i.useState(null),d=Ee(o),u=Ee(a),f=i.useRef(null),m=fe(t,h=>p(h)),x=i.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;i.useEffect(()=>{if(r){let h=function(k){if(x.paused||!c)return;const R=k.target;c.contains(R)?f.current=R:Pe(f.current,{select:!0})},y=function(k){if(x.paused||!c)return;const R=k.relatedTarget;R!==null&&(c.contains(R)||Pe(f.current,{select:!0}))},S=function(k){if(document.activeElement===document.body)for(const P of k)P.removedNodes.length>0&&Pe(c)};document.addEventListener("focusin",h),document.addEventListener("focusout",y);const A=new MutationObserver(S);return c&&A.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",y),A.disconnect()}}},[r,c,x.paused]),i.useEffect(()=>{if(c){or.add(x);const h=document.activeElement;if(!c.contains(h)){const S=new CustomEvent(Xt,nr);c.addEventListener(Xt,d),c.dispatchEvent(S),S.defaultPrevented||(ii(fi(Ur(c)),{select:!0}),document.activeElement===h&&Pe(c))}return()=>{c.removeEventListener(Xt,d),setTimeout(()=>{const S=new CustomEvent(Yt,nr);c.addEventListener(Yt,u),c.dispatchEvent(S),S.defaultPrevented||Pe(h??document.body,{select:!0}),c.removeEventListener(Yt,u),or.remove(x)},0)}}},[c,d,u,x]);const v=i.useCallback(h=>{if(!n&&!r||x.paused)return;const y=h.key==="Tab"&&!h.altKey&&!h.ctrlKey&&!h.metaKey,S=document.activeElement;if(y&&S){const A=h.currentTarget,[k,R]=ci(A);k&&R?!h.shiftKey&&S===R?(h.preventDefault(),n&&Pe(k,{select:!0})):h.shiftKey&&S===k&&(h.preventDefault(),n&&Pe(R,{select:!0})):S===A&&h.preventDefault()}},[n,r,x.paused]);return s.jsx(ue.div,{tabIndex:-1,...l,ref:m,onKeyDown:v})});Kr.displayName=ai;function ii(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Pe(r,{select:t}),document.activeElement!==n)return}function ci(e){const t=Ur(e),n=rr(t,e),r=rr(t.reverse(),e);return[n,r]}function Ur(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function rr(e,t){for(const n of e)if(!li(n,{upTo:t}))return n}function li(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ui(e){return e instanceof HTMLInputElement&&"select"in e}function Pe(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&ui(e)&&t&&e.select()}}var or=di();function di(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=sr(e,t),e.unshift(t)},remove(t){e=sr(e,t),e[0]?.resume()}}}function sr(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function fi(e){return e.filter(t=>t.tagName!=="A")}var pi=jr[" useId ".trim().toString()]||(()=>{}),mi=0;function sn(e){const[t,n]=i.useState(pi());return Me(()=>{n(r=>r??String(mi++))},[e]),e||(t?`radix-${t}`:"")}const hi=["top","right","bottom","left"],Ie=Math.min,pe=Math.max,Et=Math.round,pt=Math.floor,Se=e=>({x:e,y:e}),gi={left:"right",right:"left",bottom:"top",top:"bottom"},xi={start:"end",end:"start"};function an(e,t,n){return pe(e,Ie(t,n))}function je(e,t){return typeof e=="function"?e(t):e}function Re(e){return e.split("-")[0]}function Qe(e){return e.split("-")[1]}function gn(e){return e==="x"?"y":"x"}function xn(e){return e==="y"?"height":"width"}const yi=new Set(["top","bottom"]);function Ce(e){return yi.has(Re(e))?"y":"x"}function yn(e){return gn(Ce(e))}function vi(e,t,n){n===void 0&&(n=!1);const r=Qe(e),o=yn(e),a=xn(o);let l=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(l=jt(l)),[l,jt(l)]}function bi(e){const t=jt(e);return[cn(e),t,cn(t)]}function cn(e){return e.replace(/start|end/g,t=>xi[t])}const ar=["left","right"],ir=["right","left"],wi=["top","bottom"],Ci=["bottom","top"];function Si(e,t,n){switch(e){case"top":case"bottom":return n?t?ir:ar:t?ar:ir;case"left":case"right":return t?wi:Ci;default:return[]}}function Ni(e,t,n,r){const o=Qe(e);let a=Si(Re(e),n==="start",r);return o&&(a=a.map(l=>l+"-"+o),t&&(a=a.concat(a.map(cn)))),a}function jt(e){return e.replace(/left|right|bottom|top/g,t=>gi[t])}function ki(e){return{top:0,right:0,bottom:0,left:0,...e}}function Hr(e){return typeof e!="number"?ki(e):{top:e,right:e,bottom:e,left:e}}function Rt(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function cr(e,t,n){let{reference:r,floating:o}=e;const a=Ce(t),l=yn(t),c=xn(l),p=Re(t),d=a==="y",u=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,m=r[c]/2-o[c]/2;let x;switch(p){case"top":x={x:u,y:r.y-o.height};break;case"bottom":x={x:u,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:f};break;case"left":x={x:r.x-o.width,y:f};break;default:x={x:r.x,y:r.y}}switch(Qe(t)){case"start":x[l]-=m*(n&&d?-1:1);break;case"end":x[l]+=m*(n&&d?-1:1);break}return x}const Ei=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:l}=n,c=a.filter(Boolean),p=await(l.isRTL==null?void 0:l.isRTL(t));let d=await l.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:f}=cr(d,r,p),m=r,x={},v=0;for(let h=0;h<c.length;h++){const{name:y,fn:S}=c[h],{x:A,y:k,data:R,reset:P}=await S({x:u,y:f,initialPlacement:r,placement:m,strategy:o,middlewareData:x,rects:d,platform:l,elements:{reference:e,floating:t}});u=A??u,f=k??f,x={...x,[y]:{...x[y],...R}},P&&v<=50&&(v++,typeof P=="object"&&(P.placement&&(m=P.placement),P.rects&&(d=P.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:o}):P.rects),{x:u,y:f}=cr(d,m,p)),h=-1)}return{x:u,y:f,placement:m,strategy:o,middlewareData:x}};async function nt(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:a,rects:l,elements:c,strategy:p}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:m=!1,padding:x=0}=je(t,e),v=Hr(x),y=c[m?f==="floating"?"reference":"floating":f],S=Rt(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(y)))==null||n?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:d,rootBoundary:u,strategy:p})),A=f==="floating"?{x:r,y:o,width:l.floating.width,height:l.floating.height}:l.reference,k=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),R=await(a.isElement==null?void 0:a.isElement(k))?await(a.getScale==null?void 0:a.getScale(k))||{x:1,y:1}:{x:1,y:1},P=Rt(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:A,offsetParent:k,strategy:p}):A);return{top:(S.top-P.top+v.top)/R.y,bottom:(P.bottom-S.bottom+v.bottom)/R.y,left:(S.left-P.left+v.left)/R.x,right:(P.right-S.right+v.right)/R.x}}const ji=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:a,platform:l,elements:c,middlewareData:p}=t,{element:d,padding:u=0}=je(e,t)||{};if(d==null)return{};const f=Hr(u),m={x:n,y:r},x=yn(o),v=xn(x),h=await l.getDimensions(d),y=x==="y",S=y?"top":"left",A=y?"bottom":"right",k=y?"clientHeight":"clientWidth",R=a.reference[v]+a.reference[x]-m[x]-a.floating[v],P=m[x]-a.reference[x],L=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let C=L?L[k]:0;(!C||!await(l.isElement==null?void 0:l.isElement(L)))&&(C=c.floating[k]||a.floating[v]);const O=R/2-P/2,I=C/2-h[v]/2-1,G=Ie(f[S],I),F=Ie(f[A],I),q=G,Y=C-h[v]-F,V=C/2-h[v]/2+O,ne=an(q,V,Y),K=!p.arrow&&Qe(o)!=null&&V!==ne&&a.reference[v]/2-(V<q?G:F)-h[v]/2<0,J=K?V<q?V-q:V-Y:0;return{[x]:m[x]+J,data:{[x]:ne,centerOffset:V-ne-J,...K&&{alignmentOffset:J}},reset:K}}}),Ri=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:a,rects:l,initialPlacement:c,platform:p,elements:d}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:h=!0,...y}=je(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const S=Re(o),A=Ce(c),k=Re(c)===c,R=await(p.isRTL==null?void 0:p.isRTL(d.floating)),P=m||(k||!h?[jt(c)]:bi(c)),L=v!=="none";!m&&L&&P.push(...Ni(c,h,v,R));const C=[c,...P],O=await nt(t,y),I=[];let G=((r=a.flip)==null?void 0:r.overflows)||[];if(u&&I.push(O[S]),f){const V=vi(o,l,R);I.push(O[V[0]],O[V[1]])}if(G=[...G,{placement:o,overflows:I}],!I.every(V=>V<=0)){var F,q;const V=(((F=a.flip)==null?void 0:F.index)||0)+1,ne=C[V];if(ne&&(!(f==="alignment"?A!==Ce(ne):!1)||G.every(_=>Ce(_.placement)===A?_.overflows[0]>0:!0)))return{data:{index:V,overflows:G},reset:{placement:ne}};let K=(q=G.filter(J=>J.overflows[0]<=0).sort((J,_)=>J.overflows[1]-_.overflows[1])[0])==null?void 0:q.placement;if(!K)switch(x){case"bestFit":{var Y;const J=(Y=G.filter(_=>{if(L){const b=Ce(_.placement);return b===A||b==="y"}return!0}).map(_=>[_.placement,_.overflows.filter(b=>b>0).reduce((b,z)=>b+z,0)]).sort((_,b)=>_[1]-b[1])[0])==null?void 0:Y[0];J&&(K=J);break}case"initialPlacement":K=c;break}if(o!==K)return{reset:{placement:K}}}return{}}}};function lr(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ur(e){return hi.some(t=>e[t]>=0)}const Ai=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=je(e,t);switch(r){case"referenceHidden":{const a=await nt(t,{...o,elementContext:"reference"}),l=lr(a,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:ur(l)}}}case"escaped":{const a=await nt(t,{...o,altBoundary:!0}),l=lr(a,n.floating);return{data:{escapedOffsets:l,escaped:ur(l)}}}default:return{}}}}},Vr=new Set(["left","top"]);async function Pi(e,t){const{placement:n,platform:r,elements:o}=e,a=await(r.isRTL==null?void 0:r.isRTL(o.floating)),l=Re(n),c=Qe(n),p=Ce(n)==="y",d=Vr.has(l)?-1:1,u=a&&p?-1:1,f=je(t,e);let{mainAxis:m,crossAxis:x,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return c&&typeof v=="number"&&(x=c==="end"?v*-1:v),p?{x:x*u,y:m*d}:{x:m*d,y:x*u}}const Mi=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:a,placement:l,middlewareData:c}=t,p=await Pi(t,e);return l===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:o+p.x,y:a+p.y,data:{...p,placement:l}}}}},Ii=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:a=!0,crossAxis:l=!1,limiter:c={fn:y=>{let{x:S,y:A}=y;return{x:S,y:A}}},...p}=je(e,t),d={x:n,y:r},u=await nt(t,p),f=Ce(Re(o)),m=gn(f);let x=d[m],v=d[f];if(a){const y=m==="y"?"top":"left",S=m==="y"?"bottom":"right",A=x+u[y],k=x-u[S];x=an(A,x,k)}if(l){const y=f==="y"?"top":"left",S=f==="y"?"bottom":"right",A=v+u[y],k=v-u[S];v=an(A,v,k)}const h=c.fn({...t,[m]:x,[f]:v});return{...h,data:{x:h.x-n,y:h.y-r,enabled:{[m]:a,[f]:l}}}}}},Ti=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:a,middlewareData:l}=t,{offset:c=0,mainAxis:p=!0,crossAxis:d=!0}=je(e,t),u={x:n,y:r},f=Ce(o),m=gn(f);let x=u[m],v=u[f];const h=je(c,t),y=typeof h=="number"?{mainAxis:h,crossAxis:0}:{mainAxis:0,crossAxis:0,...h};if(p){const k=m==="y"?"height":"width",R=a.reference[m]-a.floating[k]+y.mainAxis,P=a.reference[m]+a.reference[k]-y.mainAxis;x<R?x=R:x>P&&(x=P)}if(d){var S,A;const k=m==="y"?"width":"height",R=Vr.has(Re(o)),P=a.reference[f]-a.floating[k]+(R&&((S=l.offset)==null?void 0:S[f])||0)+(R?0:y.crossAxis),L=a.reference[f]+a.reference[k]+(R?0:((A=l.offset)==null?void 0:A[f])||0)-(R?y.crossAxis:0);v<P?v=P:v>L&&(v=L)}return{[m]:x,[f]:v}}}},Oi=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:a,platform:l,elements:c}=t,{apply:p=()=>{},...d}=je(e,t),u=await nt(t,d),f=Re(o),m=Qe(o),x=Ce(o)==="y",{width:v,height:h}=a.floating;let y,S;f==="top"||f==="bottom"?(y=f,S=m===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(S=f,y=m==="end"?"top":"bottom");const A=h-u.top-u.bottom,k=v-u.left-u.right,R=Ie(h-u[y],A),P=Ie(v-u[S],k),L=!t.middlewareData.shift;let C=R,O=P;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(O=k),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(C=A),L&&!m){const G=pe(u.left,0),F=pe(u.right,0),q=pe(u.top,0),Y=pe(u.bottom,0);x?O=v-2*(G!==0||F!==0?G+F:pe(u.left,u.right)):C=h-2*(q!==0||Y!==0?q+Y:pe(u.top,u.bottom))}await p({...t,availableWidth:O,availableHeight:C});const I=await l.getDimensions(c.floating);return v!==I.width||h!==I.height?{reset:{rects:!0}}:{}}}};function _t(){return typeof window<"u"}function Je(e){return Xr(e)?(e.nodeName||"").toLowerCase():"#document"}function me(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ke(e){var t;return(t=(Xr(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Xr(e){return _t()?e instanceof Node||e instanceof me(e).Node:!1}function ye(e){return _t()?e instanceof Element||e instanceof me(e).Element:!1}function Ne(e){return _t()?e instanceof HTMLElement||e instanceof me(e).HTMLElement:!1}function dr(e){return!_t()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof me(e).ShadowRoot}const Di=new Set(["inline","contents"]);function it(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=ve(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Di.has(o)}const _i=new Set(["table","td","th"]);function Li(e){return _i.has(Je(e))}const Fi=[":popover-open",":modal"];function Lt(e){return Fi.some(t=>{try{return e.matches(t)}catch{return!1}})}const $i=["transform","translate","scale","rotate","perspective"],zi=["transform","translate","scale","rotate","perspective","filter"],Bi=["paint","layout","strict","content"];function vn(e){const t=bn(),n=ye(e)?ve(e):e;return $i.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||zi.some(r=>(n.willChange||"").includes(r))||Bi.some(r=>(n.contain||"").includes(r))}function Wi(e){let t=Te(e);for(;Ne(t)&&!Ze(t);){if(vn(t))return t;if(Lt(t))return null;t=Te(t)}return null}function bn(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Gi=new Set(["html","body","#document"]);function Ze(e){return Gi.has(Je(e))}function ve(e){return me(e).getComputedStyle(e)}function Ft(e){return ye(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Te(e){if(Je(e)==="html")return e;const t=e.assignedSlot||e.parentNode||dr(e)&&e.host||ke(e);return dr(t)?t.host:t}function Yr(e){const t=Te(e);return Ze(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ne(t)&&it(t)?t:Yr(t)}function rt(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=Yr(e),a=o===((r=e.ownerDocument)==null?void 0:r.body),l=me(o);if(a){const c=ln(l);return t.concat(l,l.visualViewport||[],it(o)?o:[],c&&n?rt(c):[])}return t.concat(o,rt(o,[],n))}function ln(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function qr(e){const t=ve(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=Ne(e),a=o?e.offsetWidth:n,l=o?e.offsetHeight:r,c=Et(n)!==a||Et(r)!==l;return c&&(n=a,r=l),{width:n,height:r,$:c}}function wn(e){return ye(e)?e:e.contextElement}function Ye(e){const t=wn(e);if(!Ne(t))return Se(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:a}=qr(t);let l=(a?Et(n.width):n.width)/r,c=(a?Et(n.height):n.height)/o;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const Ki=Se(0);function Zr(e){const t=me(e);return!bn()||!t.visualViewport?Ki:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Ui(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==me(e)?!1:t}function Le(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),a=wn(e);let l=Se(1);t&&(r?ye(r)&&(l=Ye(r)):l=Ye(e));const c=Ui(a,n,r)?Zr(a):Se(0);let p=(o.left+c.x)/l.x,d=(o.top+c.y)/l.y,u=o.width/l.x,f=o.height/l.y;if(a){const m=me(a),x=r&&ye(r)?me(r):r;let v=m,h=ln(v);for(;h&&r&&x!==v;){const y=Ye(h),S=h.getBoundingClientRect(),A=ve(h),k=S.left+(h.clientLeft+parseFloat(A.paddingLeft))*y.x,R=S.top+(h.clientTop+parseFloat(A.paddingTop))*y.y;p*=y.x,d*=y.y,u*=y.x,f*=y.y,p+=k,d+=R,v=me(h),h=ln(v)}}return Rt({width:u,height:f,x:p,y:d})}function $t(e,t){const n=Ft(e).scrollLeft;return t?t.left+n:Le(ke(e)).left+n}function Qr(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-$t(e,n),o=n.top+t.scrollTop;return{x:r,y:o}}function Hi(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const a=o==="fixed",l=ke(r),c=t?Lt(t.floating):!1;if(r===l||c&&a)return n;let p={scrollLeft:0,scrollTop:0},d=Se(1);const u=Se(0),f=Ne(r);if((f||!f&&!a)&&((Je(r)!=="body"||it(l))&&(p=Ft(r)),Ne(r))){const x=Le(r);d=Ye(r),u.x=x.x+r.clientLeft,u.y=x.y+r.clientTop}const m=l&&!f&&!a?Qr(l,p):Se(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-p.scrollLeft*d.x+u.x+m.x,y:n.y*d.y-p.scrollTop*d.y+u.y+m.y}}function Vi(e){return Array.from(e.getClientRects())}function Xi(e){const t=ke(e),n=Ft(e),r=e.ownerDocument.body,o=pe(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=pe(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+$t(e);const c=-n.scrollTop;return ve(r).direction==="rtl"&&(l+=pe(t.clientWidth,r.clientWidth)-o),{width:o,height:a,x:l,y:c}}const fr=25;function Yi(e,t){const n=me(e),r=ke(e),o=n.visualViewport;let a=r.clientWidth,l=r.clientHeight,c=0,p=0;if(o){a=o.width,l=o.height;const u=bn();(!u||u&&t==="fixed")&&(c=o.offsetLeft,p=o.offsetTop)}const d=$t(r);if(d<=0){const u=r.ownerDocument,f=u.body,m=getComputedStyle(f),x=u.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,v=Math.abs(r.clientWidth-f.clientWidth-x);v<=fr&&(a-=v)}else d<=fr&&(a+=d);return{width:a,height:l,x:c,y:p}}const qi=new Set(["absolute","fixed"]);function Zi(e,t){const n=Le(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,a=Ne(e)?Ye(e):Se(1),l=e.clientWidth*a.x,c=e.clientHeight*a.y,p=o*a.x,d=r*a.y;return{width:l,height:c,x:p,y:d}}function pr(e,t,n){let r;if(t==="viewport")r=Yi(e,n);else if(t==="document")r=Xi(ke(e));else if(ye(t))r=Zi(t,n);else{const o=Zr(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Rt(r)}function Jr(e,t){const n=Te(e);return n===t||!ye(n)||Ze(n)?!1:ve(n).position==="fixed"||Jr(n,t)}function Qi(e,t){const n=t.get(e);if(n)return n;let r=rt(e,[],!1).filter(c=>ye(c)&&Je(c)!=="body"),o=null;const a=ve(e).position==="fixed";let l=a?Te(e):e;for(;ye(l)&&!Ze(l);){const c=ve(l),p=vn(l);!p&&c.position==="fixed"&&(o=null),(a?!p&&!o:!p&&c.position==="static"&&!!o&&qi.has(o.position)||it(l)&&!p&&Jr(e,l))?r=r.filter(u=>u!==l):o=c,l=Te(l)}return t.set(e,r),r}function Ji(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const l=[...n==="clippingAncestors"?Lt(t)?[]:Qi(t,this._c):[].concat(n),r],c=l[0],p=l.reduce((d,u)=>{const f=pr(t,u,o);return d.top=pe(f.top,d.top),d.right=Ie(f.right,d.right),d.bottom=Ie(f.bottom,d.bottom),d.left=pe(f.left,d.left),d},pr(t,c,o));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function ec(e){const{width:t,height:n}=qr(e);return{width:t,height:n}}function tc(e,t,n){const r=Ne(t),o=ke(t),a=n==="fixed",l=Le(e,!0,a,t);let c={scrollLeft:0,scrollTop:0};const p=Se(0);function d(){p.x=$t(o)}if(r||!r&&!a)if((Je(t)!=="body"||it(o))&&(c=Ft(t)),r){const x=Le(t,!0,a,t);p.x=x.x+t.clientLeft,p.y=x.y+t.clientTop}else o&&d();a&&!r&&o&&d();const u=o&&!r&&!a?Qr(o,c):Se(0),f=l.left+c.scrollLeft-p.x-u.x,m=l.top+c.scrollTop-p.y-u.y;return{x:f,y:m,width:l.width,height:l.height}}function qt(e){return ve(e).position==="static"}function mr(e,t){if(!Ne(e)||ve(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ke(e)===n&&(n=n.ownerDocument.body),n}function eo(e,t){const n=me(e);if(Lt(e))return n;if(!Ne(e)){let o=Te(e);for(;o&&!Ze(o);){if(ye(o)&&!qt(o))return o;o=Te(o)}return n}let r=mr(e,t);for(;r&&Li(r)&&qt(r);)r=mr(r,t);return r&&Ze(r)&&qt(r)&&!vn(r)?n:r||Wi(e)||n}const nc=async function(e){const t=this.getOffsetParent||eo,n=this.getDimensions,r=await n(e.floating);return{reference:tc(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function rc(e){return ve(e).direction==="rtl"}const oc={convertOffsetParentRelativeRectToViewportRelativeRect:Hi,getDocumentElement:ke,getClippingRect:Ji,getOffsetParent:eo,getElementRects:nc,getClientRects:Vi,getDimensions:ec,getScale:Ye,isElement:ye,isRTL:rc};function to(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function sc(e,t){let n=null,r;const o=ke(e);function a(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function l(c,p){c===void 0&&(c=!1),p===void 0&&(p=1),a();const d=e.getBoundingClientRect(),{left:u,top:f,width:m,height:x}=d;if(c||t(),!m||!x)return;const v=pt(f),h=pt(o.clientWidth-(u+m)),y=pt(o.clientHeight-(f+x)),S=pt(u),k={rootMargin:-v+"px "+-h+"px "+-y+"px "+-S+"px",threshold:pe(0,Ie(1,p))||1};let R=!0;function P(L){const C=L[0].intersectionRatio;if(C!==p){if(!R)return l();C?l(!1,C):r=setTimeout(()=>{l(!1,1e-7)},1e3)}C===1&&!to(d,e.getBoundingClientRect())&&l(),R=!1}try{n=new IntersectionObserver(P,{...k,root:o.ownerDocument})}catch{n=new IntersectionObserver(P,k)}n.observe(e)}return l(!0),a}function ac(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:p=!1}=r,d=wn(e),u=o||a?[...d?rt(d):[],...rt(t)]:[];u.forEach(S=>{o&&S.addEventListener("scroll",n,{passive:!0}),a&&S.addEventListener("resize",n)});const f=d&&c?sc(d,n):null;let m=-1,x=null;l&&(x=new ResizeObserver(S=>{let[A]=S;A&&A.target===d&&x&&(x.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var k;(k=x)==null||k.observe(t)})),n()}),d&&!p&&x.observe(d),x.observe(t));let v,h=p?Le(e):null;p&&y();function y(){const S=Le(e);h&&!to(h,S)&&n(),h=S,v=requestAnimationFrame(y)}return n(),()=>{var S;u.forEach(A=>{o&&A.removeEventListener("scroll",n),a&&A.removeEventListener("resize",n)}),f?.(),(S=x)==null||S.disconnect(),x=null,p&&cancelAnimationFrame(v)}}const ic=Mi,cc=Ii,lc=Ri,uc=Oi,dc=Ai,hr=ji,fc=Ti,pc=(e,t,n)=>{const r=new Map,o={platform:oc,...n},a={...o.platform,_c:r};return Ei(e,t,{...o,platform:a})};var mc=typeof document<"u",hc=function(){},bt=mc?i.useLayoutEffect:hc;function At(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!At(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const a=o[r];if(!(a==="_owner"&&e.$$typeof)&&!At(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function no(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function gr(e,t){const n=no(e);return Math.round(t*n)/n}function Zt(e){const t=i.useRef(e);return bt(()=>{t.current=e}),t}function gc(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:l}={},transform:c=!0,whileElementsMounted:p,open:d}=e,[u,f]=i.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,x]=i.useState(r);At(m,r)||x(r);const[v,h]=i.useState(null),[y,S]=i.useState(null),A=i.useCallback(_=>{_!==L.current&&(L.current=_,h(_))},[]),k=i.useCallback(_=>{_!==C.current&&(C.current=_,S(_))},[]),R=a||v,P=l||y,L=i.useRef(null),C=i.useRef(null),O=i.useRef(u),I=p!=null,G=Zt(p),F=Zt(o),q=Zt(d),Y=i.useCallback(()=>{if(!L.current||!C.current)return;const _={placement:t,strategy:n,middleware:m};F.current&&(_.platform=F.current),pc(L.current,C.current,_).then(b=>{const z={...b,isPositioned:q.current!==!1};V.current&&!At(O.current,z)&&(O.current=z,Rr.flushSync(()=>{f(z)}))})},[m,t,n,F,q]);bt(()=>{d===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,f(_=>({..._,isPositioned:!1})))},[d]);const V=i.useRef(!1);bt(()=>(V.current=!0,()=>{V.current=!1}),[]),bt(()=>{if(R&&(L.current=R),P&&(C.current=P),R&&P){if(G.current)return G.current(R,P,Y);Y()}},[R,P,Y,G,I]);const ne=i.useMemo(()=>({reference:L,floating:C,setReference:A,setFloating:k}),[A,k]),K=i.useMemo(()=>({reference:R,floating:P}),[R,P]),J=i.useMemo(()=>{const _={position:n,left:0,top:0};if(!K.floating)return _;const b=gr(K.floating,u.x),z=gr(K.floating,u.y);return c?{..._,transform:"translate("+b+"px, "+z+"px)",...no(K.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:b,top:z}},[n,c,K.floating,u.x,u.y]);return i.useMemo(()=>({...u,update:Y,refs:ne,elements:K,floatingStyles:J}),[u,Y,ne,K,J])}const xc=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?hr({element:r.current,padding:o}).fn(n):{}:r?hr({element:r,padding:o}).fn(n):{}}}},yc=(e,t)=>({...ic(e),options:[e,t]}),vc=(e,t)=>({...cc(e),options:[e,t]}),bc=(e,t)=>({...fc(e),options:[e,t]}),wc=(e,t)=>({...lc(e),options:[e,t]}),Cc=(e,t)=>({...uc(e),options:[e,t]}),Sc=(e,t)=>({...dc(e),options:[e,t]}),Nc=(e,t)=>({...xc(e),options:[e,t]});var kc="Arrow",ro=i.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...a}=e;return s.jsx(ue.svg,{...a,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});ro.displayName=kc;var Ec=ro;function jc(e){const[t,n]=i.useState(void 0);return Me(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let l,c;if("borderBoxSize"in a){const p=a.borderBoxSize,d=Array.isArray(p)?p[0]:p;l=d.inlineSize,c=d.blockSize}else l=e.offsetWidth,c=e.offsetHeight;n({width:l,height:c})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Cn="Popper",[oo,so]=at(Cn),[Rc,ao]=oo(Cn),io=e=>{const{__scopePopper:t,children:n}=e,[r,o]=i.useState(null);return s.jsx(Rc,{scope:t,anchor:r,onAnchorChange:o,children:n})};io.displayName=Cn;var co="PopperAnchor",lo=i.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,a=ao(co,n),l=i.useRef(null),c=fe(t,l),p=i.useRef(null);return i.useEffect(()=>{const d=p.current;p.current=r?.current||l.current,d!==p.current&&a.onAnchorChange(p.current)}),r?null:s.jsx(ue.div,{...o,ref:c})});lo.displayName=co;var Sn="PopperContent",[Ac,Pc]=oo(Sn),uo=i.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:a="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:p=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:x="optimized",onPlaced:v,...h}=e,y=ao(Sn,n),[S,A]=i.useState(null),k=fe(t,te=>A(te)),[R,P]=i.useState(null),L=jc(R),C=L?.width??0,O=L?.height??0,I=r+(a!=="center"?"-"+a:""),G=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},F=Array.isArray(d)?d:[d],q=F.length>0,Y={padding:G,boundary:F.filter(Ic),altBoundary:q},{refs:V,floatingStyles:ne,placement:K,isPositioned:J,middlewareData:_}=gc({strategy:"fixed",placement:I,whileElementsMounted:(...te)=>ac(...te,{animationFrame:x==="always"}),elements:{reference:y.anchor},middleware:[yc({mainAxis:o+O,alignmentAxis:l}),p&&vc({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?bc():void 0,...Y}),p&&wc({...Y}),Cc({...Y,apply:({elements:te,rects:ae,availableWidth:g,availableHeight:N})=>{const{width:M,height:T}=ae.reference,X=te.floating.style;X.setProperty("--radix-popper-available-width",`${g}px`),X.setProperty("--radix-popper-available-height",`${N}px`),X.setProperty("--radix-popper-anchor-width",`${M}px`),X.setProperty("--radix-popper-anchor-height",`${T}px`)}}),R&&Nc({element:R,padding:c}),Tc({arrowWidth:C,arrowHeight:O}),m&&Sc({strategy:"referenceHidden",...Y})]}),[b,z]=mo(K),Z=Ee(v);Me(()=>{J&&Z?.()},[J,Z]);const E=_.arrow?.x,D=_.arrow?.y,H=_.arrow?.centerOffset!==0,[Q,ie]=i.useState();return Me(()=>{S&&ie(window.getComputedStyle(S).zIndex)},[S]),s.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...ne,transform:J?ne.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[_.transformOrigin?.x,_.transformOrigin?.y].join(" "),..._.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(Ac,{scope:n,placedSide:b,onArrowChange:P,arrowX:E,arrowY:D,shouldHideArrow:H,children:s.jsx(ue.div,{"data-side":b,"data-align":z,...h,ref:k,style:{...h.style,animation:J?void 0:"none"}})})})});uo.displayName=Sn;var fo="PopperArrow",Mc={top:"bottom",right:"left",bottom:"top",left:"right"},po=i.forwardRef(function(t,n){const{__scopePopper:r,...o}=t,a=Pc(fo,r),l=Mc[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(Ec,{...o,ref:n,style:{...o.style,display:"block"}})})});po.displayName=fo;function Ic(e){return e!==null}var Tc=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:o}=t,l=o.arrow?.centerOffset!==0,c=l?0:e.arrowWidth,p=l?0:e.arrowHeight,[d,u]=mo(n),f={start:"0%",center:"50%",end:"100%"}[u],m=(o.arrow?.x??0)+c/2,x=(o.arrow?.y??0)+p/2;let v="",h="";return d==="bottom"?(v=l?f:`${m}px`,h=`${-p}px`):d==="top"?(v=l?f:`${m}px`,h=`${r.floating.height+p}px`):d==="right"?(v=`${-p}px`,h=l?f:`${x}px`):d==="left"&&(v=`${r.floating.width+p}px`,h=l?f:`${x}px`),{data:{x:v,y:h}}}});function mo(e){const[t,n="center"]=e.split("-");return[t,n]}var Oc=io,Dc=lo,_c=uo,Lc=po,Fc="Portal",ho=i.forwardRef((e,t)=>{const{container:n,...r}=e,[o,a]=i.useState(!1);Me(()=>a(!0),[]);const l=n||o&&globalThis?.document?.body;return l?Is.createPortal(s.jsx(ue.div,{...r,ref:t}),l):null});ho.displayName=Fc;function $c(e,t){return i.useReducer((n,r)=>t[n][r]??n,e)}var ct=e=>{const{present:t,children:n}=e,r=zc(t),o=typeof n=="function"?n({present:r.isPresent}):i.Children.only(n),a=fe(r.ref,Bc(o));return typeof n=="function"||r.isPresent?i.cloneElement(o,{ref:a}):null};ct.displayName="Presence";function zc(e){const[t,n]=i.useState(),r=i.useRef(null),o=i.useRef(e),a=i.useRef("none"),l=e?"mounted":"unmounted",[c,p]=$c(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.useEffect(()=>{const d=mt(r.current);a.current=c==="mounted"?d:"none"},[c]),Me(()=>{const d=r.current,u=o.current;if(u!==e){const m=a.current,x=mt(d);e?p("MOUNT"):x==="none"||d?.display==="none"?p("UNMOUNT"):p(u&&m!==x?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,p]),Me(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,f=x=>{const h=mt(r.current).includes(CSS.escape(x.animationName));if(x.target===t&&h&&(p("ANIMATION_END"),!o.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},m=x=>{x.target===t&&(a.current=mt(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else p("ANIMATION_END")},[t,p]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:i.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function mt(e){return e?.animationName||"none"}function Bc(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Qt="rovingFocusGroup.onEntryFocus",Wc={bubbles:!1,cancelable:!0},lt="RovingFocusGroup",[un,go,Gc]=$r(lt),[Kc,xo]=at(lt,[Gc]),[Uc,Hc]=Kc(lt),yo=i.forwardRef((e,t)=>s.jsx(un.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(un.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Vc,{...e,ref:t})})}));yo.displayName=lt;var Vc=i.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:p,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...f}=e,m=i.useRef(null),x=fe(t,m),v=zr(a),[h,y]=Lr({prop:l,defaultProp:c??null,onChange:p,caller:lt}),[S,A]=i.useState(!1),k=Ee(d),R=go(n),P=i.useRef(!1),[L,C]=i.useState(0);return i.useEffect(()=>{const O=m.current;if(O)return O.addEventListener(Qt,k),()=>O.removeEventListener(Qt,k)},[k]),s.jsx(Uc,{scope:n,orientation:r,dir:v,loop:o,currentTabStopId:h,onItemFocus:i.useCallback(O=>y(O),[y]),onItemShiftTab:i.useCallback(()=>A(!0),[]),onFocusableItemAdd:i.useCallback(()=>C(O=>O+1),[]),onFocusableItemRemove:i.useCallback(()=>C(O=>O-1),[]),children:s.jsx(ue.div,{tabIndex:S||L===0?-1:0,"data-orientation":r,...f,ref:x,style:{outline:"none",...e.style},onMouseDown:ee(e.onMouseDown,()=>{P.current=!0}),onFocus:ee(e.onFocus,O=>{const I=!P.current;if(O.target===O.currentTarget&&I&&!S){const G=new CustomEvent(Qt,Wc);if(O.currentTarget.dispatchEvent(G),!G.defaultPrevented){const F=R().filter(K=>K.focusable),q=F.find(K=>K.active),Y=F.find(K=>K.id===h),ne=[q,Y,...F].filter(Boolean).map(K=>K.ref.current);wo(ne,u)}}P.current=!1}),onBlur:ee(e.onBlur,()=>A(!1))})})}),vo="RovingFocusGroupItem",bo=i.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:a,children:l,...c}=e,p=sn(),d=a||p,u=Hc(vo,n),f=u.currentTabStopId===d,m=go(n),{onFocusableItemAdd:x,onFocusableItemRemove:v,currentTabStopId:h}=u;return i.useEffect(()=>{if(r)return x(),()=>v()},[r,x,v]),s.jsx(un.ItemSlot,{scope:n,id:d,focusable:r,active:o,children:s.jsx(ue.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...c,ref:t,onMouseDown:ee(e.onMouseDown,y=>{r?u.onItemFocus(d):y.preventDefault()}),onFocus:ee(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:ee(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){u.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const S=qc(y,u.orientation,u.dir);if(S!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let k=m().filter(R=>R.focusable).map(R=>R.ref.current);if(S==="last")k.reverse();else if(S==="prev"||S==="next"){S==="prev"&&k.reverse();const R=k.indexOf(y.currentTarget);k=u.loop?Zc(k,R+1):k.slice(R+1)}setTimeout(()=>wo(k))}}),children:typeof l=="function"?l({isCurrentTabStop:f,hasTabStop:h!=null}):l})})});bo.displayName=vo;var Xc={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Yc(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function qc(e,t,n){const r=Yc(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Xc[r]}function wo(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Zc(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Qc=yo,Jc=bo,el=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Be=new WeakMap,ht=new WeakMap,gt={},Jt=0,Co=function(e){return e&&(e.host||Co(e.parentNode))},tl=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Co(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},nl=function(e,t,n,r){var o=tl(t,Array.isArray(e)?e:[e]);gt[n]||(gt[n]=new WeakMap);var a=gt[n],l=[],c=new Set,p=new Set(o),d=function(f){!f||c.has(f)||(c.add(f),d(f.parentNode))};o.forEach(d);var u=function(f){!f||p.has(f)||Array.prototype.forEach.call(f.children,function(m){if(c.has(m))u(m);else try{var x=m.getAttribute(r),v=x!==null&&x!=="false",h=(Be.get(m)||0)+1,y=(a.get(m)||0)+1;Be.set(m,h),a.set(m,y),l.push(m),h===1&&v&&ht.set(m,!0),y===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(S){console.error("aria-hidden: cannot operate on ",m,S)}})};return u(t),c.clear(),Jt++,function(){l.forEach(function(f){var m=Be.get(f)-1,x=a.get(f)-1;Be.set(f,m),a.set(f,x),m||(ht.has(f)||f.removeAttribute(r),ht.delete(f)),x||f.removeAttribute(n)}),Jt--,Jt||(Be=new WeakMap,Be=new WeakMap,ht=new WeakMap,gt={})}},rl=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=el(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),nl(r,o,n,"aria-hidden")):function(){return null}},be=function(){return be=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},be.apply(this,arguments)};function So(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function ol(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,a;r<o;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var wt="right-scroll-bar-position",Ct="width-before-scroll-bar",sl="with-scroll-bars-hidden",al="--removed-body-scroll-bar-size";function en(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function il(e,t){var n=i.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var cl=typeof window<"u"?i.useLayoutEffect:i.useEffect,xr=new WeakMap;function ll(e,t){var n=il(null,function(r){return e.forEach(function(o){return en(o,r)})});return cl(function(){var r=xr.get(n);if(r){var o=new Set(r),a=new Set(e),l=n.current;o.forEach(function(c){a.has(c)||en(c,null)}),a.forEach(function(c){o.has(c)||en(c,l)})}xr.set(n,e)},[e]),n}function ul(e){return e}function dl(e,t){t===void 0&&(t=ul);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var l=t(a,r);return n.push(l),function(){n=n.filter(function(c){return c!==l})}},assignSyncMedium:function(a){for(r=!0;n.length;){var l=n;n=[],l.forEach(a)}n={push:function(c){return a(c)},filter:function(){return n}}},assignMedium:function(a){r=!0;var l=[];if(n.length){var c=n;n=[],c.forEach(a),l=n}var p=function(){var u=l;l=[],u.forEach(a)},d=function(){return Promise.resolve().then(p)};d(),n={push:function(u){l.push(u),d()},filter:function(u){return l=l.filter(u),n}}}};return o}function fl(e){e===void 0&&(e={});var t=dl(null);return t.options=be({async:!0,ssr:!1},e),t}var No=function(e){var t=e.sideCar,n=So(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return i.createElement(r,be({},n))};No.isSideCarExport=!0;function pl(e,t){return e.useMedium(t),No}var ko=fl(),tn=function(){},zt=i.forwardRef(function(e,t){var n=i.useRef(null),r=i.useState({onScrollCapture:tn,onWheelCapture:tn,onTouchMoveCapture:tn}),o=r[0],a=r[1],l=e.forwardProps,c=e.children,p=e.className,d=e.removeScrollBar,u=e.enabled,f=e.shards,m=e.sideCar,x=e.noRelative,v=e.noIsolation,h=e.inert,y=e.allowPinchZoom,S=e.as,A=S===void 0?"div":S,k=e.gapMode,R=So(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=m,L=ll([n,t]),C=be(be({},R),o);return i.createElement(i.Fragment,null,u&&i.createElement(P,{sideCar:ko,removeScrollBar:d,shards:f,noRelative:x,noIsolation:v,inert:h,setCallbacks:a,allowPinchZoom:!!y,lockRef:n,gapMode:k}),l?i.cloneElement(i.Children.only(c),be(be({},C),{ref:L})):i.createElement(A,be({},C,{className:p,ref:L}),c))});zt.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};zt.classNames={fullWidth:Ct,zeroRight:wt};var ml=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function hl(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=ml();return t&&e.setAttribute("nonce",t),e}function gl(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function xl(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var yl=function(){var e=0,t=null;return{add:function(n){e==0&&(t=hl())&&(gl(t,n),xl(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},vl=function(){var e=yl();return function(t,n){i.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Eo=function(){var e=vl(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},bl={left:0,top:0,right:0,gap:0},nn=function(e){return parseInt(e||"",10)||0},wl=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[nn(n),nn(r),nn(o)]},Cl=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return bl;var t=wl(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Sl=Eo(),qe="data-scroll-locked",Nl=function(e,t,n,r){var o=e.left,a=e.top,l=e.right,c=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(sl,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(qe,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(wt,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Ct,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(wt," .").concat(wt,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ct," .").concat(Ct,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(qe,`] {
    `).concat(al,": ").concat(c,`px;
  }
`)},yr=function(){var e=parseInt(document.body.getAttribute(qe)||"0",10);return isFinite(e)?e:0},kl=function(){i.useEffect(function(){return document.body.setAttribute(qe,(yr()+1).toString()),function(){var e=yr()-1;e<=0?document.body.removeAttribute(qe):document.body.setAttribute(qe,e.toString())}},[])},El=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;kl();var a=i.useMemo(function(){return Cl(o)},[o]);return i.createElement(Sl,{styles:Nl(a,!t,o,n?"":"!important")})},dn=!1;if(typeof window<"u")try{var xt=Object.defineProperty({},"passive",{get:function(){return dn=!0,!0}});window.addEventListener("test",xt,xt),window.removeEventListener("test",xt,xt)}catch{dn=!1}var We=dn?{passive:!1}:!1,jl=function(e){return e.tagName==="TEXTAREA"},jo=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!jl(e)&&n[t]==="visible")},Rl=function(e){return jo(e,"overflowY")},Al=function(e){return jo(e,"overflowX")},vr=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=Ro(e,r);if(o){var a=Ao(e,r),l=a[1],c=a[2];if(l>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Pl=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Ml=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Ro=function(e,t){return e==="v"?Rl(t):Al(t)},Ao=function(e,t){return e==="v"?Pl(t):Ml(t)},Il=function(e,t){return e==="h"&&t==="rtl"?-1:1},Tl=function(e,t,n,r,o){var a=Il(e,window.getComputedStyle(t).direction),l=a*r,c=n.target,p=t.contains(c),d=!1,u=l>0,f=0,m=0;do{if(!c)break;var x=Ao(e,c),v=x[0],h=x[1],y=x[2],S=h-y-a*v;(v||S)&&Ro(e,c)&&(f+=S,m+=v);var A=c.parentNode;c=A&&A.nodeType===Node.DOCUMENT_FRAGMENT_NODE?A.host:A}while(!p&&c!==document.body||p&&(t.contains(c)||t===c));return(u&&Math.abs(f)<1||!u&&Math.abs(m)<1)&&(d=!0),d},yt=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},br=function(e){return[e.deltaX,e.deltaY]},wr=function(e){return e&&"current"in e?e.current:e},Ol=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Dl=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},_l=0,Ge=[];function Ll(e){var t=i.useRef([]),n=i.useRef([0,0]),r=i.useRef(),o=i.useState(_l++)[0],a=i.useState(Eo)[0],l=i.useRef(e);i.useEffect(function(){l.current=e},[e]),i.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var h=ol([e.lockRef.current],(e.shards||[]).map(wr),!0).filter(Boolean);return h.forEach(function(y){return y.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),h.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var c=i.useCallback(function(h,y){if("touches"in h&&h.touches.length===2||h.type==="wheel"&&h.ctrlKey)return!l.current.allowPinchZoom;var S=yt(h),A=n.current,k="deltaX"in h?h.deltaX:A[0]-S[0],R="deltaY"in h?h.deltaY:A[1]-S[1],P,L=h.target,C=Math.abs(k)>Math.abs(R)?"h":"v";if("touches"in h&&C==="h"&&L.type==="range")return!1;var O=vr(C,L);if(!O)return!0;if(O?P=C:(P=C==="v"?"h":"v",O=vr(C,L)),!O)return!1;if(!r.current&&"changedTouches"in h&&(k||R)&&(r.current=P),!P)return!0;var I=r.current||P;return Tl(I,y,h,I==="h"?k:R)},[]),p=i.useCallback(function(h){var y=h;if(!(!Ge.length||Ge[Ge.length-1]!==a)){var S="deltaY"in y?br(y):yt(y),A=t.current.filter(function(P){return P.name===y.type&&(P.target===y.target||y.target===P.shadowParent)&&Ol(P.delta,S)})[0];if(A&&A.should){y.cancelable&&y.preventDefault();return}if(!A){var k=(l.current.shards||[]).map(wr).filter(Boolean).filter(function(P){return P.contains(y.target)}),R=k.length>0?c(y,k[0]):!l.current.noIsolation;R&&y.cancelable&&y.preventDefault()}}},[]),d=i.useCallback(function(h,y,S,A){var k={name:h,delta:y,target:S,should:A,shadowParent:Fl(S)};t.current.push(k),setTimeout(function(){t.current=t.current.filter(function(R){return R!==k})},1)},[]),u=i.useCallback(function(h){n.current=yt(h),r.current=void 0},[]),f=i.useCallback(function(h){d(h.type,br(h),h.target,c(h,e.lockRef.current))},[]),m=i.useCallback(function(h){d(h.type,yt(h),h.target,c(h,e.lockRef.current))},[]);i.useEffect(function(){return Ge.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",p,We),document.addEventListener("touchmove",p,We),document.addEventListener("touchstart",u,We),function(){Ge=Ge.filter(function(h){return h!==a}),document.removeEventListener("wheel",p,We),document.removeEventListener("touchmove",p,We),document.removeEventListener("touchstart",u,We)}},[]);var x=e.removeScrollBar,v=e.inert;return i.createElement(i.Fragment,null,v?i.createElement(a,{styles:Dl(o)}):null,x?i.createElement(El,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Fl(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const $l=pl(ko,Ll);var Po=i.forwardRef(function(e,t){return i.createElement(zt,be({},e,{ref:t,sideCar:$l}))});Po.classNames=zt.classNames;var fn=["Enter"," "],zl=["ArrowDown","PageUp","Home"],Mo=["ArrowUp","PageDown","End"],Bl=[...zl,...Mo],Wl={ltr:[...fn,"ArrowRight"],rtl:[...fn,"ArrowLeft"]},Gl={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ut="Menu",[ot,Kl,Ul]=$r(ut),[Fe,Io]=at(ut,[Ul,so,xo]),Bt=so(),To=xo(),[Hl,$e]=Fe(ut),[Vl,dt]=Fe(ut),Oo=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:a,modal:l=!0}=e,c=Bt(t),[p,d]=i.useState(null),u=i.useRef(!1),f=Ee(a),m=zr(o);return i.useEffect(()=>{const x=()=>{u.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>u.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),s.jsx(Oc,{...c,children:s.jsx(Hl,{scope:t,open:n,onOpenChange:f,content:p,onContentChange:d,children:s.jsx(Vl,{scope:t,onClose:i.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:m,modal:l,children:r})})})};Oo.displayName=ut;var Xl="MenuAnchor",Nn=i.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Bt(n);return s.jsx(Dc,{...o,...r,ref:t})});Nn.displayName=Xl;var kn="MenuPortal",[Yl,Do]=Fe(kn,{forceMount:void 0}),_o=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,a=$e(kn,t);return s.jsx(Yl,{scope:t,forceMount:n,children:s.jsx(ct,{present:n||a.open,children:s.jsx(ho,{asChild:!0,container:o,children:r})})})};_o.displayName=kn;var ge="MenuContent",[ql,En]=Fe(ge),Lo=i.forwardRef((e,t)=>{const n=Do(ge,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=$e(ge,e.__scopeMenu),l=dt(ge,e.__scopeMenu);return s.jsx(ot.Provider,{scope:e.__scopeMenu,children:s.jsx(ct,{present:r||a.open,children:s.jsx(ot.Slot,{scope:e.__scopeMenu,children:l.modal?s.jsx(Zl,{...o,ref:t}):s.jsx(Ql,{...o,ref:t})})})})}),Zl=i.forwardRef((e,t)=>{const n=$e(ge,e.__scopeMenu),r=i.useRef(null),o=fe(t,r);return i.useEffect(()=>{const a=r.current;if(a)return rl(a)},[]),s.jsx(jn,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ee(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Ql=i.forwardRef((e,t)=>{const n=$e(ge,e.__scopeMenu);return s.jsx(jn,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Jl=kt("MenuContent.ScrollLock"),jn=i.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:l,disableOutsidePointerEvents:c,onEntryFocus:p,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:m,onDismiss:x,disableOutsideScroll:v,...h}=e,y=$e(ge,n),S=dt(ge,n),A=Bt(n),k=To(n),R=Kl(n),[P,L]=i.useState(null),C=i.useRef(null),O=fe(t,C,y.onContentChange),I=i.useRef(0),G=i.useRef(""),F=i.useRef(0),q=i.useRef(null),Y=i.useRef("right"),V=i.useRef(0),ne=v?Po:i.Fragment,K=v?{as:Jl,allowPinchZoom:!0}:void 0,J=b=>{const z=G.current+b,Z=R().filter(te=>!te.disabled),E=document.activeElement,D=Z.find(te=>te.ref.current===E)?.textValue,H=Z.map(te=>te.textValue),Q=du(H,z,D),ie=Z.find(te=>te.textValue===Q)?.ref.current;(function te(ae){G.current=ae,window.clearTimeout(I.current),ae!==""&&(I.current=window.setTimeout(()=>te(""),1e3))})(z),ie&&setTimeout(()=>ie.focus())};i.useEffect(()=>()=>window.clearTimeout(I.current),[]),si();const _=i.useCallback(b=>Y.current===q.current?.side&&pu(b,q.current?.area),[]);return s.jsx(ql,{scope:n,searchRef:G,onItemEnter:i.useCallback(b=>{_(b)&&b.preventDefault()},[_]),onItemLeave:i.useCallback(b=>{_(b)||(C.current?.focus(),L(null))},[_]),onTriggerLeave:i.useCallback(b=>{_(b)&&b.preventDefault()},[_]),pointerGraceTimerRef:F,onPointerGraceIntentChange:i.useCallback(b=>{q.current=b},[]),children:s.jsx(ne,{...K,children:s.jsx(Kr,{asChild:!0,trapped:o,onMountAutoFocus:ee(a,b=>{b.preventDefault(),C.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:s.jsx(Wr,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:m,onDismiss:x,children:s.jsx(Qc,{asChild:!0,...k,dir:S.dir,orientation:"vertical",loop:r,currentTabStopId:P,onCurrentTabStopIdChange:L,onEntryFocus:ee(p,b=>{S.isUsingKeyboardRef.current||b.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(_c,{role:"menu","aria-orientation":"vertical","data-state":Jo(y.open),"data-radix-menu-content":"",dir:S.dir,...A,...h,ref:O,style:{outline:"none",...h.style},onKeyDown:ee(h.onKeyDown,b=>{const Z=b.target.closest("[data-radix-menu-content]")===b.currentTarget,E=b.ctrlKey||b.altKey||b.metaKey,D=b.key.length===1;Z&&(b.key==="Tab"&&b.preventDefault(),!E&&D&&J(b.key));const H=C.current;if(b.target!==H||!Bl.includes(b.key))return;b.preventDefault();const ie=R().filter(te=>!te.disabled).map(te=>te.ref.current);Mo.includes(b.key)&&ie.reverse(),lu(ie)}),onBlur:ee(e.onBlur,b=>{b.currentTarget.contains(b.target)||(window.clearTimeout(I.current),G.current="")}),onPointerMove:ee(e.onPointerMove,st(b=>{const z=b.target,Z=V.current!==b.clientX;if(b.currentTarget.contains(z)&&Z){const E=b.clientX>V.current?"right":"left";Y.current=E,V.current=b.clientX}}))})})})})})})});Lo.displayName=ge;var eu="MenuGroup",Rn=i.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(ue.div,{role:"group",...r,ref:t})});Rn.displayName=eu;var tu="MenuLabel",Fo=i.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(ue.div,{...r,ref:t})});Fo.displayName=tu;var Pt="MenuItem",Cr="menu.itemSelect",Wt=i.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,a=i.useRef(null),l=dt(Pt,e.__scopeMenu),c=En(Pt,e.__scopeMenu),p=fe(t,a),d=i.useRef(!1),u=()=>{const f=a.current;if(!n&&f){const m=new CustomEvent(Cr,{bubbles:!0,cancelable:!0});f.addEventListener(Cr,x=>r?.(x),{once:!0}),Fr(f,m),m.defaultPrevented?d.current=!1:l.onClose()}};return s.jsx($o,{...o,ref:p,disabled:n,onClick:ee(e.onClick,u),onPointerDown:f=>{e.onPointerDown?.(f),d.current=!0},onPointerUp:ee(e.onPointerUp,f=>{d.current||f.currentTarget?.click()}),onKeyDown:ee(e.onKeyDown,f=>{const m=c.searchRef.current!=="";n||m&&f.key===" "||fn.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Wt.displayName=Pt;var $o=i.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...a}=e,l=En(Pt,n),c=To(n),p=i.useRef(null),d=fe(t,p),[u,f]=i.useState(!1),[m,x]=i.useState("");return i.useEffect(()=>{const v=p.current;v&&x((v.textContent??"").trim())},[a.children]),s.jsx(ot.ItemSlot,{scope:n,disabled:r,textValue:o??m,children:s.jsx(Jc,{asChild:!0,...c,focusable:!r,children:s.jsx(ue.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:d,onPointerMove:ee(e.onPointerMove,st(v=>{r?l.onItemLeave(v):(l.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ee(e.onPointerLeave,st(v=>l.onItemLeave(v))),onFocus:ee(e.onFocus,()=>f(!0)),onBlur:ee(e.onBlur,()=>f(!1))})})})}),nu="MenuCheckboxItem",zo=i.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return s.jsx(Uo,{scope:e.__scopeMenu,checked:n,children:s.jsx(Wt,{role:"menuitemcheckbox","aria-checked":Mt(n)?"mixed":n,...o,ref:t,"data-state":Pn(n),onSelect:ee(o.onSelect,()=>r?.(Mt(n)?!0:!n),{checkForDefaultPrevented:!1})})})});zo.displayName=nu;var Bo="MenuRadioGroup",[ru,ou]=Fe(Bo,{value:void 0,onValueChange:()=>{}}),Wo=i.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,a=Ee(r);return s.jsx(ru,{scope:e.__scopeMenu,value:n,onValueChange:a,children:s.jsx(Rn,{...o,ref:t})})});Wo.displayName=Bo;var Go="MenuRadioItem",Ko=i.forwardRef((e,t)=>{const{value:n,...r}=e,o=ou(Go,e.__scopeMenu),a=n===o.value;return s.jsx(Uo,{scope:e.__scopeMenu,checked:a,children:s.jsx(Wt,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":Pn(a),onSelect:ee(r.onSelect,()=>o.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Ko.displayName=Go;var An="MenuItemIndicator",[Uo,su]=Fe(An,{checked:!1}),Ho=i.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,a=su(An,n);return s.jsx(ct,{present:r||Mt(a.checked)||a.checked===!0,children:s.jsx(ue.span,{...o,ref:t,"data-state":Pn(a.checked)})})});Ho.displayName=An;var au="MenuSeparator",Vo=i.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(ue.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Vo.displayName=au;var iu="MenuArrow",Xo=i.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Bt(n);return s.jsx(Lc,{...o,...r,ref:t})});Xo.displayName=iu;var cu="MenuSub",[Gd,Yo]=Fe(cu),et="MenuSubTrigger",qo=i.forwardRef((e,t)=>{const n=$e(et,e.__scopeMenu),r=dt(et,e.__scopeMenu),o=Yo(et,e.__scopeMenu),a=En(et,e.__scopeMenu),l=i.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:p}=a,d={__scopeMenu:e.__scopeMenu},u=i.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return i.useEffect(()=>u,[u]),i.useEffect(()=>{const f=c.current;return()=>{window.clearTimeout(f),p(null)}},[c,p]),s.jsx(Nn,{asChild:!0,...d,children:s.jsx($o,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":Jo(n.open),...e,ref:Dt(t,o.onTriggerChange),onClick:f=>{e.onClick?.(f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ee(e.onPointerMove,st(f=>{a.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!l.current&&(a.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ee(e.onPointerLeave,st(f=>{u();const m=n.content?.getBoundingClientRect();if(m){const x=n.content?.dataset.side,v=x==="right",h=v?-5:5,y=m[v?"left":"right"],S=m[v?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+h,y:f.clientY},{x:y,y:m.top},{x:S,y:m.top},{x:S,y:m.bottom},{x:y,y:m.bottom}],side:x}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:ee(e.onKeyDown,f=>{const m=a.searchRef.current!=="";e.disabled||m&&f.key===" "||Wl[r.dir].includes(f.key)&&(n.onOpenChange(!0),n.content?.focus(),f.preventDefault())})})})});qo.displayName=et;var Zo="MenuSubContent",Qo=i.forwardRef((e,t)=>{const n=Do(ge,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=$e(ge,e.__scopeMenu),l=dt(ge,e.__scopeMenu),c=Yo(Zo,e.__scopeMenu),p=i.useRef(null),d=fe(t,p);return s.jsx(ot.Provider,{scope:e.__scopeMenu,children:s.jsx(ct,{present:r||a.open,children:s.jsx(ot.Slot,{scope:e.__scopeMenu,children:s.jsx(jn,{id:c.contentId,"aria-labelledby":c.triggerId,...o,ref:d,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{l.isUsingKeyboardRef.current&&p.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ee(e.onFocusOutside,u=>{u.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:ee(e.onEscapeKeyDown,u=>{l.onClose(),u.preventDefault()}),onKeyDown:ee(e.onKeyDown,u=>{const f=u.currentTarget.contains(u.target),m=Gl[l.dir].includes(u.key);f&&m&&(a.onOpenChange(!1),c.trigger?.focus(),u.preventDefault())})})})})})});Qo.displayName=Zo;function Jo(e){return e?"open":"closed"}function Mt(e){return e==="indeterminate"}function Pn(e){return Mt(e)?"indeterminate":e?"checked":"unchecked"}function lu(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function uu(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function du(e,t,n){const o=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let l=uu(e,Math.max(a,0));o.length===1&&(l=l.filter(d=>d!==n));const p=l.find(d=>d.toLowerCase().startsWith(o.toLowerCase()));return p!==n?p:void 0}function fu(e,t){const{x:n,y:r}=e;let o=!1;for(let a=0,l=t.length-1;a<t.length;l=a++){const c=t[a],p=t[l],d=c.x,u=c.y,f=p.x,m=p.y;u>r!=m>r&&n<(f-d)*(r-u)/(m-u)+d&&(o=!o)}return o}function pu(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return fu(n,t)}function st(e){return t=>t.pointerType==="mouse"?e(t):void 0}var mu=Oo,hu=Nn,gu=_o,xu=Lo,yu=Rn,vu=Fo,bu=Wt,wu=zo,Cu=Wo,Su=Ko,Nu=Ho,ku=Vo,Eu=Xo,ju=qo,Ru=Qo,Gt="DropdownMenu",[Au]=at(Gt,[Io]),de=Io(),[Pu,es]=Au(Gt),ts=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:o,defaultOpen:a,onOpenChange:l,modal:c=!0}=e,p=de(t),d=i.useRef(null),[u,f]=Lr({prop:o,defaultProp:a??!1,onChange:l,caller:Gt});return s.jsx(Pu,{scope:t,triggerId:sn(),triggerRef:d,contentId:sn(),open:u,onOpenChange:f,onOpenToggle:i.useCallback(()=>f(m=>!m),[f]),modal:c,children:s.jsx(mu,{...p,open:u,onOpenChange:f,dir:r,modal:c,children:n})})};ts.displayName=Gt;var ns="DropdownMenuTrigger",rs=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=e,a=es(ns,n),l=de(n);return s.jsx(hu,{asChild:!0,...l,children:s.jsx(ue.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:Dt(t,a.triggerRef),onPointerDown:ee(e.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:ee(e.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});rs.displayName=ns;var Mu="DropdownMenuPortal",os=e=>{const{__scopeDropdownMenu:t,...n}=e,r=de(t);return s.jsx(gu,{...r,...n})};os.displayName=Mu;var ss="DropdownMenuContent",as=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=es(ss,n),a=de(n),l=i.useRef(!1);return s.jsx(xu,{id:o.contentId,"aria-labelledby":o.triggerId,...a,...r,ref:t,onCloseAutoFocus:ee(e.onCloseAutoFocus,c=>{l.current||o.triggerRef.current?.focus(),l.current=!1,c.preventDefault()}),onInteractOutside:ee(e.onInteractOutside,c=>{const p=c.detail.originalEvent,d=p.button===0&&p.ctrlKey===!0,u=p.button===2||d;(!o.modal||u)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});as.displayName=ss;var Iu="DropdownMenuGroup",Tu=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=de(n);return s.jsx(yu,{...o,...r,ref:t})});Tu.displayName=Iu;var Ou="DropdownMenuLabel",is=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=de(n);return s.jsx(vu,{...o,...r,ref:t})});is.displayName=Ou;var Du="DropdownMenuItem",cs=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=de(n);return s.jsx(bu,{...o,...r,ref:t})});cs.displayName=Du;var _u="DropdownMenuCheckboxItem",ls=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=de(n);return s.jsx(wu,{...o,...r,ref:t})});ls.displayName=_u;var Lu="DropdownMenuRadioGroup",Fu=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=de(n);return s.jsx(Cu,{...o,...r,ref:t})});Fu.displayName=Lu;var $u="DropdownMenuRadioItem",us=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=de(n);return s.jsx(Su,{...o,...r,ref:t})});us.displayName=$u;var zu="DropdownMenuItemIndicator",ds=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=de(n);return s.jsx(Nu,{...o,...r,ref:t})});ds.displayName=zu;var Bu="DropdownMenuSeparator",fs=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=de(n);return s.jsx(ku,{...o,...r,ref:t})});fs.displayName=Bu;var Wu="DropdownMenuArrow",Gu=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=de(n);return s.jsx(Eu,{...o,...r,ref:t})});Gu.displayName=Wu;var Ku="DropdownMenuSubTrigger",ps=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=de(n);return s.jsx(ju,{...o,...r,ref:t})});ps.displayName=Ku;var Uu="DropdownMenuSubContent",ms=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=de(n);return s.jsx(Ru,{...o,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ms.displayName=Uu;var Hu=ts,Vu=rs,Xu=os,hs=as,gs=is,xs=cs,ys=ls,vs=us,bs=ds,ws=fs,Cs=ps,Ss=ms;function Ns(e){const t=[];return e.forEach(n=>{n&&(Array.isArray(n)?t.push(...Ns(n)):t.push(String(n)))}),t}function Ae(...e){return Ns(e).filter(t=>t.trim().length>0).join(" ")}const Yu=Hu,qu=Vu,Zu=i.forwardRef(({className:e,inset:t,children:n,...r},o)=>s.jsxs(Cs,{ref:o,className:Ae("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-slate-800/60 data-[state=open]:bg-slate-800/60",t&&"pl-8",e),...r,children:[n,s.jsx(ra,{className:"ml-auto h-4 w-4"})]}));Zu.displayName=Cs.displayName;const Qu=i.forwardRef(({className:e,...t},n)=>s.jsx(Ss,{ref:n,className:Ae("z-50 min-w-[8rem] overflow-hidden rounded-md border border-slate-800/70 bg-slate-950/90 p-1 text-sm shadow-lg backdrop-blur-xl",e),...t}));Qu.displayName=Ss.displayName;const ks=i.forwardRef(({className:e,sideOffset:t=8,...n},r)=>s.jsx(Xu,{children:s.jsx(hs,{ref:r,sideOffset:t,className:Ae("z-50 min-w-[10rem] overflow-hidden rounded-xl border border-white/8 bg-slate-950/95 p-1 text-sm shadow-xl backdrop-blur-xl",e),...n})}));ks.displayName=hs.displayName;const Es=i.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(xs,{ref:r,className:Ae("relative flex cursor-default select-none items-center rounded-md px-2 py-1.5 text-sm outline-none transition-colors focus:bg-slate-800/60 focus:text-slate-50 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Es.displayName=xs.displayName;const Ju=i.forwardRef(({className:e,children:t,checked:n,...r},o)=>s.jsxs(ys,{ref:o,className:Ae("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-slate-800/60 focus:text-slate-50 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(bs,{children:s.jsx(pn,{className:"h-4 w-4"})})}),t]}));Ju.displayName=ys.displayName;const ed=i.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(vs,{ref:r,className:Ae("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-slate-800/60 focus:text-slate-50 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(bs,{children:s.jsx(ia,{className:"h-2 w-2 fill-current"})})}),t]}));ed.displayName=vs.displayName;const js=i.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(gs,{ref:r,className:Ae("px-2 py-1.5 text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",t&&"pl-8",e),...n}));js.displayName=gs.displayName;const Rs=i.forwardRef(({className:e,...t},n)=>s.jsx(ws,{ref:n,className:Ae("-mx-1 my-1 h-px bg-slate-800/60",e),...t}));Rs.displayName=ws.displayName;const As=({className:e,...t})=>s.jsx("span",{className:Ae("ml-auto text-xs tracking-widest text-slate-500",e),...t});As.displayName="DropdownMenuShortcut";const rn=e=>({file:!1,ai:!1,tools:!1,...e});function Kd({onAgentToggle:e,onCommandPalette:t,onClipperToggle:n,onReaderToggle:r}){const{activeId:o}=_e(),a=Sr(),l=In(w=>w.toggle),c=In(w=>w.open),p=Ts(w=>w.reset),d=Os(w=>w.open),u=ze(w=>w.tor),f=ze(w=>w.vpn),m=ze(w=>w.startTor),x=ze(w=>w.stopTor),v=ze(w=>w.newTorIdentity),h=ze(w=>w.checkVpn),y=i.useRef(null),[S,A]=i.useState(!1),[k,R]=i.useState(!1),[P,L]=i.useState(!1),[C,O]=i.useState(0),[I,G]=i.useState(!1),[F,q]=i.useState(rn()),[Y,V]=i.useState(!1),ne=i.useRef(null),K=i.useCallback(()=>{q(rn())},[]),J=i.useCallback(w=>j=>{q(W=>j?rn({[w]:!0}):!j&&W[w]?{...W,[w]:!1}:W)},[]),_=i.useRef({activeId:o??null,canGoBack:!1,canGoForward:!1}),b=i.useRef(null);i.useEffect(()=>{_.current={activeId:o??null,canGoBack:S,canGoForward:k}},[o,S,k]),i.useEffect(()=>{const w=j=>{(j.metaKey||j.ctrlKey)&&j.shiftKey&&j.key.toLowerCase()==="g"&&(j.preventDefault(),l())};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[l]),i.useEffect(()=>{const w=j=>{if(!(j.metaKey||j.ctrlKey)||j.shiftKey||j.altKey||j.key.toLowerCase()!=="k")return;const B=j.target?.hasAttribute("data-omnibox-input");j.preventDefault(),K(),requestAnimationFrame(()=>{y.current?.focus?.()}),B||document.activeElement?.blur?.()};return window.addEventListener("keydown",w,{capture:!0}),()=>window.removeEventListener("keydown",w,{capture:!0})},[K]),i.useEffect(()=>()=>{b.current&&(clearTimeout(b.current),b.current=null)},[]),i.useEffect(()=>{if(!Y)return;const w={capture:!0},j=W=>{ne.current&&(ne.current.contains(W.target)||V(!1))};return document.addEventListener("mousedown",j,w),()=>document.removeEventListener("mousedown",j,w)},[Y]),i.useEffect(()=>{if(!(F.file||F.ai||F.tools))return;const j=B=>{B.key==="Escape"&&K()},W={capture:!0};return window.addEventListener("keydown",j,W),()=>window.removeEventListener("keydown",j,W)},[K,F]),he("downloads:started",()=>{O(w=>w+1)},[]),he("downloads:done",()=>{O(w=>Math.max(0,w-1))},[]),he("downloads:progress",()=>{},[]),he("agent:plan",()=>{G(!0)},[]),i.useEffect(()=>{const w=async()=>{if(!window.ipc||typeof window.ipc.invoke!="function"){setTimeout(w,500);return}try{const j=await U.downloads.list(),W=Array.isArray(j)?j.filter(B=>["downloading","verifying","paused"].includes(B.status)).length:0;O(W)}catch{}};setTimeout(w,300)},[]);const z=i.useCallback(async()=>{const{activeId:w}=_.current;if(w)try{await U.tabs.goBack(w)}catch(j){console.error("Failed to go back:",j)}},[]),Z=i.useCallback(async()=>{const{activeId:w}=_.current;if(w)try{await U.tabs.goForward(w)}catch(j){console.error("Failed to go forward:",j)}},[]),E=i.useCallback(async()=>{const{activeId:w}=_.current;if(w){b.current&&(clearTimeout(b.current),b.current=null),L(!0);try{await U.tabs.reload(w),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{L(!1),b.current=null},1e3)}catch(j){console.error("Failed to refresh:",j),L(!1)}}},[]),D=i.useCallback(async()=>{try{const w=await U.tabs.create("about:blank");(w&&typeof w=="object"&&"success"in w?w.success!==!1:!!w)||On({url:"about:blank",title:"New Tab"})}catch(w){console.error("Failed to open a new tab:",w),On({url:"about:blank",title:"New Tab"})}},[]);i.useEffect(()=>{const w=j=>{const{activeId:W,canGoBack:B,canGoForward:oe}=_.current,le=navigator.platform.toUpperCase().indexOf("MAC")>=0?j.metaKey:j.ctrlKey,Mn=j.altKey,Kt=j.target;if(!(Kt.tagName==="INPUT"||Kt.tagName==="TEXTAREA"||Kt.isContentEditable)){if((le||Mn)&&j.key==="ArrowLeft"&&!j.shiftKey){B&&W&&(j.preventDefault(),z());return}if((le||Mn)&&j.key==="ArrowRight"&&!j.shiftKey){oe&&W&&(j.preventDefault(),Z());return}if(le&&j.key.toLowerCase()==="r"&&!j.shiftKey){W&&(j.preventDefault(),E());return}if(j.key==="F5"&&W&&(j.preventDefault(),E()),le&&(j.key==="+"||j.key==="=")&&W){j.preventDefault(),U.tabs.zoomIn(W).catch(console.error);return}if(le&&j.key==="-"&&W){j.preventDefault(),U.tabs.zoomOut(W).catch(console.error);return}if(le&&j.key==="0"&&W){j.preventDefault(),U.tabs.zoomReset(W).catch(console.error);return}if(j.key==="F12"||le&&j.shiftKey&&j.key.toLowerCase()==="i"){W&&(j.preventDefault(),U.tabs.devtools(W).catch(console.error));return}}};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[z,Z,E]),he("tabs:navigation-state",w=>{w.tabId===o&&(A(w.canGoBack),R(w.canGoForward))},[o]),i.useEffect(()=>{if(!o){A(!1),R(!1);return}(async()=>{try{await U.tabs.list()}catch(j){console.error("Failed to update navigation state:",j)}})()},[o]);const H=async()=>{if(o)try{const w=await U.tabs.screenshot(o);w?.success?console.log("Screenshot saved:",w.path):console.error("Screenshot failed:",w?.error)}catch(w){console.error("Failed to capture screenshot:",w)}},Q=async()=>{if(o)try{const w=await U.tabs.pip(o,!0);w?.success||console.warn("PIP request failed:",w?.error||"No video element found")}catch(w){console.error("Failed to enter PIP:",w)}},ie=i.useCallback(async()=>{if(o)try{await U.tabs.find(o)}catch(w){console.error("Failed to open find:",w)}},[o]),te=i.useCallback(async()=>{if(o)try{await U.tabs.devtools(o)}catch(w){console.error("Failed to toggle DevTools:",w)}},[o]),ae=i.useCallback(w=>{if(w.type!=="item"||w.disabled)return;const j=w.onSelect();j&&typeof j.then=="function"?j.catch(W=>{console.error(`Failed to run menu action "${w.key}"`,W)}).finally(()=>K()):K()},[K]),g=typeof navigator<"u"&&navigator.platform?.toUpperCase().includes("MAC"),N=i.useMemo(()=>{const w=C>0?`Downloads (${Math.min(C,99)})`:"Downloads";return[{type:"label",key:"file-label",label:"Workspace & tabs",description:"Open and manage the current browsing session"},{type:"item",key:"file-home",icon:Kn,label:"Go home",shortcut:g?"⌘ 1":"Alt 1",onSelect:()=>a("/")},{type:"item",key:"file-new-tab",icon:It,label:"New tab",shortcut:g?"⌘ T":"Ctrl T",onSelect:D},{type:"item",key:"file-back",icon:Gn,label:"Back",shortcut:g?"⌘ ←":"Alt ←",disabled:!S,onSelect:z},{type:"item",key:"file-forward",icon:Bn,label:"Forward",shortcut:g?"⌘ →":"Alt →",disabled:!k,onSelect:Z},{type:"item",key:"file-refresh",icon:vt,label:P?"Refreshing…":"Refresh",shortcut:g?"⌘ R":"Ctrl R",disabled:!o,onSelect:E},{type:"separator",key:"file-separator"},{type:"item",key:"file-downloads",icon:Ar,label:w,onSelect:()=>a("/downloads")},{type:"item",key:"file-settings",icon:na,label:"Settings",shortcut:g?"⌘ ,":"Ctrl ,",onSelect:()=>a("/settings")}]},[o,S,k,C,z,Z,D,E,P,g,a]),M=i.useMemo(()=>[{type:"label",key:"ai-label",label:"Intelligence",description:"Ask Redix and automate the tab in real time"},{type:"item",key:"ai-ask",icon:Xe,label:"Ask Redix",shortcut:g?"⌘ K":"Ctrl K",onSelect:()=>t()},{type:"item",key:"ai-console",icon:Wn,label:"Agent console",shortcut:g?"⌘ ⇧ A":"Ctrl ⇧ A",onSelect:()=>e()},{type:"separator",key:"ai-separator"},{type:"item",key:"ai-clip",icon:Us,label:"Clip highlight",shortcut:g?"⌘ ⇧ H":"Ctrl ⇧ H",onSelect:()=>n()},{type:"item",key:"ai-reader",icon:Dn,label:"Reader mode",shortcut:g?"⌘ ⇧ R":"Ctrl ⇧ R",onSelect:()=>r()},{type:"item",key:"ai-watchers",icon:oa,label:"Page watchers",onSelect:()=>a("/watchers")},{type:"item",key:"ai-tab-graph",icon:Ue,label:"Tab DNA overlay",shortcut:g?"⌘ ⇧ G":"Ctrl ⇧ G",onSelect:()=>void c()}],[g,a,e,n,t,r,c]),T=i.useMemo(()=>[{type:"label",key:"tools-label",label:"Utilities & privacy",description:"One-tap tools and live privacy controls"},{type:"item",key:"tools-find",icon:Ke,label:"Find in page",shortcut:g?"⌘ F":"Ctrl F",disabled:!o,onSelect:ie},{type:"item",key:"tools-screenshot",icon:Pr,label:"Capture screenshot",disabled:!o,onSelect:H},{type:"item",key:"tools-pip",icon:da,label:"Picture-in-Picture",disabled:!o,onSelect:Q},{type:"item",key:"tools-devtools",icon:ca,label:"Toggle DevTools",shortcut:g?"⌘ ⇧ I":"Ctrl ⇧ I",disabled:!o,onSelect:te},{type:"separator",key:"tools-separator-utilities"},{type:"item",key:"tools-consent",icon:we,label:"Consent ledger",onSelect:()=>void d()},{type:"item",key:"tools-onboarding",icon:_n,label:"Replay onboarding tour",onSelect:()=>p()},{type:"item",key:"tools-network-controls",icon:Tn,label:"Network controls",onSelect:()=>{document.querySelector("[data-network-button]")?.click()}},{type:"item",key:"tools-shields",icon:we,label:"Privacy shields",onSelect:()=>{document.querySelector("[data-shields-button]")?.click()}},{type:"item",key:"tools-tor",icon:we,label:u.running?"Disable Tor":"Enable Tor",onSelect:()=>{u.running?x():m()}},{type:"item",key:"tools-new-identity",icon:vt,label:"Tor: New identity",disabled:!u.running||!!u.stub,onSelect:()=>{u.running&&!u.stub&&v()}},{type:"item",key:"tools-vpn",icon:Tn,label:f.connected?`VPN: ${f.type?f.type.toUpperCase():"Active"}`:"Check VPN status",onSelect:()=>{h()}}],[o,h,ie,Q,H,te,g,d,p,m,x,u,f,v]),X=i.useCallback(w=>w.map(j=>j.type==="label"?s.jsxs(js,{className:"px-3 py-2 text-[10px] uppercase tracking-[0.24em] text-muted/80",children:[s.jsx("div",{className:"font-semibold text-muted/90",children:j.label}),j.description&&s.jsx("div",{className:"mt-1 text-[11px] normal-case tracking-normal text-muted/70",children:j.description})]},j.key):j.type==="separator"?s.jsx(Rs,{},j.key):s.jsxs(Es,{className:"menu-item w-full rounded-lg",disabled:j.disabled,onSelect:()=>ae(j),children:[j.icon?s.jsx(j.icon,{size:16,className:"text-muted"}):null,s.jsx("span",{className:"flex-1 text-left",children:j.label}),j.shortcut&&s.jsx(As,{children:j.shortcut})]},j.key)),[ae]),$=i.useCallback((w,j,W,B)=>{const oe=F[w],se=oe?"text-primary":"text-muted";return s.jsxs(Yu,{open:F[w],onOpenChange:J(w),children:[s.jsx(qu,{asChild:!0,children:s.jsxs(re.button,{type:"button",whileHover:{y:-1},whileTap:{scale:.96},className:`relative flex items-center gap-2 rounded-full px-3 py-1.5 text-sm font-medium transition-all ${oe?"bg-white/12 text-primary shadow-[0_10px_30px_rgba(59,130,246,0.28)]":"text-muted hover:bg-white/10 hover:text-primary"}`,title:`${j} menu`,"data-testid":`nav-menu-${w}`,children:[s.jsx(W,{size:16,className:se}),s.jsx("span",{className:"hidden xl:inline",children:j}),s.jsx(mn,{size:14,className:"hidden md:inline"})]})}),s.jsx(ks,{align:"start",className:"w-64",children:X(B)})]},w)},[J,F,X]),ce=i.useCallback(w=>{ae(w),V(!1)},[ae]);return s.jsx("div",{className:"drag border-b border-white/5 bg-surface/95 supports-[backdrop-filter:blur(12px)]:backdrop-blur-xl shadow-[0_12px_40px_rgba(15,23,42,0.45)] text-primary transition-colors",children:s.jsxs("div",{className:"no-drag flex flex-wrap items-center gap-3 px-3 py-2",children:[s.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/5 bg-white/5 px-3 py-1 shadow-[inset_0_1px_0_rgba(255,255,255,0.08)]",children:[s.jsx(wa,{}),s.jsx(ka,{compact:!0}),s.jsxs("div",{className:"hidden 2xl:flex items-center gap-2",children:[s.jsx(Ra,{compact:!0}),s.jsx(Pa,{compact:!0})]})]}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 rounded-full border border-white/5 bg-white/5 px-1.5 py-0.5 shadow-[inset_0_1px_0_rgba(255,255,255,0.08)]",children:[s.jsx(re.button,{type:"button",onClick:z,disabled:!S,whileHover:S?{scale:1.05}:{},whileTap:S?{scale:.95}:{},className:`p-1.5 rounded-full transition-colors ${S?"text-primary hover:bg-white/10 cursor-pointer":"text-muted/40 cursor-not-allowed opacity-50"}`,title:"Back (Alt+←)","aria-label":"Go back",children:s.jsx(Gn,{size:16})}),s.jsx(re.button,{type:"button",onClick:Z,disabled:!k,whileHover:k?{scale:1.05}:{},whileTap:k?{scale:.95}:{},className:`p-1.5 rounded-full transition-colors ${k?"text-primary hover:bg-white/10 cursor-pointer":"text-muted/40 cursor-not-allowed opacity-50"}`,title:"Forward (Alt+→)","aria-label":"Go forward",children:s.jsx(Bn,{size:16})}),s.jsx(re.button,{type:"button",onClick:E,disabled:!o,whileHover:o?{scale:1.05,rotate:P?180:0}:{},whileTap:o?{scale:.95}:{},className:`p-1.5 rounded-full transition-colors ${o?"text-primary hover:bg-white/10 cursor-pointer":"text-muted/40 cursor-not-allowed opacity-50"}`,title:"Reload (Ctrl+R)","aria-label":"Reload page",children:s.jsx(vt,{size:16,className:P?"animate-spin":""})}),s.jsx(re.button,{type:"button",onClick:()=>a("/"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"hidden md:flex p-1.5 rounded-full text-primary hover:bg-white/10 transition-colors cursor-pointer",title:"Go home (Alt+1)","aria-label":"Go to home",children:s.jsx(Kn,{size:16})})]}),s.jsx("div",{className:"flex-1 min-w-[220px] basis-full sm:basis-auto","data-onboarding":"omnibox",children:s.jsxs("div",{className:"relative",children:[s.jsx(Dr,{ref:y,onCommandPalette:t}),s.jsx(Na,{})]})}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-end flex-1",children:[s.jsxs("div",{className:"hidden xl:flex items-center gap-1.5",children:[$("file","File",Dn,N),$("ai","AI",Xe,M),$("tools","Tools",_n,T)]}),s.jsxs("div",{className:"flex items-center gap-1.5 rounded-full border border-white/5 bg-white/5 px-2 py-1 shadow-[inset_0_1px_0_rgba(255,255,255,0.08)]",children:[s.jsxs(re.button,{onClick:e,"aria-label":`Agent console${I?" (active)":""}`,whileHover:{scale:1.05},whileTap:{scale:.95},"data-testid":"nav-agent-button",className:`relative p-2 rounded-full transition-colors ${I?"bg-primary/15 text-primary shadow-[0_0_18px_rgba(59,130,246,0.35)]":"text-muted hover:bg-white/10 hover:text-primary"}`,title:"Agent Console (⌘⇧A)",children:[s.jsx(Wn,{size:18}),I&&s.jsx(re.span,{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-green-400 rounded-full border-2 border-gray-900",animate:{scale:[1,1.2,1],opacity:[1,.8,1]},transition:{duration:2,repeat:1/0},"aria-label":"Agent is active"})]}),s.jsx("div",{className:"hidden lg:flex items-center gap-1",children:s.jsx(La,{})}),s.jsxs("div",{className:"hidden 2xl:flex items-center gap-1",children:[s.jsx(Fa,{}),s.jsx($a,{})]}),s.jsx(Ta,{})]}),s.jsxs("div",{className:"xl:hidden relative",ref:ne,children:[s.jsx("button",{type:"button",onClick:()=>V(w=>!w),className:"p-2 rounded-full text-muted transition-colors hover:bg-white/10 hover:text-primary","aria-label":"Navigation menu","aria-expanded":Y,"data-testid":"nav-compact-button",title:"Navigation menu",children:s.jsx(Ds,{size:18})}),s.jsx(Oe,{children:Y&&s.jsxs(s.Fragment,{children:[s.jsx(re.button,{type:"button","aria-label":"Close navigation menu",className:"fixed inset-0 z-40 bg-transparent pointer-events-auto focus:outline-none",onClick:()=>V(!1),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},"compact-backdrop"),s.jsx(re.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18},className:"absolute right-0 top-full mt-2 w-64 rounded-2xl border border-white/5 bg-surface-elevated/95 shadow-[0_24px_60px_rgba(15,23,42,0.45)] backdrop-blur-xl z-50 py-2",children:[{key:"file",label:"File",entries:N},{key:"ai",label:"AI",entries:M},{key:"tools",label:"Tools",entries:T}].map(w=>{const j=w.entries.filter(W=>W.type==="item");return j.length===0?null:s.jsxs("div",{className:"px-3 py-2",children:[s.jsx("div",{className:"px-1 pb-1 text-[10px] uppercase tracking-[0.18em] text-muted/70",children:w.label}),s.jsx("div",{className:"space-y-1",children:j.map(W=>s.jsxs("button",{type:"button",onClick:()=>ce(W),disabled:W.disabled,className:`menu-item w-full rounded-xl ${W.disabled?"opacity-40 cursor-not-allowed":""}`,children:[W.icon?s.jsx(W.icon,{size:16,className:"text-muted"}):null,s.jsx("span",{className:"flex-1 text-left",children:W.label}),W.shortcut&&s.jsx("kbd",{className:"text-xs text-muted border border-surface rounded px-1.5 py-0.5",children:W.shortcut})]},W.key))})]},w.key)})},"compact-menu")]})})]})]})]})})}export{Kd as TopNav};
//# sourceMappingURL=TopNav-DzgVy9Hm.js.map

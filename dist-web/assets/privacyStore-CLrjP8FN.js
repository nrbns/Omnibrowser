import{c as s}from"./createLucideIcon-BHoZ2X8H.js";import{c}from"./formatDistanceToNow-CwTn1k5x.js";import{i as a}from"./index-DMKJqC5Z.js";const u=s("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),e={running:!1,bootstrapped:!1,circuitEstablished:!1,progress:0,stub:!1,error:null,loading:!1,lastChecked:null},i={connected:!1,type:void 0,name:void 0,stub:!1,loading:!1,lastChecked:null},f=c((o,t)=>({tor:e,vpn:i,async refreshTor(){o(r=>({tor:{...r.tor,loading:!0}}));try{const r=await a.tor.status();o({tor:{running:!!r?.running,bootstrapped:!!r?.bootstrapped,circuitEstablished:!!r?.circuitEstablished,progress:typeof r?.progress=="number"?r.progress:0,stub:!!r?.stub,error:typeof r?.error=="string"?r.error:null,loading:!1,lastChecked:Date.now()}})}catch(r){o({tor:{...t().tor,loading:!1,error:r instanceof Error?r.message:String(r),lastChecked:Date.now()}})}},async refreshVpn(){o(r=>({vpn:{...r.vpn,loading:!0}}));try{const r=await a.vpn.status();o({vpn:{connected:!!r?.connected,type:r?.type??void 0,name:r?.name??void 0,stub:!!r?.stub,loading:!1,lastChecked:Date.now()}})}catch{o({vpn:{...t().vpn,loading:!1,lastChecked:Date.now()}})}},async startTor(){o(r=>({tor:{...r.tor,loading:!0,error:null}}));try{const r=await a.tor.start();await t().refreshTor(),r?.stub&&o(n=>({tor:{...n.tor,stub:!0,error:r?.warning??"Tor binary not found; running in stub mode."}}))}catch(r){o({tor:{...e,error:r instanceof Error?r.message:String(r),loading:!1,lastChecked:Date.now()}})}},async stopTor(){o(r=>({tor:{...r.tor,loading:!0}}));try{await a.tor.stop()}catch(r){o({tor:{...t().tor,error:r instanceof Error?r.message:String(r)}})}finally{o({tor:{...e,lastChecked:Date.now()}})}},async newTorIdentity(){try{await a.tor.newIdentity(),await t().refreshTor()}catch(r){o({tor:{...t().tor,error:r instanceof Error?r.message:String(r)}})}},async checkVpn(){o(r=>({vpn:{...r.vpn,loading:!0}}));try{const r=await a.vpn.check();o({vpn:{connected:!!r?.connected,type:r?.type??void 0,name:r?.name??void 0,stub:!!r?.stub,loading:!1,lastChecked:Date.now()}})}catch{o({vpn:{...t().vpn,loading:!1,lastChecked:Date.now()}})}}}));export{u as W,f as u};
//# sourceMappingURL=privacyStore-CLrjP8FN.js.map

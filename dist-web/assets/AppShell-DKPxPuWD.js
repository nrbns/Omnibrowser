const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TopNav-D0Oba9Rq.js","./index-DMKJqC5Z.js","./index-BdbHRHlx.css","./formatDistanceToNow-CwTn1k5x.js","./createLucideIcon-BHoZ2X8H.js","./privacyStore-CLrjP8FN.js","./appStore-YdLSx3oj.js","./brain-qT2viXus.js","./trending-up-BuEY6VB4.js","./gamepad-2-B3k15_2Z.js","./zap-DnPrAbXN.js","./proxy-B-PlLRqe.js","./ipc-events-B-mtt1te.js","./use-ipc-event-BWqwbbDc.js","./containerStore-4g5QdXcB.js","./debounce-D_hglKv1.js","./lock-QlIpU5_k.js","./globe-B55P551M.js","./shield-DNuGHzo8.js","./search-FaAd99m9.js","./index-BE3YK0eV.js","./sparkles-C9aT6jfb.js","./clock-CAio9RVc.js","./plus-BEevIG6L.js","./check-CELdvzc1.js","./x-GAlOzW-g.js","./profileStore-r6TNFURV.js","./download-ukpL1WLs.js","./eye-off-cnqR3OyA.js","./sun-DXqxPM3_.js","./settings-BScQ-4A5.js","./network-gkI0Eu1G.js","./circle-check-big-BrC851lQ.js","./circle-x-DycYTBkH.js","./refresh-cw-Ck1GEe8j.js","./play-BHREYUo1.js","./file-text-BKQmjIDI.js","./arrow-right--nONUAkJ.js","./bot-Dsx8taB7.js","./activity-BJ2_0ciE.js","./Portal-DMoOea_i.js","./triangle-alert-BHl0FKa7.js","./TabStrip-Br9p_R42.js","./eye-CLZIWIZg.js","./copy-DdRvNS-U.js","./moon-star-BJaCkZ8v.js","./circle-play-DjXo3Y2F.js","./RightPanel-pEVp9wV4.js","./circle-check-DeRzGwMx.js","./share-2-Ble4ClGi.js","./cloud-BOyeZpcc.js","./shield-check-x87xpyVa.js","./external-link-SQYWbOuw.js","./send-BMYBEDZg.js","./shield-alert-BH6vxp5a.js","./trash-2-SwMuWoHl.js","./BottomStatus-CFNjN9-z.js","./mic-ByZ6VKGa.js","./cpu-Q6bTr-yL.js","./CommandPalette-CO10TetE.js","./PermissionPrompt-Cu2-Ey5r.js","./bell-CTGCOXiF.js","./ConsentPrompt-EeOpq4Wj.js","./AgentOverlay-DhSTt0ux.js","./ClipperOverlay-v2O7xFb6.js","./ReaderOverlay-rzQUD3nE.js","./book-open-B5pJVFij.js","./refresh-ccw-1e1iPk3G.js","./TabGraphOverlay-B8naGHNZ.js","./ConsentDashboard-CKgA7ZoF.js","./OnboardingTour-DZODMc7B.js"])))=>i.map(i=>d[i]);
import{i as f,r as n,a as be,j as e,R as h,O as se,b as ne,_ as x}from"./index-DMKJqC5Z.js";import{i as re}from"./ipc-events-B-mtt1te.js";import{u as ae}from"./use-ipc-event-BWqwbbDc.js";import{c as U,L as oe,u as $,f as xe}from"./formatDistanceToNow-CwTn1k5x.js";import{P as w}from"./Portal-DMoOea_i.js";import{G as ve}from"./globe-B55P551M.js";import{c as ge}from"./createLucideIcon-BHoZ2X8H.js";import{T as ye}from"./triangle-alert-BHl0FKa7.js";const we=ge("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),je=U((t,a)=>({visible:!1,loading:!1,error:null,data:null,focusedTabId:null,async open(){a().visible||t({visible:!0}),await a().refresh()},close(){t({visible:!1,focusedTabId:null})},async toggle(){a().visible?t({visible:!1,focusedTabId:null}):(t({visible:!0}),await a().refresh())},async refresh(){t({loading:!0,error:null});try{const o=await f.graph.tabs();if(!o||typeof o!="object")throw new Error("Graph data unavailable");t({data:o,loading:!1,error:null})}catch(o){t({loading:!1,error:o instanceof Error?o.message:String(o)})}},setFocusedTab(o){t({focusedTabId:o})},async focusTab(o){t({visible:!0,focusedTabId:o}),await a().refresh()}})),Se=["ob://","about:","chrome://","edge://","app://","omnibrowser://"];function Ee(t){return t?Se.some(a=>t.startsWith(a)):!0}function Ne({tab:t,overlayActive:a}){const o=n.useRef(null),i=n.useRef(null),d=n.useRef(null),y=be(),[N,v]=n.useState(!1),[S,C]=n.useState(null),u=n.useMemo(()=>Ee(t?.url)?null:t?.url??"about:blank",[t?.url]);return n.useEffect(()=>{if(!y||!i.current||!u)return;const l=i.current,E=()=>{v(!0),C(null)},R=()=>{v(!1)},k=()=>{v(!1),C(null)},T=G=>{v(!1),C("Failed to load this page. Please check the URL or your connection.")};return l.addEventListener("did-start-loading",E),l.addEventListener("did-stop-loading",R),l.addEventListener("dom-ready",k),l.addEventListener("did-fail-load",T),()=>{l.removeEventListener("did-start-loading",E),l.removeEventListener("did-stop-loading",R),l.removeEventListener("dom-ready",k),l.removeEventListener("did-fail-load",T)}},[y,u]),n.useEffect(()=>{if(!u){v(!1),C(null);return}if(y){const l=i.current;if(!l)return;try{l.getURL?.()!==u&&(v(!0),l.setAttribute("src",u))}catch(E){console.warn("[TabContentSurface] Failed to update webview src",E)}}else{const l=d.current;if(!l)return;l.src!==u&&(v(!0),l.src=u)}},[y,u]),u?e.jsxs("div",{ref:o,className:`relative h-full w-full bg-slate-950 ${a?"pointer-events-none":""}`,children:[y?e.jsx("webview",{ref:i,className:"h-full w-full",allowpopups:"true",autosize:"on",disablewebsecurity:"false"}):e.jsx("iframe",{ref:d,className:"h-full w-full",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups",allow:"fullscreen",title:t?.title??"Tab content"}),N&&e.jsx("div",{className:"pointer-events-none absolute inset-0 z-10 flex items-center justify-center bg-slate-950/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-3 rounded-full border border-slate-700/60 bg-slate-900/80 px-4 py-2 text-sm text-slate-200 shadow-lg shadow-black/40",children:[e.jsx(oe,{className:"h-4 w-4 animate-spin text-emerald-300"}),"Loading ",new URL(u).hostname,"…"]})}),S&&e.jsx("div",{className:"pointer-events-none absolute inset-0 z-10 flex items-center justify-center bg-slate-950/80 backdrop-blur-sm",children:e.jsx("div",{className:"max-w-md rounded-2xl border border-amber-400/40 bg-amber-500/15 px-5 py-4 text-center text-sm text-amber-100 shadow-lg shadow-black/50",children:S})})]}):e.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center gap-4 bg-slate-950/40 text-slate-400 backdrop-blur",children:[e.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-slate-900/60",children:e.jsx(ve,{size:28,className:"text-slate-500"})}),e.jsx("div",{className:"max-w-sm text-center text-sm leading-relaxed text-slate-300/80",children:"Open a web page or select a research workspace to start browsing. Internal Omni surfaces continue to render on the right."})]})}const B="omnibrowser:onboarding:completed",q={isCompleted(){try{return window.localStorage.getItem(B)==="1"}catch{return!1}},setCompleted(){try{window.localStorage.setItem(B,"1")}catch{}},clear(){try{window.localStorage.removeItem(B)}catch{}}},z=U(t=>({visible:!1,start:()=>t({visible:!0}),finish:()=>{q.setCompleted(),t({visible:!1})},reset:()=>{q.clear(),t({visible:!0})}}));typeof window<"u"&&(window.__STORE={...window.__STORE,onboarding:z});async function _e(t){const a={};t.type&&t.type!=="all"&&(a.type=t.type),t.status&&t.status!=="all"&&(t.status==="pending"?a.approved=!1:(t.status==="approved"||t.status==="revoked")&&(a.approved=!0));const o=await f.consent.list(Object.keys(a).length>0?a:void 0);if(!Array.isArray(o))return[];let i=o;return t.status==="pending"?i=i.filter(d=>!d.approved):t.status==="approved"?i=i.filter(d=>d.approved&&!d.revokedAt):t.status==="revoked"&&(i=i.filter(d=>!!d.revokedAt)),i.sort((d,y)=>y.timestamp-d.timestamp)}const Ce=U((t,a)=>({visible:!1,loading:!1,error:null,filter:{type:"all",status:"all"},records:[],async open(){a().visible||t({visible:!0}),await a().refresh()},close(){t({visible:!1})},async toggle(){a().visible?t({visible:!1}):(t({visible:!0}),await a().refresh())},async refresh(){t({loading:!0,error:null});try{const o=await _e(a().filter);t({records:o,loading:!1,error:null})}catch(o){t({loading:!1,error:o instanceof Error?o.message:String(o)})}},async setFilter(o){t(i=>({filter:{...i.filter,...o}})),await a().refresh()},async approve(o){await f.consent.approve(o),await a().refresh()},async revoke(o){await f.consent.revoke(o),await a().refresh()}}));class b extends h.Component{constructor(a){super(a),this.state={hasError:!1,copyStatus:null,copying:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,o){console.error(`ErrorBoundary caught error${this.props.componentName?` in ${this.props.componentName}`:""}:`,a,o),this.setState({error:a,errorInfo:o.componentStack??void 0})}handleReload=()=>{window.location.reload()};handleOpenLogs=async()=>{try{const a=await f.diagnostics.openLogs();this.setState({copyStatus:a?.success?"success":"error",copyMessage:a?.success?"Logs folder opened.":"Unable to open logs folder.",copying:!1})}catch(a){console.error("Failed to open logs folder from error boundary:",a),this.setState({copyStatus:"error",copyMessage:"Failed to open logs folder.",copying:!1})}};handleCopyDiagnostics=async()=>{if(!this.state.copying){this.setState({copying:!0,copyStatus:null,copyMessage:void 0});try{const a=await f.diagnostics.copyDiagnostics();a?.diagnostics&&navigator?.clipboard?.writeText?(await navigator.clipboard.writeText(a.diagnostics),this.setState({copyStatus:"success",copyMessage:"Diagnostics copied to clipboard.",copying:!1})):(this.setState({copyStatus:"error",copyMessage:"Clipboard unavailable. Diagnostics logged to console.",copying:!1}),console.info("[Diagnostics] Summary:",a?.diagnostics))}catch(a){console.error("Failed to copy diagnostics from error boundary:",a),this.setState({copyStatus:"error",copyMessage:"Failed to copy diagnostics.",copying:!1})}}};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"flex min-h-screen w-full items-center justify-center bg-slate-950 px-6 py-12 text-gray-100",children:e.jsxs("div",{className:"w-full max-w-xl space-y-5 rounded-2xl border border-slate-800 bg-slate-900/70 p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-full bg-red-500/20 p-2 text-red-200",children:e.jsx(ye,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg font-semibold text-red-200",children:["Something went wrong",this.props.componentName?` inside ${this.props.componentName}`:"","."]}),this.state.error?.message&&e.jsx("p",{className:"mt-2 text-sm text-red-100/80",children:this.state.error.message}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Try reloading the interface. You can also copy diagnostics or inspect the latest logs to share with the team."})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{onClick:this.handleReload,className:"rounded-lg border border-blue-500/50 bg-blue-500/10 px-4 py-2 text-sm font-medium text-blue-100 hover:border-blue-500/70 transition-colors",children:"Reload app"}),e.jsx("button",{onClick:this.handleCopyDiagnostics,disabled:this.state.copying,className:`rounded-lg border px-4 py-2 text-sm font-medium transition-colors ${this.state.copying?"border-indigo-500/30 bg-indigo-500/10 text-indigo-200/60 cursor-wait":"border-indigo-500/50 bg-indigo-500/10 text-indigo-100 hover:border-indigo-500/70"}`,children:this.state.copying?"Copying…":"Copy diagnostics"}),e.jsx("button",{onClick:this.handleOpenLogs,className:"rounded-lg border border-emerald-500/50 bg-emerald-500/10 px-4 py-2 text-sm font-medium text-emerald-100 hover:border-emerald-500/70 transition-colors",children:"Open logs folder"})]}),this.state.copyMessage&&e.jsx("div",{className:`text-sm ${this.state.copyStatus==="success"?"text-emerald-300":"text-red-300"}`,children:this.state.copyMessage}),ne()&&this.state.errorInfo&&e.jsxs("details",{className:"text-xs text-gray-400",children:[e.jsx("summary",{className:"cursor-pointer text-gray-300",children:"Stack trace"}),e.jsx("pre",{className:"mt-2 max-h-48 overflow-auto whitespace-pre-wrap rounded bg-black/40 p-3",children:this.state.errorInfo})]})]})}):this.props.children}}const ke=h.lazy(()=>x(()=>import("./TopNav-D0Oba9Rq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41]),import.meta.url).then(t=>({default:t.TopNav}))),Le=h.lazy(()=>x(()=>import("./TabStrip-Br9p_R42.js"),__vite__mapDeps([42,1,2,3,4,12,20,11,26,14,43,44,29,22,45,40,46,21,25,23,13,17,41]),import.meta.url).then(t=>({default:t.TabStrip}))),Re=h.lazy(()=>x(()=>import("./RightPanel-pEVp9wV4.js"),__vite__mapDeps([47,1,2,13,12,21,4,11,48,33,3,35,49,20,27,34,50,8,51,52,53,39,16,54,28,43,23,44,55,7,25,10,36,18,40,17,41]),import.meta.url).then(t=>({default:t.RightPanel}))),Te=h.lazy(()=>x(()=>import("./BottomStatus-CFNjN9-z.js"),__vite__mapDeps([56,1,2,3,4,13,12,26,16,43,31,11,45,5,40,21,20,57,58,39,7,53,18,34,41,25,36]),import.meta.url).then(t=>({default:t.BottomStatus}))),De=h.lazy(()=>x(()=>import("./CommandPalette-CO10TetE.js"),__vite__mapDeps([59,1,2,6,3,4,14,12,11,19,37,21,22]),import.meta.url).then(t=>({default:t.CommandPalette}))),Oe=h.lazy(()=>x(()=>import("./PermissionPrompt-Cu2-Ey5r.js"),__vite__mapDeps([60,1,2,61,4,57,24,20,11,25,22]),import.meta.url).then(t=>({default:t.PermissionPrompt}))),Pe=h.lazy(()=>x(()=>import("./ConsentPrompt-EeOpq4Wj.js"),__vite__mapDeps([62,1,2,20,11,18,4,25,41,33,32]),import.meta.url).then(t=>({default:t.ConsentPrompt}))),Ae=h.lazy(()=>x(()=>import("./AgentOverlay-DhSTt0ux.js"),__vite__mapDeps([63,1,2,13,12,11,38,4,10,22,36,7,18,20,48,33,21]),import.meta.url).then(t=>({default:t.AgentOverlay}))),Ie=h.lazy(()=>x(()=>import("./ClipperOverlay-v2O7xFb6.js"),__vite__mapDeps([64,1,2,20,11]),import.meta.url).then(t=>({default:t.ClipperOverlay}))),Me=h.lazy(()=>x(()=>import("./ReaderOverlay-rzQUD3nE.js"),__vite__mapDeps([65,1,2,3,4,20,11,66,27,21,25,67,41,52]),import.meta.url).then(t=>({default:t.ReaderOverlay}))),ze=h.lazy(()=>x(()=>import("./TabGraphOverlay-B8naGHNZ.js"),__vite__mapDeps([68,1,2,3,4,11,49,34,25,12,13,40,17,41]),import.meta.url).then(t=>({default:t.TabGraphOverlay}))),Ke=h.lazy(()=>x(()=>import("./ConsentDashboard-CKgA7ZoF.js"),__vite__mapDeps([69,1,2,51,4,34,27,11,54,25,41,3,12,13,40,17]),import.meta.url).then(t=>({default:t.ConsentDashboard}))),Fe=h.lazy(()=>x(()=>import("./OnboardingTour-DZODMc7B.js"),__vite__mapDeps([70,1,2,6,3,4,7,8,9,10,20,11,25,12,13,40,17,41]),import.meta.url).then(t=>({default:t.OnboardingTour})));function Ve(){const[t,a]=n.useState(!1),[o,i]=n.useState(!1),[d,y]=n.useState(null),[N,v]=n.useState(null),[S,C]=n.useState(!1),[u,l]=n.useState(!1),[E,R]=n.useState(!1),k=z(r=>r.visible),T=z(r=>r.start),G=z(r=>r.finish),[le,D]=n.useState(!1);n.useEffect(()=>{let r=0;const s=p=>{const I=p.dataTransfer?.types;return I?Array.from(I).includes("application/x-omnibrowser-tab-id"):!1},m=p=>{s(p)&&(p.preventDefault(),r+=1,D(!0))},c=p=>{s(p)&&(p.preventDefault(),p.dataTransfer&&(p.dataTransfer.dropEffect="copy"))},g=p=>{s(p)&&(r=Math.max(0,r-1),r===0&&D(!1))},Z=()=>{r=0,D(!1)},ee=p=>{if(!s(p))return;p.preventDefault(),r=0,D(!1);const I=p.dataTransfer?.getData("application/x-omnibrowser-tab-id");if(I)try{je.getState().focusTab(I)}catch(he){ne()&&console.warn("[AppShell] Failed to focus tab graph from drop",he)}},te=()=>{r=0,D(!1)};return document.addEventListener("dragenter",m),document.addEventListener("dragover",c),document.addEventListener("dragleave",g),document.addEventListener("dragend",Z),document.addEventListener("drop",ee),window.addEventListener("tabgraph:dragend",te),()=>{document.removeEventListener("dragenter",m),document.removeEventListener("dragover",c),document.removeEventListener("dragleave",g),document.removeEventListener("dragend",Z),document.removeEventListener("drop",ee),window.removeEventListener("tabgraph:dragend",te)}},[]);const ie=Ce(r=>r.visible),O=$(),_=O.tabs.find(r=>r.id===O.activeId),[W,ce]=n.useState(.62),[H,Y]=n.useState(!1),X=o||!!d||!!N||u||E,L=_?.url??"",K=!!L&&!L.startsWith("ob://")&&!L.startsWith("about:")&&!L.startsWith("chrome://")&&!L.startsWith("edge://")&&!L.startsWith("app://"),de=n.useCallback(()=>{K&&Y(!0)},[K]);n.useEffect(()=>{if(!H)return;const r=m=>{ce(c=>{const g=m.clientX/window.innerWidth;return Number.isNaN(g)?c:Math.min(.85,Math.max(.25,g))})},s=()=>{Y(!1)};return window.addEventListener("mousemove",r),window.addEventListener("mouseup",s),()=>{window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",s)}},[H]);const[j,M]=n.useState(null),[F,J]=n.useState(!1),[V,Q]=n.useState("idle"),[P,A]=n.useState(null),ue=n.useMemo(()=>{if(!j)return null;try{return xe(new Date(j.updatedAt),{addSuffix:!0})}catch{return null}},[j]);n.useEffect(()=>{typeof window>"u"||!q.isCompleted()&&!k&&T()},[k,T]),n.useEffect(()=>{if(F)return;let r=!1;return f.sessionState.summary().then(s=>{if(r)return;const m=s?.summary;m&&m.tabCount>0&&M(m)}).catch(()=>{r||M(null)}),()=>{r=!0}},[F]),n.useEffect(()=>{if(!P)return;const r=window.setTimeout(()=>{A(null)},6e3);return()=>{window.clearTimeout(r)}},[P]),ae("permissions:request",r=>{y(r)},[]),ae("agent:consent:request",r=>{if(!r||!r.id||!r.action)return;const s={id:r.id,action:{type:r.action.type,description:r.action.description,risk:r.action.risk??"medium"},callback:async m=>{try{m?await f.consent.approve(r.id):await f.consent.revoke(r.id)}catch(c){console.error("Failed to resolve consent:",c)}finally{v(null)}}};v(s)},[]),n.useEffect(()=>{const r=m=>{C(m.fullscreen)};return re.on("app:fullscreen-changed",r)},[]),n.useEffect(()=>{const r=s=>{const c=navigator.platform.toUpperCase().indexOf("MAC")>=0?s.metaKey:s.ctrlKey;if(c&&!s.shiftKey&&!s.altKey&&s.key.toLowerCase()==="k"){s.preventDefault(),i(!0);return}if(!(c&&!s.shiftKey&&!s.altKey&&s.key.toLowerCase()==="l")){if(c&&!s.shiftKey&&!s.altKey&&s.key.toLowerCase()==="t"){s.preventDefault(),f.tabs.create("about:blank").catch(console.error);return}if(c&&!s.shiftKey&&!s.altKey&&s.key.toLowerCase()==="w"){s.preventDefault();const g=$.getState();g.activeId&&f.tabs.close({id:g.activeId}).catch(console.error);return}if(c&&s.shiftKey&&!s.altKey&&s.key.toLowerCase()==="t"){s.preventDefault();return}if(c&&s.shiftKey&&!s.altKey&&s.key.toLowerCase()==="a"){s.preventDefault(),a(g=>!g);return}if(c&&s.shiftKey&&!s.altKey&&s.key.toLowerCase()==="h"){s.preventDefault(),$.getState().activeId&&l(!0);return}if(c&&s.altKey&&s.key.toLowerCase()==="p"){s.preventDefault(),document.querySelector("[data-network-button]")?.click();return}if(c&&s.altKey&&s.key.toLowerCase()==="s"){s.preventDefault(),document.querySelector("[data-shields-button]")?.click();return}if(!(c&&!s.shiftKey&&!s.altKey&&s.key.toLowerCase()==="f")&&s.key==="Escape"){u?l(!1):o?i(!1):d?y(null):N?v(null):t&&a(!1);return}}};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[o,d,N,t,u]);const me=async r=>{if(!_?.url){l(!1);return}try{const s=await f.research.getNotes(_.url),m=s?.notes??"",c=Array.isArray(s?.highlights)?s.highlights:[];await f.research.saveNotes(_.url,m,[...c,r]),re.emit("research:highlight-added",{url:_.url,highlight:r})}catch(s){console.error("Failed to save highlight:",s)}finally{l(!1)}},pe=async()=>{if(!(!j||V==="restoring")){Q("restoring");try{const r=await f.sessionState.restore();if(r?.restored){const s=r.tabCount??j.tabCount??0;A({message:`Restored ${s} tab${s===1?"":"s"} from last session.`,variant:"success"}),M(null),J(!0)}else r?.error?A({message:`Restore failed: ${r.error}`,variant:"error"}):A({message:"No saved session snapshot available to restore.",variant:"error"})}catch(r){console.error("Failed to restore session snapshot:",r),A({message:"Failed to restore session snapshot.",variant:"error"})}finally{Q("idle")}}},fe=()=>{J(!0),M(null)};return e.jsxs("div",{className:"relative flex h-screen w-screen flex-col overflow-hidden bg-[#1A1D28] text-gray-100",children:[!S&&e.jsx("div",{className:"flex-none",children:e.jsx(n.Suspense,{fallback:e.jsx("div",{style:{height:"40px",backgroundColor:"#0f172a"}}),children:e.jsx(b,{componentName:"TopNav",fallback:e.jsx("div",{style:{height:"40px",backgroundColor:"#0f172a",padding:"8px",color:"#94a3b8"},children:"Navigation Error"}),children:e.jsx(ke,{onAgentToggle:()=>a(!t),onCommandPalette:()=>i(!0),onClipperToggle:()=>{O.activeId&&l(!0)},onReaderToggle:()=>{O.activeId&&R(!0)}})})})}),e.jsxs("div",{className:"flex flex-1 min-h-0 w-full overflow-hidden",children:[e.jsxs("div",{className:"flex min-w-0 flex-1 flex-col overflow-hidden",children:[!S&&j&&!F&&e.jsx("div",{className:"px-4 pt-3",children:e.jsxs("div",{className:"flex flex-col gap-3 rounded-xl border border-blue-500/40 bg-blue-500/10 px-4 py-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-100",children:"Restore your last browsing session?"}),e.jsxs("p",{className:"text-xs text-blue-200",children:["Last saved ",ue??"recently"," • ",j.windowCount," window",j.windowCount===1?"":"s",", ",j.tabCount," tab",j.tabCount===1?"":"s"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:pe,disabled:V==="restoring",className:"inline-flex items-center rounded-lg border border-blue-500/60 bg-blue-600/20 px-3 py-1.5 text-sm font-medium text-blue-100 transition-colors hover:bg-blue-600/30 disabled:cursor-not-allowed disabled:opacity-60",children:[V==="restoring"?e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(we,{className:"mr-2 h-4 w-4"}),"Restore"]}),e.jsx("button",{type:"button",onClick:fe,className:"rounded-lg border border-slate-700 bg-slate-800/60 px-3 py-1.5 text-sm text-slate-300 transition-colors hover:bg-slate-700/80",children:"Dismiss"})]})]})}),!S&&e.jsx(n.Suspense,{fallback:null,children:e.jsx(b,{componentName:"TabStrip",children:e.jsx(Le,{})})}),K?e.jsxs("div",{className:"flex flex-1 min-h-0 min-w-0 overflow-hidden",children:[e.jsx("div",{className:"min-h-0 min-w-[320px] flex-shrink-0 flex-grow-0",style:{width:`${Math.round(W*100)}%`},children:e.jsx(Ne,{tab:_,overlayActive:X})}),e.jsx("div",{onMouseDown:de,className:"z-20 flex h-full w-[6px] cursor-col-resize items-center justify-center bg-slate-900/50 transition-colors hover:bg-slate-800",children:e.jsx("div",{className:"h-24 w-[2px] rounded-full bg-slate-700/80"})}),e.jsx("div",{className:"relative min-h-0 min-w-[260px] flex-1 overflow-hidden",style:{width:`${Math.round((1-W)*100)}%`},children:e.jsx("div",{className:"h-full min-h-0 overflow-auto border-l border-slate-800/60 bg-slate-950/40",children:e.jsx(se,{})})})]}):e.jsx("div",{className:`relative flex-1 min-h-0 min-w-0 overflow-hidden ${S?"absolute inset-0":""}`,children:e.jsx("div",{className:`h-full min-h-0 overflow-auto ${X?"webview--masked":""}`,children:e.jsx(se,{})})})]}),!S&&e.jsx(n.Suspense,{fallback:null,children:e.jsx(b,{componentName:"RightPanel",children:e.jsx("div",{className:"h-full min-h-0 w-[340px] max-w-[380px] overflow-y-auto border-l border-slate-800/60",children:e.jsx(Re,{open:t,onClose:()=>a(!1)})})})})]}),!S&&e.jsx("div",{className:"flex-none",children:e.jsx(n.Suspense,{fallback:null,children:e.jsx(b,{componentName:"BottomStatus",children:e.jsx(Te,{})})})}),e.jsx(n.Suspense,{fallback:null,children:e.jsx(w,{children:e.jsx(b,{componentName:"AgentOverlay",children:e.jsx(Ae,{})})})}),e.jsx(n.Suspense,{fallback:null,children:e.jsx(w,{children:e.jsx(b,{componentName:"ClipperOverlay",children:e.jsx(Ie,{active:u,onCancel:()=>l(!1),onCreateHighlight:me})})})}),e.jsx(n.Suspense,{fallback:null,children:e.jsx(w,{children:e.jsx(b,{componentName:"ReaderOverlay",children:e.jsx(Me,{active:E,onClose:()=>R(!1),tabId:O.activeId,url:_?.url})})})}),le&&e.jsx(w,{children:e.jsx("div",{className:"pointer-events-none fixed inset-0 z-[1030] flex items-center justify-center",children:e.jsxs("div",{className:"rounded-3xl border border-purple-500/40 bg-purple-900/50 px-8 py-6 text-center shadow-[0_0_60px_rgba(168,85,247,0.35)] backdrop-blur-sm",children:[e.jsx("div",{className:"text-[11px] uppercase tracking-[0.3em] text-purple-200/70",children:"Tab graph"}),e.jsx("div",{className:"mt-2 text-lg font-semibold text-purple-100",children:"Drop to map this tab's DNA"}),e.jsx("div",{className:"mt-1 text-xs text-purple-200/80",children:"Release anywhere to open the graph overlay."})]})})}),e.jsx(n.Suspense,{fallback:null,children:e.jsx(w,{children:e.jsx(b,{componentName:"TabGraphOverlay",children:e.jsx(ze,{})})})}),ie&&e.jsx(n.Suspense,{fallback:null,children:e.jsx(w,{children:e.jsx(b,{componentName:"ConsentDashboard",children:e.jsx(Ke,{})})})}),k&&e.jsx(n.Suspense,{fallback:null,children:e.jsx(w,{children:e.jsx(b,{componentName:"OnboardingTour",children:e.jsx(Fe,{onClose:()=>{G()}})})})}),o&&e.jsx(n.Suspense,{fallback:null,children:e.jsx(w,{children:e.jsx(b,{componentName:"CommandPalette",children:e.jsx(De,{onClose:()=>i(!1)})})})}),d&&e.jsx(n.Suspense,{fallback:null,children:e.jsx(w,{children:e.jsx(b,{componentName:"PermissionPrompt",children:e.jsx(Oe,{request:d,onClose:()=>y(null)})})})}),N&&e.jsx(n.Suspense,{fallback:null,children:e.jsx(w,{children:e.jsx(b,{componentName:"ConsentPrompt",children:e.jsx(Pe,{request:N,onClose:()=>v(null)})})})}),P&&e.jsx(w,{children:e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsx("div",{className:`rounded-xl border px-4 py-3 text-sm shadow-xl shadow-black/40 ${P.variant==="success"?"border-emerald-400/40 bg-emerald-500/15 text-emerald-100":"border-amber-400/40 bg-amber-500/15 text-amber-100"}`,children:P.message})})})]})}const Xe=Object.defineProperty({__proto__:null,AppShell:Ve},Symbol.toStringTag,{value:"Module"});export{Xe as A,we as R,z as a,Ce as b,je as u};
//# sourceMappingURL=AppShell-DKPxPuWD.js.map

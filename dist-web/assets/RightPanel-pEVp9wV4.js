import{r as c,j as e,i as k}from"./index-DMKJqC5Z.js";import{u as L}from"./use-ipc-event-BWqwbbDc.js";import{S as I}from"./sparkles-C9aT6jfb.js";import{m as M}from"./proxy-B-PlLRqe.js";import{C as fe}from"./circle-check-DeRzGwMx.js";import{C as je}from"./circle-x-DycYTBkH.js";import{L as P,c as U,u as ve,f as Ne}from"./formatDistanceToNow-CwTn1k5x.js";import{P as we}from"./play-BHREYUo1.js";import{b as O}from"./AppShell-DKPxPuWD.js";import{S as W}from"./share-2-Ble4ClGi.js";import{c as S}from"./createLucideIcon-BHoZ2X8H.js";import{A}from"./index-BE3YK0eV.js";import{D as ke}from"./download-ukpL1WLs.js";import{R as de}from"./refresh-cw-Ck1GEe8j.js";import{C as q}from"./cloud-BOyeZpcc.js";import{T as Se}from"./trending-up-BuEY6VB4.js";import{S as G}from"./shield-check-x87xpyVa.js";import{E as Ce}from"./external-link-SQYWbOuw.js";import{S as ze}from"./send-BMYBEDZg.js";import{A as xe}from"./activity-BJ2_0ciE.js";import{L as re}from"./lock-QlIpU5_k.js";import{S as Me}from"./shield-alert-BH6vxp5a.js";import{E as le}from"./eye-off-cnqR3OyA.js";import{E as ne}from"./eye-CLZIWIZg.js";import{P as Te}from"./plus-BEevIG6L.js";import{C as Ee}from"./copy-DdRvNS-U.js";import{T as Pe}from"./trash-2-SwMuWoHl.js";import{B as Ae}from"./brain-qT2viXus.js";import{X as Ie}from"./x-GAlOzW-g.js";import{Z as De}from"./zap-DnPrAbXN.js";import{F as Fe}from"./file-text-BKQmjIDI.js";import{S as $e}from"./shield-DNuGHzo8.js";import"./ipc-events-B-mtt1te.js";import"./Portal-DMoOea_i.js";import"./globe-B55P551M.js";import"./triangle-alert-BHl0FKa7.js";const Le=S("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const Re=S("BatteryCharging",[["path",{d:"M15 7h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2",key:"1sdynx"}],["path",{d:"M6 7H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h1",key:"1gkd3k"}],["path",{d:"m11 7-3 5h4l-3 5",key:"b4a64w"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);const Ue=S("BatteryFull",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}],["line",{x1:"6",x2:"6",y1:"11",y2:"13",key:"1wd6dw"}],["line",{x1:"10",x2:"10",y1:"11",y2:"13",key:"haxvl5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"13",key:"c6fn6x"}]]);const Be=S("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);const He=S("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);const Oe=S("CloudLightning",[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]]);const qe=S("Earth",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const me=S("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);const R=S("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);const _e=S("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);const Ve=S("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);const We=S("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);const Ge=S("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);const Ze=S("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const Z=S("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function Ke(){const[s,r]=c.useState(""),[t,a]=c.useState(null),[i,g]=c.useState(!1),[f,N]=c.useState([]),[y,v]=c.useState(""),d=async()=>{if(s.trim())try{const o=await k.agent.generatePlanFromGoal({goal:s,mode:y||void 0});a(o),N([])}catch(o){console.error("Failed to generate plan:",o),alert(`Failed to generate plan: ${o instanceof Error?o.message:String(o)}`)}},b=async()=>{if(t){g(!0),N([]);try{const o=await k.agent.executePlan({planId:t.id,plan:t});N(o.results||[])}catch(o){console.error("Failed to execute plan:",o),alert(`Failed to execute plan: ${o instanceof Error?o.message:String(o)}`)}finally{g(!1)}}};return e.jsxs("div",{className:"flex flex-col gap-4 p-6 bg-gray-900/50 rounded-lg border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-purple-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-100",children:"Agent Planner"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Goal"}),e.jsx("textarea",{value:s,onChange:o=>r(o.target.value),placeholder:"What do you want the agent to accomplish? (e.g., 'Research quantum computing breakthroughs')",className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-100 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500",rows:3}),e.jsx("input",{type:"text",value:y,onChange:o=>v(o.target.value),placeholder:"Mode (optional): research, trade, game, etc.",className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-100 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500"}),e.jsxs("button",{onClick:d,disabled:!s.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-700 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(I,{size:16}),"Generate Plan"]})]}),t&&e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300",children:"Generated Plan"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.steps.length," steps • ~",t.estimatedDuration||0,"s"]})]}),e.jsx("div",{className:"flex flex-col gap-2",children:t.steps.map((o,p)=>e.jsx(M.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-purple-600/20 flex items-center justify-center text-purple-400 text-xs font-semibold",children:p+1}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-200",children:o.action}),f.find(h=>h.stepId===o.id)&&(f.find(h=>h.stepId===o.id)?.success?e.jsx(fe,{size:14,className:"text-green-400"}):e.jsx(je,{size:14,className:"text-red-400"}))]}),e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:Object.entries(o.args).map(([h,C])=>e.jsxs("span",{className:"mr-2",children:[e.jsxs("span",{className:"text-gray-500",children:[h,":"]})," ",String(C).substring(0,50)]},h))}),o.expectedOutput&&e.jsxs("div",{className:"text-xs text-gray-500 italic",children:["Expected: ",o.expectedOutput]}),f.find(h=>h.stepId===o.id)?.error&&e.jsxs("div",{className:"text-xs text-red-400 mt-1",children:["Error: ",f.find(h=>h.stepId===o.id)?.error]})]})]})},o.id))}),e.jsx("button",{onClick:b,disabled:i,className:"px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-700 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx(P,{size:16,className:"animate-spin"}),"Executing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(we,{size:16}),"Execute Plan"]})})]})]})}const Xe=U((s,r)=>({loading:!1,error:null,plugins:[],peers:[],lastSyncedAt:null,fetch:async()=>{try{s({loading:!0,error:null});const t=await k.extensionNexus.list();s({plugins:t.plugins,peers:t.peers,lastSyncedAt:Date.now(),loading:!1})}catch(t){s({loading:!1,error:t instanceof Error?t.message:String(t)})}},publish:async t=>{try{s({loading:!0,error:null}),await k.extensionNexus.publish(t),await r().fetch()}catch(a){s({loading:!1,error:a instanceof Error?a.message:String(a)})}},toggleTrust:async(t,a)=>{try{await k.extensionNexus.trust(t,a);const i=r().plugins.map(g=>g.pluginId===t?{...g,trusted:a}:g);s({plugins:i})}catch(i){s({error:i instanceof Error?i.message:String(i)})}}})),_={pluginId:"",name:"",version:"0.1.0",description:"",author:"",sourcePeer:"",carbonScore:void 0,tags:""};function Je(s){return s?s.startsWith("ob://")?s.replace("ob://",""):s:"Unknown node"}function Qe(s){return s===void 0?"text-gray-400 bg-gray-800/70 border-gray-700/40":s<45?"text-emerald-300 bg-emerald-500/10 border-emerald-500/40":s<65?"text-amber-300 bg-amber-500/10 border-amber-500/40":"text-red-300 bg-red-500/10 border-red-500/40"}function Ye(s){return!s||s.length===0?"untagged":s.map(r=>`#${r}`).join(" ")}function pe(s){const r=Date.now()-s,t=Math.floor(r/(1e3*60));if(t<1)return"just now";if(t<60)return`${t}m ago`;const a=Math.floor(t/60);return a<24?`${a}h ago`:`${Math.floor(a/24)}d ago`}function es({plugin:s,onToggleTrust:r}){return e.jsxs(M.div,{layout:!0,className:"rounded-xl border border-slate-800/60 bg-slate-900/70 p-4 shadow-lg shadow-black/40 hover:bg-slate-900/80 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-200",children:s.name}),e.jsxs("span",{className:"text-[11px] px-2 py-0.5 rounded-full border border-slate-700/50 text-gray-400",children:["v",s.version]})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-400 leading-relaxed line-clamp-3",children:s.description})]}),e.jsxs("button",{onClick:()=>r(s.pluginId,!s.trusted),className:`flex items-center gap-1 rounded-lg border px-2 py-1 text-[11px] transition-colors ${s.trusted?"border-emerald-500/60 bg-emerald-500/10 text-emerald-200 hover:bg-emerald-500/20":"border-gray-700/60 bg-gray-800/60 text-gray-300 hover:bg-gray-800/80"}`,children:[e.jsx(Le,{size:12}),s.trusted?"Trusted":"Trust Node"]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3 text-[11px] text-gray-500",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(Z,{size:12,className:"text-gray-600"}),Je(s.sourcePeer)]}),e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(ke,{size:12,className:"text-gray-600"}),s.downloads," pulls"]}),e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full border px-2 py-0.5 ${Qe(s.carbonScore)}`,children:[e.jsx(qe,{size:12}),s.carbonScore!==void 0?`${s.carbonScore.toFixed(0)} gCO₂e`:"carbon unknown"]}),e.jsx("span",{className:"inline-flex items-center gap-1 text-gray-500",children:pe(s.publishedAt)})]}),e.jsx("div",{className:"mt-3 text-[11px] text-gray-500 uppercase tracking-wide",children:Ye(s.tags)})]})}function ss(){const{plugins:s,loading:r,peers:t,error:a,lastSyncedAt:i,fetch:g,publish:f,toggleTrust:N}=Xe(),[y,v]=c.useState(!1),[d,b]=c.useState(_),[o,p]=c.useState(!1);c.useEffect(()=>{s.length===0&&!r&&g()},[g,s.length,r]);const h=c.useMemo(()=>[...s].sort((x,m)=>m.trusted===x.trusted?m.publishedAt-x.publishedAt:Number(m.trusted)-Number(x.trusted)),[s]),C=async x=>{if(x.preventDefault(),!(!d.pluginId.trim()||!d.name.trim())){p(!0);try{await f({pluginId:d.pluginId.trim(),name:d.name.trim(),version:d.version.trim(),description:d.description.trim(),author:d.author.trim(),sourcePeer:d.sourcePeer.trim()||"ob://local",carbonScore:d.carbonScore,tags:d.tags.split(",").map(m=>m.trim()).filter(Boolean)}),b(_),v(!1)}finally{p(!1)}}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-200 flex items-center gap-2",children:[e.jsx(W,{size:16,className:"text-purple-400"}),"Decentralized Extension Nexus"]}),e.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"P2P plugin sharing with trust scoring and carbon-aware provenance."})]}),e.jsxs("button",{onClick:()=>v(x=>!x),className:"flex items-center gap-1 rounded-lg border border-purple-500/50 bg-purple-600/10 px-3 py-1.5 text-xs text-purple-200 hover:bg-purple-600/20",children:[e.jsx(He,{size:14}),"Share Plugin"]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[11px] text-gray-500",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-lg border border-gray-700/60 bg-gray-800/60 px-2 py-1",children:[e.jsx(Z,{size:12,className:"text-gray-500"}),t.length," federated peers"]}),i&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-gray-500",children:[e.jsx(Be,{size:12,className:"text-gray-600"}),"Synced ",pe(i)]}),r&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-purple-300",children:[e.jsx(P,{size:12,className:"animate-spin"}),"Syncing mesh"]})]}),a&&e.jsx("div",{className:"rounded-lg border border-red-500/40 bg-red-500/10 px-3 py-2 text-xs text-red-100",children:a}),e.jsx(A,{children:y&&e.jsxs(M.form,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},onSubmit:C,className:"space-y-3 rounded-xl border border-purple-500/40 bg-purple-500/5 p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("label",{className:"flex flex-col gap-1 text-xs text-gray-400",children:["Plugin Identifier",e.jsx("input",{type:"text",value:d.pluginId,onChange:x=>b(m=>({...m,pluginId:x.target.value})),className:"rounded-lg border border-purple-500/30 bg-gray-950 px-3 py-2 text-gray-200 focus:border-purple-400 focus:outline-none",placeholder:"com.omni.ai.intelligence",required:!0})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-xs text-gray-400",children:["Friendly name",e.jsx("input",{type:"text",value:d.name,onChange:x=>b(m=>({...m,name:x.target.value})),className:"rounded-lg border border-purple-500/30 bg-gray-950 px-3 py-2 text-gray-200 focus:border-purple-400 focus:outline-none",placeholder:"Omni Intelligence Toolkit",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("label",{className:"flex flex-col gap-1 text-xs text-gray-400",children:["Version",e.jsx("input",{type:"text",value:d.version,onChange:x=>b(m=>({...m,version:x.target.value})),className:"rounded-lg border border-purple-500/30 bg-gray-950 px-3 py-2 text-gray-200 focus:border-purple-400 focus:outline-none"})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-xs text-gray-400",children:["Source peer / node handle",e.jsx("input",{type:"text",value:d.sourcePeer,onChange:x=>b(m=>({...m,sourcePeer:x.target.value})),className:"rounded-lg border border-purple-500/30 bg-gray-950 px-3 py-2 text-gray-200 focus:border-purple-400 focus:outline-none",placeholder:"ob://atlanta-hub"})]})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-xs text-gray-400",children:["Description",e.jsx("textarea",{value:d.description,onChange:x=>b(m=>({...m,description:x.target.value})),className:"rounded-lg border border-purple-500/30 bg-gray-950 px-3 py-2 text-gray-200 focus:border-purple-400 focus:outline-none",placeholder:"Describe the capability, privacy considerations, and ethics pledges.",rows:3,required:!0})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-xs text-gray-400",children:["Author / Collective",e.jsx("input",{type:"text",value:d.author,onChange:x=>b(m=>({...m,author:x.target.value})),className:"rounded-lg border border-purple-500/30 bg-gray-950 px-3 py-2 text-gray-200 focus:border-purple-400 focus:outline-none",placeholder:"Atlas Collective",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("label",{className:"flex flex-col gap-1 text-xs text-gray-400",children:["Carbon intensity snapshot (gCO₂e)",e.jsx("input",{type:"number",min:0,max:100,value:d.carbonScore??"",onChange:x=>{const m=x.target.value;b(n=>({...n,carbonScore:m===""?void 0:Number(m)}))},className:"rounded-lg border border-purple-500/30 bg-gray-950 px-3 py-2 text-gray-200 focus:border-purple-400 focus:outline-none",placeholder:"48"})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-xs text-gray-400",children:["Tags (comma separated)",e.jsx("input",{type:"text",value:d.tags,onChange:x=>b(m=>({...m,tags:x.target.value})),className:"rounded-lg border border-purple-500/30 bg-gray-950 px-3 py-2 text-gray-200 focus:border-purple-400 focus:outline-none",placeholder:"productivity, research, discovery"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{v(!1),b(_)},className:"rounded-lg border border-gray-700/60 bg-gray-800/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-gray-800/80",disabled:o,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex items-center gap-2 rounded-lg border border-purple-500/60 bg-purple-600/20 px-3 py-1.5 text-xs text-purple-100 hover:bg-purple-600/30 disabled:opacity-60",disabled:o,children:[o?e.jsx(P,{size:14,className:"animate-spin"}):e.jsx(W,{size:14}),"Publish to mesh"]})]})]})}),e.jsx("div",{className:"space-y-3",children:h.length===0&&!r?e.jsx("div",{className:"rounded-xl border border-dashed border-gray-700/60 bg-gray-900/50 px-6 py-12 text-center text-xs text-gray-500",children:"No peer plugins in the mesh yet. Publish one to seed the nexus."}):e.jsx(A,{children:h.map(x=>e.jsx(es,{plugin:x,onToggleTrust:N},x.pluginId))})})]})}const ts=U((s,r)=>({loading:!1,error:null,forecast:null,horizonMinutes:120,lastUpdated:null,setHorizon:t=>{s({horizonMinutes:t}),r().fetch({horizonMinutes:t})},fetch:async t=>{const a=t?.horizonMinutes??r().horizonMinutes;try{s({loading:!0,error:null});const i=await k.efficiency.ecoImpact({horizonMinutes:a});s({forecast:i,loading:!1,lastUpdated:Date.now(),horizonMinutes:a})}catch(i){s({loading:!1,error:i instanceof Error?i.message:String(i)})}}})),as=[60,120,180];function V(s){if(s===null||!Number.isFinite(s))return"—";const r=Math.max(0,Math.round(s)),t=Math.floor(r/60),a=r%60;return t<=0?`${a}m`:a===0?`${t}h`:`${t}h ${a}m`}function rs({item:s}){const r={low:"border-emerald-500/40 bg-emerald-500/10 text-emerald-200",medium:"border-amber-500/40 bg-amber-500/10 text-amber-200",high:"border-red-500/40 bg-red-500/10 text-red-200"}[s.impact];return e.jsxs(M.div,{layout:!0,className:"rounded-xl border border-slate-800/60 bg-slate-900/70 p-3 shadow-inner shadow-black/30",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200",children:s.title}),e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${r}`,children:s.impact.toUpperCase()})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-400 leading-relaxed",children:s.description}),e.jsxs("div",{className:"mt-2 text-[10px] uppercase tracking-wide text-slate-500",children:[s.category," impact"]})]})}function ls(){const{forecast:s,loading:r,error:t,horizonMinutes:a,setHorizon:i,fetch:g}=ts();c.useEffect(()=>{!s&&!r&&g()},[s,r,g]);const f=()=>{g()},N=s?.battery.slopePerHour??null,y=s?.carbon.trend??"unknown",v=s?.carbon.samples??[],d=v.map(p=>p.intensity),b=d.length>0?Math.min(...d):null,o=d.length>0?Math.max(...d):null;return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-200 flex items-center gap-2",children:[e.jsx(R,{size:16,className:"text-emerald-400"}),"Eco-Impact Simulator"]}),e.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Forecast battery life and grid carbon intensity to plan energy-aware workflows."})]}),e.jsxs("button",{onClick:f,className:"flex items-center gap-1 rounded-lg border border-emerald-500/40 bg-emerald-500/10 px-3 py-1.5 text-xs text-emerald-200 hover:bg-emerald-500/20",disabled:r,children:[r?e.jsx(P,{size:14,className:"animate-spin"}):e.jsx(de,{size:14}),"Refresh"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-gray-500",children:[e.jsx("span",{children:"Forecast horizon:"}),e.jsx("div",{className:"inline-flex items-center gap-2 rounded-lg border border-slate-800/60 bg-slate-900/70 px-2 py-1",children:as.map(p=>e.jsx("button",{onClick:()=>i(p),className:`px-2 py-1 rounded transition-colors text-xs ${a===p?"bg-emerald-500/20 text-emerald-200":"text-gray-400 hover:text-gray-200"}`,children:p/60>=1?`${p/60}h`:`${p}m`},p))})]}),t&&e.jsx("div",{className:"rounded-lg border border-red-500/40 bg-red-500/10 px-3 py-2 text-xs text-red-100",children:t}),e.jsx(A,{children:s&&!t&&e.jsxs(M.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.25},className:"space-y-5",children:[e.jsx("div",{className:"rounded-xl border border-slate-800/60 bg-slate-900/70 p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wide",children:"Summary"}),e.jsx("p",{className:"mt-2 text-sm text-gray-200 leading-relaxed",children:s.summary||"Awaiting telemetry sample..."})]}),e.jsxs("div",{className:"text-[11px] text-slate-500",children:["Updated ",new Date(s.generatedAt).toLocaleTimeString()]})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded-xl border border-slate-800/60 bg-slate-900/70 p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-200 text-sm font-semibold",children:[s.battery.charging?e.jsx(Re,{size:16,className:"text-emerald-400"}):e.jsx(Ue,{size:16,className:"text-amber-300"}),"Battery trajectory"]}),e.jsxs("span",{className:"text-[11px] text-slate-500",children:["Slope ",N!==null?`${N>0?"+":""}${N.toFixed(1)}%/h`:"—"]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"text-3xl font-semibold text-gray-100",children:s.battery.currentPct!==null?`${Math.round(s.battery.currentPct)}%`:"—"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{size:12}),e.jsx("span",{children:s.battery.charging?`≈${V(s.battery.minutesToFull)} to full`:`≈${V(s.battery.minutesToEmpty)} to empty`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{size:12}),e.jsx("span",{children:s.battery.charging?"Charging via grid":"Running on battery"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-[11px] text-slate-500 uppercase tracking-wide",children:"Projected milestones"}),s.battery.projections.length===0?e.jsx("div",{className:"text-xs text-slate-500",children:"Need more telemetry samples to forecast milestones."}):e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.battery.projections.map(p=>e.jsxs("div",{className:"rounded-lg border border-slate-800/60 bg-slate-900/80 px-3 py-2 text-xs text-gray-300 flex items-center justify-between",children:[e.jsx("span",{children:p.label}),e.jsx("span",{className:"text-slate-400",children:V(p.minutes)})]},p.level))})]})]}),e.jsxs("div",{className:"rounded-xl border border-slate-800/60 bg-slate-900/70 p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-200 text-sm font-semibold",children:[e.jsx(q,{size:16,className:"text-sky-300"}),"Carbon outlook"]}),e.jsx("span",{className:"text-[11px] text-slate-500 capitalize",children:y})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"text-3xl font-semibold text-gray-100",children:s.carbon.currentIntensity!==null?`${Math.round(s.carbon.currentIntensity)} g`:"—"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[y==="rising"?e.jsx(Se,{size:12,className:"text-amber-300"}):y==="falling"?e.jsx(Ze,{size:12,className:"text-emerald-300"}):e.jsx(q,{size:12}),e.jsxs("span",{children:["Forecast ",s.carbon.forecastIntensity!==null?`${Math.round(s.carbon.forecastIntensity)} g`:"—"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{size:12,className:"text-emerald-300"}),e.jsxs("span",{children:["Confidence ",(s.carbon.confidence*100).toFixed(0),"%"]})]}),s.carbon.region&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{size:12}),e.jsxs("span",{children:["Region ",s.carbon.region]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-[11px] text-slate-500 uppercase tracking-wide",children:"Recent intensity"}),e.jsx("div",{className:"relative h-16 w-full overflow-hidden rounded-lg border border-slate-800/60 bg-slate-900/80",children:v.length>1&&b!==null&&o!==null?e.jsx("svg",{viewBox:"0 0 100 100",className:"absolute inset-0 h-full w-full opacity-80 text-sky-400",children:e.jsx("polyline",{fill:"none",stroke:"currentColor",strokeWidth:"3",points:v.map((p,h)=>{const C=h/Math.max(1,v.length-1)*100,x=o-b||1,m=100-(p.intensity-b)/x*80-10;return`${C.toFixed(2)},${m.toFixed(2)}`}).join(" ")})}):e.jsx("div",{className:"flex h-full items-center justify-center text-[11px] text-slate-500",children:"Insufficient data for sparkline"})})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 uppercase tracking-wide",children:[e.jsx(R,{size:12,className:"text-emerald-300"}),"Recommended moves"]}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:s.recommendations.map(p=>e.jsx(rs,{item:p},p.id))})]})]},s.generatedAt)}),!s&&!t&&r&&e.jsxs("div",{className:"flex items-center justify-center py-12 text-sm text-slate-400",children:[e.jsx(P,{size:18,className:"mr-2 animate-spin"}),"Waiting for telemetry samples…"]})]})}const ns=U((s,r)=>({loading:!1,submitting:!1,error:null,records:[],activeDomain:null,activeSummary:null,lastUpdated:null,fetchAll:async()=>{try{s({loading:!0,error:null});const{records:t}=await k.trust.list();s({records:t,loading:!1,lastUpdated:Date.now()})}catch(t){s({loading:!1,error:t instanceof Error?t.message:String(t)})}},inspect:async t=>{try{s({loading:!0,error:null,activeDomain:t});const a=await k.trust.get(t);a.found&&a.summary?s({activeSummary:a.summary,loading:!1,lastUpdated:Date.now()}):s({activeSummary:null,loading:!1})}catch(a){s({loading:!1,error:a instanceof Error?a.message:String(a)})}},submit:async t=>{try{s({submitting:!0,error:null});const{summary:a}=await k.trust.submit(t);if(a){const i=r().records.filter(g=>g.domain!==a.domain);i.push(a),i.sort((g,f)=>f.signals-g.signals||f.score-g.score),s({records:i,activeSummary:a,activeDomain:a.domain,submitting:!1,lastUpdated:Date.now()})}else s({submitting:!1})}catch(a){s({submitting:!1,error:a instanceof Error?a.message:String(a)})}}}));function ie(s){switch(s){case"trusted":return"text-emerald-300 bg-emerald-500/10 border-emerald-400/40";case"caution":return"text-amber-300 bg-amber-500/10 border-amber-400/40";case"risk":default:return"text-red-300 bg-red-500/10 border-red-400/40"}}function oe(s){const r=Date.now()-s;if(r<6e4)return"just now";const t=Math.floor(r/6e4);if(t<60)return`${t}m ago`;const a=Math.floor(t/60);return a<24?`${a}h ago`:`${Math.floor(a/24)}d ago`}function ce({score:s}){const r=s>=70?"text-emerald-200":s>=45?"text-amber-200":"text-red-200";return e.jsx("span",{className:`text-lg font-semibold ${r}`,children:Math.round(s)})}function is(){const{tabs:s,activeId:r}=ve(),t=s.find(u=>u.id===r),a=c.useMemo(()=>{if(!t?.url)return null;try{return new URL(t.url).hostname}catch{return t.url.replace(/^https?:\/\//,"")}},[t]),{records:i,loading:g,submitting:f,error:N,activeSummary:y,fetchAll:v,inspect:d,submit:b}=ns(),[o,p]=c.useState(80),[h,C]=c.useState(.7),[x,m]=c.useState("privacy, research"),[n,j]=c.useState("");c.useEffect(()=>{!i.length&&!g&&v()},[i.length,g,v]),c.useEffect(()=>{a&&d(a)},[a,d]);const D=async u=>{if(u.preventDefault(),!a)return;const T=x.split(",").map(F=>F.trim()).filter(Boolean);await b({domain:a,url:t?.url,title:t?.title,score:o,confidence:h,tags:T,comment:n.trim()||void 0,sourcePeer:"ob://local"}),j("")};return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-200 flex items-center gap-2",children:[e.jsx(G,{size:16,className:"text-sky-400"}),"Trust Weaver Network"]}),e.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Community-vetted safety intelligence for sites you browse."})]}),e.jsx("button",{onClick:()=>void v(),className:"text-xs rounded-lg border border-slate-700/60 bg-slate-900/70 px-3 py-1.5 text-slate-200 hover:bg-slate-900/90",children:"Refresh mesh"})]}),N&&e.jsx("div",{className:"rounded-lg border border-red-500/40 bg-red-500/10 px-3 py-2 text-xs text-red-100",children:N}),e.jsxs("div",{className:"rounded-xl border border-slate-800/60 bg-slate-900/70 p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wide",children:"Active site"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-200 flex items-center gap-2",children:[a??"No tab active",t?.url&&e.jsx("a",{href:t.url,target:"_blank",rel:"noreferrer",className:"text-slate-500 hover:text-slate-300",children:e.jsx(Ce,{size:12})})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(Z,{size:12}),i.length," domains"]}),g&&e.jsx(P,{size:12,className:"animate-spin"})]})]}),e.jsx(A,{children:y&&e.jsxs(M.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},className:"rounded-lg border border-slate-800/80 bg-slate-900/80 p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ce,{score:y.score}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-200 font-medium",children:"Trust score"}),e.jsxs("div",{className:"text-[11px] text-slate-500",children:[Math.round(y.confidence*100),"% confidence · ",y.signals," signals"]})]})]}),e.jsx("span",{className:`text-[11px] px-3 py-1 rounded-full border ${ie(y.verdict)}`,children:y.verdict.toUpperCase()})]}),y.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[10px] text-slate-400",children:[e.jsx(We,{size:11}),y.tags.map(u=>e.jsxs("span",{className:"rounded-full border border-slate-700/60 px-2 py-0.5",children:["#",u]},u))]}),e.jsxs("div",{className:"text-[11px] text-slate-500",children:["Updated ",oe(y.lastUpdated)]})]},y.domain)}),a&&e.jsxs("form",{onSubmit:D,className:"space-y-3",children:[e.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wide",children:"Share insight"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("label",{className:"flex flex-col gap-2 text-xs text-slate-400",children:["Score (",o,")",e.jsx("input",{type:"range",min:0,max:100,value:o,onChange:u=>p(Number(u.target.value)),className:"accent-sky-400"})]}),e.jsxs("label",{className:"flex flex-col gap-2 text-xs text-slate-400",children:["Confidence ",(h*100).toFixed(0),"%",e.jsx("input",{type:"range",min:0,max:1,step:.05,value:h,onChange:u=>C(Number(u.target.value)),className:"accent-sky-400"})]}),e.jsxs("label",{className:"flex flex-col gap-2 text-xs text-slate-400",children:["Tags (comma separated)",e.jsx("input",{type:"text",value:x,onChange:u=>m(u.target.value),className:"rounded-lg border border-slate-800/60 bg-slate-950 px-3 py-2 text-gray-200 focus:border-sky-500 focus:outline-none"})]}),e.jsxs("label",{className:"flex flex-col gap-2 text-xs text-slate-400",children:["Comment (optional)",e.jsx("textarea",{value:n,onChange:u=>j(u.target.value),rows:3,className:"rounded-lg border border-slate-800/60 bg-slate-950 px-3 py-2 text-sm text-gray-200 focus:border-sky-500 focus:outline-none",placeholder:"What makes this site safe or risky?"})]})]}),e.jsxs("button",{type:"submit",disabled:f,className:"flex items-center gap-2 rounded-lg border border-sky-500/40 bg-sky-500/10 px-3 py-1.5 text-xs text-sky-200 hover:bg-sky-500/20 disabled:opacity-60",children:[f?e.jsx(P,{size:14,className:"animate-spin"}):e.jsx(ze,{size:14}),"Weaver signal"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 uppercase tracking-wide",children:[e.jsx(xe,{size:12,className:"text-sky-400"}),"Mesh activity"]}),e.jsx("div",{className:"space-y-2 max-h-72 overflow-y-auto pr-1",children:i.length===0&&!g?e.jsx("div",{className:"rounded-lg border border-dashed border-slate-800/60 bg-slate-900/60 px-4 py-6 text-center text-xs text-slate-500",children:"No trust intelligence yet. Be the first to cast a signal."}):i.slice(0,12).map(u=>e.jsxs("div",{className:"rounded-lg border border-slate-800/60 bg-slate-900/70 p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-200 font-medium",children:u.domain}),e.jsxs("div",{className:"text-[11px] text-slate-500",children:[u.signals," signals · ",Math.round(u.confidence*100),"% confidence"]})]}),e.jsx(ce,{score:u.score})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-slate-500",children:[e.jsx("span",{className:`rounded-full border px-2 py-0.5 ${ie(u.verdict)}`,children:u.verdict.toUpperCase()}),e.jsxs("span",{children:["Updated ",oe(u.lastUpdated)]})]}),u.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 text-[10px] text-slate-500",children:u.tags.slice(0,5).map(T=>e.jsxs("span",{className:"rounded-full border border-slate-800/60 px-2 py-0.5",children:["#",T]},T))})]},u.domain))})]}),e.jsx("div",{className:"text-[10px] text-slate-500",children:"Signals are community-sourced heuristics. Combine with Privacy Sentinel findings before taking action."})]})}const os=U((s,r)=>({status:null,credentials:[],loading:!1,error:null,revealingId:null,async unlock(t){s({loading:!0,error:null});try{const a=await k.identity.unlock(t.trim());s({status:a}),await r().refresh()}catch(a){throw s({error:a instanceof Error?a.message:String(a)}),a}finally{s({loading:!1})}},async lock(){s({loading:!0,error:null});try{const t=await k.identity.lock();s({status:t,credentials:[]})}catch(t){throw s({error:t instanceof Error?t.message:String(t)}),t}finally{s({loading:!1})}},async refresh(){try{const t=await k.identity.status();if(s({status:t}),t.status==="unlocked"){const a=await k.identity.list();s({credentials:a})}else s({credentials:[]})}catch(t){s({error:t instanceof Error?t.message:String(t)})}},async addCredential(t){s({loading:!0,error:null});try{await k.identity.add(t),await r().refresh()}catch(a){throw s({error:a instanceof Error?a.message:String(a)}),a}finally{s({loading:!1})}},async removeCredential(t){s({loading:!0,error:null});try{await k.identity.remove(t),await r().refresh()}catch(a){throw s({error:a instanceof Error?a.message:String(a)}),a}finally{s({loading:!1})}},async revealCredential(t){if(r().revealingId)return null;s({revealingId:t,error:null});try{const a=await k.identity.reveal(t);return await r().refresh(),a}catch(a){return s({error:a instanceof Error?a.message:String(a)}),null}finally{s({revealingId:null})}},setError(t){s({error:t})}}));function cs(s){if(!s)return"";try{return(s.includes("://")?new URL(s):new URL(`https://${s}`)).hostname.replace(/^www\./,"")}catch{return s.trim()}}function ds(){const{status:s,credentials:r,loading:t,error:a,unlock:i,lock:g,refresh:f,addCredential:N,removeCredential:y,revealCredential:v,setError:d,revealingId:b}=os(),[o,p]=c.useState(""),[h,C]=c.useState(!1),[x,m]=c.useState(null),[n,j]=c.useState({}),[D,u]=c.useState(!1),[T,F]=c.useState(""),[B,K]=c.useState(""),[H,X]=c.useState(""),[J,Q]=c.useState(""),[Y,ee]=c.useState(""),[se,$]=c.useState(null);c.useEffect(()=>{f()},[f]);const E=s?.status??"uninitialized",te=T.trim()&&B.trim()&&H.trim(),ue=s?.totalCredentials??r.length,ge=async()=>{if(!o.trim()){d("Passphrase required to unlock the vault.");return}try{await i(o.trim()),p(""),d(null)}catch(l){d(l instanceof Error?l.message:"Failed to unlock vault")}},he=async()=>{if(te)try{await N({domain:cs(T),username:B.trim(),secret:H,secretHint:J.trim()||void 0,tags:Y.split(",").map(l=>l.trim()).filter(Boolean)}),u(!1),F(""),K(""),X(""),Q(""),ee("")}catch(l){d(l instanceof Error?l.message:"Failed to store credential")}},ye=async l=>{if(x===l.id&&n[l.id]){m(null);return}try{const w=await v(l.id);w&&(j(z=>({...z,[l.id]:w.secret})),m(l.id))}catch(w){d(w instanceof Error?w.message:"Failed to reveal secret")}},be=async l=>{const w=n[l];if(w)try{await navigator.clipboard.writeText(w),$("Secret copied to clipboard"),setTimeout(()=>$(null),3e3)}catch{$("Failed to copy secret. Check clipboard permissions."),setTimeout(()=>$(null),4e3)}},ae=c.useMemo(()=>{const l=r.filter(z=>z.lastUsedAt?Date.now()-z.lastUsedAt<6048e5:!1).length,w=r.filter(z=>z.tags&&z.tags.length>0).length;return{recent:l,tagged:w}},[r]);return e.jsxs("div",{className:"space-y-4 text-sm text-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide text-slate-400",children:[e.jsx(me,{size:14,className:"text-emerald-300"}),"Redix Identity Vault"]}),e.jsx("div",{className:"mt-1 text-base font-semibold text-gray-100",children:"Zero-knowledge credential guardian"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>void f(),disabled:t,className:"inline-flex items-center gap-2 rounded-xl border border-slate-700/60 bg-slate-900/70 px-3 py-2 text-[11px] font-semibold text-slate-200 transition-colors hover:bg-slate-900/90 disabled:cursor-not-allowed disabled:opacity-60",children:[e.jsx(de,{size:13,className:t?"animate-spin":""}),"Sync vault"]}),E==="unlocked"?e.jsxs("button",{type:"button",onClick:()=>void g(),className:"inline-flex items-center gap-2 rounded-xl border border-rose-500/40 bg-rose-500/10 px-3 py-2 text-[11px] font-semibold text-rose-200 transition-colors hover:bg-rose-500/20",children:[e.jsx(re,{size:13}),"Lock"]}):null]})]}),a&&e.jsxs("div",{className:"rounded-xl border border-rose-500/40 bg-rose-500/10 px-3 py-2 text-xs text-rose-100 flex items-center gap-2",children:[e.jsx(Me,{size:14}),e.jsx("span",{children:a})]}),se&&e.jsxs("div",{className:"rounded-xl border border-emerald-500/40 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-100 flex items-center gap-2",children:[e.jsx(I,{size:14}),e.jsx("span",{children:se})]}),E!=="unlocked"&&e.jsxs("div",{className:"rounded-3xl border border-slate-800/60 bg-slate-900/70 p-5 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 uppercase tracking-wide",children:[E==="locked"?e.jsx(re,{size:14}):e.jsx(Ve,{size:14}),E==="uninitialized"?"Create master passphrase":"Unlock vault"]}),e.jsx("p",{className:"text-[13px] text-slate-400 leading-relaxed",children:E==="uninitialized"?"Set a strong passphrase (stored nowhere) to encrypt credentials with AES-256 and PBKDF2 derived keys.":"Enter your passphrase to decrypt the local vault. Secrets remain encrypted at rest with zero telemetry."}),e.jsx("div",{className:"space-y-2",children:e.jsxs("label",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:["Passphrase",e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("input",{type:h?"text":"password",value:o,className:"flex-1 rounded-lg border border-slate-800/70 bg-slate-900/80 px-3 py-2 text-sm text-slate-100 focus:border-emerald-500/50 focus:outline-none",onChange:l=>p(l.target.value),autoComplete:"current-password"}),e.jsx("button",{type:"button",onClick:()=>C(l=>!l),className:"rounded-lg border border-slate-700/60 bg-slate-900/70 p-2 text-slate-300 hover:bg-slate-900/90",children:h?e.jsx(le,{size:14}):e.jsx(ne,{size:14})})]})]})}),e.jsxs("button",{type:"button",onClick:()=>void ge(),disabled:t||o.length<8,className:"inline-flex items-center gap-2 rounded-xl border border-emerald-500/40 bg-emerald-500/10 px-3 py-2 text-xs font-semibold text-emerald-200 transition-colors hover:bg-emerald-500/20 disabled:cursor-not-allowed disabled:opacity-60",children:[e.jsx(G,{size:14}),E==="uninitialized"?"Create & unlock":"Unlock vault"]})]}),E==="unlocked"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-800/60 bg-slate-900/70 p-4",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Total logins"}),e.jsxs("div",{className:"mt-2 flex items-baseline gap-2",children:[e.jsx("span",{className:"text-2xl font-semibold text-gray-100",children:ue}),e.jsx("span",{className:"text-[11px] text-slate-500",children:"entries protected"})]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-800/60 bg-slate-900/70 p-4",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Tagged identities"}),e.jsxs("div",{className:"mt-2 flex items-baseline gap-2",children:[e.jsx("span",{className:"text-2xl font-semibold text-gray-100",children:ae.tagged}),e.jsx("span",{className:"text-[11px] text-slate-500",children:"with risk labels"})]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-800/60 bg-slate-900/70 p-4",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recent usage"}),e.jsxs("div",{className:"mt-2 flex items-baseline gap-2",children:[e.jsx("span",{className:"text-2xl font-semibold text-gray-100",children:ae.recent}),e.jsx("span",{className:"text-[11px] text-slate-500",children:"accessed last 7 days"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wide",children:"Stored credentials"}),e.jsxs("button",{type:"button",onClick:()=>u(l=>!l),className:"inline-flex items-center gap-2 rounded-xl border border-slate-700/60 bg-slate-900/70 px-3 py-2 text-xs font-semibold text-slate-200 transition-colors hover:bg-slate-900/90",children:[e.jsx(Te,{size:13}),D?"Cancel":"Add credential"]})]}),e.jsx(A,{children:D&&e.jsxs(M.div,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},exit:{opacity:0,y:-6},className:"rounded-3xl border border-emerald-500/30 bg-emerald-500/5 p-5 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsxs("label",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:["Domain",e.jsx("input",{value:T,onChange:l=>F(l.target.value),placeholder:"e.g. accounts.example.com",className:"mt-1 w-full rounded-lg border border-slate-800/70 bg-slate-900/80 px-3 py-2 text-sm text-slate-100 focus:border-emerald-500/50 focus:outline-none"})]}),e.jsxs("label",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:["Username / ID",e.jsx("input",{value:B,onChange:l=>K(l.target.value),placeholder:"your email or handle",className:"mt-1 w-full rounded-lg border border-slate-800/70 bg-slate-900/80 px-3 py-2 text-sm text-slate-100 focus:border-emerald-500/50 focus:outline-none"})]})]}),e.jsxs("label",{className:"text-[11px] uppercase tracking-wide text-slate-500 block",children:["Secret / Password",e.jsx("input",{type:"text",value:H,onChange:l=>X(l.target.value),placeholder:"••••••••••••",className:"mt-1 w-full rounded-lg border border-slate-800/70 bg-slate-900/80 px-3 py-2 text-sm text-slate-100 focus:border-emerald-500/50 focus:outline-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsxs("label",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:["Secret hint (optional)",e.jsx("input",{value:J,onChange:l=>Q(l.target.value),placeholder:"Only you know this clue",className:"mt-1 w-full rounded-lg border border-slate-800/70 bg-slate-900/80 px-3 py-2 text-sm text-slate-100 focus:border-emerald-500/50 focus:outline-none"})]}),e.jsxs("label",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:["Tags (comma-separated)",e.jsx("input",{value:Y,onChange:l=>ee(l.target.value),placeholder:"finance, production, high-risk",className:"mt-1 w-full rounded-lg border border-slate-800/70 bg-slate-900/80 px-3 py-2 text-sm text-slate-100 focus:border-emerald-500/50 focus:outline-none"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"button",onClick:()=>void he(),disabled:!te||t,className:"inline-flex items-center gap-2 rounded-xl border border-emerald-500/40 bg-emerald-500/10 px-3 py-2 text-xs font-semibold text-emerald-200 transition-colors hover:bg-emerald-500/20 disabled:cursor-not-allowed disabled:opacity-60",children:[e.jsx(I,{size:13}),"Save credential"]})})]})}),e.jsx("div",{className:"space-y-3",children:r.length===0?e.jsx("div",{className:"rounded-3xl border border-slate-800/60 bg-slate-900/70 px-4 py-6 text-center text-sm text-slate-400",children:"No stored credentials yet. Add your first login to activate Redix Identity AI protections."}):e.jsx("div",{className:"space-y-2",children:r.slice().sort((l,w)=>(w.updatedAt??0)-(l.updatedAt??0)).map(l=>{const w=x===l.id&&n[l.id],z=n[l.id];return e.jsxs("div",{className:"rounded-3xl border border-slate-800/60 bg-slate-900/70 p-4",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-100",children:[e.jsx("span",{children:l.domain}),l.tags&&l.tags.length>0&&e.jsxs("span",{className:"text-[10px] uppercase tracking-wide text-emerald-300",children:[l.tags.slice(0,2).join(", "),l.tags.length>2?"…":""]})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:[l.username," · updated"," ",l.updatedAt?new Date(l.updatedAt).toLocaleString():"unknown"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("button",{type:"button",onClick:()=>void ye(l),disabled:b===l.id,className:"inline-flex items-center gap-1 rounded-lg border border-slate-700/60 bg-slate-900/70 px-2.5 py-1 text-[11px] font-medium text-slate-200 hover:bg-slate-900/90 disabled:cursor-wait disabled:opacity-60",children:[w?e.jsx(le,{size:12}):e.jsx(ne,{size:12}),w?"Hide":"Reveal"]}),e.jsxs("button",{type:"button",onClick:()=>void be(l.id),disabled:!z,className:"inline-flex items-center gap-1 rounded-lg border border-slate-700/60 bg-slate-900/70 px-2.5 py-1 text-[11px] font-medium text-slate-200 hover:bg-slate-900/90 disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx(Ee,{size:12}),"Copy"]}),e.jsxs("button",{type:"button",onClick:()=>void y(l.id),className:"inline-flex items-center gap-1 rounded-lg border border-rose-500/40 bg-rose-500/10 px-2.5 py-1 text-[11px] font-medium text-rose-200 hover:bg-rose-500/20",children:[e.jsx(Pe,{size:12}),"Remove"]})]})]}),l.secretHint&&e.jsxs("div",{className:"mt-2 text-[11px] text-slate-400",children:["Hint: ",l.secretHint]}),w&&z&&e.jsx("div",{className:"mt-3 rounded-lg border border-emerald-500/40 bg-emerald-500/10 px-3 py-2 text-[12px] text-emerald-100 font-semibold tracking-wide",children:z})]},l.id)})})})]})]})}const xs={download:"Download file",form_submit:"Submit form",login:"Login",scrape:"Scrape content",export_data:"Export data",access_clipboard:"Clipboard access",access_camera:"Camera access",access_microphone:"Microphone access",access_filesystem:"Filesystem access",ai_cloud:"Cloud AI usage"},ms=s=>s.revokedAt?{label:"Revoked",tone:"text-red-400 bg-red-500/10 border-red-500/40"}:s.approved?{label:"Approved",tone:"text-emerald-300 bg-emerald-500/10 border-emerald-500/40"}:{label:"Pending",tone:"text-amber-300 bg-amber-500/10 border-amber-500/40"},ps=[{id:"planner",icon:I,label:"Planner"},{id:"plan",icon:_e,label:"Plan"},{id:"actions",icon:De,label:"Actions"},{id:"logs",icon:xe,label:"Logs"},{id:"memory",icon:Fe,label:"Memory"},{id:"consent",icon:$e,label:"Consent"},{id:"trust",icon:G,label:"Trust"},{id:"eco",icon:R,label:"Eco"},{id:"identity",icon:me,label:"Identity"},{id:"nexus",icon:W,label:"Nexus"}];function Xs({open:s,onClose:r}){const[t,a]=c.useState("planner"),[i,g]=c.useState(null),[f,N]=c.useState([]),[y,v]=c.useState([]),[d,b]=c.useState([]),[o,p]=c.useState(!1),h=c.useRef(null),C=O(n=>n.refresh),x=O(n=>n.records),m=O(n=>n.open);return L("agent:plan",n=>{g(n)},[]),L("agent:step",n=>{N(j=>[...j,n])},[]),L("agent:log",n=>{v(j=>[...j,`${new Date(n.timestamp).toLocaleTimeString()}: ${n.content}`])},[]),L("agent:consent:request",()=>{C()},[C]),c.useEffect(()=>{t==="logs"&&h.current&&h.current.scrollIntoView({behavior:"smooth"})},[y,t]),c.useEffect(()=>{b(x)},[x]),c.useEffect(()=>{s&&t==="consent"&&C()},[s,t,C]),e.jsx(A,{children:s&&e.jsxs(M.aside,{initial:{x:400,opacity:0},animate:{x:0,opacity:1},exit:{x:400,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"w-96 flex flex-col bg-gray-900/95 backdrop-blur-xl border-l border-gray-800/50 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800/50",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-200 flex items-center gap-2",children:[e.jsx(Ae,{size:20,className:"text-blue-400"}),"Agent Console"]}),e.jsx("button",{onClick:r,className:"p-1.5 rounded-lg hover:bg-gray-800/60 text-gray-400 hover:text-gray-200 transition-colors",children:e.jsx(Ie,{size:18})})]}),e.jsx("div",{className:"flex border-b border-gray-800/50 overflow-x-auto",children:ps.map(n=>{const j=n.icon;return e.jsxs("button",{onClick:()=>a(n.id),className:`
                    flex-shrink-0 flex items-center justify-center gap-2 px-4 py-3 text-sm font-medium
                    transition-colors relative min-w-[80px]
                    ${t===n.id?"text-blue-400":"text-gray-500 hover:text-gray-300"}
                  `,children:[e.jsx(j,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:n.label}),t===n.id&&e.jsx(M.div,{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-500",layoutId:"activeTab"})]},n.id)})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[t==="planner"&&e.jsx(Ke,{}),t==="plan"&&e.jsx("div",{className:"space-y-4",children:i?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-800/40 rounded-lg p-4 border border-gray-700/30",children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:["Task: ",i.taskId]}),e.jsx("div",{className:"space-y-2",children:i.steps.map((n,j)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-blue-600/20 flex items-center justify-center text-xs text-blue-400 font-medium",children:j+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-gray-200",children:n.description}),n.tool&&e.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:["Tool: ",n.tool]})]})]},n.id))})]}),e.jsx("div",{className:"flex items-center justify-between text-xs",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-gray-400",children:["Tokens: ",e.jsx("span",{className:"text-gray-200",children:i.remaining.tokens}),"/",i.budget.tokens]}),e.jsxs("span",{className:"text-gray-400",children:["Time: ",e.jsxs("span",{className:"text-gray-200",children:[i.remaining.seconds,"s"]}),"/",i.budget.seconds,"s"]})]})})]}):e.jsx("div",{className:"text-xs text-gray-500 text-center py-8",children:"No active plan. Create a task to see the agent's reasoning."})}),t==="actions"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-3",children:"Tool Calls & Actions"}),f.length>0?e.jsx("div",{className:"space-y-2",children:f.map((n,j)=>e.jsxs(M.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"bg-gray-800/40 rounded p-3 border border-gray-700/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-300",children:n.type}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(n.timestamp).toLocaleTimeString()})]}),e.jsx("div",{className:"text-xs text-gray-400 mt-1 whitespace-pre-wrap",children:n.content})]},j))}):e.jsx("div",{className:"text-xs text-gray-500 text-center py-8",children:"No actions yet"})]}),t==="logs"&&e.jsxs("div",{className:"space-y-1 font-mono text-xs",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Live Log Stream"}),e.jsx("div",{className:"bg-gray-950 rounded p-3 max-h-96 overflow-y-auto",children:y.length>0?e.jsxs(e.Fragment,{children:[y.map((n,j)=>e.jsx("div",{className:"text-gray-400 py-0.5",children:n},j)),e.jsx("div",{ref:h})]}):e.jsx("div",{className:"text-gray-600 text-center py-8",children:"No logs yet"})})]}),t==="memory"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-3",children:"Session Notes & Data"}),e.jsx("div",{className:"text-xs text-gray-500 text-center py-8",children:"No session data"})]}),t==="consent"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[e.jsx("span",{children:"Consent Ledger"}),e.jsx("button",{onClick:()=>void m(),className:"rounded-lg border border-slate-700/60 bg-slate-900/70 px-2 py-1 text-[11px] text-gray-300 hover:bg-slate-900/90",children:"Open dashboard"})]}),d.length>0?e.jsx("div",{className:"space-y-2",children:d.slice(0,6).map(n=>{const j=ms(n);return e.jsxs("div",{className:"rounded-xl border border-slate-700/60 bg-slate-900/60 p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[e.jsx("span",{className:"text-gray-300 font-medium",children:xs[n.action.type]}),e.jsx("span",{className:`rounded-full border px-2 py-0.5 ${j.tone}`,children:j.label})]}),e.jsx("div",{className:"text-[11px] text-gray-500",children:n.action.description}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-600",children:[e.jsx("span",{children:Ne(new Date(n.timestamp),{addSuffix:!0})}),n.action.target&&e.jsxs("span",{children:["• ",n.action.target]})]})]},n.id)})}):e.jsx("div",{className:"text-xs text-gray-500 text-center py-8",children:"No consent records yet"})]}),t==="trust"&&e.jsx(is,{}),t==="eco"&&e.jsx(ls,{}),t==="identity"&&e.jsx(ds,{}),t==="nexus"&&e.jsx(ss,{})]}),e.jsxs("div",{className:"p-4 border-t border-gray-800/50 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("input",{type:"checkbox",id:"dry-run",checked:o,onChange:n=>p(n.target.checked),className:"rounded"}),e.jsx("label",{htmlFor:"dry-run",className:"cursor-pointer",children:"Dry-Run Mode"})]}),i&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap text-xs",children:[e.jsxs("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 rounded",children:[i.remaining.tokens," tokens"]}),e.jsxs("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 rounded",children:[i.remaining.seconds,"s"]}),e.jsxs("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 rounded",children:[i.remaining.requests," requests"]})]})]})]})})}export{Xs as RightPanel};
//# sourceMappingURL=RightPanel-pEVp9wV4.js.map

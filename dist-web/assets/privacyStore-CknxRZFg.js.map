{"version":3,"file":"privacyStore-CknxRZFg.js","sources":["../../node_modules/lucide-react/dist/esm/icons/ellipsis.js","../../node_modules/lucide-react/dist/esm/icons/wifi.js","../../src/state/privacyStore.ts"],"sourcesContent":["/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Ellipsis = createLucideIcon(\"Ellipsis\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"1\", key: \"41hilf\" }],\n  [\"circle\", { cx: \"19\", cy: \"12\", r: \"1\", key: \"1wjl8i\" }],\n  [\"circle\", { cx: \"5\", cy: \"12\", r: \"1\", key: \"1pcz8c\" }]\n]);\n\nexport { Ellipsis as default };\n//# sourceMappingURL=ellipsis.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Wifi = createLucideIcon(\"Wifi\", [\n  [\"path\", { d: \"M12 20h.01\", key: \"zekei9\" }],\n  [\"path\", { d: \"M2 8.82a15 15 0 0 1 20 0\", key: \"dnpr2z\" }],\n  [\"path\", { d: \"M5 12.859a10 10 0 0 1 14 0\", key: \"1x1e6c\" }],\n  [\"path\", { d: \"M8.5 16.429a5 5 0 0 1 7 0\", key: \"1bycff\" }]\n]);\n\nexport { Wifi as default };\n//# sourceMappingURL=wifi.js.map\n","import { create } from 'zustand';\r\nimport { ipc } from '../lib/ipc-typed';\r\n\r\nexport type TorStatus = {\r\n  running: boolean;\r\n  bootstrapped: boolean;\r\n  circuitEstablished: boolean;\r\n  progress: number;\r\n  stub?: boolean;\r\n  error?: string | null;\r\n  loading: boolean;\r\n  lastChecked: number | null;\r\n};\r\n\r\nexport type VpnStatus = {\r\n  connected: boolean;\r\n  type?: string;\r\n  name?: string;\r\n  stub?: boolean;\r\n  loading: boolean;\r\n  lastChecked: number | null;\r\n};\r\n\r\ninterface PrivacyState {\r\n  tor: TorStatus;\r\n  vpn: VpnStatus;\r\n  refreshTor: () => Promise<void>;\r\n  refreshVpn: () => Promise<void>;\r\n  startTor: () => Promise<void>;\r\n  stopTor: () => Promise<void>;\r\n  newTorIdentity: () => Promise<void>;\r\n  checkVpn: () => Promise<void>;\r\n}\r\n\r\nconst defaultTor: TorStatus = {\r\n  running: false,\r\n  bootstrapped: false,\r\n  circuitEstablished: false,\r\n  progress: 0,\r\n  stub: false,\r\n  error: null,\r\n  loading: false,\r\n  lastChecked: null,\r\n};\r\n\r\nconst defaultVpn: VpnStatus = {\r\n  connected: false,\r\n  type: undefined,\r\n  name: undefined,\r\n  stub: false,\r\n  loading: false,\r\n  lastChecked: null,\r\n};\r\n\r\nexport const usePrivacyStore = create<PrivacyState>((set, get) => ({\r\n  tor: defaultTor,\r\n  vpn: defaultVpn,\r\n  async refreshTor() {\r\n    set((state) => ({ tor: { ...state.tor, loading: true } }));\r\n    try {\r\n      const status = await ipc.tor.status();\r\n      set({\r\n        tor: {\r\n          running: Boolean(status?.running),\r\n          bootstrapped: Boolean(status?.bootstrapped),\r\n          circuitEstablished: Boolean(status?.circuitEstablished),\r\n          progress: typeof status?.progress === 'number' ? status.progress : 0,\r\n          stub: Boolean(status?.stub),\r\n          error: typeof status?.error === 'string' ? status.error : null,\r\n          loading: false,\r\n          lastChecked: Date.now(),\r\n        },\r\n      });\r\n    } catch (error) {\r\n      set({\r\n        tor: {\r\n          ...get().tor,\r\n          loading: false,\r\n          error: error instanceof Error ? error.message : String(error),\r\n          lastChecked: Date.now(),\r\n        },\r\n      });\r\n    }\r\n  },\r\n  async refreshVpn() {\r\n    set((state) => ({ vpn: { ...state.vpn, loading: true } }));\r\n    try {\r\n      const status = await ipc.vpn.status();\r\n      set({\r\n        vpn: {\r\n          connected: Boolean(status?.connected),\r\n          type: status?.type ?? undefined,\r\n          name: status?.name ?? undefined,\r\n          stub: Boolean((status as any)?.stub),\r\n          loading: false,\r\n          lastChecked: Date.now(),\r\n        },\r\n      });\r\n    } catch {\r\n      set({\r\n        vpn: {\r\n          ...get().vpn,\r\n          loading: false,\r\n          lastChecked: Date.now(),\r\n        },\r\n      });\r\n    }\r\n  },\r\n  async startTor() {\r\n    set((state) => ({ tor: { ...state.tor, loading: true, error: null } }));\r\n    try {\r\n      const response = await ipc.tor.start();\r\n      await get().refreshTor();\r\n      if ((response as any)?.stub) {\r\n        set((state) => ({\r\n          tor: {\r\n            ...state.tor,\r\n            stub: true,\r\n            error: (response as any)?.warning ?? 'Tor binary not found; running in stub mode.',\r\n          },\r\n        }));\r\n      }\r\n    } catch (error) {\r\n      set({\r\n        tor: {\r\n          ...defaultTor,\r\n          error: error instanceof Error ? error.message : String(error),\r\n          loading: false,\r\n          lastChecked: Date.now(),\r\n        },\r\n      });\r\n    }\r\n  },\r\n  async stopTor() {\r\n    set((state) => ({ tor: { ...state.tor, loading: true } }));\r\n    try {\r\n      await ipc.tor.stop();\r\n    } catch (error) {\r\n      set({\r\n        tor: {\r\n          ...get().tor,\r\n          error: error instanceof Error ? error.message : String(error),\r\n        },\r\n      });\r\n    } finally {\r\n      set({\r\n        tor: {\r\n          ...defaultTor,\r\n          lastChecked: Date.now(),\r\n        },\r\n      });\r\n    }\r\n  },\r\n  async newTorIdentity() {\r\n    try {\r\n      await ipc.tor.newIdentity();\r\n      await get().refreshTor();\r\n    } catch (error) {\r\n      set({\r\n        tor: {\r\n          ...get().tor,\r\n          error: error instanceof Error ? error.message : String(error),\r\n        },\r\n      });\r\n    }\r\n  },\r\n  async checkVpn() {\r\n    set((state) => ({ vpn: { ...state.vpn, loading: true } }));\r\n    try {\r\n      const status = await ipc.vpn.check();\r\n      set({\r\n        vpn: {\r\n          connected: Boolean(status?.connected),\r\n          type: status?.type ?? undefined,\r\n          name: status?.name ?? undefined,\r\n          stub: Boolean((status as any)?.stub),\r\n          loading: false,\r\n          lastChecked: Date.now(),\r\n        },\r\n      });\r\n    } catch {\r\n      set({\r\n        vpn: {\r\n          ...get().vpn,\r\n          loading: false,\r\n          lastChecked: Date.now(),\r\n        },\r\n      });\r\n    }\r\n  },\r\n}));\r\n"],"names":["Ellipsis","createLucideIcon","Wifi","defaultTor","defaultVpn","usePrivacyStore","create","set","get","state","status","ipc","error","response"],"mappings":"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","x_google_ignoreList":[0,1]}
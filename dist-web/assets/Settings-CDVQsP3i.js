import{u as de,r as o,i as s,j as e}from"./index-dj7m1cGj.js";import{S as R}from"./shield-wz6Nan5a.js";import{S as ue}from"./shield-check-Drnm7Ghu.js";import{c as S,m as p}from"./proxy-C7NQ8sMs.js";import{L}from"./lock-Do5xV_Pm.js";import{N as z}from"./network-BKgZ1MJV.js";import{R as xe}from"./refresh-cw-81QnrOuz.js";import{P as J}from"./power-ClhOy6wU.js";import{G as Z}from"./globe-CkFFXIIw.js";import{D as me}from"./download-B1WlPeuz.js";import{M as pe,S as ge}from"./settings-CRuJdu6q.js";import{C as he}from"./cpu-DP5ZXhxc.js";import{B as fe}from"./bell-CHeHJiZV.js";import{S as be}from"./sparkles-BXvEuSDZ.js";import{C as ye}from"./cloud-RM87ovcD.js";import{S as X}from"./search-DY2JFyPs.js";import{C as je}from"./chevron-right-De8SIpIA.js";import{A as ve}from"./index-D3V9pHtR.js";import{E as Ne}from"./eye-K0nBXFUq.js";import{T as we}from"./trash-2-WPlKMkyK.js";import{R as W}from"./refresh-ccw-LV4-9HT3.js";import{L as B}from"./loader-circle-B2cekLv2.js";import{f as K}from"./formatDistanceToNow-Ctx6mZEP.js";const ke=S("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);const Ce=S("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const Y=S("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);const Se=S("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);const Pe=S("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);const Te=S("Webcam",[["circle",{cx:"12",cy:"10",r:"8",key:"1gshiw"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 22h10",key:"10w4w3"}],["path",{d:"M12 22v-4",key:"1utk9m"}]]);function Ae(){const{activeId:g}=de(),[m,n]=o.useState(null),[j,t]=o.useState("");o.useEffect(()=>{(async()=>{if(j)try{const b=await s.shields.get(j);n(b)}catch(b){console.error("Failed to load shields:",b)}})()},[j]),o.useEffect(()=>{g&&s.tabs.list().then(u=>{const b=u.find(x=>x.id===g);b&&t(b.url||"")})},[g]);const f=async(u,b)=>{if(!m)return;const x={...m.config,[u]:b};try{await s.shields.set(m.hostname||j,{[u]:b}),n({...m,config:x})}catch(v){console.error("Failed to update shield:",v)}};return m?e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(R,{className:"text-blue-400",size:20}),e.jsxs("h3",{className:"font-semibold text-gray-200",children:["Shields for ",m.hostname||"this site"]})]}),e.jsx(F,{icon:e.jsx(ue,{}),label:"Ads & Trackers",description:"Block ads and tracking scripts",enabled:m.config.ads,onChange:u=>f("ads",u)}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[e.jsx(ke,{size:16}),e.jsx("span",{children:"Cookies"})]}),e.jsxs("select",{value:m.config.cookies,onChange:u=>f("cookies",u.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-sm text-gray-200",children:[e.jsx("option",{value:"all",children:"Allow all cookies"}),e.jsx("option",{value:"3p",children:"Block third-party cookies"}),e.jsx("option",{value:"none",children:"Block all cookies"})]})]}),e.jsx(F,{icon:e.jsx(L,{}),label:"HTTPS-Only Mode",description:"Upgrade all HTTP connections to HTTPS",enabled:m.config.httpsOnly,onChange:u=>f("httpsOnly",u)}),e.jsx(F,{icon:e.jsx(Y,{}),label:"Fingerprinting Protection",description:"Add noise to canvas, audio, and WebGL fingerprints",enabled:m.config.fingerprinting,onChange:u=>f("fingerprinting",u)}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[e.jsx(Y,{size:16}),e.jsx("span",{children:"JavaScript"})]}),e.jsxs("select",{value:m.config.scripts,onChange:u=>f("scripts",u.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-sm text-gray-200",children:[e.jsx("option",{value:"all",children:"Allow all scripts"}),e.jsx("option",{value:"3p",children:"Block third-party scripts"}),e.jsx("option",{value:"none",children:"Block all scripts"})]})]}),e.jsx(F,{icon:e.jsx(Te,{}),label:"WebRTC Leak Protection",description:"Block WebRTC to prevent IP leaks",enabled:m.config.webrtc,onChange:u=>f("webrtc",u)})]}):e.jsx("div",{className:"p-4 text-sm text-gray-500",children:"Navigate to a website to see shields configuration"})}function F({icon:g,label:m,description:n,enabled:j,onChange:t}){return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/60 rounded-lg border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded ${j?"bg-blue-500/20 text-blue-400":"bg-gray-700/50 text-gray-500"}`,children:g}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-200",children:m}),e.jsx("div",{className:"text-xs text-gray-500",children:n})]})]}),e.jsx(p.button,{onClick:()=>t(!j),className:`relative w-12 h-6 rounded-full transition-colors ${j?"bg-blue-500":"bg-gray-700"}`,whileTap:{scale:.95},children:e.jsx(p.div,{className:"absolute top-1 left-1 w-4 h-4 bg-white rounded-full",animate:{x:j?24:0},transition:{type:"spring",stiffness:500,damping:30}})})]})}function Me(){const[g,m]=o.useState(null),[n,j]=o.useState(null),[t,f]=o.useState(null),[u,b]=o.useState(null);o.useEffect(()=>{const h=async()=>{try{const[C,w,M,P]=await Promise.all([s.tor.status(),s.vpn.status(),s.dns.status(),s.network.get()]);m(C),j(w),f(M),b(P)}catch(C){console.error("Failed to load network status:",C)}};h();const A=setInterval(h,3e3);return()=>clearInterval(A)},[]);const x=async()=>{try{await s.tor.start({port:9050,controlPort:9051}),setTimeout(()=>{s.tor.status().then(m)},1e3)}catch(h){console.error("Failed to start Tor:",h)}},v=async()=>{try{await s.tor.stop(),m({running:!1,bootstrapped:!1,progress:0,circuitEstablished:!1})}catch(h){console.error("Failed to stop Tor:",h)}},N=async()=>{try{await s.tor.newIdentity(),setTimeout(()=>{s.tor.status().then(m)},500)}catch(h){console.error("Failed to renew identity:",h)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800/60 rounded-lg border border-gray-700/50 p-4",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded bg-orange-500/20 text-orange-400 flex-shrink-0",children:e.jsx(z,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-200 mb-1",children:"Tor Network"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Route traffic through Tor network for enhanced anonymity"})]})]}),g?.running?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Status"}),e.jsx("span",{className:`font-medium ${g.bootstrapped?"text-green-400":"text-yellow-400"}`,children:g.bootstrapped?"Connected":`Bootstrap ${g.progress}%`})]}),g.error&&e.jsx("div",{className:"text-xs text-red-400",children:g.error}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:v,className:"flex-1 px-4 py-2.5 bg-red-600/60 hover:bg-red-600/80 rounded-lg border border-red-500/30 text-red-200 text-sm font-medium transition-colors",children:"Stop Tor"}),e.jsxs("button",{onClick:N,className:"px-4 py-2.5 bg-orange-600/60 hover:bg-orange-600/80 rounded-lg border border-orange-500/30 text-orange-200 text-sm font-medium transition-colors",children:[e.jsx(xe,{size:14,className:"inline mr-2"}),"New Identity"]})]})]}):e.jsxs("button",{onClick:x,className:"w-full px-4 py-3 bg-orange-600/60 hover:bg-orange-600/80 rounded-lg border border-orange-500/30 text-orange-200 font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(J,{size:18}),"Start Tor"]})]}),e.jsx("div",{className:"bg-gray-800/60 rounded-lg border border-gray-700/50 p-4",children:e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded bg-blue-500/20 text-blue-400 flex-shrink-0",children:e.jsx(z,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-200 mb-1",children:"VPN Status"}),n?.connected?e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"VPN"}),e.jsx("span",{className:"text-green-400 font-medium",children:n.name||n.type||"Connected"})]}),n.type&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Type"}),e.jsx("span",{className:"text-gray-300 capitalize",children:n.type})]})]}):e.jsx("p",{className:"text-sm text-gray-400",children:"No VPN detected. Connect to a VPN service (WireGuard, OpenVPN, etc.)"})]})]})}),e.jsxs("div",{className:"bg-gray-800/60 rounded-lg border border-gray-700/50 p-4",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded bg-purple-500/20 text-purple-400 flex-shrink-0",children:e.jsx(Z,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-200 mb-1",children:"DNS-over-HTTPS"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Use encrypted DNS to prevent DNS leaks"})]})]}),t?.enabled?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Provider"}),e.jsx("span",{className:"text-purple-400 font-medium capitalize",children:t.provider||"cloudflare"})]}),e.jsx("button",{onClick:async()=>{await s.dns.disableDoH();const h=await s.dns.status();f(h)},className:"w-full mt-2 px-4 py-2.5 bg-gray-700/60 hover:bg-gray-700/80 rounded-lg border border-gray-600/30 text-gray-300 text-sm font-medium transition-colors",children:"Disable DoH"})]}):e.jsx("button",{onClick:async()=>{await s.dns.enableDoH("cloudflare");const h=await s.dns.status();f(h)},className:"w-full px-4 py-3 bg-purple-600/60 hover:bg-purple-600/80 rounded-lg border border-purple-500/30 text-purple-200 font-medium transition-colors",children:"Enable DoH"})]}),e.jsxs("div",{className:"bg-gray-800/60 rounded-lg border border-gray-700/50 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"p-2 rounded bg-cyan-500/20 text-cyan-400 flex-shrink-0",children:e.jsx(z,{size:20})}),e.jsx("div",{className:"flex-1",children:e.jsx("h3",{className:"font-semibold text-gray-200 mb-1",children:"HTTP/3 QUIC"})})]}),e.jsx(p.button,{onClick:async()=>{u?.quicEnabled?await s.network.disableQUIC():await s.network.enableQUIC();const h=await s.network.get();b(h)},className:`relative w-14 h-7 rounded-full transition-colors flex-shrink-0 ${u?.quicEnabled?"bg-green-500":"bg-red-500"}`,whileTap:{scale:.95},children:e.jsx(p.div,{className:"absolute top-0.5 left-0.5 w-6 h-6 bg-white rounded-full shadow-md",animate:{x:u?.quicEnabled?28:0},transition:{type:"spring",stiffness:500,damping:30}})})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2 ml-11",children:u?.quicEnabled?"QUIC enabled":"QUIC disabled - Using HTTP/2"})]})]})}const _=[{id:"appearance",title:"Appearance",icon:Se,category:"Basics"},{id:"startup",title:"On startup",icon:J,category:"Basics"},{id:"privacy",title:"Privacy and security",icon:R,category:"Privacy"},{id:"downloads",title:"Downloads",icon:me,category:"Basics"},{id:"videoCall",title:"Video calls",icon:Pe,category:"Advanced"},{id:"languages",title:"Languages",icon:Z,category:"Advanced"},{id:"system",title:"System",icon:pe,category:"Advanced"},{id:"diagnostics",title:"Diagnostics",icon:Ce,category:"Advanced"},{id:"performance",title:"Performance",icon:he,category:"Advanced"},{id:"notifications",title:"Notifications",icon:fe,category:"Advanced"},{id:"ai",title:"AI Models",icon:be,category:"AI & Sync"},{id:"cloudVector",title:"Cloud Vector DB",icon:ye,category:"AI & Sync"},{id:"hybridSearch",title:"Hybrid Search",icon:X,category:"AI & Sync"},{id:"e2eeSync",title:"E2EE Sync",icon:L,category:"AI & Sync"}];function er(){const[g,m]=o.useState(""),[n,j]=o.useState("appearance"),[t,f]=o.useState(null),[u,b]=o.useState(!0),[x,v]=o.useState({enabled:!0,adaptiveQuality:!0,maxResolution:"720p",maxFrameRate:30,bandwidthEstimate:1e3,priorityMode:"balanced"}),[N,h]=o.useState({bandwidth:1e3,latency:50,packetLoss:0,quality:"good"}),[A,C]=o.useState(!1),[w,M]=o.useState(null),[P,E]=o.useState([]),[V,U]=o.useState(null),[T,y]=o.useState(null),[ee,$]=o.useState(!1),[G,I]=o.useState(null),[Q,O]=o.useState([]);o.useEffect(()=>{(async()=>{try{let i=null;try{i=await s.settings.get()}catch(d){console.warn("Failed to load settings from IPC, using defaults:",d)}i||(i={privacy:{burnOnClose:!1,telemetry:"off",doNotTrack:!0,autoPurgeCookies:!1,purgeAfterDays:30},network:{doh:!1,dohProvider:"cloudflare",proxy:null,perTabProxy:!1,quic:!0},downloads:{requireConsent:!1,defaultPath:"Downloads",checksum:!1},diagnostics:{telemetryOptIn:!1},performance:{tabSleepMins:20,memoryCapMB:2048,gpuAcceleration:!0},ai:{provider:"local",model:"default",maxTokens:4096,temperature:.7},ui:{theme:"dark",compactMode:!1,showProxyBadge:!0},startup:{behavior:"newTab",customPages:[]}}),i.startup||(i.startup={behavior:"newTab",customPages:[]}),i.privacy||(i.privacy={burnOnClose:!1,telemetry:"off",doNotTrack:!0,autoPurgeCookies:!1,purgeAfterDays:30}),i.network||(i.network={doh:!1,dohProvider:"cloudflare",proxy:null,perTabProxy:!1,quic:!0}),i.downloads||(i.downloads={requireConsent:!1,defaultPath:"Downloads",checksum:!1}),i.diagnostics||(i.diagnostics={telemetryOptIn:!1}),i.performance||(i.performance={tabSleepMins:20,memoryCapMB:2048,gpuAcceleration:!0}),i.ai||(i.ai={provider:"local",model:"default",maxTokens:4096,temperature:.7}),i.ui||(i.ui={theme:"dark",compactMode:!1,showProxyBadge:!0}),f(i);try{const d=await s.videoCall.getConfig();v({enabled:d?.enabled??!0,adaptiveQuality:d?.adaptiveQuality??!0,maxResolution:d?.maxResolution||"720p",maxFrameRate:d?.maxFrameRate??30,bandwidthEstimate:d?.bandwidthEstimate??1e3,priorityMode:d?.priorityMode||"balanced"})}catch(d){console.warn("Failed to load video call config, using defaults:",d)}try{const d=await s.videoCall.getNetworkQuality();d&&h(d)}catch(d){console.warn("Failed to load network quality, using defaults:",d)}}catch(i){console.error("Failed to load settings:",i)}finally{b(!1)}})();const a=setTimeout(()=>{console.warn("Settings load timeout, using defaults"),b(!1),f(i=>i||{privacy:{burnOnClose:!1,telemetry:"off",doNotTrack:!0,autoPurgeCookies:!1,purgeAfterDays:30},network:{doh:!1,dohProvider:"cloudflare",proxy:null,perTabProxy:!1,quic:!0},downloads:{requireConsent:!1,defaultPath:"Downloads",checksum:!1},performance:{tabSleepMins:20,memoryCapMB:2048,gpuAcceleration:!0},ai:{provider:"local",model:"default",maxTokens:4096,temperature:.7},ui:{theme:"dark",compactMode:!1,showProxyBadge:!0},startup:{behavior:"newTab",customPages:[]}})},3e3);let c=null;try{c=setInterval(async()=>{try{const i=await s.videoCall.getNetworkQuality();i&&h(i)}catch{}},5e3)}catch{}return()=>{clearTimeout(a),c&&clearInterval(c)}},[]);const l=async(r,a)=>{try{if(await s.settings.set(r,a),t){const c={...t};let i=c;for(let d=0;d<r.length-1;d++)i=i[r[d]]={...i[r[d]]};i[r[r.length-1]]=a,f(c)}}catch(c){console.error("Failed to update setting:",c)}},k=o.useCallback(async()=>{$(!0),I(null);try{const r=await s.permissions.list();Array.isArray(r)?O(r):O([])}catch(r){console.error("Failed to load permissions:",r),I("Unable to load site permissions right now."),O([])}finally{$(!1)}},[]),re=o.useCallback(async r=>{try{await s.permissions.revoke(r.type,r.origin),await k()}catch(a){console.error("Failed to revoke permission:",a),I(`Failed to revoke ${r.type} for ${r.origin}.`)}},[k]),ae=o.useCallback(async r=>{try{await s.permissions.clearOrigin(r),await k()}catch(a){console.error("Failed to clear permissions for origin:",a),I(`Failed to clear permissions for ${r}.`)}},[k]),q=o.useCallback(async r=>{const a=[];switch(r){case"strict":a.push(l(["privacy","burnOnClose"],!0)),a.push(l(["privacy","autoPurgeCookies"],!0)),a.push(l(["privacy","purgeAfterDays"],1)),a.push(l(["privacy","doNotTrack"],!0)),a.push(l(["downloads","requireConsent"],!0)),a.push(l(["diagnostics","telemetryOptIn"],!1));break;case"moderate":a.push(l(["privacy","burnOnClose"],!1)),a.push(l(["privacy","autoPurgeCookies"],!0)),a.push(l(["privacy","purgeAfterDays"],7)),a.push(l(["privacy","doNotTrack"],!0)),a.push(l(["downloads","requireConsent"],!0));break;case"relaxed":default:a.push(l(["privacy","burnOnClose"],!1)),a.push(l(["privacy","autoPurgeCookies"],!1)),a.push(l(["privacy","purgeAfterDays"],30)),a.push(l(["privacy","doNotTrack"],!1)),a.push(l(["downloads","requireConsent"],!1));break}await Promise.all(a)},[l]),te=o.useCallback(async()=>{try{(await s.diagnostics.openLogs())?.success?y({text:"Logs folder opened in your file manager.",tone:"success"}):y({text:"Unable to open logs folder.",tone:"error"})}catch(r){console.error("Failed to open logs folder:",r),y({text:"Failed to open logs folder.",tone:"error"})}},[]),se=o.useCallback(async()=>{try{const r=await s.diagnostics.copyDiagnostics();if(r?.diagnostics)await navigator.clipboard.writeText(r.diagnostics),y({text:"Diagnostics copied to clipboard.",tone:"success"});else throw new Error("No diagnostics payload received")}catch(r){console.error("Failed to copy diagnostics:",r),y({text:"Failed to copy diagnostics to clipboard.",tone:"error"})}},[]),le=o.useCallback(async()=>{try{const r=await s.settings.exportFile();if(!r){y({text:"Export failed.",tone:"error"});return}if(r.canceled)return;r.success?y({text:r.path?`Settings exported to ${r.path}.`:"Settings exported.",tone:"success"}):y({text:"Unable to export settings.",tone:"error"})}catch(r){console.error("Failed to export settings:",r),y({text:"Failed to export settings.",tone:"error"})}},[]),oe=o.useCallback(async()=>{try{const r=await s.settings.importFile();if(!r){y({text:"Import failed.",tone:"error"});return}if(r.canceled)return;if(r.success){try{const a=await s.settings.get();f(a)}catch(a){console.warn("Imported settings but failed to reload via IPC:",a)}y({text:r.path?`Imported settings from ${r.path}.`:"Settings imported.",tone:"success"})}else y({text:"Unable to import settings.",tone:"error"})}catch(r){console.error("Failed to import settings:",r),y({text:"Failed to import settings.",tone:"error"})}},[]),ie=o.useCallback(r=>{switch(r){case"clipboard:write":return"Clipboard";case"filesystem":return"File system";case"microphone":return"Microphone";case"camera":return"Camera";case"notifications":return"Notifications";default:return r}},[]),D=o.useCallback(async()=>{C(!0),U(null);try{const r=await s.ollama.check(),a=!!r?.available;if(M(a),a){const c=r.models&&r.models.length>0?r.models:(await s.ollama.listModels())?.models||[];E(c)}else E([])}catch(r){console.warn("Failed to check Ollama availability:",r),M(!1),E([]),U("Unable to reach local Ollama service. Make sure it is running on port 11434.")}finally{C(!1)}},[]);o.useEffect(()=>{(n==="ai"||t?.ai.provider==="local")&&D()},[n,t?.ai.provider,D]),o.useEffect(()=>{n==="privacy"&&k()},[n,k]),o.useEffect(()=>{if(!T)return;const r=setTimeout(()=>y(null),4e3);return()=>clearTimeout(r)},[T]);const ne=o.useMemo(()=>[{id:"local",title:"Local (Ollama / GGUF)",description:"Run GGUF models offline through the local Ollama service."},{id:"openai",title:"OpenAI",description:"Use OpenAI hosted models when cloud consent is granted."},{id:"anthropic",title:"Anthropic (coming soon)",description:"Future support for Claude models."}],[]),H=o.useMemo(()=>{if(!g.trim())return _;const r=g.toLowerCase();return _.filter(a=>a.title.toLowerCase().includes(r)||a.id.toLowerCase().includes(r))},[g]),ce=o.useMemo(()=>{const r={};return H.forEach(a=>{r[a.category]||(r[a.category]=[]),r[a.category].push(a)}),r},[H]);return u?e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-[#1A1D28]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ge,{size:32,className:"text-blue-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Loading settings..."})]})}):t?e.jsxs("div",{className:"h-full w-full bg-[#1A1D28] text-gray-100 flex",children:[e.jsxs("div",{className:"w-64 border-r border-gray-800/50 flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-800/50",children:e.jsxs("div",{className:"relative",children:[e.jsx(X,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",value:g,onChange:r=>m(r.target.value),placeholder:"Search settings",className:"w-full h-9 pl-9 pr-3 bg-gray-900/60 border border-gray-700/50 rounded-lg text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-sm"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:Object.entries(ce).map(([r,a])=>e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"px-3 py-1.5 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:r}),a.map(c=>{const i=c.icon,d=n===c.id;return e.jsxs(p.button,{onClick:()=>j(c.id),whileHover:{x:2},className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${d?"bg-blue-600/20 text-blue-400 border border-blue-500/30":"text-gray-300 hover:bg-gray-800/50 hover:text-gray-100"}`,children:[e.jsx(i,{size:18}),e.jsx("span",{className:"flex-1 text-left",children:c.title}),d&&e.jsx(je,{size:16,className:"text-blue-400"})]},c.id)})]},r))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs(ve,{mode:"wait",children:[n==="appearance"&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Appearance"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Theme"}),e.jsx("div",{className:"space-y-2",children:["light","dark","auto"].map(r=>e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-colors ${t.ui.theme===r?"bg-blue-900/20 border-blue-500/50":"bg-gray-900/60 border-gray-800/50 hover:bg-gray-900/80"}`,children:[e.jsx("input",{type:"radio",name:"theme",checked:t.ui.theme===r,onChange:()=>l(["ui","theme"],r),className:"w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"capitalize text-gray-200",children:r})]},r))})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Compact mode"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Reduce spacing for a more compact interface"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.ui.compactMode,onChange:r=>l(["ui","compactMode"],r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Show proxy badge"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Display proxy status indicator in the address bar"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.ui.showProxyBadge,onChange:r=>l(["ui","showProxyBadge"],r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]},"appearance"),n==="startup"&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"On startup"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`p-4 rounded-lg bg-gray-900/60 border border-gray-800/50 hover:bg-gray-900/80 transition-colors cursor-pointer ${t?.startup.behavior==="newTab"?"border-blue-500/50 bg-blue-900/20":""}`,children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer w-full",children:[e.jsx("input",{type:"radio",name:"startup",checked:t?.startup.behavior==="newTab",onChange:()=>l(["startup","behavior"],"newTab"),className:"w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-200",children:"Open the New Tab page"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Show a blank page when you start browsing"})]})]})}),e.jsx("div",{className:`p-4 rounded-lg bg-gray-900/60 border border-gray-800/50 hover:bg-gray-900/80 transition-colors cursor-pointer ${t?.startup.behavior==="continueSession"?"border-blue-500/50 bg-blue-900/20":""}`,children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer w-full",children:[e.jsx("input",{type:"radio",name:"startup",checked:t?.startup.behavior==="continueSession",onChange:()=>l(["startup","behavior"],"continueSession"),className:"w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-200",children:"Continue where you left off"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Reopen tabs from last session"})]})]})}),e.jsxs("div",{className:`p-4 rounded-lg bg-gray-900/60 border border-gray-800/50 hover:bg-gray-900/80 transition-colors cursor-pointer ${t?.startup.behavior==="customPages"?"border-blue-500/50 bg-blue-900/20":""}`,children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer w-full",children:[e.jsx("input",{type:"radio",name:"startup",checked:t?.startup.behavior==="customPages",onChange:()=>l(["startup","behavior"],"customPages"),className:"w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-200",children:"Open a specific page or set of pages"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Choose which pages to open"})]})]}),t?.startup.behavior==="customPages"&&e.jsx("div",{className:"mt-4 ml-7",children:e.jsxs("div",{className:"space-y-2",children:[t.startup.customPages.map((r,a)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-800/50 rounded",children:[e.jsx("input",{type:"text",value:r,onChange:c=>{const i=[...t.startup.customPages];i[a]=c.target.value,l(["startup","customPages"],i)},className:"flex-1 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-sm text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com"}),e.jsx("button",{onClick:()=>{const c=t.startup.customPages.filter((i,d)=>d!==a);l(["startup","customPages"],c)},className:"px-2 py-1 text-xs text-red-400 hover:text-red-300",children:"Remove"})]},a)),e.jsx("button",{onClick:()=>{const r=[...t.startup.customPages||[],""];l(["startup","customPages"],r)},className:"ml-7 px-3 py-1.5 text-sm bg-blue-600/60 hover:bg-blue-600/80 rounded border border-blue-500/30 text-blue-200",children:"+ Add page"})]})})]})]})]},"startup"),n==="privacy"&&e.jsx(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"h-full overflow-y-auto",children:e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Privacy and security"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Privacy levels"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Apply a preset to quickly align browser behavior with your risk tolerance."})]})}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[e.jsxs("button",{onClick:()=>void q("strict"),className:"rounded-lg border border-red-500/40 bg-red-500/10 p-4 text-left hover:border-red-500/60 transition-colors",children:[e.jsx("div",{className:"text-sm font-semibold text-red-300",children:"Strict"}),e.jsx("p",{className:"mt-2 text-sm text-red-200/80",children:"Wipe data on close, block tracking, require consent for downloads, disable telemetry."})]}),e.jsxs("button",{onClick:()=>void q("moderate"),className:"rounded-lg border border-amber-500/40 bg-amber-500/10 p-4 text-left hover:border-amber-500/60 transition-colors",children:[e.jsx("div",{className:"text-sm font-semibold text-amber-200",children:"Moderate"}),e.jsx("p",{className:"mt-2 text-sm text-amber-100/70",children:"Balanced defaults; auto-purge cookies after a week and keep consent prompts enabled."})]}),e.jsxs("button",{onClick:()=>void q("relaxed"),className:"rounded-lg border border-emerald-500/40 bg-emerald-500/10 p-4 text-left hover:border-emerald-500/60 transition-colors",children:[e.jsx("div",{className:"text-sm font-semibold text-emerald-200",children:"Relaxed"}),e.jsx("p",{className:"mt-2 text-sm text-emerald-100/70",children:"Keep browsing data persistent and minimize prompts for everyday use."})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(R,{size:20}),"Shields"]}),e.jsx(Ae,{})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ne,{size:20,className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:'Send "Do Not Track" request'}),e.jsx("p",{className:"text-sm text-gray-400",children:"Tell sites you don't want to be tracked"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.privacy.doNotTrack,onChange:r=>l(["privacy","doNotTrack"],r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{size:20,className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Burn on close"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Clear all data when closing tabs"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.privacy.burnOnClose,onChange:r=>l(["privacy","burnOnClose"],r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L,{size:20,className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Auto-purge cookies"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Automatically clear cookies after specified days"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.privacy.autoPurgeCookies,onChange:r=>l(["privacy","autoPurgeCookies"],r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),t.privacy.autoPurgeCookies&&e.jsxs("div",{className:"ml-8 p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Purge after (days)"}),e.jsx("input",{type:"number",min:"1",max:"365",value:t.privacy.purgeAfterDays,onChange:r=>l(["privacy","purgeAfterDays"],parseInt(r.target.value)||30),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Per-site permissions"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Review camera, microphone, filesystem, clipboard, and notification allowances."})]}),e.jsxs("button",{onClick:()=>void k(),className:"inline-flex items-center gap-2 rounded-md border border-gray-700 px-3 py-1.5 text-sm text-gray-200 hover:border-blue-500/60 hover:text-blue-200 transition-colors",children:[e.jsx(W,{className:"h-4 w-4"}),"Refresh"]})]}),G&&e.jsx("div",{className:"mb-3 text-sm text-red-400",children:G}),ee?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(B,{className:"h-4 w-4 animate-spin"}),"Loading permissions…"]}):Q.length===0?e.jsx("p",{className:"text-sm text-gray-400",children:"No site permissions granted."}):e.jsx("div",{className:"space-y-3",children:Q.map(r=>e.jsxs("div",{className:"flex flex-col gap-2 rounded-md border border-gray-800/70 bg-gray-900/80 p-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-100 break-all",children:r.origin}),e.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400",children:ie(r.type)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Granted"," ",K(r.grantedAt,{addSuffix:!0}),typeof r.expiresAt=="number"&&Number.isFinite(r.expiresAt)&&e.jsxs(e.Fragment,{children:[" • ","Expires"," ",K(r.expiresAt,{addSuffix:!0})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>void re(r),className:"rounded-md border border-red-500/40 bg-red-500/10 px-3 py-1.5 text-xs font-medium text-red-200 hover:border-red-500/60 transition-colors",children:"Revoke"}),e.jsx("button",{onClick:()=>void ae(r.origin),className:"rounded-md border border-yellow-500/40 bg-yellow-500/10 px-3 py-1.5 text-xs font-medium text-yellow-100 hover:border-yellow-500/60 transition-colors",children:"Clear origin"})]})]},`${r.type}:${r.origin}`))})]})]})]})},"privacy"),n==="downloads"&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Downloads"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Ask where to save each file before downloading"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Require consent before starting downloads"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.downloads.requireConsent,onChange:r=>l(["downloads","requireConsent"],r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Default download location"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:t.downloads.defaultPath||"Downloads folder",readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-200 focus:outline-none"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm font-medium",children:"Change"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Verify file integrity"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Calculate checksums for downloaded files"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.downloads.checksum,onChange:r=>l(["downloads","checksum"],r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]},"downloads"),n==="videoCall"&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Video calls"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Optimize video call quality for low bandwidth connections"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Network quality"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Bandwidth"}),e.jsxs("div",{className:"text-xl font-bold text-blue-400",children:[N.bandwidth," kbps"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Latency"}),e.jsxs("div",{className:"text-xl font-bold text-blue-400",children:[N.latency," ms"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Packet Loss"}),e.jsxs("div",{className:"text-xl font-bold text-blue-400",children:[N.packetLoss.toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Quality"}),e.jsx("div",{className:`text-xl font-bold capitalize ${N.quality==="excellent"?"text-green-400":N.quality==="good"?"text-blue-400":N.quality==="fair"?"text-yellow-400":"text-red-400"}`,children:N.quality})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Enable video call optimization"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Automatically optimize video quality for low bandwidth"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.enabled,onChange:async r=>{const a={...x,enabled:r.target.checked};v(a),await s.videoCall.updateConfig(a)},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Adaptive quality"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Automatically adjust quality based on network conditions"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.adaptiveQuality,onChange:async r=>{const a={...x,adaptiveQuality:r.target.checked};v(a),await s.videoCall.updateConfig(a)},disabled:!x.enabled,className:"sr-only peer"}),e.jsx("div",{className:`w-11 h-6 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 ${x.enabled?"bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500":"bg-gray-800 opacity-50"}`})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Maximum resolution"}),e.jsxs("select",{value:x.maxResolution,onChange:async r=>{const a={...x,maxResolution:r.target.value};v(a),await s.videoCall.updateConfig(a)},disabled:!x.enabled,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:[e.jsx("option",{value:"720p",children:"720p (HD)"}),e.jsx("option",{value:"480p",children:"480p (SD)"}),e.jsx("option",{value:"360p",children:"360p"}),e.jsx("option",{value:"240p",children:"240p (Low)"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Lower resolutions use less bandwidth"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsxs("label",{className:"block mb-2 text-sm font-medium",children:["Maximum frame rate: ",x.maxFrameRate," fps"]}),e.jsx("input",{type:"range",min:"10",max:"30",step:"5",value:x.maxFrameRate,onChange:async r=>{const a={...x,maxFrameRate:parseInt(r.target.value)};v(a),await s.videoCall.updateConfig(a)},disabled:!x.enabled,className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer disabled:opacity-50"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[e.jsx("span",{children:"10 fps"}),e.jsx("span",{children:"30 fps"})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Priority mode"}),e.jsx("div",{className:"space-y-2",children:["performance","balanced","quality"].map(r=>e.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg bg-gray-800/50 border border-gray-700/50 hover:bg-gray-800 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"priorityMode",checked:x.priorityMode===r,onChange:async()=>{const a={...x,priorityMode:r};v(a),await s.videoCall.updateConfig(a)},disabled:!x.enabled,className:"w-4 h-4 text-blue-600 disabled:opacity-50"}),e.jsxs("div",{children:[e.jsx("span",{className:"capitalize font-medium",children:r}),e.jsxs("p",{className:"text-xs text-gray-400",children:[r==="performance"&&"Minimize bandwidth, prioritize stability",r==="balanced"&&"Balance quality and bandwidth",r==="quality"&&"Prioritize video quality when possible"]})]})]},r))})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-blue-900/20 border border-blue-700/30",children:[e.jsx("h4",{className:"font-medium mb-2 text-blue-300",children:"Supported platforms"}),e.jsx("p",{className:"text-sm text-blue-200/80",children:"Optimizations work automatically with Zoom, Google Meet, Microsoft Teams, WebEx, GoToMeeting, Discord, and other WebRTC-based video calling platforms."})]})]})]},"videoCall"),n==="languages"&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Languages"}),e.jsx("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:e.jsx("p",{className:"text-gray-400",children:"Language settings will be available in a future update."})})]},"languages"),n==="system"&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"System"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Network"}),e.jsx(Me,{})]})})]},"system"),n==="diagnostics"&&t&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Diagnostics"}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Review logs, collect troubleshooting details, and control whether diagnostics ever leave your device."})]}),T&&e.jsx("div",{className:`rounded-lg border px-4 py-3 text-sm ${T.tone==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-red-500/40 bg-red-500/10 text-red-200"}`,children:T.text}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-gray-800/50 bg-gray-900/60 p-4",children:[e.jsxs("div",{className:"max-w-xl",children:[e.jsx("h3",{className:"font-medium text-gray-100",children:"Opt-in diagnostics telemetry"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"Share anonymized crash signatures and performance stats to help harden OmniBrowser. Nothing is sent unless you opt in."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.diagnostics.telemetryOptIn,onChange:async r=>{l(["diagnostics","telemetryOptIn"],r.target.checked);try{await s.telemetry.setOptIn(r.target.checked)}catch(a){console.warn("Failed to update telemetry service",a)}}}),e.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:absolute after:top-[2px] after:left-[2px] after:h-5 after:w-5 after:rounded-full after:bg-white after:transition-all"})]})]}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("button",{onClick:()=>void te(),className:"rounded-lg border border-blue-500/40 bg-blue-500/10 px-4 py-3 text-left text-sm font-medium text-blue-100 hover:border-blue-500/60 transition-colors",children:["Open logs folder",e.jsx("span",{className:"block text-xs font-normal text-blue-200/80",children:"View rotating log files directly."})]}),e.jsxs("button",{onClick:()=>void se(),className:"rounded-lg border border-indigo-500/40 bg-indigo-500/10 px-4 py-3 text-left text-sm font-medium text-indigo-100 hover:border-indigo-500/60 transition-colors",children:["Copy diagnostics summary",e.jsx("span",{className:"block text-xs font-normal text-indigo-200/80",children:"Copies environment info & recent log tail."})]}),e.jsxs("button",{onClick:()=>void le(),className:"rounded-lg border border-emerald-500/40 bg-emerald-500/10 px-4 py-3 text-left text-sm font-medium text-emerald-100 hover:border-emerald-500/60 transition-colors",children:["Export settings to file",e.jsx("span",{className:"block text-xs font-normal text-emerald-200/80",children:"Saves your configuration to JSON."})]}),e.jsxs("button",{onClick:()=>void oe(),className:"rounded-lg border border-amber-500/40 bg-amber-500/10 px-4 py-3 text-left text-sm font-medium text-amber-100 hover:border-amber-500/60 transition-colors",children:["Import settings from file",e.jsx("span",{className:"block text-xs font-normal text-amber-200/80",children:"Restore a previously exported setup."})]})]}),e.jsx("div",{className:"rounded-lg border border-gray-800/50 bg-gray-900/40 p-4 text-sm text-gray-400",children:"Logs rotate automatically after 5 MB or three days, and private/ghost session activity is excluded. Telemetry stays off unless explicitly enabled."})]})]},"diagnostics"),n==="performance"&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Performance"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Tab sleep timeout (minutes)"}),e.jsx("input",{type:"number",min:"1",max:"120",value:t.performance.tabSleepMins,onChange:r=>l(["performance","tabSleepMins"],parseInt(r.target.value)||20),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Tabs will be put to sleep after this many minutes of inactivity"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Memory cap (MB)"}),e.jsx("input",{type:"number",min:"100",max:"8192",value:t.performance.memoryCapMB,onChange:r=>l(["performance","memoryCapMB"],parseInt(r.target.value)||2048),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Maximum memory usage per tab"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Hardware acceleration"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Use GPU acceleration when available"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.performance.gpuAcceleration,onChange:r=>l(["performance","gpuAcceleration"],r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]},"performance"),n==="notifications"&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Notifications"}),e.jsx("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:e.jsx("p",{className:"text-gray-400",children:"Notification settings will be available in a future update."})})]},"notifications"),n==="ai"&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-2",children:"AI Models"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Configure how OmniBrowser summarizes pages. Local GGUF models keep content offline, while cloud providers require user consent before data leaves your device."})]}),e.jsx("div",{className:"grid gap-3",children:ne.map(r=>{const a=t?.ai.provider===r.id,c=r.id==="anthropic";return e.jsx("button",{onClick:()=>{c||!t||l(["ai","provider"],r.id)},className:`w-full rounded-xl border px-4 py-3 text-left transition-colors ${a?"border-blue-500/50 bg-blue-500/10":"border-gray-800/60 bg-gray-900/40 hover:bg-gray-900/60"} ${c?"cursor-not-allowed opacity-70":""}`,disabled:c||!t,children:e.jsx("div",{className:"flex items-center justify-between gap-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-100",children:r.title}),a&&e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-blue-500/20 text-blue-200 border border-blue-500/40",children:"Active"}),c&&e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gray-700/40 text-gray-400 border border-gray-700/60",children:"Coming soon"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.description})]})})},r.id)})}),!t&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500 py-8",children:[e.jsx(B,{size:16,className:"animate-spin"}),"Loading AI settings…"]}),t?.ai.provider==="local"&&e.jsxs("div",{className:"space-y-4 rounded-xl border border-gray-800/60 bg-gray-900/40 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-100",children:"Local models (Ollama / GGUF)"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["OmniBrowser uses your local Ollama service to run GGUF models offline. Pull additional models with ",e.jsx("code",{className:"bg-gray-800/60 border border-gray-700/60 px-2 py-0.5 rounded text-[11px]",children:"ollama pull <model>"}),"."]})]}),e.jsxs("button",{onClick:()=>void D(),className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-700/60 bg-gray-800/40 hover:bg-gray-800/60 text-xs text-gray-200 transition-colors",children:[A?e.jsx(B,{size:14,className:"animate-spin"}):e.jsx(W,{size:14}),"Refresh"]})]}),e.jsxs("div",{className:"text-sm text-gray-400 flex items-center gap-2",children:[e.jsx("span",{className:`inline-flex h-2.5 w-2.5 rounded-full border ${w?"bg-emerald-400/80 border-emerald-300/60":"bg-red-400/70 border-red-300/60"}`}),w===null?"Detecting local Ollama service…":w?"Ollama is running on localhost:11434.":"Ollama service not detected. Start Ollama to run GGUF models offline."]}),V&&e.jsx("div",{className:"rounded-lg border border-yellow-500/40 bg-yellow-500/10 px-3 py-2 text-xs text-yellow-200",children:V}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-300 uppercase tracking-wide",children:"Active local model"}),e.jsxs("select",{value:t.ai.model,onChange:r=>l(["ai","model"],r.target.value),disabled:!w||A,className:"w-full px-3 py-2 rounded-lg bg-gray-900 border border-gray-700 text-sm text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:[P.length===0&&e.jsx("option",{value:t.ai.model,children:w?"No models detected":"Service unavailable"}),P.map(r=>e.jsx("option",{value:r,children:r},r)),!P.includes(t.ai.model)&&e.jsx("option",{value:t.ai.model,children:t.ai.model||"custom model"})]}),e.jsx("div",{className:"text-[11px] text-gray-500",children:"You can type a custom model name below if it isn’t listed."}),e.jsx("input",{type:"text",value:t.ai.model,onChange:r=>l(["ai","model"],r.target.value),className:"w-full px-3 py-2 rounded-lg bg-gray-900 border border-gray-700 text-sm text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"llama3.2"})]})]}),t?.ai.provider==="openai"&&e.jsxs("div",{className:"space-y-4 rounded-xl border border-gray-800/60 bg-gray-900/40 p-5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-100",children:"OpenAI configuration"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Set the model ID to use when cloud summarization is approved. Add"," ",e.jsx("code",{className:"bg-gray-800/60 border border-gray-700/60 px-2 py-0.5 rounded text-[11px]",children:"OPENAI_API_KEY"})," ","to your environment before launching OmniBrowser."]})]}),e.jsx("label",{className:"text-xs font-semibold text-gray-300 uppercase tracking-wide",children:"Model ID"}),e.jsx("input",{type:"text",value:t.ai.model,onChange:r=>l(["ai","model"],r.target.value),className:"w-full px-3 py-2 rounded-lg bg-gray-900 border border-gray-700 text-sm text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"gpt-4o-mini"}),e.jsx("div",{className:"text-[11px] text-gray-500",children:"Cloud summaries always ask for consent before sending article content."})]}),t?.ai.provider==="anthropic"&&e.jsx("div",{className:"rounded-xl border border-gray-800/60 bg-gray-900/40 p-5 text-sm text-gray-400",children:"Anthropic/Claude integration is on the roadmap. In the meantime, use local GGUF models or the OpenAI provider."}),e.jsxs("div",{className:"space-y-4 rounded-xl border border-gray-800/60 bg-gray-900/40 p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-100",children:"Tuning"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center justify-between text-xs font-semibold text-gray-300 uppercase tracking-wide",children:[e.jsx("span",{children:"Temperature"}),e.jsx("span",{className:"text-gray-400",children:t?.ai.temperature.toFixed(1)})]}),e.jsx("input",{type:"range",min:0,max:2,step:.1,value:t?.ai.temperature??.7,onChange:r=>l(["ai","temperature"],parseFloat(r.target.value)),className:"w-full mt-2 accent-blue-500"}),e.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Lower values make summaries more deterministic, higher values increase creativity."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-300 uppercase tracking-wide",children:"Max tokens"}),e.jsx("input",{type:"number",min:512,max:65536,step:256,value:t?.ai.maxTokens??8192,onChange:r=>l(["ai","maxTokens"],Math.max(512,parseInt(r.target.value)||8192)),className:"w-full mt-2 px-3 py-2 rounded-lg bg-gray-900 border border-gray-700 text-sm text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Maximum tokens to request from the model during summaries and offline analysis."})]})]})]})]},"ai"),n==="cloudVector"&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Cloud Vector Database"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Sync your knowledge graph to the cloud for cross-device access and semantic search"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Enable Cloud Vector DB"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Sync embeddings to Qdrant or Pinecone for cross-device knowledge sharing"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"cloudVectorEnabled",className:"sr-only peer",defaultChecked:!1,onChange:async r=>{try{await s.cloudVector.config({enabled:r.target.checked,provider:"qdrant"})}catch(a){console.error("Failed to update cloud vector config:",a)}}}),e.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Provider"}),e.jsxs("select",{id:"cloudVectorProvider",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500",defaultValue:"qdrant",onChange:async r=>{try{await s.cloudVector.config({enabled:document.getElementById("cloudVectorEnabled")?.checked||!1,provider:r.target.value})}catch(a){console.error("Failed to update provider:",a)}},children:[e.jsx("option",{value:"none",children:"None (Local only)"}),e.jsx("option",{value:"qdrant",children:"Qdrant"}),e.jsx("option",{value:"pinecone",children:"Pinecone"})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Endpoint URL"}),e.jsx("input",{type:"url",placeholder:"https://your-qdrant-instance.com",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Qdrant server URL or Pinecone API endpoint"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium",children:"API Key"}),e.jsx("input",{type:"password",placeholder:"Enter API key",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Required for cloud providers"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Collection Name"}),e.jsx("input",{type:"text",placeholder:"omnibrowser-vectors",defaultValue:"omnibrowser-vectors",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("button",{onClick:async()=>{try{await s.cloudVector.sync([]),alert("Sync started successfully")}catch(r){console.error("Failed to sync:",r),alert("Sync failed. Check console for details.")}},className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm font-medium",children:"Sync Now"})]})]},"cloudVector"),n==="hybridSearch"&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Hybrid Search"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Configure multi-source search aggregation (Brave, Bing, Custom crawler)"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Search Sources"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Brave Search"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Privacy-focused search engine"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer",onChange:async r=>{try{await s.hybridSearch.config({sources:{brave:{enabled:r.target.checked}}})}catch(a){console.error("Failed to update Brave config:",a)}}}),e.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Bing Search"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Microsoft Bing API"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",defaultChecked:!1,className:"sr-only peer",onChange:async r=>{try{await s.hybridSearch.config({sources:{bing:{enabled:r.target.checked}}})}catch(a){console.error("Failed to update Bing config:",a)}}}),e.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Custom Crawler"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Internal web scraper"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer",onChange:async r=>{try{await s.hybridSearch.config({sources:{custom:{enabled:r.target.checked}}})}catch(a){console.error("Failed to update custom config:",a)}}}),e.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Maximum Results"}),e.jsx("input",{type:"number",min:"5",max:"50",defaultValue:20,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Enable Reranking"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Use ML-based reranking for better results"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer",onChange:async r=>{try{await s.hybridSearch.config({rerank:r.target.checked})}catch(a){console.error("Failed to update rerank config:",a)}}}),e.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]},"hybridSearch"),n==="e2eeSync"&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"End-to-End Encrypted Sync"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Brave Sync 2.0 style encrypted chain for cross-device synchronization"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-blue-900/20 border border-blue-700/30",children:[e.jsx("h4",{className:"font-medium mb-2 text-blue-300",children:"How it works"}),e.jsx("p",{className:"text-sm text-blue-200/80",children:"Your data is encrypted locally before syncing. Only you have the encryption key. Works without a central server (peer-to-peer) or with an optional relay server."})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Enable E2EE Sync"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Sync bookmarks, history, knowledge graph, and workspaces across devices"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"e2eeSyncEnabled",className:"sr-only peer",defaultChecked:!1,onChange:async r=>{try{await s.e2eeSync.config({enabled:r.target.checked})}catch(a){console.error("Failed to update E2EE sync config:",a)}}}),e.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Sync Password"}),e.jsx("input",{type:"password",id:"e2eeSyncPassword",placeholder:"Enter password for encryption",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Used to derive encryption key. Must be the same on all devices."})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Relay Server (Optional)"}),e.jsx("input",{type:"url",placeholder:"wss://sync-relay.example.com",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Leave empty for peer-to-peer sync only"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-900/60 border border-gray-800/50",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Sync Targets"}),e.jsx("div",{className:"space-y-2",children:["bookmark","history","knowledge","workspace","settings"].map(r=>e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded bg-gray-800/50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"capitalize",children:r})]},r))})]}),e.jsx("button",{onClick:async()=>{try{const r=document.getElementById("e2eeSyncPassword");await s.e2eeSync.init({password:r?.value||""});const a=await s.e2eeSync.status();alert(`Sync initialized. Status: ${a.synced?"Active":"Inactive"}`)}catch(r){console.error("Failed to init sync:",r),alert("Sync initialization failed. Check console for details.")}},className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm font-medium",children:"Initialize Sync"}),e.jsx("button",{onClick:async()=>{try{await s.e2eeSync.sync(),alert("Manual sync completed")}catch(r){console.error("Failed to sync:",r),alert("Sync failed. Check console for details.")}},className:"w-full px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm font-medium",children:"Sync Now"})]})]},"e2eeSync")]})})]}):e.jsx("div",{className:"h-full w-full bg-[#1A1D28] text-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"text-red-400 text-4xl mb-4",children:"⚠️"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Failed to load settings"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Using default settings. Some features may not be available."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm font-medium",children:"Reload Page"})]})})}export{er as default};
//# sourceMappingURL=Settings-CDVQsP3i.js.map

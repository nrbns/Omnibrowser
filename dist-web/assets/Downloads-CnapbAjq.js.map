{"version":3,"file":"Downloads-CnapbAjq.js","sources":["../../node_modules/lucide-react/dist/esm/icons/audio-lines.js","../../node_modules/lucide-react/dist/esm/icons/folder-open.js","../../node_modules/lucide-react/dist/esm/icons/laptop.js","../../node_modules/lucide-react/dist/esm/icons/loader.js","../../node_modules/lucide-react/dist/esm/icons/monitor-play.js","../../node_modules/lucide-react/dist/esm/icons/pause.js","../../node_modules/lucide-react/dist/esm/icons/skip-back.js","../../node_modules/lucide-react/dist/esm/icons/skip-forward.js","../../node_modules/lucide-react/dist/esm/icons/volume-x.js","../../src/components/MediaPlayer.tsx","../../src/routes/Downloads.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AudioLines = createLucideIcon(\"AudioLines\", [\n  [\"path\", { d: \"M2 10v3\", key: \"1fnikh\" }],\n  [\"path\", { d: \"M6 6v11\", key: \"11sgs0\" }],\n  [\"path\", { d: \"M10 3v18\", key: \"yhl04a\" }],\n  [\"path\", { d: \"M14 8v7\", key: \"3a1oy3\" }],\n  [\"path\", { d: \"M18 5v13\", key: \"123xd1\" }],\n  [\"path\", { d: \"M22 10v3\", key: \"154ddg\" }]\n]);\n\nexport { AudioLines as default };\n//# sourceMappingURL=audio-lines.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FolderOpen = createLucideIcon(\"FolderOpen\", [\n  [\n    \"path\",\n    {\n      d: \"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2\",\n      key: \"usdka0\"\n    }\n  ]\n]);\n\nexport { FolderOpen as default };\n//# sourceMappingURL=folder-open.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Laptop = createLucideIcon(\"Laptop\", [\n  [\n    \"path\",\n    {\n      d: \"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16\",\n      key: \"tarvll\"\n    }\n  ]\n]);\n\nexport { Laptop as default };\n//# sourceMappingURL=laptop.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Loader = createLucideIcon(\"Loader\", [\n  [\"path\", { d: \"M12 2v4\", key: \"3427ic\" }],\n  [\"path\", { d: \"m16.2 7.8 2.9-2.9\", key: \"r700ao\" }],\n  [\"path\", { d: \"M18 12h4\", key: \"wj9ykh\" }],\n  [\"path\", { d: \"m16.2 16.2 2.9 2.9\", key: \"1bxg5t\" }],\n  [\"path\", { d: \"M12 18v4\", key: \"jadmvz\" }],\n  [\"path\", { d: \"m4.9 19.1 2.9-2.9\", key: \"bwix9q\" }],\n  [\"path\", { d: \"M2 12h4\", key: \"j09sii\" }],\n  [\"path\", { d: \"m4.9 4.9 2.9 2.9\", key: \"giyufr\" }]\n]);\n\nexport { Loader as default };\n//# sourceMappingURL=loader.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MonitorPlay = createLucideIcon(\"MonitorPlay\", [\n  [\n    \"path\",\n    {\n      d: \"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z\",\n      key: \"1pctta\"\n    }\n  ],\n  [\"path\", { d: \"M12 17v4\", key: \"1riwvh\" }],\n  [\"path\", { d: \"M8 21h8\", key: \"1ev6f3\" }],\n  [\"rect\", { x: \"2\", y: \"3\", width: \"20\", height: \"14\", rx: \"2\", key: \"x3v2xh\" }]\n]);\n\nexport { MonitorPlay as default };\n//# sourceMappingURL=monitor-play.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Pause = createLucideIcon(\"Pause\", [\n  [\"rect\", { x: \"14\", y: \"4\", width: \"4\", height: \"16\", rx: \"1\", key: \"zuxfzm\" }],\n  [\"rect\", { x: \"6\", y: \"4\", width: \"4\", height: \"16\", rx: \"1\", key: \"1okwgv\" }]\n]);\n\nexport { Pause as default };\n//# sourceMappingURL=pause.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst SkipBack = createLucideIcon(\"SkipBack\", [\n  [\"polygon\", { points: \"19 20 9 12 19 4 19 20\", key: \"o2sva\" }],\n  [\"line\", { x1: \"5\", x2: \"5\", y1: \"19\", y2: \"5\", key: \"1ocqjk\" }]\n]);\n\nexport { SkipBack as default };\n//# sourceMappingURL=skip-back.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst SkipForward = createLucideIcon(\"SkipForward\", [\n  [\"polygon\", { points: \"5 4 15 12 5 20 5 4\", key: \"16p6eg\" }],\n  [\"line\", { x1: \"19\", x2: \"19\", y1: \"5\", y2: \"19\", key: \"futhcm\" }]\n]);\n\nexport { SkipForward as default };\n//# sourceMappingURL=skip-forward.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst VolumeX = createLucideIcon(\"VolumeX\", [\n  [\n    \"path\",\n    {\n      d: \"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z\",\n      key: \"uqj9uw\"\n    }\n  ],\n  [\"line\", { x1: \"22\", x2: \"16\", y1: \"9\", y2: \"15\", key: \"1ewh16\" }],\n  [\"line\", { x1: \"16\", x2: \"22\", y1: \"9\", y2: \"15\", key: \"5ykzw1\" }]\n]);\n\nexport { VolumeX as default };\n//# sourceMappingURL=volume-x.js.map\n","import { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { AnimatePresence, motion } from 'framer-motion';\r\nimport {\r\n  AudioLines,\r\n  Laptop,\r\n  Maximize2,\r\n  Minimize2,\r\n  MonitorPlay,\r\n  Pause,\r\n  Play,\r\n  PlayCircle,\r\n  SkipBack,\r\n  SkipForward,\r\n  Volume2,\r\n  VolumeX,\r\n  X,\r\n} from 'lucide-react';\r\nimport { Portal } from './common/Portal';\r\nimport { ipc } from '../lib/ipc-typed';\r\nimport { isDevEnv } from '../lib/env';\r\n\r\ntype MediaKind = 'video' | 'audio';\r\n\r\nconst VIDEO_EXTENSIONS = ['mp4', 'm4v', 'mov', 'webm', 'mkv', 'avi', 'mpg', 'mpeg', 'ogv'];\r\nconst AUDIO_EXTENSIONS = ['mp3', 'm4a', 'aac', 'wav', 'flac', 'ogg', 'opus', 'aiff', 'oga'];\r\n\r\nfunction normalizeFileUrl(filePath: string): string {\r\n  if (!filePath) return '';\r\n  if (filePath.startsWith('file://')) {\r\n    return filePath;\r\n  }\r\n\r\n  let normalized = filePath.replace(/\\\\/g, '/');\r\n\r\n  if (/^[a-zA-Z]:/.test(normalized)) {\r\n    normalized = `/${normalized}`;\r\n  } else if (!normalized.startsWith('/')) {\r\n    normalized = `/${normalized}`;\r\n  }\r\n\r\n  return encodeURI(`file://${normalized}`);\r\n}\r\n\r\nexport function getMediaKind(fileName?: string | null): MediaKind | null {\r\n  if (!fileName) return null;\r\n  const extension = fileName.split('.').pop()?.toLowerCase();\r\n  if (!extension) return null;\r\n  if (VIDEO_EXTENSIONS.includes(extension)) return 'video';\r\n  if (AUDIO_EXTENSIONS.includes(extension)) return 'audio';\r\n  return null;\r\n}\r\n\r\nexport interface MediaPlayerProps {\r\n  filePath: string;\r\n  fileName?: string;\r\n  autoPlay?: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport function MediaPlayer({ filePath, fileName, autoPlay = true, onClose }: MediaPlayerProps) {\r\n  const mediaKind = useMemo<MediaKind | null>(() => getMediaKind(fileName || filePath), [fileName, filePath]);\r\n  const sourceUrl = useMemo(() => normalizeFileUrl(filePath), [filePath]);\r\n  const mediaRef = useRef<HTMLVideoElement | HTMLAudioElement | null>(null);\r\n\r\n  const [isPlaying, setIsPlaying] = useState(autoPlay);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  const [volume, setVolume] = useState(1);\r\n  const [muted, setMuted] = useState(false);\r\n  const [hovered, setHovered] = useState(false);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  const [pipSupported, setPipSupported] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const handler = (event: KeyboardEvent) => {\r\n      if (event.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n    window.addEventListener('keydown', handler);\r\n    return () => window.removeEventListener('keydown', handler);\r\n  }, [onClose]);\r\n\r\n  useEffect(() => {\r\n    const element = mediaRef.current;\r\n    if (!element) return;\r\n\r\n    const handleLoaded = () => {\r\n      setDuration(element.duration || 0);\r\n      setVolume(element.volume);\r\n      setMuted(element.muted);\r\n    };\r\n    const handleTime = () => setCurrentTime(element.currentTime || 0);\r\n    const handlePlay = () => setIsPlaying(true);\r\n    const handlePause = () => setIsPlaying(false);\r\n    const handleVolumeChange = () => {\r\n      setVolume(element.volume);\r\n      setMuted(element.muted);\r\n    };\r\n\r\n    element.addEventListener('loadedmetadata', handleLoaded);\r\n    element.addEventListener('timeupdate', handleTime);\r\n    element.addEventListener('play', handlePlay);\r\n    element.addEventListener('pause', handlePause);\r\n    element.addEventListener('volumechange', handleVolumeChange);\r\n\r\n    if (autoPlay) {\r\n      const maybePromise = element.play();\r\n      if (maybePromise && typeof maybePromise.then === 'function') {\r\n        maybePromise.catch(() => {\r\n          // Autoplay might be blocked; keep state consistent\r\n          setIsPlaying(false);\r\n        });\r\n      }\r\n    }\r\n\r\n    if (mediaKind === 'video' && typeof document !== 'undefined') {\r\n      setPipSupported(Boolean((document as any).pictureInPictureEnabled));\r\n    } else {\r\n      setPipSupported(false);\r\n    }\r\n\r\n    return () => {\r\n      element.removeEventListener('loadedmetadata', handleLoaded);\r\n      element.removeEventListener('timeupdate', handleTime);\r\n      element.removeEventListener('play', handlePlay);\r\n      element.removeEventListener('pause', handlePause);\r\n      element.removeEventListener('volumechange', handleVolumeChange);\r\n      element.pause();\r\n    };\r\n  }, [autoPlay, mediaKind, sourceUrl]);\r\n\r\n  const togglePlay = useCallback(() => {\r\n    const element = mediaRef.current;\r\n    if (!element) return;\r\n    if (element.paused) {\r\n      const maybePromise = element.play();\r\n      if (maybePromise && typeof maybePromise.then === 'function') {\r\n        maybePromise.catch(() => setIsPlaying(false));\r\n      }\r\n    } else {\r\n      element.pause();\r\n    }\r\n  }, []);\r\n\r\n  const toggleMute = useCallback(() => {\r\n    const element = mediaRef.current;\r\n    if (!element) return;\r\n    element.muted = !element.muted;\r\n  }, []);\r\n\r\n  const handleVolumeChange = (value: number) => {\r\n    const element = mediaRef.current;\r\n    if (!element) return;\r\n    const nextVolume = Math.min(1, Math.max(0, value));\r\n    element.volume = nextVolume;\r\n    element.muted = nextVolume === 0;\r\n  };\r\n\r\n  const handleSeek = (value: number) => {\r\n    const element = mediaRef.current;\r\n    if (!element || !Number.isFinite(duration) || duration <= 0) return;\r\n    element.currentTime = (value / 100) * duration;\r\n    setCurrentTime(element.currentTime);\r\n  };\r\n\r\n  const skipBy = (seconds: number) => {\r\n    const element = mediaRef.current;\r\n    if (!element) return;\r\n    element.currentTime = Math.min(Math.max(0, element.currentTime + seconds), duration || element.currentTime);\r\n  };\r\n\r\n  const togglePictureInPicture = async () => {\r\n    if (mediaKind !== 'video') return;\r\n    const videoElement = mediaRef.current as (HTMLVideoElement & { requestPictureInPicture?: () => Promise<PictureInPictureWindow> }) | null;\r\n    if (!videoElement || typeof videoElement.requestPictureInPicture !== 'function') return;\r\n\r\n    try {\r\n      const doc = document as any;\r\n      if (doc.pictureInPictureElement) {\r\n        await doc.exitPictureInPicture?.();\r\n      } else {\r\n        await videoElement.requestPictureInPicture();\r\n      }\r\n    } catch (error) {\r\n      if (isDevEnv()) {\r\n        console.warn('[MediaPlayer] Failed to request Picture-in-Picture:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const toggleFullscreen = () => {\r\n    const container = document.getElementById('ob-media-player-container');\r\n    if (!container) return;\r\n    const doc = document as any;\r\n\r\n    if (!isFullscreen) {\r\n      container.requestFullscreen?.().then(() => setIsFullscreen(true)).catch(() => {});\r\n    } else {\r\n      doc.exitFullscreen?.().then(() => setIsFullscreen(false)).catch(() => {});\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleFsChange = () => {\r\n      const doc = document as any;\r\n      setIsFullscreen(Boolean(doc.fullscreenElement));\r\n    };\r\n    document.addEventListener('fullscreenchange', handleFsChange);\r\n    return () => document.removeEventListener('fullscreenchange', handleFsChange);\r\n  }, []);\r\n\r\n  const openFile = () => {\r\n    if (!filePath) return;\r\n    ipc.downloads.openFile(filePath).catch(() => {});\r\n  };\r\n\r\n  const showInFolder = () => {\r\n    if (!filePath) return;\r\n    ipc.downloads.showInFolder(filePath).catch(() => {});\r\n  };\r\n\r\n  const formatTime = (value: number) => {\r\n    if (!Number.isFinite(value)) return '0:00';\r\n    const totalSeconds = Math.max(0, Math.round(value));\r\n    const minutes = Math.floor(totalSeconds / 60);\r\n    const seconds = totalSeconds % 60;\r\n    const hours = Math.floor(minutes / 60);\r\n    if (hours > 0) {\r\n      const remainingMinutes = minutes % 60;\r\n      return `${hours}:${remainingMinutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\r\n    }\r\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const progressPercent = duration > 0 ? Math.min(100, Math.max(0, (currentTime / duration) * 100)) : 0;\r\n\r\n  return (\r\n    <Portal>\r\n      <AnimatePresence>\r\n        <motion.div\r\n          className=\"fixed inset-0 z-[200] flex items-center justify-center bg-black/70 backdrop-blur-sm px-6 py-8\"\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          onClick={onClose}\r\n        >\r\n          <motion.div\r\n            id=\"ob-media-player-container\"\r\n            className=\"relative w-full max-w-4xl overflow-hidden rounded-2xl border border-gray-700/60 bg-gray-950/90 shadow-2xl\"\r\n            initial={{ y: 40, opacity: 0 }}\r\n            animate={{ y: 0, opacity: 1 }}\r\n            exit={{ y: 40, opacity: 0 }}\r\n            transition={{ type: 'spring', damping: 22, stiffness: 180 }}\r\n            onClick={(event) => event.stopPropagation()}\r\n          >\r\n            <div className=\"flex items-center justify-between border-b border-gray-800/60 bg-gray-900/70 px-4 py-3\">\r\n              <div>\r\n                <p className=\"text-sm font-medium text-gray-100\">{fileName || filePath.split(/[\\\\/]/).pop() || 'Media file'}</p>\r\n                <p className=\"text-xs text-gray-400\">\r\n                  {mediaKind ? mediaKind.toUpperCase() : 'Unknown'} • {formatTime(duration)}\r\n                </p>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <button\r\n                  onClick={openFile}\r\n                  className=\"rounded-lg border border-gray-700/70 bg-gray-800/70 px-3 py-1.5 text-xs text-gray-200 transition hover:border-blue-500/60 hover:text-blue-300\"\r\n                >\r\n                  Open\r\n                </button>\r\n                <button\r\n                  onClick={showInFolder}\r\n                  className=\"rounded-lg border border-gray-700/70 bg-gray-800/70 px-3 py-1.5 text-xs text-gray-200 transition hover:border-blue-500/60 hover:text-blue-300\"\r\n                >\r\n                  Reveal\r\n                </button>\r\n                <button\r\n                  onClick={onClose}\r\n                  className=\"rounded-lg border border-gray-700/70 bg-gray-800/70 p-1.5 text-gray-300 transition hover:border-red-500/60 hover:text-red-300\"\r\n                >\r\n                  <X size={16} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div\r\n              className={`relative flex flex-col items-center justify-center bg-black ${mediaKind === 'audio' ? 'py-12' : 'py-4'}`}\r\n              onMouseEnter={() => setHovered(true)}\r\n              onMouseLeave={() => setHovered(false)}\r\n            >\r\n              {mediaKind === 'video' && sourceUrl ? (\r\n                <video\r\n                  ref={mediaRef as React.RefObject<HTMLVideoElement>}\r\n                  src={sourceUrl}\r\n                  className=\"max-h-[60vh] w-full bg-black object-contain\"\r\n                  autoPlay={autoPlay}\r\n                  controls={false}\r\n                />\r\n              ) : null}\r\n\r\n              {mediaKind === 'audio' && sourceUrl ? (\r\n                <div className=\"flex w-full flex-col items-center gap-6 px-8\">\r\n                  <div className=\"mt-4 flex h-32 w-32 items-center justify-center rounded-3xl bg-gradient-to-br from-blue-500/30 to-purple-500/30 text-blue-200\">\r\n                    <AudioLines size={64} />\r\n                  </div>\r\n                  <audio ref={mediaRef as React.RefObject<HTMLAudioElement>} src={sourceUrl} autoPlay={autoPlay} controls={false} />\r\n                </div>\r\n              ) : null}\r\n\r\n              {!mediaKind || !sourceUrl ? (\r\n                <div className=\"flex h-48 w-full flex-col items-center justify-center gap-3 text-center text-gray-400\">\r\n                  <MonitorPlay size={40} className=\"text-gray-600\" />\r\n                  <p className=\"text-sm\">Unable to load media preview</p>\r\n                  <p className=\"text-xs text-gray-500\">Unsupported format or missing file reference.</p>\r\n                </div>\r\n              ) : null}\r\n\r\n              {mediaKind && sourceUrl ? (\r\n                <motion.div\r\n                  className=\"absolute bottom-3 left-1/2 z-10 w-[92%] -translate-x-1/2 rounded-xl border border-gray-800/80 bg-gray-900/95 px-4 py-3 shadow-xl backdrop-blur\"\r\n                  animate={{ opacity: hovered || !isPlaying ? 1 : 0.85 }}\r\n                >\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <button\r\n                      onClick={togglePlay}\r\n                      className=\"flex h-10 w-10 items-center justify-center rounded-full bg-blue-600/90 text-white transition hover:bg-blue-500\"\r\n                    >\r\n                      {isPlaying ? <Pause size={18} /> : <Play size={18} />}\r\n                    </button>\r\n\r\n                    <div className=\"flex flex-col gap-1 text-xs text-gray-400\">\r\n                      <span className=\"font-mono text-sm text-gray-100\">{formatTime(currentTime)}</span>\r\n                      <span className=\"font-mono text-[11px] text-gray-500\">{formatTime(duration - currentTime)} remaining</span>\r\n                    </div>\r\n\r\n                    <input\r\n                      type=\"range\"\r\n                      min={0}\r\n                      max={100}\r\n                      value={progressPercent}\r\n                      onChange={(event) => handleSeek(Number(event.target.value))}\r\n                      className=\"flex-1 accent-blue-500\"\r\n                    />\r\n\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <button\r\n                        onClick={() => skipBy(-10)}\r\n                        className=\"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300\"\r\n                        title=\"Back 10 seconds\"\r\n                      >\r\n                        <SkipBack size={16} />\r\n                      </button>\r\n                      <button\r\n                        onClick={() => skipBy(10)}\r\n                        className=\"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300\"\r\n                        title=\"Forward 10 seconds\"\r\n                      >\r\n                        <SkipForward size={16} />\r\n                      </button>\r\n\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <button\r\n                          onClick={toggleMute}\r\n                          className=\"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300\"\r\n                        >\r\n                          {muted || volume === 0 ? <VolumeX size={16} /> : <Volume2 size={16} />}\r\n                        </button>\r\n                        <input\r\n                          type=\"range\"\r\n                          min={0}\r\n                          max={100}\r\n                          value={muted ? 0 : Math.round(volume * 100)}\r\n                          onChange={(event) => handleVolumeChange(Number(event.target.value) / 100)}\r\n                          className=\"w-24 accent-blue-500\"\r\n                        />\r\n                      </div>\r\n\r\n                      {pipSupported ? (\r\n                        <button\r\n                          onClick={togglePictureInPicture}\r\n                          className=\"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300\"\r\n                          title=\"Toggle picture-in-picture\"\r\n                        >\r\n                          <PlayCircle size={16} />\r\n                        </button>\r\n                      ) : null}\r\n\r\n                      <button\r\n                        onClick={toggleFullscreen}\r\n                        className=\"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300\"\r\n                        title={isFullscreen ? 'Exit fullscreen' : 'Enter fullscreen'}\r\n                      >\r\n                        {isFullscreen ? <Minimize2 size={16} /> : <Maximize2 size={16} />}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </motion.div>\r\n              ) : null}\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between border-t border-gray-800/60 bg-gray-900/70 px-4 py-3 text-xs text-gray-400\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Laptop size={14} className=\"text-blue-300\" />\r\n                <span>Secure local playback</span>\r\n              </div>\r\n              <span>{filePath}</span>\r\n            </div>\r\n          </motion.div>\r\n        </motion.div>\r\n      </AnimatePresence>\r\n    </Portal>\r\n  );\r\n}\r\n\r\n\r\n","import { useEffect, useState } from 'react';\r\nimport { Download as DownloadIcon, FolderOpen, CheckCircle, XCircle, Clock, Loader, Pause, Play, X, PlayCircle } from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\nimport { ipc } from '../lib/ipc-typed';\r\nimport { DownloadUpdate } from '../lib/ipc-events';\r\nimport { ipcEvents } from '../lib/ipc-events';\r\nimport { MediaPlayer, getMediaKind } from '../components/MediaPlayer';\r\n\r\ntype DownloadSafety = {\r\n  status: 'pending' | 'clean' | 'warning' | 'blocked' | 'unknown';\r\n  threatLevel?: 'low' | 'medium' | 'high' | 'critical';\r\n  details?: string;\r\n  recommendations?: string[];\r\n  scannedAt?: number;\r\n  quarantinePath?: string;\r\n};\r\n\r\ntype DownloadItem = { \r\n  id: string; \r\n  url: string; \r\n  filename?: string;\r\n  status: 'pending' | 'downloading' | 'completed' | 'failed' | 'cancelled' | 'blocked' | 'paused' | 'verifying'; \r\n  path?: string; \r\n  createdAt: number;\r\n  progress?: number;\r\n  receivedBytes?: number;\r\n  totalBytes?: number;\r\n  checksum?: string;\r\n  safety?: DownloadSafety;\r\n  speedBytesPerSec?: number;\r\n  etaSeconds?: number;\r\n};\r\n\r\nexport default function DownloadsPage() {\r\n  const [items, setItems] = useState<DownloadItem[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [previewItem, setPreviewItem] = useState<DownloadItem | null>(null);\r\n\r\n  useEffect(() => {\r\n    const loadDownloads = async () => {\r\n      try {\r\n        const list = (await ipc.downloads.list()) as DownloadItem[];\r\n        if (Array.isArray(list)) {\r\n          setItems(list.sort((a, b) => b.createdAt - a.createdAt));\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to load downloads:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadDownloads();\r\n\r\n    const updateItem = (update: DownloadUpdate) => {\r\n      if (!update?.id) return;\r\n      setItems(prev => {\r\n        const existingIndex = prev.findIndex(item => item.id === update.id);\r\n        const updatedItem: DownloadItem = {\r\n          id: update.id,\r\n          url: update.url,\r\n          filename: update.filename,\r\n          status: (update.status as DownloadItem['status']) || 'downloading',\r\n          path: update.path,\r\n          checksum: update.checksum,\r\n          createdAt: update.createdAt || Date.now(),\r\n          progress: update.progress,\r\n          receivedBytes: update.receivedBytes,\r\n          totalBytes: update.totalBytes,\r\n          safety: update.safety,\r\n          speedBytesPerSec: update.speedBytesPerSec,\r\n          etaSeconds: update.etaSeconds,\r\n        };\r\n\r\n        if (existingIndex >= 0) {\r\n          const next = [...prev];\r\n          next[existingIndex] = {\r\n            ...next[existingIndex],\r\n            ...updatedItem,\r\n            createdAt: next[existingIndex].createdAt || updatedItem.createdAt,\r\n          };\r\n          return next.sort((a, b) => b.createdAt - a.createdAt);\r\n        }\r\n\r\n        return [updatedItem, ...prev].sort((a, b) => b.createdAt - a.createdAt);\r\n      });\r\n    };\r\n\r\n    const progressUnsub = ipcEvents.on<DownloadUpdate>('downloads:progress', updateItem);\r\n    const doneUnsub = ipcEvents.on<DownloadUpdate>('downloads:done', updateItem);\r\n\r\n    return () => {\r\n      progressUnsub();\r\n      doneUnsub();\r\n    };\r\n  }, []);\r\n\r\n  const formatBytes = (bytes?: number) => {\r\n    if (!bytes) return 'Unknown';\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\r\n  };\r\n\r\n  const calcPercent = (item: DownloadItem) => {\r\n    if (typeof item.progress === 'number') {\r\n      return Math.min(100, Math.max(0, Math.round(item.progress * 100)));\r\n    }\r\n    if (item.totalBytes && item.totalBytes > 0) {\r\n      return Math.min(100, Math.round(((item.receivedBytes || 0) / item.totalBytes) * 100));\r\n    }\r\n    if (item.status === 'completed' || item.status === 'verifying') return 100;\r\n    return 0;\r\n  };\r\n\r\n  const formatSpeed = (bps?: number) => {\r\n    if (!bps || !Number.isFinite(bps) || bps <= 0) return '—';\r\n    const units = ['B/s', 'KB/s', 'MB/s', 'GB/s'];\r\n    const idx = Math.min(units.length - 1, Math.floor(Math.log(bps) / Math.log(1024)));\r\n    const value = bps / Math.pow(1024, idx);\r\n    return `${value >= 100 ? Math.round(value) : Math.round(value * 10) / 10} ${units[idx]}`;\r\n  };\r\n\r\n  const formatEta = (seconds?: number) => {\r\n    if (seconds === undefined || !Number.isFinite(seconds) || seconds <= 0) return '—';\r\n    const rounded = Math.max(0, Math.round(seconds));\r\n    const hours = Math.floor(rounded / 3600);\r\n    const minutes = Math.floor((rounded % 3600) / 60);\r\n    const secs = rounded % 60;\r\n    const parts = [];\r\n    if (hours > 0) parts.push(`${hours}h`);\r\n    if (minutes > 0 || hours > 0) parts.push(`${minutes}m`);\r\n    parts.push(`${secs}s`);\r\n    return parts.join(' ');\r\n  };\r\n\r\n  const isPreviewable = (item: DownloadItem) => {\r\n    if (!item?.path || item.status !== 'completed') return false;\r\n    return Boolean(getMediaKind(item.filename || item.path));\r\n  };\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status) {\r\n      case 'completed':\r\n        return <CheckCircle size={16} className=\"text-green-400\" />;\r\n      case 'failed':\r\n      case 'blocked':\r\n        return <XCircle size={16} className=\"text-red-400\" />;\r\n      case 'downloading':\r\n      case 'paused':\r\n      case 'verifying':\r\n        return <Loader size={16} className=\"text-blue-400 animate-spin\" />;\r\n      case 'cancelled':\r\n        return <XCircle size={16} className=\"text-gray-500\" />;\r\n      default:\r\n        return <Clock size={16} className=\"text-gray-400\" />;\r\n    }\r\n  };\r\n\r\n  const handleOpenFile = (path?: string) => {\r\n    if (path) {\r\n      // Use IPC to open file in system default application\r\n      ipc.downloads.openFile?.(path).catch(console.error);\r\n    }\r\n  };\r\n\r\n  const handleOpenFolder = (path?: string) => {\r\n    if (path) {\r\n      // Use IPC to open folder in file explorer\r\n      ipc.downloads.showInFolder?.(path).catch(console.error);\r\n    }\r\n  };\r\n\r\n  const renderSafetyBadge = (safety?: DownloadSafety) => {\r\n    if (!safety) return null;\r\n    const base = 'px-2 py-0.5 rounded-full text-[10px] font-semibold uppercase tracking-wide border';\r\n    switch (safety.status) {\r\n      case 'clean':\r\n        return <span className={`${base} bg-emerald-500/15 border-emerald-500/30 text-emerald-200`}>Scanned Clean</span>;\r\n      case 'warning':\r\n        return <span className={`${base} bg-amber-500/15 border-amber-500/30 text-amber-200`}>Review Recommended</span>;\r\n      case 'blocked':\r\n        return <span className={`${base} bg-red-500/15 border-red-500/40 text-red-200`}>Quarantined</span>;\r\n      case 'pending':\r\n        return <span className={`${base} bg-blue-500/15 border-blue-500/30 text-blue-200`}>Scanning…</span>;\r\n      default:\r\n        return <span className={`${base} bg-gray-500/15 border-gray-600/40 text-gray-300`}>Scan Unavailable</span>;\r\n    }\r\n  };\r\n\r\n  const renderSafetyDetails = (safety?: DownloadSafety) => {\r\n    if (!safety) return null;\r\n    return (\r\n      <div className=\"text-xs text-gray-500 space-y-1 mt-2\">\r\n        <div className=\"flex items-center gap-2\">\r\n          {renderSafetyBadge(safety)}\r\n          {safety.threatLevel && (\r\n            <span className=\"text-[10px] uppercase text-gray-400\">\r\n              Threat level: {safety.threatLevel}\r\n            </span>\r\n          )}\r\n        </div>\r\n        {safety.details && <div>{safety.details}</div>}\r\n        {safety.recommendations && safety.recommendations.length > 0 && (\r\n          <ul className=\"list-disc list-inside text-[11px] space-y-0.5\">\r\n            {safety.recommendations.slice(0, 3).map((rec, idx) => (\r\n              <li key={`${safety.scannedAt}-${idx}`}>{rec}</li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n        {safety.status === 'blocked' && safety.quarantinePath && (\r\n          <div className=\"text-[11px] text-red-300\">\r\n            File moved to quarantine: <span className=\"font-mono\">{safety.quarantinePath}</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"h-full w-full flex items-center justify-center bg-[#1A1D28]\">\r\n        <Loader size={24} className=\"text-blue-400 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-full w-full bg-[#1A1D28] text-gray-100 flex flex-col\">\r\n      <div className=\"p-6 border-b border-gray-800/50\">\r\n        <h2 className=\"text-2xl font-bold\">Downloads</h2>\r\n        <p className=\"text-sm text-gray-400 mt-1\">\r\n          {items.length} {items.length === 1 ? 'download' : 'downloads'}\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"flex-1 overflow-y-auto p-6\">\r\n        {items.length === 0 ? (\r\n          <div className=\"flex flex-col items-center justify-center h-full text-center\">\r\n            <DownloadIcon size={48} className=\"text-gray-600 mb-4\" />\r\n            <h3 className=\"text-lg font-semibold text-gray-300 mb-2\">No downloads yet</h3>\r\n            <p className=\"text-sm text-gray-500\">Files you download will appear here</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-3\">\r\n            {items.map((d) => (\r\n              <motion.div\r\n                key={d.id}\r\n                data-testid=\"download-card\"\r\n                data-download-id={d.id}\r\n                data-filename={d.filename || ''}\r\n                initial={{ opacity: 0, y: 10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                className=\"bg-gray-900/60 backdrop-blur-sm border border-gray-800/50 rounded-lg p-4 hover:bg-gray-900/80 transition-all\"\r\n              >\r\n                <div className=\"flex items-start justify-between gap-4\">\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-center gap-2 mb-2\">\r\n                      {getStatusIcon(d.status)}\r\n                      <span className=\"font-medium text-gray-200 truncate\">\r\n                        {d.filename || d.url.split('/').pop() || 'Download'}\r\n                      </span>\r\n                      {renderSafetyBadge(d.safety)}\r\n                    </div>\r\n                    \r\n                    {/* Progress bar for active downloads */}\r\n                    {d.status === 'downloading' || d.status === 'paused' ? (\r\n                      <div className=\"mb-3\">\r\n                        <div className=\"flex items-center justify-between text-xs text-gray-300 mb-1.5\">\r\n                          <span className=\"font-medium\">{formatBytes(d.receivedBytes)} / {formatBytes(d.totalBytes)}</span>\r\n                          <span className=\"font-semibold text-blue-400\">{calcPercent(d)}%</span>\r\n                        </div>\r\n                        <div className=\"w-full bg-gray-800 rounded-full h-2.5 overflow-hidden mb-2\">\r\n                          <motion.div\r\n                            className=\"h-full bg-gradient-to-r from-blue-500 to-cyan-500\"\r\n                            initial={{ width: 0 }}\r\n                            animate={{ width: `${calcPercent(d)}%` }}\r\n                            transition={{ duration: 0.3 }}\r\n                          />\r\n                        </div>\r\n                        <div className=\"flex items-center gap-4 text-xs font-medium\">\r\n                          <div className=\"flex items-center gap-1.5 px-2 py-1 rounded-md bg-blue-500/10 border border-blue-500/30\">\r\n                            <span className=\"text-blue-300\">Speed:</span>\r\n                            <span className=\"text-blue-200 font-semibold\">{formatSpeed(d.speedBytesPerSec)}</span>\r\n                          </div>\r\n                          <div className=\"flex items-center gap-1.5 px-2 py-1 rounded-md bg-purple-500/10 border border-purple-500/30\">\r\n                            <Clock size={12} className=\"text-purple-300\" />\r\n                            <span className=\"text-purple-300\">ETA:</span>\r\n                            <span className=\"text-purple-200 font-semibold\">{formatEta(d.etaSeconds)}</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ) : null}\r\n\r\n                    {d.status === 'verifying' && (\r\n                      <div className=\"mb-2 text-xs text-blue-300 flex items-center gap-2\">\r\n                        <Loader className=\"h-4 w-4 animate-spin\" />\r\n                        <span>Verifying download integrity…</span>\r\n                      </div>\r\n                    )}\r\n\r\n                    <div className=\"text-xs text-gray-400 space-y-1\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"truncate\">{d.url}</span>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-4\">\r\n                        <span>{new Date(d.createdAt).toLocaleString()}</span>\r\n                        <span className=\"capitalize\">{d.status}</span>\r\n                        {d.path && (\r\n                          <span className=\"truncate max-w-xs\" title={d.path}>\r\n                            {d.path.replace(/^.*[\\\\\\/]/, '')}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                      {d.checksum && (\r\n                        <div className=\"text-xs text-gray-500 truncate\" title={`SHA-256: ${d.checksum}`}>\r\n                          SHA-256: {d.checksum.slice(0, 12)}…\r\n                        </div>\r\n                      )}\r\n                      {renderSafetyDetails(d.safety)}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Action buttons */}\r\n                  <div className=\"flex items-center gap-2\">\r\n                    {d.status === 'downloading' && (\r\n                      <>\r\n                        <motion.button\r\n                          onClick={async () => {\r\n                            try {\r\n                              await ipc.downloads.pause(d.id);\r\n                              setItems(prev => prev.map(item => \r\n                                item.id === d.id ? { ...item, status: 'paused' as const } : item\r\n                              ));\r\n                            } catch (error) {\r\n                              console.error('Failed to pause download:', error);\r\n                            }\r\n                          }}\r\n                          whileHover={{ scale: 1.05 }}\r\n                          whileTap={{ scale: 0.95 }}\r\n                          className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-amber-500/20 hover:bg-amber-500/30 border border-amber-500/40 text-amber-200 font-medium text-xs transition-colors\"\r\n                          title=\"Pause download\"\r\n                        >\r\n                          <Pause size={16} />\r\n                          <span>Pause</span>\r\n                        </motion.button>\r\n                        <motion.button\r\n                          onClick={async () => {\r\n                            try {\r\n                              await ipc.downloads.cancel(d.id);\r\n                              setItems(prev => prev.map(item => \r\n                                item.id === d.id ? { ...item, status: 'cancelled' as const } : item\r\n                              ));\r\n                            } catch (error) {\r\n                              console.error('Failed to stop download:', error);\r\n                            }\r\n                          }}\r\n                          whileHover={{ scale: 1.05 }}\r\n                          whileTap={{ scale: 0.95 }}\r\n                          className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-500/20 hover:bg-red-500/30 border border-red-500/40 text-red-200 font-medium text-xs transition-colors\"\r\n                          title=\"Stop download\"\r\n                        >\r\n                          <X size={16} />\r\n                          <span>Stop</span>\r\n                        </motion.button>\r\n                      </>\r\n                    )}\r\n                    {d.status === 'paused' && (\r\n                      <>\r\n                        <motion.button\r\n                          onClick={async () => {\r\n                            try {\r\n                              await ipc.downloads.resume(d.id);\r\n                              setItems(prev => prev.map(item => \r\n                                item.id === d.id ? { ...item, status: 'downloading' as const } : item\r\n                              ));\r\n                            } catch (error) {\r\n                              console.error('Failed to resume download:', error);\r\n                            }\r\n                          }}\r\n                          whileHover={{ scale: 1.05 }}\r\n                          whileTap={{ scale: 0.95 }}\r\n                          className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-green-500/20 hover:bg-green-500/30 border border-green-500/40 text-green-200 font-medium text-xs transition-colors\"\r\n                          title=\"Resume download\"\r\n                        >\r\n                          <Play size={16} />\r\n                          <span>Resume</span>\r\n                        </motion.button>\r\n                        <motion.button\r\n                          onClick={async () => {\r\n                            try {\r\n                              await ipc.downloads.cancel(d.id);\r\n                              setItems(prev => prev.map(item => \r\n                                item.id === d.id ? { ...item, status: 'cancelled' as const } : item\r\n                              ));\r\n                            } catch (error) {\r\n                              console.error('Failed to stop download:', error);\r\n                            }\r\n                          }}\r\n                          whileHover={{ scale: 1.05 }}\r\n                          whileTap={{ scale: 0.95 }}\r\n                          className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-500/20 hover:bg-red-500/30 border border-red-500/40 text-red-200 font-medium text-xs transition-colors\"\r\n                          title=\"Stop download\"\r\n                        >\r\n                          <X size={16} />\r\n                          <span>Stop</span>\r\n                        </motion.button>\r\n                      </>\r\n                    )}\r\n                    {(d.status === 'completed' || d.status === 'failed' || d.status === 'cancelled' || d.status === 'blocked') && d.path && (\r\n                      <>\r\n                        {d.status !== 'blocked' && (\r\n                          <motion.button\r\n                            onClick={() => handleOpenFile(d.path)}\r\n                            whileHover={{ scale: 1.1 }}\r\n                            whileTap={{ scale: 0.9 }}\r\n                            className=\"p-2 rounded-lg bg-gray-800/60 hover:bg-gray-800 border border-gray-700/50 text-gray-300 hover:text-blue-400 transition-colors\"\r\n                            title=\"Open file\"\r\n                          >\r\n                            <DownloadIcon size={18} />\r\n                          </motion.button>\r\n                        )}\r\n                        {d.status === 'completed' && d.path && isPreviewable(d) && (\r\n                          <motion.button\r\n                            onClick={() => setPreviewItem(d)}\r\n                            whileHover={{ scale: 1.1 }}\r\n                            whileTap={{ scale: 0.9 }}\r\n                            className=\"p-2 rounded-lg bg-gray-800/60 hover:bg-gray-800 border border-gray-700/50 text-gray-300 hover:text-purple-400 transition-colors\"\r\n                            title=\"Preview media\"\r\n                          >\r\n                            <PlayCircle size={18} />\r\n                          </motion.button>\r\n                        )}\r\n                        <motion.button\r\n                          onClick={() => handleOpenFolder(d.path)}\r\n                          whileHover={{ scale: 1.1 }}\r\n                          whileTap={{ scale: 0.9 }}\r\n                          className=\"p-2 rounded-lg bg-gray-800/60 hover:bg-gray-800 border border-gray-700/50 text-gray-300 hover:text-blue-400 transition-colors\"\r\n                          title=\"Show in folder\"\r\n                        >\r\n                          <FolderOpen size={18} />\r\n                        </motion.button>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </motion.div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n      {previewItem && previewItem.path && (\r\n        <MediaPlayer\r\n          filePath={previewItem.path}\r\n          fileName={previewItem.filename}\r\n          onClose={() => setPreviewItem(null)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":["AudioLines","createLucideIcon","FolderOpen","Laptop","Loader","MonitorPlay","Pause","SkipBack","SkipForward","VolumeX","VIDEO_EXTENSIONS","AUDIO_EXTENSIONS","normalizeFileUrl","filePath","normalized","getMediaKind","fileName","extension","MediaPlayer","autoPlay","onClose","mediaKind","useMemo","sourceUrl","mediaRef","useRef","isPlaying","setIsPlaying","useState","currentTime","setCurrentTime","duration","setDuration","volume","setVolume","muted","setMuted","hovered","setHovered","isFullscreen","setIsFullscreen","pipSupported","setPipSupported","useEffect","handler","event","element","handleLoaded","handleTime","handlePlay","handlePause","handleVolumeChange","maybePromise","togglePlay","useCallback","toggleMute","value","nextVolume","handleSeek","skipBy","seconds","togglePictureInPicture","videoElement","doc","error","isDevEnv","toggleFullscreen","container","handleFsChange","openFile","ipc","showInFolder","formatTime","totalSeconds","minutes","hours","remainingMinutes","progressPercent","jsx","Portal","AnimatePresence","motion","jsxs","X","Play","Volume2","PlayCircle","Minimize2","Maximize2","DownloadsPage","items","setItems","loading","setLoading","previewItem","setPreviewItem","list","a","b","updateItem","update","prev","existingIndex","item","updatedItem","next","progressUnsub","ipcEvents","doneUnsub","formatBytes","bytes","k","sizes","i","calcPercent","formatSpeed","bps","units","idx","formatEta","rounded","secs","parts","isPreviewable","getStatusIcon","status","CheckCircle","XCircle","Clock","handleOpenFile","path","handleOpenFolder","renderSafetyBadge","safety","base","renderSafetyDetails","rec","DownloadIcon","d","Fragment"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8]}
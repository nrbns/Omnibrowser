{"version":3,"file":"BottomStatus-7raYbOXr.js","sources":["../../node_modules/lucide-react/dist/esm/icons/frown.js","../../node_modules/lucide-react/dist/esm/icons/meh.js","../../node_modules/lucide-react/dist/esm/icons/memory-stick.js","../../node_modules/lucide-react/dist/esm/icons/rocket.js","../../node_modules/lucide-react/dist/esm/icons/smile.js","../../src/state/shadowStore.ts","../../src/components/PrivacySwitch.tsx","../../src/state/voiceCompanionStore.ts","../../src/components/voice/SymbioticVoiceCompanion.tsx","../../src/state/metricsStore.ts","../../src/components/layout/BottomStatus.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Frown = createLucideIcon(\"Frown\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M16 16s-1.5-2-4-2-4 2-4 2\", key: \"epbg0q\" }],\n  [\"line\", { x1: \"9\", x2: \"9.01\", y1: \"9\", y2: \"9\", key: \"yxxnd0\" }],\n  [\"line\", { x1: \"15\", x2: \"15.01\", y1: \"9\", y2: \"9\", key: \"1p4y9e\" }]\n]);\n\nexport { Frown as default };\n//# sourceMappingURL=frown.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Meh = createLucideIcon(\"Meh\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"8\", x2: \"16\", y1: \"15\", y2: \"15\", key: \"1xb1d9\" }],\n  [\"line\", { x1: \"9\", x2: \"9.01\", y1: \"9\", y2: \"9\", key: \"yxxnd0\" }],\n  [\"line\", { x1: \"15\", x2: \"15.01\", y1: \"9\", y2: \"9\", key: \"1p4y9e\" }]\n]);\n\nexport { Meh as default };\n//# sourceMappingURL=meh.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MemoryStick = createLucideIcon(\"MemoryStick\", [\n  [\"path\", { d: \"M6 19v-3\", key: \"1nvgqn\" }],\n  [\"path\", { d: \"M10 19v-3\", key: \"iu8nkm\" }],\n  [\"path\", { d: \"M14 19v-3\", key: \"kcehxu\" }],\n  [\"path\", { d: \"M18 19v-3\", key: \"1vh91z\" }],\n  [\"path\", { d: \"M8 11V9\", key: \"63erz4\" }],\n  [\"path\", { d: \"M16 11V9\", key: \"fru6f3\" }],\n  [\"path\", { d: \"M12 11V9\", key: \"ha00sb\" }],\n  [\"path\", { d: \"M2 15h20\", key: \"16ne18\" }],\n  [\n    \"path\",\n    {\n      d: \"M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1.1a2 2 0 0 0 0 3.837V17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5.1a2 2 0 0 0 0-3.837Z\",\n      key: \"lhddv3\"\n    }\n  ]\n]);\n\nexport { MemoryStick as default };\n//# sourceMappingURL=memory-stick.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Rocket = createLucideIcon(\"Rocket\", [\n  [\n    \"path\",\n    {\n      d: \"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z\",\n      key: \"m3kijz\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z\",\n      key: \"1fmvmk\"\n    }\n  ],\n  [\"path\", { d: \"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0\", key: \"1f8sc4\" }],\n  [\"path\", { d: \"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5\", key: \"qeys4\" }]\n]);\n\nexport { Rocket as default };\n//# sourceMappingURL=rocket.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Smile = createLucideIcon(\"Smile\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M8 14s1.5 2 4 2 4-2 4-2\", key: \"1y1vjs\" }],\n  [\"line\", { x1: \"9\", x2: \"9.01\", y1: \"9\", y2: \"9\", key: \"yxxnd0\" }],\n  [\"line\", { x1: \"15\", x2: \"15.01\", y1: \"9\", y2: \"9\", key: \"1p4y9e\" }]\n]);\n\nexport { Smile as default };\n//# sourceMappingURL=smile.js.map\n","import { create } from 'zustand';\r\nimport { ipc } from '../lib/ipc-typed';\r\nimport type { ShadowSessionSummaryEvent, ShadowSessionEndedEvent } from '../lib/ipc-events';\r\n\r\ntype ShadowState = {\r\n  activeSessionId: string | null;\r\n  windowId: number | null;\r\n  loading: boolean;\r\n  error: string | null;\r\n  summary: ShadowSessionSummaryEvent | null;\r\n  startShadowSession: (options?: { url?: string; persona?: string; summary?: boolean }) => Promise<void>;\r\n  endShadowSession: (options?: { forensic?: boolean }) => Promise<void>;\r\n  handleSessionEnded: (payload: ShadowSessionEndedEvent) => void;\r\n  clearSummary: () => void;\r\n  setError: (error: string | null) => void;\r\n};\r\n\r\nexport const useShadowStore = create<ShadowState>((set, get) => ({\r\n  activeSessionId: null,\r\n  windowId: null,\r\n  loading: false,\r\n  error: null,\r\n  summary: null,\r\n  async startShadowSession(options) {\r\n    if (get().loading) return;\r\n    set({ loading: true, error: null, summary: null });\r\n    try {\r\n      const response = await ipc.private.createShadowSession(options ?? {});\r\n      if (!response || typeof response !== 'object') {\r\n        throw new Error('Shadow session failed to start');\r\n      }\r\n      const sessionResponse = response as { sessionId?: string | null; windowId?: number | null };\r\n      set({\r\n        activeSessionId: sessionResponse.sessionId ?? null,\r\n        windowId: typeof sessionResponse.windowId === 'number' ? sessionResponse.windowId : null,\r\n        loading: false,\r\n        summary: null,\r\n      });\r\n    } catch (error) {\r\n      set({\r\n        loading: false,\r\n        error: error instanceof Error ? error.message : String(error),\r\n      });\r\n      throw error;\r\n    }\r\n  },\r\n  async endShadowSession(options) {\r\n    const sessionId = get().activeSessionId;\r\n    if (!sessionId) return;\r\n    set({ loading: true, error: null });\r\n    try {\r\n      const response = await ipc.private.endShadowSession(sessionId, options);\r\n      const endResponse = response as { summary?: ShadowSessionSummaryEvent | null } | null;\r\n      set({\r\n        activeSessionId: null,\r\n        windowId: null,\r\n        loading: false,\r\n        summary: endResponse?.summary ?? null,\r\n      });\r\n    } catch (error) {\r\n      set({\r\n        loading: false,\r\n        error: error instanceof Error ? error.message : String(error),\r\n      });\r\n      throw error;\r\n    }\r\n  },\r\n  handleSessionEnded(payload) {\r\n    set((state) => {\r\n      const shouldClear = state.activeSessionId === payload.sessionId;\r\n      return {\r\n        activeSessionId: shouldClear ? null : state.activeSessionId,\r\n        windowId: shouldClear ? null : state.windowId,\r\n        loading: false,\r\n        summary: payload.summary ?? null,\r\n      };\r\n    });\r\n  },\r\n  clearSummary() {\r\n    set({ summary: null });\r\n  },\r\n  setError(error) {\r\n    set({ error });\r\n  },\r\n}));\r\n\r\n\r\n","/**\r\n * PrivacySwitch - Toggle between Normal/Private/Ghost modes\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Lock, Eye, Network, MoonStar } from 'lucide-react';\r\nimport { useProfileStore } from '../state/profileStore';\r\nimport { useShadowStore } from '../state/shadowStore';\r\n\r\ntype PrivacyMode = 'Normal' | 'Private' | 'Ghost';\r\n\r\nexport function PrivacySwitch() {\r\n  const [mode, setMode] = useState<PrivacyMode>('Normal');\r\n  const policy = useProfileStore((state) => state.policies[state.activeProfileId]);\r\n  const {\r\n    activeSessionId: shadowSessionId,\r\n    startShadowSession,\r\n    endShadowSession,\r\n    loading: shadowLoading,\r\n  } = useShadowStore();\r\n\r\n  const privateDisabled = policy ? !policy.allowPrivateWindows : false;\r\n  const ghostDisabled = policy ? !policy.allowGhostTabs : false;\r\n  const shadowDisabled = policy ? !policy.allowPrivateWindows : false;\r\n\r\n  const modes: Array<{ value: PrivacyMode; icon: typeof Lock; label: string; color: string; disabled?: boolean }> = [\r\n    { value: 'Normal', icon: Lock, label: 'Normal', color: 'text-gray-400' },\r\n    { value: 'Private', icon: Eye, label: 'Private', color: 'text-blue-400', disabled: privateDisabled },\r\n    { value: 'Ghost', icon: Network, label: 'Ghost', color: 'text-purple-400', disabled: ghostDisabled },\r\n  ];\r\n\r\n  const handleModeChange = async (newMode: PrivacyMode) => {\r\n    if (newMode === mode) return;\r\n\r\n    const target = modes.find((m) => m.value === newMode);\r\n    if (target?.disabled) {\r\n      return;\r\n    }\r\n\r\n    if (newMode === 'Private') {\r\n      try {\r\n        if ((window as any).ipc?.invoke) {\r\n          await (window as any).ipc.invoke('ob://ipc/v1/private:createWindow', { url: 'about:blank' });\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to create private window:', error);\r\n        return;\r\n      }\r\n    } else if (newMode === 'Ghost') {\r\n      try {\r\n        if ((window as any).ipc?.invoke) {\r\n          await (window as any).ipc.invoke('ob://ipc/v1/private:createGhostTab', { url: 'about:blank' });\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to create ghost tab:', error);\r\n        return;\r\n      }\r\n    }\r\n\r\n    setMode(newMode);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"flex items-center gap-1 bg-gray-800/50 rounded-lg p-1 border border-gray-700/50\"\r\n      role=\"group\"\r\n      aria-label=\"Privacy mode selector\"\r\n    >\r\n      {modes.map((m) => {\r\n        const Icon = m.icon;\r\n        const isActive = mode === m.value;\r\n        return (\r\n          <motion.button\r\n            key={m.value}\r\n            type=\"button\"\r\n            onClick={() => handleModeChange(m.value)}\r\n            onKeyDown={(e) => {\r\n              if (e.key === 'Enter' || e.key === ' ') {\r\n                e.preventDefault();\r\n                handleModeChange(m.value);\r\n              }\r\n            }}\r\n            whileHover={{ scale: 1.05 }}\r\n            whileTap={{ scale: 0.95 }}\r\n            className={`px-3 py-1.5 rounded-md text-xs font-medium transition-all flex items-center gap-1.5 focus:outline-none focus:ring-2 focus:ring-blue-400/50 ${\r\n              isActive\r\n                ? `${m.color.replace('text-', 'bg-')} bg-opacity-20 text-white`\r\n                : m.disabled\r\n                ? 'text-gray-600 cursor-not-allowed'\r\n                : 'text-gray-400 hover:text-gray-300'\r\n            }`}\r\n            disabled={m.disabled}\r\n            aria-label={`Switch to ${m.label} privacy mode`}\r\n            aria-pressed={isActive}\r\n            aria-disabled={m.disabled}\r\n            title={\r\n              m.disabled\r\n                ? `${m.label} disabled by profile policy`\r\n                : `Switch to ${m.label}`\r\n            }\r\n          >\r\n            <Icon size={14} aria-hidden=\"true\" />\r\n            <span>{m.label}</span>\r\n          </motion.button>\r\n        );\r\n      })}\r\n      <motion.button\r\n        key=\"Shadow\"\r\n        type=\"button\"\r\n        whileHover={{ scale: shadowLoading || shadowDisabled ? 1 : 1.05 }}\r\n        whileTap={{ scale: shadowLoading || shadowDisabled ? 1 : 0.95 }}\r\n        disabled={shadowDisabled || shadowLoading}\r\n        onClick={async () => {\r\n          if (shadowDisabled || shadowLoading) return;\r\n          try {\r\n            if (shadowSessionId) {\r\n              await endShadowSession();\r\n            } else {\r\n              await startShadowSession({ summary: true });\r\n            }\r\n          } catch (error) {\r\n            console.error('Shadow session error:', error);\r\n          }\r\n        }}\r\n        onKeyDown={(e) => {\r\n          if ((e.key === 'Enter' || e.key === ' ') && !shadowDisabled && !shadowLoading) {\r\n            e.preventDefault();\r\n            if (shadowSessionId) {\r\n              void endShadowSession();\r\n            } else {\r\n              void startShadowSession({ summary: true });\r\n            }\r\n          }\r\n        }}\r\n        className={`px-3 py-1.5 rounded-md text-xs font-medium transition-all flex items-center gap-1.5 focus:outline-none focus:ring-2 focus:ring-purple-400/50 ${\r\n          shadowSessionId\r\n            ? 'bg-purple-500/20 text-purple-200 border border-purple-400/30'\r\n            : shadowDisabled\r\n            ? 'text-gray-600 cursor-not-allowed'\r\n            : 'text-gray-400 hover:text-gray-300'\r\n        }`}\r\n        aria-label={shadowSessionId ? 'End Shadow Mode session' : 'Start Shadow Mode'}\r\n        aria-pressed={!!shadowSessionId}\r\n        aria-disabled={shadowDisabled || shadowLoading}\r\n        title={\r\n          shadowDisabled\r\n            ? 'Shadow Mode disabled by profile policy'\r\n            : shadowSessionId\r\n            ? 'End Shadow Mode session'\r\n            : 'Start Shadow Mode (simulated private browsing)'\r\n        }\r\n      >\r\n        <MoonStar size={14} aria-hidden=\"true\" />\r\n        <span>{shadowSessionId ? 'Shadow On' : 'Shadow'}</span>\r\n      </motion.button>\r\n    </div>\r\n  );\r\n}\r\n\r\n","import { create } from 'zustand';\r\nimport { ipc } from '../lib/ipc-typed';\r\n\r\nexport type CompanionMood = 'calm' | 'positive' | 'concerned' | 'motivated';\r\n\r\nexport interface VoiceMessage {\r\n  role: 'user' | 'companion';\r\n  text: string;\r\n  timestamp: number;\r\n  mood?: CompanionMood;\r\n}\r\n\r\ninterface VoiceCompanionState {\r\n  open: boolean;\r\n  listening: boolean;\r\n  transcript: string;\r\n  mood: CompanionMood;\r\n  messages: VoiceMessage[];\r\n  loadingReply: boolean;\r\n  error: string | null;\r\n  setOpen: (open: boolean) => void;\r\n  setListening: (listening: boolean) => void;\r\n  setTranscript: (text: string) => void;\r\n  setMood: (mood: CompanionMood) => void;\r\n  pushMessage: (message: VoiceMessage) => void;\r\n  sendToCompanion: (text: string, mood: CompanionMood) => Promise<void>;\r\n  clearConversation: () => void;\r\n  setError: (error: string | null) => void;\r\n}\r\n\r\nexport const useVoiceCompanionStore = create<VoiceCompanionState>((set) => ({\r\n  open: false,\r\n  listening: false,\r\n  transcript: '',\r\n  mood: 'calm',\r\n  messages: [],\r\n  loadingReply: false,\r\n  error: null,\r\n  setOpen(open) {\r\n    set({ open });\r\n  },\r\n  setListening(listening) {\r\n    set({ listening });\r\n  },\r\n  setTranscript(text) {\r\n    set({ transcript: text });\r\n  },\r\n  setMood(mood) {\r\n    set({ mood });\r\n  },\r\n  pushMessage(message) {\r\n    set((state) => ({ messages: [...state.messages, message] }));\r\n  },\r\n  async sendToCompanion(text, mood) {\r\n    if (!text.trim()) return;\r\n    const timestamp = Date.now();\r\n    const userMessage: VoiceMessage = {\r\n      role: 'user',\r\n      text,\r\n      timestamp,\r\n      mood,\r\n    };\r\n    set((state) => ({\r\n      messages: [...state.messages, userMessage],\r\n      loadingReply: true,\r\n      error: null,\r\n    }));\r\n\r\n    try {\r\n      const prompt = `You are Symbiotic, OmniBrowser's empathic voice companion. The user mood is ${mood}. Respond concisely (<=3 sentences) in a friendly tone, with optional short actionable tip.`;\r\n      const response = await ipc.agent.ask(prompt, {\r\n        text,\r\n      });\r\n      const reply: VoiceMessage = {\r\n        role: 'companion',\r\n        text: response?.answer ?? 'I hear you. Let me know how else I can help.',\r\n        timestamp: Date.now(),\r\n        mood,\r\n      };\r\n      set((state) => ({\r\n        messages: [...state.messages, reply],\r\n        loadingReply: false,\r\n      }));\r\n    } catch (error) {\r\n      set({\r\n        error: error instanceof Error ? error.message : String(error),\r\n        loadingReply: false,\r\n      });\r\n    }\r\n  },\r\n  clearConversation() {\r\n    set({ messages: [], transcript: '', mood: 'calm', error: null });\r\n  },\r\n  setError(error) {\r\n    set({ error });\r\n  },\r\n}));\r\n","import { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { AnimatePresence, motion } from 'framer-motion';\r\nimport { Mic, MicOff, Sparkles, Loader2, Smile, Meh, Frown, Rocket } from 'lucide-react';\r\nimport { useVoiceCompanionStore, CompanionMood } from '../../state/voiceCompanionStore';\r\nimport { Portal } from '../common/Portal';\r\n\r\nconst positiveWords = ['great', 'awesome', 'excited', 'happy', 'love', 'fantastic', 'wonderful'];\r\nconst negativeWords = ['frustrated', 'angry', 'annoyed', 'stuck', 'hate', 'upset'];\r\nconst urgencyWords = ['plan', 'launch', 'deadline', 'urgent', 'quick', 'fast'];\r\n\r\nfunction detectMood(text: string): CompanionMood {\r\n  const lowered = text.toLowerCase();\r\n  if (negativeWords.some((w) => lowered.includes(w))) {\r\n    return 'concerned';\r\n  }\r\n  if (urgencyWords.some((w) => lowered.includes(w))) {\r\n    return 'motivated';\r\n  }\r\n  if (positiveWords.some((w) => lowered.includes(w))) {\r\n    return 'positive';\r\n  }\r\n  return 'calm';\r\n}\r\n\r\nfunction moodIcon(mood: CompanionMood) {\r\n  switch (mood) {\r\n    case 'positive':\r\n      return <Smile size={16} className=\"text-emerald-300\" />;\r\n    case 'concerned':\r\n      return <Frown size={16} className=\"text-amber-300\" />;\r\n    case 'motivated':\r\n      return <Rocket size={16} className=\"text-cyan-300\" />;\r\n    default:\r\n      return <Meh size={16} className=\"text-slate-300\" />;\r\n  }\r\n}\r\n\r\nexport function SymbioticVoiceCompanion() {\r\n  const {\r\n    open,\r\n    listening,\r\n    transcript,\r\n    mood,\r\n    messages,\r\n    loadingReply,\r\n    error,\r\n    setOpen,\r\n    setListening,\r\n    setTranscript,\r\n    setMood,\r\n    sendToCompanion,\r\n    clearConversation,\r\n    setError,\r\n  } = useVoiceCompanionStore();\r\n\r\n  const recogRef = useRef<any>(null);\r\n  const [speechSupported, setSpeechSupported] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const SR: any = (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition;\r\n    if (SR) {\r\n      const recognizer = new SR();\r\n      recognizer.continuous = false;\r\n      recognizer.interimResults = true;\r\n      recognizer.lang = 'en-US';\r\n      recognizer.onresult = (event: any) => {\r\n        const interim = Array.from(event.results)\r\n          .map((res: any) => res[0].transcript)\r\n          .join(' ');\r\n        setTranscript(interim);\r\n        if (event.results[0].isFinal) {\r\n          const finalText = interim.trim();\r\n          const detectedMood = detectMood(finalText);\r\n          setMood(detectedMood);\r\n          setTranscript('');\r\n          setListening(false);\r\n          void sendToCompanion(finalText, detectedMood);\r\n        }\r\n      };\r\n      recognizer.onerror = (e: any) => {\r\n        setListening(false);\r\n        setError(e?.error ?? 'Voice recognition error');\r\n      };\r\n      recognizer.onend = () => {\r\n        setListening(false);\r\n      };\r\n      recogRef.current = recognizer;\r\n      setSpeechSupported(true);\r\n    } else {\r\n      setSpeechSupported(false);\r\n    }\r\n  }, [setListening, setTranscript, setMood, sendToCompanion, setError]);\r\n\r\n  const startListening = () => {\r\n    if (!speechSupported || !recogRef.current) {\r\n      setError('Speech recognition not available in this environment.');\r\n      return;\r\n    }\r\n    try {\r\n      setError(null);\r\n      setTranscript('');\r\n      setListening(true);\r\n      recogRef.current.start();\r\n    } catch (error) {\r\n      setError(error instanceof Error ? error.message : String(error));\r\n      setListening(false);\r\n    }\r\n  };\r\n\r\n  const stopListening = () => {\r\n    if (recogRef.current && listening) {\r\n      try {\r\n        recogRef.current.stop();\r\n      } catch {}\r\n    }\r\n    setListening(false);\r\n  };\r\n\r\n  const moodLabel = useMemo(() => {\r\n    switch (mood) {\r\n      case 'positive':\r\n        return 'Upbeat';\r\n      case 'concerned':\r\n        return 'Checking in';\r\n      case 'motivated':\r\n        return 'In the zone';\r\n      default:\r\n        return 'Calm';\r\n    }\r\n  }, [mood]);\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => setOpen(!open)}\r\n        className={`flex items-center gap-1 rounded-full border border-purple-400/30 bg-purple-500/10 px-3 py-1.5 text-xs font-medium text-purple-100 transition-colors hover:bg-purple-500/20`}\r\n        title=\"Open Symbiotic Voice Companion\"\r\n      >\r\n        <Sparkles size={14} /> Voice Companion\r\n      </button>\r\n\r\n      <AnimatePresence>\r\n        {open && (\r\n          <Portal>\r\n            <div className=\"fixed inset-0 z-[120] flex items-end justify-end bg-transparent pointer-events-none\">\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 40 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: 40 }}\r\n                transition={{ duration: 0.2 }}\r\n                className=\"pointer-events-auto m-6 w-[360px] max-w-[92vw] rounded-3xl border border-purple-400/30 bg-slate-950/96 p-4 shadow-[0_20px_80px_rgba(124,58,237,0.35)]\"\r\n              >\r\n                <div className=\"flex items-start justify-between gap-2\">\r\n                  <div>\r\n                    <div className=\"text-xs uppercase tracking-wide text-purple-200/80\">Symbiotic Companion</div>\r\n                    <div className=\"flex items-center gap-2 text-sm font-semibold text-purple-100\">\r\n                      {moodIcon(mood)} {moodLabel}\r\n                    </div>\r\n                    <div className=\"text-[11px] text-purple-200/60\">Speak your mind and Symbiotic will respond empathetically.</div>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={clearConversation}\r\n                      className=\"rounded-lg border border-purple-400/30 bg-purple-500/10 px-2 py-1 text-[10px] text-purple-100 hover:bg-purple-500/20\"\r\n                    >\r\n                      Clear\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        stopListening();\r\n                        setOpen(false);\r\n                      }}\r\n                      className=\"rounded-lg border border-purple-400/30 bg-purple-500/10 px-2 py-1 text-[10px] text-purple-100 hover:bg-purple-500/20\"\r\n                    >\r\n                      Close\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"mt-4 h-48 overflow-y-auto rounded-2xl border border-purple-500/10 bg-slate-900/60 p-3\">\r\n                  {messages.length === 0 && !transcript ? (\r\n                    <div className=\"text-[11px] text-purple-200/70\">\r\n                      Tap the mic to start talking. I can help summarize, brainstorm, or keep you focused.\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"flex flex-col gap-3 text-[11px]\">\r\n                      {messages.map((message) => (\r\n                        <div\r\n                          key={`${message.role}-${message.timestamp}`}\r\n                          className={`flex flex-col gap-1 ${message.role === 'user' ? 'items-end text-right' : 'items-start text-left'}`}\r\n                        >\r\n                          <div\r\n                            className={`max-w-[85%] rounded-2xl px-3 py-2 shadow-sm ${\r\n                              message.role === 'user'\r\n                                ? 'bg-purple-500/20 text-purple-100'\r\n                                : 'bg-slate-800/70 text-purple-50'\r\n                            }`}\r\n                          >\r\n                            {message.text}\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                      {transcript && (\r\n                        <div className=\"flex justify-end text-[11px] text-purple-200/70\">\r\n                          {transcript}\r\n                        </div>\r\n                      )}\r\n                      {loadingReply && (\r\n                        <div className=\"flex items-center gap-2 text-[11px] text-purple-200/70\">\r\n                          <Loader2 size={14} className=\"animate-spin\" />\r\n                          Formulating a response…\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {error && (\r\n                  <div className=\"mt-2 rounded-lg border border-rose-500/40 bg-rose-500/10 px-3 py-1 text-[11px] text-rose-100\">\r\n                    {error}\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"mt-4 flex items-center justify-between gap-2\">\r\n                  <div className=\"flex items-center gap-2 text-[11px] text-purple-200/70\">\r\n                    {speechSupported ? 'Ready for voice input.' : 'Voice capture not available.'}\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={listening ? stopListening : startListening}\r\n                      disabled={!speechSupported}\r\n                      className={`flex items-center gap-2 rounded-full px-3 py-1.5 text-xs transition-colors ${\r\n                        listening\r\n                          ? 'bg-red-500/30 text-red-100 border border-red-500/40'\r\n                          : 'bg-purple-500/20 text-purple-100 border border-purple-400/30 hover:bg-purple-500/30'\r\n                      } ${speechSupported ? '' : 'opacity-60 cursor-not-allowed'}`}\r\n                    >\r\n                      {listening ? <MicOff size={14} /> : <Mic size={14} />}\r\n                      {listening ? 'Stop listening' : 'Start listening'}\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </motion.div>\r\n            </div>\r\n          </Portal>\r\n        )}\r\n      </AnimatePresence>\r\n    </>\r\n  );\r\n}\r\n","import { create } from 'zustand';\r\n\r\nexport type MetricSample = {\r\n  timestamp: number;\r\n  cpu: number;\r\n  memory: number;\r\n  carbonIntensity?: number;\r\n};\r\n\r\nexport type MetricsState = {\r\n  latest: MetricSample | null;\r\n  history: MetricSample[];\r\n  dailyTotalCarbon: number;\r\n  pushSample: (sample: MetricSample) => void;\r\n  clear: () => void;\r\n};\r\n\r\nconst MAX_HISTORY = 300;\r\nconst DAY_MS = 24 * 60 * 60 * 1000;\r\nconst IDLE_CARBON = 200;\r\nconst SAMPLE_PERIOD_MS = Number(import.meta.env.VITE_METRICS_INTERVAL_MS || 2000);\r\n\r\nexport const useMetricsStore = create<MetricsState>((set) => ({\r\n  latest: null,\r\n  history: [],\r\n  dailyTotalCarbon: 0,\r\n  pushSample: (sample) =>\r\n    set((state) => {\r\n      const nextHistory = [...state.history, sample].slice(-MAX_HISTORY);\r\n      const baseline = Math.max(sample.carbonIntensity ?? IDLE_CARBON, 0);\r\n      const delta = baseline * (SAMPLE_PERIOD_MS / DAY_MS);\r\n      const nextCarbon = state.dailyTotalCarbon + delta;\r\n      return {\r\n        latest: sample,\r\n        history: nextHistory,\r\n        dailyTotalCarbon: nextCarbon,\r\n      };\r\n    }),\r\n  clear: () => set({ latest: null, history: [], dailyTotalCarbon: 0 }),\r\n}));\r\n","/**\r\n * BottomStatus - Status bar with live indicators and AI prompt\r\n */\r\n\r\nimport { useState, useEffect, useRef, useMemo, useCallback } from 'react';\r\nimport type { LucideIcon } from 'lucide-react';\r\nimport { Send, Cpu, MemoryStick, Network, Brain, Shield, Activity, AlertTriangle, X, RefreshCw, Wifi, MoonStar, FileText, Loader2, MoreHorizontal } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { ipc } from '../../lib/ipc-typed';\r\nimport { useTabsStore } from '../../state/tabsStore';\r\nimport { EfficiencyModeEvent, NetworkStatus, EfficiencyAlert, EfficiencyAlertAction, ShadowSessionEndedEvent } from '../../lib/ipc-events';\r\nimport { useIPCEvent } from '../../lib/use-ipc-event';\r\nimport { PrivacySwitch } from '../PrivacySwitch';\r\nimport { useEfficiencyStore } from '../../state/efficiencyStore';\r\nimport { usePrivacyStore } from '../../state/privacyStore';\r\nimport { useShadowStore } from '../../state/shadowStore';\r\nimport { SymbioticVoiceCompanion } from '../voice';\r\nimport { useMetricsStore, type MetricSample } from '../../state/metricsStore';\r\nimport { getEnvVar, isElectronRuntime } from '../../lib/env';\r\nimport { useTrustDashboardStore } from '../../state/trustDashboardStore';\r\n\r\ntype PrivacyEventEntry = {\r\n  id: string;\r\n  timestamp: number;\r\n  kind: 'tor' | 'vpn';\r\n  status: 'info' | 'success' | 'warning';\r\n  message: string;\r\n};\r\n\r\nconst RELATIVE_TIME_FORMATTER = new Intl.RelativeTimeFormat('en', { numeric: 'auto' });\r\n\r\nfunction createEventId(): string {\r\n  const cryptoRandom = (globalThis.crypto as Crypto | undefined)?.randomUUID?.();\r\n  if (cryptoRandom) {\r\n    return cryptoRandom;\r\n  }\r\n  return `privacy-${Date.now().toString(36)}-${Math.random().toString(36).slice(2, 8)}`;\r\n}\r\n\r\nfunction formatRelativeTime(timestamp: number): string {\r\n  const now = Date.now();\r\n  let difference = timestamp - now;\r\n  const divisions: Array<[number, Intl.RelativeTimeFormatUnit]> = [\r\n    [1000, 'second'],\r\n    [60, 'minute'],\r\n    [60, 'hour'],\r\n    [24, 'day'],\r\n    [7, 'week'],\r\n    [4.34524, 'month'],\r\n    [12, 'year'],\r\n  ];\r\n\r\n  for (const [amount, unit] of divisions) {\r\n    if (Math.abs(difference) < amount) {\r\n      return RELATIVE_TIME_FORMATTER.format(Math.round(difference), unit);\r\n    }\r\n    difference /= amount;\r\n  }\r\n\r\n  return RELATIVE_TIME_FORMATTER.format(Math.round(difference), 'year');\r\n}\r\n\r\nexport function BottomStatus() {\r\n  const { activeId } = useTabsStore();\r\n  const [prompt, setPrompt] = useState('');\r\n  const [promptLoading, setPromptLoading] = useState(false);\r\n  const [extraOpen, setExtraOpen] = useState(false);\r\n  const [trendOpen, setTrendOpen] = useState(false);\r\n  const extraRef = useRef<HTMLDivElement | null>(null);\r\n  const trendRef = useRef<HTMLDivElement | null>(null);\r\n  const [dohStatus, setDohStatus] = useState({ enabled: false, provider: 'cloudflare' });\r\n  const [cpuUsage, setCpuUsage] = useState(0);\r\n  const [memoryUsage, setMemoryUsage] = useState(0);\r\n  const [modelReady] = useState(true);\r\n  const [privacyMode, setPrivacyMode] = useState<'Normal' | 'Ghost' | 'Tor'>('Normal');\r\n  const [efficiencyAlert, setEfficiencyAlert] = useState<EfficiencyAlert | null>(null);\r\n  const efficiencyLabel = useEfficiencyStore((state) => state.label);\r\n  const efficiencyBadge = useEfficiencyStore((state) => state.badge);\r\n  const efficiencySnapshot = useEfficiencyStore((state) => state.snapshot);\r\n  const setEfficiencyEvent = useEfficiencyStore((state) => state.setEvent);\r\n  const shadowSessionId = useShadowStore((state) => state.activeSessionId);\r\n  const shadowLoading = useShadowStore((state) => state.loading);\r\n  const shadowSummary = useShadowStore((state) => state.summary);\r\n  const handleShadowEnded = useShadowStore((state) => state.handleSessionEnded);\r\n  const clearShadowSummary = useShadowStore((state) => state.clearSummary);\r\n  const carbonIntensity = efficiencySnapshot.carbonIntensity ?? null;\r\n  const torStatus = usePrivacyStore((state) => state.tor);\r\n  const vpnStatus = usePrivacyStore((state) => state.vpn);\r\n  const refreshTor = usePrivacyStore((state) => state.refreshTor);\r\n  const refreshVpn = usePrivacyStore((state) => state.refreshVpn);\r\n  const startTor = usePrivacyStore((state) => state.startTor);\r\n  const stopTor = usePrivacyStore((state) => state.stopTor);\r\n  const newTorIdentity = usePrivacyStore((state) => state.newTorIdentity);\r\n  const checkVpn = usePrivacyStore((state) => state.checkVpn);\r\n  const pushMetricSample = useMetricsStore((state) => state.pushSample);\r\n  const latestSample = useMetricsStore((state) => state.latest);\r\n  const metricsHistory = useMetricsStore((state) => state.history);\r\n  const dailyCarbon = useMetricsStore((state) => state.dailyTotalCarbon);\r\n  const highCpuRef = useRef<MetricSample[]>([]);\r\n  const highRamRef = useRef<MetricSample[]>([]);\r\n  const [metricsAlert, setMetricsAlert] = useState<{\r\n    title: string;\r\n    message: string;\r\n    severity: 'info' | 'warning' | 'critical';\r\n  } | null>(null);\r\n  const [vpnProfiles, setVpnProfiles] = useState<Array<{ id: string; name: string; type: string; server?: string }>>([]);\r\n  const vpnProfilesRef = useRef<Array<{ id: string; name: string; type: string; server?: string }>>([]);\r\n  const [vpnActiveId, setVpnActiveId] = useState<string | null>(null);\r\n  const [vpnBusy, setVpnBusy] = useState(false);\r\n  const [vpnError, setVpnError] = useState<string | null>(null);\r\n  const [privacyEvents, setPrivacyEvents] = useState<PrivacyEventEntry[]>([]);\r\n  const [privacyToast, setPrivacyToast] = useState<PrivacyEventEntry | null>(null);\r\n  const [shieldsStats, setShieldsStats] = useState<{ trackersBlocked: number; adsBlocked: number }>({ trackersBlocked: 0, adsBlocked: 0 });\r\n  const isElectron = useMemo(() => isElectronRuntime(), []);\r\n  const apiBaseUrl = useMemo(() => {\r\n    return (\r\n      getEnvVar('API_BASE_URL') ??\r\n      getEnvVar('OMNIBROWSER_API_URL') ??\r\n      getEnvVar('OB_API_BASE_URL') ??\r\n      getEnvVar('VITE_REDIX_HTTP_URL') ??\r\n      'http://localhost:4000'\r\n    );\r\n  }, []);\r\n  const metricsSocketRef = useRef<WebSocket | EventSource | null>(null);\r\n  const openTrustDashboard = useTrustDashboardStore((state) => state.open);\r\n  const trustRefresh = useTrustDashboardStore((state) => state.refresh);\r\n  const trustBadgeData = useTrustDashboardStore((state) => ({\r\n    pending: state.consentStats.pending,\r\n    blocked: state.blockedSummary.trackers,\r\n    loading: state.loading,\r\n  }));\r\n\r\n  const pushPrivacyEvent = useCallback(\r\n    (event: Omit<PrivacyEventEntry, 'id' | 'timestamp'> & { timestamp?: number }) => {\r\n      const entry: PrivacyEventEntry = {\r\n        id: createEventId(),\r\n        timestamp: event.timestamp ?? Date.now(),\r\n        kind: event.kind,\r\n        status: event.status,\r\n        message: event.message,\r\n      };\r\n      setPrivacyEvents((current) => [...current.slice(-29), entry]);\r\n      setPrivacyToast(entry);\r\n    },\r\n    [],\r\n  );\r\n\r\n  // Temporary alias for compatibility with new naming while keeping existing references working.\r\n  const addPrivacyEvent = pushPrivacyEvent;\r\n\r\n  const prevVpnRef = useRef(vpnStatus);\r\n  const prevTorRef = useRef(torStatus);\r\n\r\n  // Listen for network status\r\n  useIPCEvent<NetworkStatus>('net:status', (status) => {\r\n    if (status.doh) {\r\n      setDohStatus(status.doh);\r\n    }\r\n    if (status.tor?.enabled && status.tor.circuitEstablished) {\r\n      setPrivacyMode('Tor');\r\n    } else if (status.proxy?.enabled) {\r\n      setPrivacyMode('Ghost');\r\n    } else {\r\n      setPrivacyMode('Normal');\r\n    }\r\n    if (status.vpn) {\r\n      if (!status.vpn.connected) {\r\n        setVpnActiveId(null);\r\n      } else {\r\n        const profiles = vpnProfilesRef.current;\r\n        const match =\r\n          profiles.find((p) => p.name === status.vpn?.provider) ||\r\n          profiles.find((p) => p.server && p.server === status.vpn?.server);\r\n        if (match) {\r\n          setVpnActiveId(match.id);\r\n        } else if (status.vpn.provider) {\r\n          setVpnActiveId(status.vpn.provider);\r\n        }\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  useIPCEvent<EfficiencyModeEvent>('efficiency:mode', (event) => {\r\n    setEfficiencyEvent(event);\r\n  }, [setEfficiencyEvent]);\r\n\r\n  useIPCEvent<EfficiencyAlert>('efficiency:alert', (alert) => {\r\n    setEfficiencyAlert(alert);\r\n  }, []);\r\n\r\n  useIPCEvent<ShadowSessionEndedEvent>('private:shadow:ended', (payload) => {\r\n    handleShadowEnded(payload);\r\n  }, [handleShadowEnded]);\r\n\r\n  useEffect(() => {\r\n    void refreshTor();\r\n    void refreshVpn();\r\n    const interval = window.setInterval(() => {\r\n      void refreshTor();\r\n      void refreshVpn();\r\n    }, 20000);\r\n    return () => window.clearInterval(interval);\r\n  }, [refreshTor, refreshVpn]);\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n\r\n    const loadProfiles = async () => {\r\n      try {\r\n        const profiles = await ipc.vpn.listProfiles();\r\n        if (!cancelled && Array.isArray(profiles)) {\r\n          setVpnProfiles(profiles);\r\n          vpnProfilesRef.current = profiles;\r\n        }\r\n      } catch (error) {\r\n        console.warn('[vpn] Failed to load profiles', error);\r\n      }\r\n    };\r\n\r\n    loadProfiles();\r\n    const interval = window.setInterval(loadProfiles, 60000);\r\n    return () => {\r\n      cancelled = true;\r\n      window.clearInterval(interval);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const startupTimer = window.setTimeout(() => {\r\n      void trustRefresh();\r\n    }, 450);\r\n    const interval = window.setInterval(() => {\r\n      void trustRefresh();\r\n    }, 60000);\r\n    return () => {\r\n      window.clearTimeout(startupTimer);\r\n      window.clearInterval(interval);\r\n    };\r\n  }, [trustRefresh]);\r\n\r\n  useEffect(() => {\r\n    if (latestSample) {\r\n      setCpuUsage((prev) => smoothValue(prev, latestSample.cpu));\r\n      setMemoryUsage((prev) => smoothValue(prev, latestSample.memory));\r\n\r\n      const samples = metricsHistory.slice(-5);\r\n      highCpuRef.current = samples.filter((sample) => sample.cpu >= 85);\r\n      highRamRef.current = samples.filter((sample) => sample.memory >= 85);\r\n\r\n      if (highCpuRef.current.length >= 3) {\r\n        setMetricsAlert({\r\n          title: 'CPU running hot',\r\n          message: 'Consider enabling Performance Mode or closing heavy tabs.',\r\n          severity: 'warning',\r\n        });\r\n      } else if (highRamRef.current.length >= 3) {\r\n        setMetricsAlert({\r\n          title: 'Memory pressure detected',\r\n          message: 'Try hibernating inactive tabs to free RAM.',\r\n          severity: 'warning',\r\n        });\r\n      }\r\n    }\r\n  }, [latestSample, metricsHistory]);\r\n\r\n  useEffect(() => {\r\n    const previous = prevTorRef.current;\r\n    if (!previous.running && torStatus.running) {\r\n      addPrivacyEvent({ kind: 'tor', status: 'info', message: 'Tor daemon starting…' });\r\n    }\r\n    if (!previous.bootstrapped && torStatus.bootstrapped) {\r\n      addPrivacyEvent({ kind: 'tor', status: 'success', message: 'Tor circuit established' });\r\n    }\r\n    if (previous.running && !torStatus.running) {\r\n      addPrivacyEvent({ kind: 'tor', status: 'info', message: 'Tor stopped' });\r\n    }\r\n    if (!previous.stub && torStatus.stub) {\r\n      addPrivacyEvent({ kind: 'tor', status: 'warning', message: 'Tor binary not found – running in stub mode' });\r\n    }\r\n    if (torStatus.error && torStatus.error !== previous.error) {\r\n      addPrivacyEvent({ kind: 'tor', status: 'warning', message: `Tor warning: ${torStatus.error}` });\r\n    }\r\n    prevTorRef.current = torStatus;\r\n  }, [torStatus, addPrivacyEvent]);\r\n\r\n  useEffect(() => {\r\n    const previous = prevVpnRef.current;\r\n    if (!previous.connected && vpnStatus.connected) {\r\n      const label = vpnStatus.name || vpnStatus.type || 'VPN';\r\n      addPrivacyEvent({ kind: 'vpn', status: 'success', message: `VPN connected${label ? `: ${label}` : ''}` });\r\n    }\r\n    if (previous.connected && !vpnStatus.connected) {\r\n      addPrivacyEvent({ kind: 'vpn', status: 'info', message: 'VPN disconnected' });\r\n    }\r\n    prevVpnRef.current = vpnStatus;\r\n  }, [vpnStatus, addPrivacyEvent]);\r\n\r\n  // Real-time metrics polling for Electron\r\n  useEffect(() => {\r\n    if (isElectron) {\r\n      let cancelled = false;\r\n      let pollInterval: NodeJS.Timeout | null = null;\r\n\r\n      const pollMetrics = async () => {\r\n        if (cancelled) return;\r\n        \r\n        try {\r\n          const metrics = await ipc.performance.getMetrics();\r\n          if (cancelled || !metrics) return;\r\n          \r\n          const sample = {\r\n            timestamp: metrics.timestamp || Date.now(),\r\n            cpu: metrics.cpu || 0,\r\n            memory: metrics.memory || 0,\r\n            carbonIntensity: undefined, // Can be added later if available\r\n          };\r\n          \r\n          pushMetricSample(sample);\r\n          \r\n          // Note: Efficiency store is updated via efficiency:mode events from the resource monitor\r\n          // We just update the metrics store here for real-time CPU/RAM display\r\n        } catch (error) {\r\n          if (!cancelled) {\r\n            console.warn('[metrics] Failed to poll metrics:', error);\r\n          }\r\n        }\r\n      };\r\n\r\n      // Start polling immediately, then every 1-2 seconds\r\n      pollMetrics();\r\n      pollInterval = setInterval(pollMetrics, 1500); // Poll every 1.5 seconds\r\n\r\n      return () => {\r\n        cancelled = true;\r\n        if (pollInterval) {\r\n          clearInterval(pollInterval);\r\n        }\r\n      };\r\n    } else {\r\n      // Non-Electron: Use WebSocket\r\n      const socket = new WebSocket(`${apiBaseUrl.replace(/^http/, 'ws')}/ws/metrics`);\r\n      metricsSocketRef.current = socket;\r\n\r\n      socket.onmessage = (event) => {\r\n        try {\r\n          const data = JSON.parse(event.data);\r\n          if (data.type !== 'metrics') return;\r\n          const sample = {\r\n            timestamp: typeof data.timestamp === 'number' ? data.timestamp : Date.now(),\r\n            cpu: typeof data.cpu === 'number' ? data.cpu : 0,\r\n            memory: typeof data.memory === 'number' ? data.memory : 0,\r\n            carbonIntensity: typeof data.carbon_intensity === 'number' ? data.carbon_intensity : undefined,\r\n          };\r\n          pushMetricSample(sample);\r\n        } catch (error) {\r\n          console.warn('[metrics] Failed to parse message', error);\r\n        }\r\n      };\r\n\r\n      socket.onopen = () => {\r\n        console.info('[metrics] Connected to metrics websocket');\r\n      };\r\n\r\n      socket.onerror = (event) => {\r\n        console.warn('[metrics] Metrics websocket error', event);\r\n      };\r\n\r\n      socket.onclose = () => {\r\n        console.info('[metrics] Metrics websocket closed');\r\n      };\r\n\r\n      return () => {\r\n        socket.close();\r\n        metricsSocketRef.current = null;\r\n      };\r\n    }\r\n  }, [isElectron, apiBaseUrl, pushMetricSample, setEfficiencyEvent, efficiencySnapshot]);\r\n\r\n  // Poll shields stats for privacy scorecard\r\n  useEffect(() => {\r\n    if (!isElectron) return;\r\n    \r\n    let cancelled = false;\r\n    let pollInterval: NodeJS.Timeout | null = null;\r\n\r\n    const pollShieldsStats = async () => {\r\n      if (cancelled) return;\r\n      \r\n      try {\r\n        const status = await ipc.shields.getStatus();\r\n        if (cancelled || !status) return;\r\n        \r\n        setShieldsStats({\r\n          trackersBlocked: status.trackersBlocked || 0,\r\n          adsBlocked: status.adsBlocked || 0,\r\n        });\r\n      } catch (error) {\r\n        if (!cancelled) {\r\n          console.warn('[BottomStatus] Failed to poll shields stats:', error);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Start polling immediately, then every 2 seconds\r\n    pollShieldsStats();\r\n    pollInterval = setInterval(pollShieldsStats, 2000);\r\n\r\n    return () => {\r\n      cancelled = true;\r\n      if (pollInterval) {\r\n        clearInterval(pollInterval);\r\n      }\r\n    };\r\n  }, [isElectron]);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    \r\n    // Wait a bit for IPC to be ready before making calls\r\n    const initStatus = async () => {\r\n      if (!isMounted) return;\r\n      \r\n      // Wait for IPC to be ready\r\n      if (!window.ipc || typeof window.ipc.invoke !== 'function') {\r\n        // Retry after a delay\r\n        setTimeout(initStatus, 500);\r\n        return;\r\n      }\r\n      \r\n      // Load DoH status\r\n      try {\r\n        const status = await ipc.dns.status();\r\n        if (isMounted && status && typeof status === 'object') {\r\n          setDohStatus(status as any);\r\n        }\r\n      } catch {\r\n        // Silently handle - set default state on error\r\n        if (isMounted) {\r\n          setDohStatus({ enabled: false, provider: 'cloudflare' });\r\n        }\r\n      }\r\n\r\n      // Check model status (would check Ollama heartbeat)\r\n      // ipc.agent.getModelStatus().then(status => {\r\n      //   setModelReady(status.ready);\r\n      // }).catch(() => {});\r\n    };\r\n    \r\n    // Delay initial load to allow IPC to initialize\r\n    setTimeout(initStatus, 400);\r\n    \r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []);\r\n\r\n  const privacyModeColors = {\r\n    Normal: 'text-gray-400',\r\n    Ghost: 'text-blue-400',\r\n    Tor: 'text-purple-400',\r\n  };\r\n\r\n  const trustVariant =\r\n    trustBadgeData.pending > 0 ? 'warning' : trustBadgeData.blocked > 0 ? 'info' : 'default';\r\n  const trustDescription =\r\n    trustBadgeData.pending > 0\r\n      ? `${trustBadgeData.pending} pending`\r\n      : trustBadgeData.blocked > 0\r\n        ? `${trustBadgeData.blocked} trackers blocked`\r\n        : 'Ledger clean';\r\n\r\n  const torStatusLabel = torStatus.stub\r\n    ? 'Tor: Stub'\r\n    : torStatus.running\r\n      ? torStatus.circuitEstablished\r\n        ? 'Tor: On'\r\n        : `Tor: ${Math.round(torStatus.progress)}%`\r\n      : 'Tor: Off';\r\n  const torTooltip = torStatus.error\r\n    ? `Tor warning: ${torStatus.error}`\r\n    : torStatus.stub\r\n      ? 'Tor binary not found; using stub mode for UI only.'\r\n      : torStatus.running\r\n        ? torStatus.circuitEstablished\r\n          ? 'Tor circuit established. Click to stop.'\r\n          : 'Tor starting up. Click to stop.'\r\n        : 'Route traffic through Tor. Click to enable.';\r\n\r\n  const vpnTooltip = vpnStatus.connected\r\n    ? `VPN connected${vpnStatus.name ? ` (${vpnStatus.name})` : ''}. Click to re-check.`\r\n    : 'Check whether a system VPN is active.';\r\n\r\n  const severityStyles: Record<'info' | 'warning' | 'critical', string> = {\r\n    info: 'bg-blue-500/10 border-blue-400/40 text-blue-100',\r\n    warning: 'bg-amber-500/10 border-amber-400/40 text-amber-100',\r\n    critical: 'bg-red-500/10 border-red-400/40 text-red-100',\r\n  };\r\n \r\n  const clampPercent = (value?: number | null) => {\r\n    if (typeof value !== 'number' || !Number.isFinite(value)) {\r\n      return 0;\r\n    }\r\n    return Math.max(0, Math.min(100, Math.round(value)));\r\n  };\r\n\r\n  const smoothValue = (previous: number, next: number, factor = 0.35) => {\r\n    if (!Number.isFinite(previous)) return next;\r\n    return previous + (next - previous) * factor;\r\n  };\r\n\r\n  const TrendChart = ({\r\n    label,\r\n    points,\r\n    color,\r\n    labels,\r\n  }: {\r\n    label: string;\r\n    points: number[];\r\n    color: string;\r\n    labels: number[];\r\n  }) => {\r\n    const recent = points.length > 0 ? points : [0];\r\n    const path = recent\r\n      .map((value, index, arr) => {\r\n        const x = (index / Math.max(arr.length - 1, 1)) * 200;\r\n        const y = 80 - (value / 100) * 80;\r\n        return `${index === 0 ? 'M' : 'L'}${x},${y}`;\r\n      })\r\n      .join(' ');\r\n    const spanMs = labels.length >= 2 ? labels[labels.length - 1] - labels[0] : 0;\r\n    const spanMinutes = Math.max(Math.round(spanMs / 60000), 0);\r\n    const spanLabel = spanMinutes > 0 ? `${spanMinutes}m window` : 'Live';\r\n\r\n    return (\r\n      <div className=\"space-y-1\">\r\n        <div className=\"flex items-center justify-between text-[11px] text-gray-300\">\r\n          <span>{label}</span>\r\n          <span className=\"opacity-70\">{spanLabel}</span>\r\n        </div>\r\n        <svg viewBox=\"0 0 200 80\" className=\"h-20 w-full rounded-md bg-gray-900/70 p-1\">\r\n          <path d={path} fill=\"none\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" />\r\n        </svg>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const sparklinePoints = useMemo(() => metricsHistory.map((sample) => clampPercent(sample.cpu)), [metricsHistory]);\r\n  const trendSamples = useMemo(() => metricsHistory.slice(-180), [metricsHistory]);\r\n  const trendCpuPoints = useMemo(() => trendSamples.map((sample) => clampPercent(sample.cpu)), [trendSamples]);\r\n  const trendRamPoints = useMemo(() => trendSamples.map((sample) => clampPercent(sample.memory)), [trendSamples]);\r\n  const trendLabels = useMemo(() => trendSamples.map((sample) => sample.timestamp), [trendSamples]);\r\n\r\n  const StatusMeter = ({\r\n    icon: Icon,\r\n    label,\r\n    value,\r\n    percent,\r\n    gradient = 'from-blue-500 via-cyan-500 to-blue-500',\r\n    title,\r\n    onClick,\r\n    sparklinePoints,\r\n  }: {\r\n    icon: LucideIcon;\r\n    label: string;\r\n    value: string;\r\n    percent?: number;\r\n    gradient?: string;\r\n    title?: string;\r\n    onClick?: () => void;\r\n    sparklinePoints?: number[];\r\n  }) => {\r\n    const Component = onClick ? 'button' : 'div';\r\n    const pct = clampPercent(percent);\r\n\r\n    return (\r\n      <Component\r\n        type={onClick ? 'button' : undefined}\r\n        onClick={onClick}\r\n        title={title}\r\n        className={`flex items-center gap-1.5 rounded-full border border-gray-700/60 bg-gray-800/60 px-2 py-1 text-xs text-gray-200 ${\r\n          onClick ? 'cursor-pointer transition-colors hover:border-gray-500/70 focus:outline-none focus:ring-1 focus:ring-blue-400/40' : ''\r\n        }`}\r\n      >\r\n        <Icon size={12} className=\"text-gray-400\" />\r\n        <span className=\"font-semibold text-gray-100\">{label}</span>\r\n        <span className=\"text-[11px] opacity-75\">{value}</span>\r\n        <div className=\"h-1.5 w-14 overflow-hidden rounded-full bg-gray-700\">\r\n          <motion.div\r\n            className={`h-full bg-gradient-to-r ${gradient}`}\r\n            initial={{ width: 0 }}\r\n            animate={{ width: `${pct}%` }}\r\n            transition={{ duration: 0.5, ease: 'easeOut' }}\r\n          />\r\n        </div>\r\n        {sparklinePoints && sparklinePoints.length > 4 && (\r\n          <svg viewBox=\"0 0 40 12\" className=\"ml-2 h-3 w-10 text-blue-400/70\">\r\n            <polyline\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              strokeWidth=\"1.5\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              points={sparklinePoints\r\n                .slice(-12)\r\n                .map((value, index, arr) => {\r\n                  const x = (index / Math.max(arr.length - 1, 1)) * 40;\r\n                  const y = 12 - (value / 100) * 12;\r\n                  return `${x},${y}`;\r\n                })\r\n                .join(' ')}\r\n            />\r\n          </svg>\r\n        )}\r\n      </Component>\r\n    );\r\n  };\r\n\r\n  const StatusBadge = ({\r\n    icon: Icon,\r\n    label,\r\n    description,\r\n    variant = 'default',\r\n    title,\r\n    onClick,\r\n    pulse = false,\r\n    loading = false,\r\n    className,\r\n  }: {\r\n    icon: LucideIcon;\r\n    label: string;\r\n    description?: string;\r\n    variant?: 'default' | 'positive' | 'warning' | 'danger' | 'info';\r\n    title?: string;\r\n    onClick?: () => void;\r\n    pulse?: boolean;\r\n    loading?: boolean;\r\n    className?: string;\r\n  }) => {\r\n    const palette: Record<string, string> = {\r\n      default: 'border-gray-700/60 bg-gray-800/60 text-gray-200',\r\n      positive: 'border-emerald-500/30 bg-emerald-500/10 text-emerald-100',\r\n      warning: 'border-amber-500/30 bg-amber-500/10 text-amber-100',\r\n      danger: 'border-red-500/30 bg-red-500/10 text-red-100',\r\n      info: 'border-blue-500/30 bg-blue-500/10 text-blue-100',\r\n    };\r\n\r\n    const Component = onClick ? 'button' : 'div';\r\n\r\n    return (\r\n      <Component\r\n        type={onClick ? 'button' : undefined}\r\n        onClick={onClick}\r\n        onKeyDown={onClick ? (e) => {\r\n          if (e.key === 'Enter' || e.key === ' ') {\r\n            e.preventDefault();\r\n            onClick();\r\n          }\r\n        } : undefined}\r\n        title={title}\r\n        aria-label={title || label}\r\n        aria-busy={loading}\r\n        className={`${palette[variant]} ${className ?? ''} flex items-center gap-1.5 rounded-full px-2 py-1 text-xs ${\r\n          onClick ? 'cursor-pointer transition-colors hover:border-gray-500/70 focus:outline-none focus:ring-1 focus:ring-blue-400/30' : ''\r\n        }`}\r\n      >\r\n        <Icon size={12} className=\"opacity-80\" aria-hidden=\"true\" />\r\n        <span className=\"font-medium\">{label}</span>\r\n        {description && <span className=\"text-[11px] opacity-75\">{description}</span>}\r\n        {loading && (\r\n          <span\r\n            className=\"h-3 w-3 animate-spin rounded-full border border-current border-t-transparent\"\r\n            aria-label=\"Loading\"\r\n            role=\"status\"\r\n          />\r\n        )}\r\n        {pulse && (\r\n          <motion.span\r\n            className=\"inline-flex h-1.5 w-1.5 rounded-full bg-current\"\r\n            animate={{ \r\n              opacity: [0.4, 1, 0.4],\r\n              scale: [1, 1.2, 1]\r\n            }}\r\n            transition={{ duration: 1.6, repeat: Infinity, ease: 'easeInOut' }}\r\n            aria-hidden=\"true\"\r\n          />\r\n        )}\r\n      </Component>\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!efficiencyAlert) return;\r\n    const timer = setTimeout(() => {\r\n      setEfficiencyAlert(null);\r\n    }, 20000);\r\n    return () => clearTimeout(timer);\r\n  }, [efficiencyAlert]);\r\n\r\n  useEffect(() => {\r\n    if (!privacyToast) return;\r\n    const timer = window.setTimeout(() => {\r\n      setPrivacyToast(null);\r\n    }, 8000);\r\n    return () => window.clearTimeout(timer);\r\n  }, [privacyToast]);\r\n\r\n  const handleEfficiencyAction = async (action: EfficiencyAlertAction) => {\r\n    try {\r\n      if (action.type === 'mode' && action.mode) {\r\n        await ipc.efficiency.applyMode(action.mode);\r\n      } else if (action.type === 'hibernate') {\r\n        await ipc.efficiency.hibernateInactiveTabs();\r\n      }\r\n    } catch (error) {\r\n      console.error('Efficiency action failed:', error);\r\n    } finally {\r\n      setEfficiencyAlert(null);\r\n    }\r\n  };\r\n\r\n  const handlePromptSubmit = async () => {\r\n    if (!prompt.trim() || !activeId || promptLoading) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setPromptLoading(true);\r\n      await ipc.agent.createTask({\r\n        title: 'User Prompt',\r\n        role: 'researcher',\r\n        goal: prompt.trim(),\r\n        budget: { tokens: 4096, seconds: 120, requests: 20 },\r\n      });\r\n      setPrompt('');\r\n    } catch (error) {\r\n      console.error('Failed to create agent task:', error);\r\n    } finally {\r\n      setPromptLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!extraOpen && !trendOpen) return;\r\n    const listenerOptions: AddEventListenerOptions = { capture: true };\r\n    const handleOutside = (event: MouseEvent) => {\r\n      const target = event.target as Node;\r\n      if (extraOpen && extraRef.current && extraRef.current.contains(target)) return;\r\n      if (trendOpen && trendRef.current && trendRef.current.contains(target)) return;\r\n      setExtraOpen(false);\r\n      setTrendOpen(false);\r\n    };\r\n    document.addEventListener('mousedown', handleOutside, listenerOptions);\r\n    return () => document.removeEventListener('mousedown', handleOutside, listenerOptions);\r\n  }, [extraOpen, trendOpen]);\r\n\r\n  const handleDoHToggle = async () => {\r\n    try {\r\n      if (dohStatus.enabled) {\r\n        await ipc.dns.disableDoH();\r\n        setDohStatus({ enabled: false, provider: 'cloudflare' });\r\n      } else {\r\n        await ipc.dns.enableDoH('cloudflare');\r\n        setDohStatus({ enabled: true, provider: 'cloudflare' });\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to toggle DoH:', error);\r\n    }\r\n  };\r\n\r\n  const handleVpnConnect = useCallback(\r\n    async (profileId: string) => {\r\n      if (!profileId || vpnBusy) {\r\n        return;\r\n      }\r\n      setVpnError(null);\r\n      setVpnBusy(true);\r\n      try {\r\n        const result = await ipc.vpn.connect(profileId);\r\n        await checkVpn().catch(() => {});\r\n        if (result?.connected) {\r\n          setVpnActiveId(profileId);\r\n          const label = result.name || result.server || result.interface || 'VPN';\r\n          addPrivacyEvent({\r\n            kind: 'vpn',\r\n            status: 'success',\r\n            message: label ? `VPN connected: ${label}` : 'VPN connected',\r\n          });\r\n        } else {\r\n          addPrivacyEvent({\r\n            kind: 'vpn',\r\n            status: 'info',\r\n            message: 'VPN connect command sent',\r\n          });\r\n        }\r\n      } catch (error) {\r\n        const message = error instanceof Error ? error.message : String(error);\r\n        setVpnError(message);\r\n        addPrivacyEvent({ kind: 'vpn', status: 'warning', message: `VPN error: ${message}` });\r\n      } finally {\r\n        setVpnBusy(false);\r\n      }\r\n    },\r\n    [checkVpn, addPrivacyEvent, vpnBusy],\r\n  );\r\n\r\n  const handleVpnDisconnect = useCallback(async () => {\r\n    if (vpnBusy) {\r\n      return;\r\n    }\r\n    setVpnError(null);\r\n    setVpnBusy(true);\r\n    try {\r\n      await ipc.vpn.disconnect();\r\n      await checkVpn().catch(() => {});\r\n      setVpnActiveId(null);\r\n      addPrivacyEvent({ kind: 'vpn', status: 'info', message: 'VPN disconnect requested' });\r\n    } catch (error) {\r\n      const message = error instanceof Error ? error.message : String(error);\r\n      setVpnError(message);\r\n      addPrivacyEvent({ kind: 'vpn', status: 'warning', message: `VPN error: ${message}` });\r\n    } finally {\r\n      setVpnBusy(false);\r\n    }\r\n  }, [checkVpn, addPrivacyEvent, vpnBusy]);\r\n\r\n  const efficiencyDetails = [\r\n    efficiencyBadge || null,\r\n    typeof efficiencySnapshot.batteryPct === 'number' ? `${Math.round(efficiencySnapshot.batteryPct)}%` : null,\r\n    typeof carbonIntensity === 'number' ? `${Math.round(carbonIntensity)} gCO₂/kWh` : null,\r\n    dailyCarbon > 0 ? `${dailyCarbon.toFixed(2)} gCO₂ saved today` : null,\r\n  ]\r\n    .filter(Boolean)\r\n    .join(' · ');\r\n\r\n  const efficiencyVariant: 'default' | 'positive' | 'info' = efficiencyLabel.includes('Regen')\r\n    ? 'positive'\r\n    : efficiencyLabel.includes('Battery')\r\n    ? 'info'\r\n    : 'default';\r\n\r\n  const torBadgeDescription = torStatusLabel.replace(/^Tor:?\\s*/i, '');\r\n  const torBadgeVariant: 'default' | 'positive' | 'warning' | 'info' = torStatus.stub\r\n    ? 'warning'\r\n    : torStatus.running\r\n    ? 'info'\r\n    : 'default';\r\n\r\n  const vpnBadgeDescription = vpnStatus.connected\r\n    ? vpnStatus.type\r\n      ? vpnStatus.type.toUpperCase()\r\n      : 'Active'\r\n    : 'Disconnected';\r\n\r\n \r\n  return (\r\n    <>\r\n      <AnimatePresence>\r\n        {privacyToast && (\r\n          <motion.div\r\n            key={privacyToast.id}\r\n            initial={{ opacity: 0, y: 12 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: 12 }}\r\n            transition={{ duration: 0.2 }}\r\n            className={`fixed bottom-20 right-6 z-50 flex items-center gap-2 rounded-lg border px-3 py-2 text-xs shadow-lg shadow-black/40 ${\r\n              privacyToast.status === 'success'\r\n                ? 'border-emerald-500/40 bg-emerald-500/15 text-emerald-100'\r\n                : privacyToast.status === 'warning'\r\n                ? 'border-amber-500/40 bg-amber-500/15 text-amber-100'\r\n                : 'border-sky-500/40 bg-sky-500/15 text-sky-100'\r\n            }`}\r\n          >\r\n            {privacyToast.kind === 'tor' ? (\r\n              <Shield size={16} aria-hidden=\"true\" />\r\n            ) : (\r\n              <Wifi size={16} aria-hidden=\"true\" />\r\n            )}\r\n            <div className=\"flex flex-col\">\r\n              <span className=\"font-medium\">{privacyToast.message}</span>\r\n              <span className=\"text-[10px] opacity-80\">{formatRelativeTime(privacyToast.timestamp)}</span>\r\n            </div>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setPrivacyToast(null)}\r\n              className=\"ml-2 rounded p-1 text-[10px] transition-colors hover:text-white\"\r\n              aria-label=\"Dismiss privacy notification\"\r\n            >\r\n              <X size={12} />\r\n            </button>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n      <div className=\"flex flex-col gap-2 border-t border-slate-800/60 bg-slate-950/90 px-4 py-2 text-xs text-gray-300\" data-onboarding=\"status-bar\">\r\n        <div className=\"flex flex-wrap items-center gap-1.5 sm:gap-2 md:gap-3 text-xs text-gray-300\">\r\n          <PrivacySwitch />\r\n\r\n          <StatusMeter\r\n            icon={Cpu}\r\n            label=\"CPU\"\r\n            value={`${cpuUsage}%`}\r\n            percent={cpuUsage}\r\n            gradient=\"from-blue-500 via-cyan-500 to-blue-500\"\r\n            title=\"CPU usage\"\r\n            sparklinePoints={sparklinePoints}\r\n          />\r\n\r\n          <StatusMeter\r\n            icon={MemoryStick}\r\n            label=\"RAM\"\r\n            value={`${memoryUsage}%`}\r\n            percent={memoryUsage}\r\n            title=\"System memory usage\"\r\n            gradient=\"from-green-500 via-emerald-500 to-green-500\"\r\n          />\r\n\r\n          <StatusBadge\r\n            icon={Activity}\r\n            label={efficiencyLabel}\r\n            description={efficiencyDetails || undefined}\r\n            variant={efficiencyVariant}\r\n            title={efficiencyBadge ?? efficiencyLabel}\r\n          />\r\n\r\n          <StatusBadge\r\n            icon={MoonStar}\r\n            label=\"Shadow\"\r\n            description={shadowSessionId ? 'Active' : 'Idle'}\r\n            variant={shadowSessionId ? 'info' : 'default'}\r\n            pulse={shadowLoading}\r\n            title={shadowSessionId ? 'Shadow Mode active' : 'Shadow Mode inactive'}\r\n          />\r\n\r\n          <StatusBadge\r\n            icon={Network}\r\n            label=\"Mode\"\r\n            description={privacyMode}\r\n            className={privacyModeColors[privacyMode]}\r\n            title={`Privacy mode: ${privacyMode}`}\r\n          />\r\n\r\n          <StatusBadge\r\n            icon={Shield}\r\n            label=\"Trust\"\r\n            description={trustDescription}\r\n            variant={trustVariant}\r\n            onClick={() => void openTrustDashboard()}\r\n            title=\"Open trust & ethics dashboard\"\r\n            loading={trustBadgeData.loading}\r\n          />\r\n\r\n          {shieldsStats.trackersBlocked > 0 && (\r\n            <StatusBadge\r\n              icon={Shield}\r\n              label=\"Blocked\"\r\n              description={`${shieldsStats.trackersBlocked} tracker${shieldsStats.trackersBlocked === 1 ? '' : 's'}`}\r\n              variant=\"positive\"\r\n              title={`Privacy shields blocked ${shieldsStats.trackersBlocked} tracker${shieldsStats.trackersBlocked === 1 ? '' : 's'} and ${shieldsStats.adsBlocked} ad${shieldsStats.adsBlocked === 1 ? '' : 's'}`}\r\n            />\r\n          )}\r\n\r\n          <div className=\"ml-auto flex items-center gap-2\">\r\n            <StatusBadge\r\n              icon={Brain}\r\n              label=\"Model\"\r\n              description={modelReady ? 'Ready' : 'Loading'}\r\n              variant={modelReady ? 'positive' : 'default'}\r\n              pulse={modelReady}\r\n              loading={!modelReady}\r\n              title=\"Local model status\"\r\n            />\r\n\r\n            <button\r\n              type=\"button\"\r\n              className=\"hidden sm:flex items-center gap-1 rounded-full border border-gray-700/50 bg-gray-800/60 px-3 py-1.5 text-xs text-gray-300 transition-colors hover:border-gray-600 hover:text-white\"\r\n              onClick={() => setTrendOpen((prev) => !prev)}\r\n              title=\"View detailed performance trends\"\r\n            >\r\n              <Activity size={14} />\r\n              Trends\r\n            </button>\r\n\r\n            <div className=\"relative w-48 sm:w-60 hidden sm:block\">\r\n              <input\r\n                type=\"text\"\r\n                value={prompt}\r\n                onChange={(e) => setPrompt(e.target.value)}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === 'Enter') {\r\n                    void handlePromptSubmit();\r\n                  }\r\n                }}\r\n                placeholder=\"Prompt agent (e.g., 'summarize this page')...\"\r\n                disabled={promptLoading}\r\n                className={`h-8 w-full rounded-full border border-gray-700/60 bg-gray-800/70 pl-3 pr-9 text-xs text-gray-200 placeholder-gray-400 focus:border-blue-500/60 focus:outline-none focus:ring-1 focus:ring-blue-500/40 ${promptLoading ? 'opacity-70 cursor-wait' : ''}`}\r\n              />\r\n              {promptLoading ? (\r\n                <Loader2 className=\"absolute right-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 animate-spin text-blue-300\" aria-label=\"Sending prompt\" />\r\n              ) : (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => void handlePromptSubmit()}\r\n                  className=\"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 transition-colors hover:text-gray-200\"\r\n                  title=\"Send prompt\"\r\n                >\r\n                  <Send size={14} />\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            <SymbioticVoiceCompanion />\r\n\r\n            <div className=\"relative\" ref={extraRef}>\r\n              <button\r\n                type=\"button\"\r\n                className=\"flex items-center gap-1 rounded-full border border-gray-700/50 bg-gray-800/60 px-3 py-1.5 text-xs text-gray-300 transition-colors hover:border-gray-600 hover:text-white\"\r\n                onClick={() => setExtraOpen((prev) => !prev)}\r\n                title=\"Security & network controls\"\r\n              >\r\n                <MoreHorizontal size={14} />\r\n                More\r\n              </button>\r\n              <AnimatePresence>\r\n                {extraOpen && (\r\n                  <motion.div\r\n                    initial={{ opacity: 0, y: 6 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    exit={{ opacity: 0, y: 6 }}\r\n                    transition={{ duration: 0.16 }}\r\n                    className=\"absolute right-0 mt-2 w-64 rounded-lg border border-gray-800 bg-slate-950/95 p-3 shadow-xl\"\r\n                  >\r\n                    <div className=\"grid gap-2\">\r\n                      <StatusBadge\r\n                        icon={Shield}\r\n                        label=\"Tor\"\r\n                        description={torBadgeDescription}\r\n                        variant={torBadgeVariant}\r\n                        onClick={!torStatus.loading ? () => {\r\n                          if (torStatus.running) {\r\n                            addPrivacyEvent({ kind: 'tor', status: 'info', message: 'Stopping Tor…' });\r\n                            void stopTor();\r\n                          } else {\r\n                            addPrivacyEvent({ kind: 'tor', status: 'info', message: 'Starting Tor…' });\r\n                            void startTor();\r\n                          }\r\n                        } : undefined}\r\n                        loading={torStatus.loading}\r\n                        title={torTooltip}\r\n                        className={`justify-start ${torStatus.loading ? 'opacity-60 cursor-not-allowed' : ''}`}\r\n                      />\r\n                      {torStatus.running && !torStatus.stub && (\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => {\r\n                            if (torStatus.loading) return;\r\n                            addPrivacyEvent({ kind: 'tor', status: 'info', message: 'Requesting new Tor identity…' });\r\n                            void newTorIdentity()\r\n                              .then(() => {\r\n                                addPrivacyEvent({ kind: 'tor', status: 'success', message: 'Tor identity refreshed' });\r\n                              })\r\n                              .catch((error) => {\r\n                                const message = error instanceof Error ? error.message : String(error);\r\n                                addPrivacyEvent({ kind: 'tor', status: 'warning', message: `Tor identity error: ${message}` });\r\n                              });\r\n                          }}\r\n                          className=\"flex items-center gap-2 rounded-md border border-purple-500/40 bg-purple-500/10 px-3 py-1.5 text-[11px] text-purple-100 transition-colors hover:border-purple-400/60\"\r\n                        >\r\n                          <RefreshCw size={12} />\r\n                          Request new Tor identity\r\n                        </button>\r\n                      )}\r\n                      <StatusBadge\r\n                        icon={Wifi}\r\n                        label=\"VPN\"\r\n                        description={vpnBadgeDescription}\r\n                        variant={vpnStatus.connected ? 'positive' : 'default'}\r\n                        onClick={!vpnStatus.loading ? () => void checkVpn() : undefined}\r\n                        loading={vpnStatus.loading}\r\n                        title={vpnTooltip}\r\n                        className={`justify-start ${vpnStatus.loading ? 'opacity-60 cursor-not-allowed' : ''}`}\r\n                      />\r\n                      {vpnProfiles.length > 0 && (\r\n                        <div className=\"space-y-2 rounded-md border border-gray-800/60 bg-gray-900/40 p-2\">\r\n                          <span className=\"text-[10px] uppercase text-gray-400\">VPN Profiles</span>\r\n                          <div className=\"space-y-1\">\r\n                            {vpnProfiles.map((profile) => {\r\n                              const isActive = vpnActiveId === profile.id;\r\n                              return (\r\n                                <button\r\n                                  key={profile.id}\r\n                                  type=\"button\"\r\n                                  onClick={() => handleVpnConnect(profile.id)}\r\n                                  disabled={vpnBusy}\r\n                                  className={`w-full rounded-md px-2 py-1 text-left text-[11px] transition-colors ${\r\n                                    isActive\r\n                                      ? 'bg-emerald-500/20 text-emerald-100 border border-emerald-400/40'\r\n                                      : 'border border-transparent text-gray-300 hover:border-gray-700'\r\n                                  } ${vpnBusy ? 'opacity-70 cursor-wait' : ''}`}\r\n                                >\r\n                                  <div className=\"flex items-center justify-between\">\r\n                                    <span>{profile.name}</span>\r\n                                    {isActive && <span className=\"text-[10px] opacity-70\">Active</span>}\r\n                                  </div>\r\n                                  {profile.server && (\r\n                                    <div className=\"text-[10px] opacity-60\">{profile.server}</div>\r\n                                  )}\r\n                                </button>\r\n                              );\r\n                            })}\r\n                          </div>\r\n                          <div className=\"flex items-center justify-between gap-2\">\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => handleVpnDisconnect()}\r\n                              disabled={!vpnActiveId || vpnBusy}\r\n                              className=\"flex-1 rounded-md border border-gray-700/50 px-2 py-1 text-[10px] text-gray-300 transition-colors hover:border-gray-600 disabled:opacity-50\"\r\n                            >\r\n                              Disconnect\r\n                            </button>\r\n                            {vpnBusy && (\r\n                              <Loader2 className=\"h-3.5 w-3.5 animate-spin text-emerald-300\" />\r\n                            )}\r\n                          </div>\r\n                          {vpnError && <div className=\"rounded-md border border-amber-500/30 bg-amber-500/10 px-2 py-1 text-[10px] text-amber-200\">{vpnError}</div>}\r\n                        </div>\r\n                      )}\r\n                      {privacyEvents.length > 0 && (\r\n                        <div className=\"space-y-2 rounded-md border border-gray-800/60 bg-gray-900/40 p-2\">\r\n                          <div className=\"flex items-center justify-between text-[10px] uppercase text-gray-400\">\r\n                            <span>Privacy activity</span>\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => {\r\n                                setPrivacyEvents([]);\r\n                                setPrivacyToast(null);\r\n                              }}\r\n                              className=\"rounded px-1.5 py-0.5 text-[9px] text-gray-400 transition-colors hover:text-gray-200\"\r\n                            >\r\n                              Clear\r\n                            </button>\r\n                          </div>\r\n                          <div className=\"max-h-32 space-y-1 overflow-auto\">\r\n                            {privacyEvents\r\n                              .slice()\r\n                              .reverse()\r\n                              .map((event) => {\r\n                                const dotColor =\r\n                                  event.status === 'success'\r\n                                    ? 'bg-emerald-400'\r\n                                    : event.status === 'warning'\r\n                                    ? 'bg-amber-400'\r\n                                    : 'bg-sky-400';\r\n                                return (\r\n                                  <div key={event.id} className=\"flex items-start gap-2 text-[11px] text-gray-300\">\r\n                                    <span className={`mt-1 h-2 w-2 rounded-full ${dotColor}`} aria-hidden=\"true\" />\r\n                                    <div className=\"space-y-0.5\">\r\n                                      <div className=\"flex items-center gap-1\">\r\n                                        {event.kind === 'tor' ? (\r\n                                          <Shield size={12} className=\"text-purple-300\" />\r\n                                        ) : (\r\n                                          <Wifi size={12} className=\"text-emerald-300\" />\r\n                                        )}\r\n                                        <span>{event.message}</span>\r\n                                      </div>\r\n                                      <div className=\"text-[9px] text-gray-500\">{formatRelativeTime(event.timestamp)}</div>\r\n                                    </div>\r\n                                  </div>\r\n                                );\r\n                              })}\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                      <StatusBadge\r\n                        icon={Shield}\r\n                        label=\"DoH\"\r\n                        description={dohStatus.enabled ? dohStatus.provider : 'Disabled'}\r\n                        variant={dohStatus.enabled ? 'info' : 'default'}\r\n                        onClick={handleDoHToggle}\r\n                        title=\"Toggle DNS-over-HTTPS\"\r\n                        className=\"justify-start\"\r\n                      />\r\n                      <StatusBadge\r\n                        icon={Activity}\r\n                        label=\"Efficiency\"\r\n                        description={efficiencyLabel || 'Normal'}\r\n                        variant=\"default\"\r\n                        className=\"justify-start\"\r\n                      />\r\n                      <StatusBadge\r\n                        icon={Cpu}\r\n                        label=\"CPU\"\r\n                        description={`${cpuUsage}%`}\r\n                        variant={cpuUsage > 70 ? 'warning' : 'default'}\r\n                        title=\"CPU usage\"\r\n                        className=\"justify-start\"\r\n                      />\r\n                      <StatusBadge\r\n                        icon={MemoryStick}\r\n                        label=\"RAM\"\r\n                        description={`${memoryUsage}%`}\r\n                        variant={memoryUsage > 75 ? 'warning' : 'default'}\r\n                        title=\"Memory usage\"\r\n                        className=\"justify-start\"\r\n                      />\r\n                    </div>\r\n                  </motion.div>\r\n                )}\r\n              </AnimatePresence>\r\n            </div>\r\n\r\n            <AnimatePresence>\r\n              {trendOpen && (\r\n                <motion.div\r\n                  ref={trendRef}\r\n                  initial={{ opacity: 0, y: 6 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  exit={{ opacity: 0, y: 6 }}\r\n                  transition={{ duration: 0.16 }}\r\n                  className=\"absolute right-0 top-12 w-72 rounded-lg border border-gray-800 bg-slate-950/95 p-4 shadow-xl\"\r\n                >\r\n                  <div className=\"mb-2 flex items-center justify-between text-xs text-gray-300\">\r\n                    <span className=\"font-semibold uppercase tracking-wide\">Performance Trends</span>\r\n                    <button\r\n                      className=\"text-xs opacity-70 transition-opacity hover:opacity-100\"\r\n                      onClick={() => setTrendOpen(false)}\r\n                      aria-label=\"Close trends panel\"\r\n                    >\r\n                      <X size={12} />\r\n                    </button>\r\n                  </div>\r\n                  <TrendChart label=\"CPU %\" points={trendCpuPoints} color=\"#38bdf8\" labels={trendLabels} />\r\n                  <TrendChart\r\n                    label=\"RAM %\"\r\n                    points={trendRamPoints}\r\n                    color=\"#22d3ee\"\r\n                    labels={trendLabels}\r\n                  />\r\n                </motion.div>\r\n              )}\r\n            </AnimatePresence>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex flex-wrap items-start gap-3\">\r\n          <AnimatePresence>\r\n            {efficiencyAlert && (\r\n              <motion.div\r\n                key=\"efficiency-alert\"\r\n                initial={{ opacity: 0, y: 6 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: 6 }}\r\n                className={`flex w-full max-w-xl items-center gap-3 rounded-lg border px-3 py-2 shadow-inner ${severityStyles[efficiencyAlert.severity]}`}\r\n              >\r\n                <AlertTriangle size={14} />\r\n                <div className=\"flex flex-col gap-0.5\">\r\n                  <span className=\"text-xs font-semibold\">{efficiencyAlert.title}</span>\r\n                  <span className=\"text-[11px] opacity-80\">{efficiencyAlert.message}</span>\r\n                </div>\r\n                <div className=\"ml-auto flex items-center gap-2\">\r\n                  {efficiencyAlert.actions.map((action) => (\r\n                    <button\r\n                      key={action.id}\r\n                      onClick={() => handleEfficiencyAction(action)}\r\n                      className=\"rounded bg-gray-900/60 px-2 py-1 text-[11px] font-medium transition-colors hover:bg-gray-900/80\"\r\n                    >\r\n                      {action.label}\r\n                    </button>\r\n                  ))}\r\n                  <button\r\n                    onClick={() => setEfficiencyAlert(null)}\r\n                    className=\"p-1 text-xs opacity-70 transition-opacity hover:opacity-100\"\r\n                    aria-label=\"Dismiss efficiency alert\"\r\n                  >\r\n                    <X size={12} />\r\n                  </button>\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n\r\n          <AnimatePresence>\r\n            {metricsAlert && (\r\n              <motion.div\r\n                key=\"metrics-alert\"\r\n                initial={{ opacity: 0, y: 6 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: 6 }}\r\n                className={`flex w-full max-w-xl items-center gap-3 rounded-lg border px-3 py-2 shadow-inner ${severityStyles[metricsAlert.severity]}`}\r\n              >\r\n                <Activity size={14} />\r\n                <div className=\"flex flex-col gap-0.5\">\r\n                  <span className=\"text-xs font-semibold\">{metricsAlert.title}</span>\r\n                  <span className=\"text-[11px] opacity-80\">{metricsAlert.message}</span>\r\n                </div>\r\n                <div className=\"ml-auto\">\r\n                  <button\r\n                    onClick={() => setMetricsAlert(null)}\r\n                    className=\"p-1 text-xs opacity-70 transition-opacity hover:opacity-100\"\r\n                    aria-label=\"Dismiss metrics alert\"\r\n                  >\r\n                    <X size={12} />\r\n                  </button>\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n\r\n          <AnimatePresence>\r\n            {shadowSummary && (\r\n              <motion.div\r\n                key=\"shadow-summary\"\r\n                initial={{ opacity: 0, y: 6 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: 6 }}\r\n                className=\"flex w-full max-w-xl items-start gap-3 rounded-lg border border-purple-500/40 bg-purple-500/10 px-3 py-2 text-xs text-purple-100 shadow-inner\"\r\n              >\r\n                <FileText size={14} className=\"mt-0.5 flex-shrink-0\" />\r\n                <div className=\"flex-1 space-y-1\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-[11px] font-semibold uppercase tracking-wide\">Shadow Summary</span>\r\n                    <button\r\n                      onClick={clearShadowSummary}\r\n                      className=\"p-1 text-[10px] text-purple-200/80 transition-colors hover:text-purple-50\"\r\n                      aria-label=\"Dismiss shadow summary\"\r\n                    >\r\n                      <X size={12} />\r\n                    </button>\r\n                  </div>\r\n                  <div className=\"text-[11px] opacity-90\">\r\n                    {shadowSummary.recommendations?.[0] ?? 'Review your shadow session.'}\r\n                  </div>\r\n                  <div className=\"flex flex-wrap gap-2 text-[10px] opacity-80\">\r\n                    <span>{Math.round(shadowSummary.durationMs / 1000)}s</span>\r\n                    <span>Visits: {shadowSummary.totalVisits}</span>\r\n                    <span>Domains: {shadowSummary.uniqueHosts}</span>\r\n                  </div>\r\n                  {shadowSummary.visited?.length > 0 && (\r\n                    <div className=\"space-y-0.5\">\r\n                      <span className=\"text-[10px] uppercase opacity-70\">Recent</span>\r\n                      <ul className=\"space-y-0.5\">\r\n                        {shadowSummary.visited.slice(0, 3).map((entry) => (\r\n                          <li key={`${entry.url}-${entry.firstSeen}`} className=\"truncate\">\r\n                            <a\r\n                              href={entry.url}\r\n                              className=\"text-[11px] text-purple-200 transition-colors hover:text-purple-50\"\r\n                              title={entry.url}\r\n                            >\r\n                              {entry.title || entry.url}\r\n                            </a>\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    </div>\r\n                  )}\r\n                  {shadowSummary.recommendations?.length > 1 && (\r\n                    <div className=\"space-y-0.5\">\r\n                      <span className=\"text-[10px] uppercase opacity-70\">Recommendations</span>\r\n                      <ul className=\"space-y-0.5\">\r\n                        {shadowSummary.recommendations.slice(1).map((rec, idx) => (\r\n                          <li key={idx} className=\"text-[11px] opacity-80\">\r\n                            {rec}\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":["Frown","createLucideIcon","Meh","MemoryStick","Rocket","Smile","useShadowStore","create","set","get","options","response","ipc","sessionResponse","error","sessionId","endResponse","payload","state","shouldClear","PrivacySwitch","mode","setMode","useState","policy","useProfileStore","shadowSessionId","startShadowSession","endShadowSession","shadowLoading","privateDisabled","ghostDisabled","shadowDisabled","modes","Lock","Eye","Network","handleModeChange","newMode","m","jsxs","Icon","isActive","motion","e","jsx","MoonStar","useVoiceCompanionStore","open","listening","text","mood","message","timestamp","userMessage","prompt","reply","positiveWords","negativeWords","urgencyWords","detectMood","lowered","w","moodIcon","SymbioticVoiceCompanion","transcript","messages","loadingReply","setOpen","setListening","setTranscript","setMood","sendToCompanion","clearConversation","setError","recogRef","useRef","speechSupported","setSpeechSupported","useEffect","SR","recognizer","event","interim","res","finalText","detectedMood","startListening","stopListening","moodLabel","useMemo","Fragment","Sparkles","AnimatePresence","Portal","Loader2","MicOff","Mic","DAY_MS","IDLE_CARBON","SAMPLE_PERIOD_MS","useMetricsStore","sample","nextHistory","delta","nextCarbon","RELATIVE_TIME_FORMATTER","createEventId","cryptoRandom","formatRelativeTime","now","difference","divisions","amount","unit","BottomStatus","activeId","useTabsStore","setPrompt","promptLoading","setPromptLoading","extraOpen","setExtraOpen","trendOpen","setTrendOpen","extraRef","trendRef","dohStatus","setDohStatus","cpuUsage","setCpuUsage","memoryUsage","setMemoryUsage","modelReady","privacyMode","setPrivacyMode","efficiencyAlert","setEfficiencyAlert","efficiencyLabel","useEfficiencyStore","efficiencyBadge","efficiencySnapshot","setEfficiencyEvent","shadowSummary","handleShadowEnded","clearShadowSummary","carbonIntensity","torStatus","usePrivacyStore","vpnStatus","refreshTor","refreshVpn","startTor","stopTor","newTorIdentity","checkVpn","pushMetricSample","latestSample","metricsHistory","dailyCarbon","highCpuRef","highRamRef","metricsAlert","setMetricsAlert","vpnProfiles","setVpnProfiles","vpnProfilesRef","vpnActiveId","setVpnActiveId","vpnBusy","setVpnBusy","vpnError","setVpnError","privacyEvents","setPrivacyEvents","privacyToast","setPrivacyToast","shieldsStats","setShieldsStats","isElectron","isElectronRuntime","apiBaseUrl","getEnvVar","metricsSocketRef","openTrustDashboard","useTrustDashboardStore","trustRefresh","trustBadgeData","addPrivacyEvent","useCallback","entry","current","prevVpnRef","prevTorRef","useIPCEvent","status","profiles","match","p","alert","interval","cancelled","loadProfiles","startupTimer","prev","smoothValue","samples","previous","label","pollInterval","pollMetrics","metrics","socket","data","pollShieldsStats","isMounted","initStatus","privacyModeColors","trustVariant","trustDescription","torStatusLabel","torTooltip","vpnTooltip","severityStyles","clampPercent","value","next","factor","TrendChart","points","color","labels","path","index","arr","x","y","spanMs","spanMinutes","spanLabel","sparklinePoints","trendSamples","trendCpuPoints","trendRamPoints","trendLabels","StatusMeter","percent","gradient","title","onClick","Component","pct","StatusBadge","description","variant","pulse","loading","className","palette","timer","handleEfficiencyAction","action","handlePromptSubmit","listenerOptions","handleOutside","target","handleDoHToggle","handleVpnConnect","profileId","result","handleVpnDisconnect","efficiencyDetails","efficiencyVariant","torBadgeDescription","torBadgeVariant","vpnBadgeDescription","Shield","Wifi","X","Cpu","Activity","Brain","Send","MoreHorizontal","RefreshCw","profile","dotColor","AlertTriangle","FileText","rec","idx"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}
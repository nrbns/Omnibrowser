import{r as n,j as t}from"./index-dj7m1cGj.js";const x="omnib_playbooks_v1";function i(){try{return JSON.parse(localStorage.getItem(x)||"[]")}catch{return[]}}function d(s){localStorage.setItem(x,JSON.stringify(s))}function y(){const[s,r]=n.useState(i()),[l,u]=n.useState("New Playbook"),[o,c]=n.useState("");n.useEffect(()=>{r(i())},[]);const m=async()=>{const e=await window.recorder?.getDsl?.(),a=typeof e=="string"?e:JSON.stringify(e,null,2);c(a)},g=()=>{const e=[{id:p(),title:l,yaml:o,createdAt:Date.now()},...s];r(e),d(e)},h=async e=>{try{const a=JSON.parse(e.yaml);await window.agent?.start?.(a)}catch{alert("Invalid JSON/YAML for this stub")}};return t.jsxs("div",{className:"p-4 grid grid-cols-2 gap-4 h-full",children:[t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("h3",{className:"font-medium",children:"Create Playbook"}),t.jsx("input",{className:"bg-neutral-800 rounded px-2 py-1",value:l,onChange:e=>u(e.target.value)}),t.jsx("textarea",{className:"flex-1 bg-neutral-800 rounded p-2 text-xs",value:o,onChange:e=>c(e.target.value),placeholder:"Paste DSL (JSON/YAML) here"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"bg-neutral-800 px-2 py-1 rounded",onClick:m,children:"Load from Recorder"}),t.jsx("button",{className:"bg-indigo-600 text-white px-2 py-1 rounded",onClick:g,children:"Save"})]})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("h3",{className:"font-medium",children:"Library"}),t.jsx("div",{className:"space-y-2 overflow-auto",children:s.map(e=>t.jsxs("div",{className:"border border-neutral-800 rounded p-2",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("div",{className:"font-medium",children:e.title}),t.jsx("div",{className:"text-xs text-neutral-400",children:new Date(e.createdAt).toLocaleString()})]}),t.jsx("pre",{className:"text-xs bg-neutral-900 rounded p-2 overflow-auto max-h-40",children:e.yaml}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"bg-indigo-600 text-white px-2 py-1 rounded",onClick:()=>h(e),children:"Run"}),t.jsx("button",{className:"bg-neutral-800 px-2 py-1 rounded",onClick:()=>{const a=s.filter(f=>f.id!==e.id);r(a),d(a)},children:"Delete"})]})]},e.id))})]})]})}function p(){return Math.random().toString(36).slice(2)}export{y as default};
//# sourceMappingURL=PlaybookForge-sz62P0nR.js.map

import{i as C,r as l,j as e}from"./index-DMKJqC5Z.js";import{c as Y,L as de,u as Pe}from"./formatDistanceToNow-CwTn1k5x.js";import{u as H}from"./use-ipc-event-BWqwbbDc.js";import{u as ze}from"./profileStore-r6TNFURV.js";import{L as De}from"./lock-QlIpU5_k.js";import{E as Le}from"./eye-CLZIWIZg.js";import{N as pe}from"./network-gkI0Eu1G.js";import{m as z}from"./proxy-B-PlLRqe.js";import{M as ue}from"./moon-star-BJaCkZ8v.js";import{u as I,W as Ve}from"./privacyStore-CLrjP8FN.js";import{P as Oe}from"./Portal-DMoOea_i.js";import{S as Ae}from"./sparkles-C9aT6jfb.js";import{A as G}from"./index-BE3YK0eV.js";import{c as D}from"./createLucideIcon-BHoZ2X8H.js";import{M as Ue}from"./mic-ByZ6VKGa.js";import{C as re}from"./cpu-Q6bTr-yL.js";import{A as se}from"./activity-BJ2_0ciE.js";import{B as Be}from"./brain-qT2viXus.js";import{S as Fe}from"./send-BMYBEDZg.js";import{S as ae}from"./shield-DNuGHzo8.js";import{R as He}from"./refresh-cw-Ck1GEe8j.js";import{T as We}from"./triangle-alert-BHl0FKa7.js";import{X as oe}from"./x-GAlOzW-g.js";import{F as Ge}from"./file-text-BKQmjIDI.js";import"./ipc-events-B-mtt1te.js";const qe=D("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);const _e=D("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);const Ke=D("Meh",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"8",x2:"16",y1:"15",y2:"15",key:"1xb1d9"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);const ne=D("MemoryStick",[["path",{d:"M6 19v-3",key:"1nvgqn"}],["path",{d:"M10 19v-3",key:"iu8nkm"}],["path",{d:"M14 19v-3",key:"kcehxu"}],["path",{d:"M18 19v-3",key:"1vh91z"}],["path",{d:"M8 11V9",key:"63erz4"}],["path",{d:"M16 11V9",key:"fru6f3"}],["path",{d:"M12 11V9",key:"ha00sb"}],["path",{d:"M2 15h20",key:"16ne18"}],["path",{d:"M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1.1a2 2 0 0 0 0 3.837V17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5.1a2 2 0 0 0 0-3.837Z",key:"lhddv3"}]]);const Xe=D("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const Ye=D("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);const Ze=D("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),F=Y((a,r)=>({activeSessionId:null,windowId:null,loading:!1,error:null,summary:null,async startShadowSession(s){if(!r().loading){a({loading:!0,error:null,summary:null});try{const o=await C.private.createShadowSession(s??{});if(!o||typeof o!="object")throw new Error("Shadow session failed to start");const i=o;a({activeSessionId:i.sessionId??null,windowId:typeof i.windowId=="number"?i.windowId:null,loading:!1,summary:null})}catch(o){throw a({loading:!1,error:o instanceof Error?o.message:String(o)}),o}}},async endShadowSession(s){const o=r().activeSessionId;if(o){a({loading:!0,error:null});try{const d=await C.private.endShadowSession(o,s);a({activeSessionId:null,windowId:null,loading:!1,summary:d?.summary??null})}catch(i){throw a({loading:!1,error:i instanceof Error?i.message:String(i)}),i}}},handleSessionEnded(s){a(o=>{const i=o.activeSessionId===s.sessionId;return{activeSessionId:i?null:o.activeSessionId,windowId:i?null:o.windowId,loading:!1,summary:s.summary??null}})},clearSummary(){a({summary:null})},setError(s){a({error:s})}}));function Je(){const[a,r]=l.useState("Normal"),s=ze(n=>n.policies[n.activeProfileId]),{activeSessionId:o,startShadowSession:i,endShadowSession:d,loading:b}=F(),v=s?!s.allowPrivateWindows:!1,m=s?!s.allowGhostTabs:!1,p=s?!s.allowPrivateWindows:!1,w=[{value:"Normal",icon:De,label:"Normal",color:"text-gray-400"},{value:"Private",icon:Le,label:"Private",color:"text-blue-400",disabled:v},{value:"Ghost",icon:pe,label:"Ghost",color:"text-purple-400",disabled:m}],L=async n=>{if(!(n===a||w.find(u=>u.value===n)?.disabled)){if(n==="Private")try{window.ipc?.invoke&&await window.ipc.invoke("ob://ipc/v1/private:createWindow",{url:"about:blank"})}catch(u){console.error("Failed to create private window:",u);return}else if(n==="Ghost")try{window.ipc?.invoke&&await window.ipc.invoke("ob://ipc/v1/private:createGhostTab",{url:"about:blank"})}catch(u){console.error("Failed to create ghost tab:",u);return}r(n)}};return e.jsxs("div",{className:"flex items-center gap-1 bg-gray-800/50 rounded-lg p-1 border border-gray-700/50",children:[w.map(n=>{const j=n.icon,u=a===n.value;return e.jsxs(z.button,{onClick:()=>L(n.value),whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-3 py-1.5 rounded-md text-xs font-medium transition-all flex items-center gap-1.5 ${u?`${n.color.replace("text-","bg-")} bg-opacity-20 text-white`:n.disabled?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-gray-300"}`,disabled:n.disabled,title:n.disabled?`${n.label} disabled by profile policy`:`Switch to ${n.label}`,children:[e.jsx(j,{size:14}),e.jsx("span",{children:n.label})]},n.value)}),e.jsxs(z.button,{whileHover:{scale:b||p?1:1.05},whileTap:{scale:b||p?1:.95},disabled:p||b,onClick:async()=>{if(!(p||b))try{o?await d():await i({summary:!0})}catch(n){console.error("Shadow session error:",n)}},className:`px-3 py-1.5 rounded-md text-xs font-medium transition-all flex items-center gap-1.5 ${o?"bg-purple-500/20 text-purple-200 border border-purple-400/30":p?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-gray-300"}`,title:p?"Shadow Mode disabled by profile policy":o?"End Shadow Mode session":"Start Shadow Mode (simulated private browsing)",children:[e.jsx(ue,{size:14}),e.jsx("span",{children:o?"Shadow On":"Shadow"})]},"Shadow")]})}const ie={normal:"Performance Mode","battery-saver":"Battery Saver Mode",extreme:"Regen Mode"},le={normal:null,"battery-saver":"+0.8hr battery",extreme:"+1.8hr battery"},ce={normal:"text-gray-400","battery-saver":"text-emerald-300",extreme:"text-amber-300"},Qe={batteryPct:null,charging:null,ramMb:0,cpuLoad1:0,activeTabs:0,carbonIntensity:null,carbonRegion:null},W=Y(a=>({mode:"normal",label:ie.normal,badge:le.normal,colorClass:ce.normal,lastUpdated:null,snapshot:Qe,setEvent:r=>{const s=r.mode;a({mode:s,label:r.label??ie[s],badge:r.badge??le[s],colorClass:ce[s],lastUpdated:r.timestamp,snapshot:r.snapshot})}})),et=Y(a=>({open:!1,listening:!1,transcript:"",mood:"calm",messages:[],loadingReply:!1,error:null,setOpen(r){a({open:r})},setListening(r){a({listening:r})},setTranscript(r){a({transcript:r})},setMood(r){a({mood:r})},pushMessage(r){a(s=>({messages:[...s.messages,r]}))},async sendToCompanion(r,s){if(!r.trim())return;const o=Date.now(),i={role:"user",text:r,timestamp:o,mood:s};a(d=>({messages:[...d.messages,i],loadingReply:!0,error:null}));try{const d=`You are Symbiotic, OmniBrowser's empathic voice companion. The user mood is ${s}. Respond concisely (<=3 sentences) in a friendly tone, with optional short actionable tip.`,v={role:"companion",text:(await C.agent.ask(d,{text:r}))?.answer??"I hear you. Let me know how else I can help.",timestamp:Date.now(),mood:s};a(m=>({messages:[...m.messages,v],loadingReply:!1}))}catch(d){a({error:d instanceof Error?d.message:String(d),loadingReply:!1})}},clearConversation(){a({messages:[],transcript:"",mood:"calm",error:null})},setError(r){a({error:r})}})),tt=["great","awesome","excited","happy","love","fantastic","wonderful"],rt=["frustrated","angry","annoyed","stuck","hate","upset"],st=["plan","launch","deadline","urgent","quick","fast"];function at(a){const r=a.toLowerCase();return rt.some(s=>r.includes(s))?"concerned":st.some(s=>r.includes(s))?"motivated":tt.some(s=>r.includes(s))?"positive":"calm"}function ot(a){switch(a){case"positive":return e.jsx(Ze,{size:16,className:"text-emerald-300"});case"concerned":return e.jsx(_e,{size:16,className:"text-amber-300"});case"motivated":return e.jsx(Ye,{size:16,className:"text-cyan-300"});default:return e.jsx(Ke,{size:16,className:"text-slate-300"})}}function nt(){const{open:a,listening:r,transcript:s,mood:o,messages:i,loadingReply:d,error:b,setOpen:v,setListening:m,setTranscript:p,setMood:w,sendToCompanion:L,clearConversation:n,setError:j}=et(),u=l.useRef(null),[E,V]=l.useState(!1);l.useEffect(()=>{const x=window.SpeechRecognition||window.webkitSpeechRecognition;if(x){const g=new x;g.continuous=!1,g.interimResults=!0,g.lang="en-US",g.onresult=P=>{const O=Array.from(P.results).map(A=>A[0].transcript).join(" ");if(p(O),P.results[0].isFinal){const A=O.trim(),h=at(A);w(h),p(""),m(!1),L(A,h)}},g.onerror=P=>{m(!1),j(P?.error??"Voice recognition error")},g.onend=()=>{m(!1)},u.current=g,V(!0)}else V(!1)},[m,p,w,L,j]);const k=()=>{if(!E||!u.current){j("Speech recognition not available in this environment.");return}try{j(null),p(""),m(!0),u.current.start()}catch(x){j(x instanceof Error?x.message:String(x)),m(!1)}},R=()=>{if(u.current&&r)try{u.current.stop()}catch{}m(!1)},$=l.useMemo(()=>{switch(o){case"positive":return"Upbeat";case"concerned":return"Checking in";case"motivated":return"In the zone";default:return"Calm"}},[o]);return e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:()=>v(!a),className:"flex items-center gap-1 rounded-full border border-purple-400/30 bg-purple-500/10 px-3 py-1.5 text-xs font-medium text-purple-100 transition-colors hover:bg-purple-500/20",title:"Open Symbiotic Voice Companion",children:[e.jsx(Ae,{size:14})," Voice Companion"]}),e.jsx(G,{children:a&&e.jsx(Oe,{children:e.jsx("div",{className:"fixed inset-0 z-[120] flex items-end justify-end bg-transparent pointer-events-none",children:e.jsxs(z.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},exit:{opacity:0,y:40},transition:{duration:.2},className:"pointer-events-auto m-6 w-[360px] max-w-[92vw] rounded-3xl border border-purple-400/30 bg-slate-950/96 p-4 shadow-[0_20px_80px_rgba(124,58,237,0.35)]",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-purple-200/80",children:"Symbiotic Companion"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-purple-100",children:[ot(o)," ",$]}),e.jsx("div",{className:"text-[11px] text-purple-200/60",children:"Speak your mind and Symbiotic will respond empathetically."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:n,className:"rounded-lg border border-purple-400/30 bg-purple-500/10 px-2 py-1 text-[10px] text-purple-100 hover:bg-purple-500/20",children:"Clear"}),e.jsx("button",{type:"button",onClick:()=>{R(),v(!1)},className:"rounded-lg border border-purple-400/30 bg-purple-500/10 px-2 py-1 text-[10px] text-purple-100 hover:bg-purple-500/20",children:"Close"})]})]}),e.jsx("div",{className:"mt-4 h-48 overflow-y-auto rounded-2xl border border-purple-500/10 bg-slate-900/60 p-3",children:i.length===0&&!s?e.jsx("div",{className:"text-[11px] text-purple-200/70",children:"Tap the mic to start talking. I can help summarize, brainstorm, or keep you focused."}):e.jsxs("div",{className:"flex flex-col gap-3 text-[11px]",children:[i.map(x=>e.jsx("div",{className:`flex flex-col gap-1 ${x.role==="user"?"items-end text-right":"items-start text-left"}`,children:e.jsx("div",{className:`max-w-[85%] rounded-2xl px-3 py-2 shadow-sm ${x.role==="user"?"bg-purple-500/20 text-purple-100":"bg-slate-800/70 text-purple-50"}`,children:x.text})},`${x.role}-${x.timestamp}`)),s&&e.jsx("div",{className:"flex justify-end text-[11px] text-purple-200/70",children:s}),d&&e.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-purple-200/70",children:[e.jsx(de,{size:14,className:"animate-spin"}),"Formulating a response…"]})]})}),b&&e.jsx("div",{className:"mt-2 rounded-lg border border-rose-500/40 bg-rose-500/10 px-3 py-1 text-[11px] text-rose-100",children:b}),e.jsxs("div",{className:"mt-4 flex items-center justify-between gap-2",children:[e.jsx("div",{className:"flex items-center gap-2 text-[11px] text-purple-200/70",children:E?"Ready for voice input.":"Voice capture not available."}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{type:"button",onClick:r?R:k,disabled:!E,className:`flex items-center gap-2 rounded-full px-3 py-1.5 text-xs transition-colors ${r?"bg-red-500/30 text-red-100 border border-red-500/40":"bg-purple-500/20 text-purple-100 border border-purple-400/30 hover:bg-purple-500/30"} ${E?"":"opacity-60 cursor-not-allowed"}`,children:[r?e.jsx(Xe,{size:14}):e.jsx(Ue,{size:14}),r?"Stop listening":"Start listening"]})})]})]})})})})]})}function $t(){const{activeId:a}=Pe(),[r,s]=l.useState(""),[o,i]=l.useState(!1),[d,b]=l.useState(!1),v=l.useRef(null),[m,p]=l.useState({enabled:!1,provider:"cloudflare"}),[w,L]=l.useState(0),[n,j]=l.useState(0),[u]=l.useState(!0),[E,V]=l.useState("Normal"),[k,R]=l.useState(null),$=W(t=>t.label),x=W(t=>t.badge),g=W(t=>t.snapshot),P=W(t=>t.setEvent),O=F(t=>t.activeSessionId),A=F(t=>t.loading),h=F(t=>t.summary),Z=F(t=>t.handleSessionEnded),me=F(t=>t.clearSummary),J=g.carbonIntensity??null,c=I(t=>t.tor),S=I(t=>t.vpn),q=I(t=>t.refreshTor),_=I(t=>t.refreshVpn),xe=I(t=>t.startTor),ye=I(t=>t.stopTor),fe=I(t=>t.newTorIdentity),he=I(t=>t.checkVpn);H("net:status",t=>{t.doh&&p(t.doh),t.tor?.enabled&&t.tor.circuitEstablished?V("Tor"):t.proxy?.enabled?V("Ghost"):V("Normal")},[]),H("efficiency:mode",t=>{P(t)},[P]),H("efficiency:alert",t=>{R(t)},[]),H("private:shadow:ended",t=>{Z(t)},[Z]),l.useEffect(()=>{q(),_();const t=window.setInterval(()=>{q(),_()},2e4);return()=>window.clearInterval(t)},[q,_]);const Q=l.useRef(0);l.useEffect(()=>{const t=()=>{try{const f=Date.now();f-Q.current>=1e3&&(Q.current=f,L(M=>{const T=Math.floor(Math.random()*30)+5;return M!==T?T:M}),j(M=>{const T=Math.floor(Math.random()*60)+20;return M!==T?T:M}))}catch{}};t();const y=setInterval(t,1e3);return()=>clearInterval(y)},[]),l.useEffect(()=>{let t=!0;const y=async()=>{if(t){if(!window.ipc||typeof window.ipc.invoke!="function"){setTimeout(y,500);return}try{const f=await C.dns.status();t&&f&&typeof f=="object"&&p(f)}catch{t&&p({enabled:!1,provider:"cloudflare"})}}};return setTimeout(y,400),()=>{t=!1}},[]);const be={Normal:"text-gray-400",Ghost:"text-blue-400",Tor:"text-purple-400"},ge=c.stub?"Tor: Stub":c.running?c.circuitEstablished?"Tor: On":`Tor: ${Math.round(c.progress)}%`:"Tor: Off",ve=c.error?`Tor warning: ${c.error}`:c.stub?"Tor binary not found; using stub mode for UI only.":c.running?c.circuitEstablished?"Tor circuit established. Click to stop.":"Tor starting up. Click to stop.":"Route traffic through Tor. Click to enable.",we=S.connected?`VPN connected${S.name?` (${S.name})`:""}. Click to re-check.`:"Check whether a system VPN is active.",je={info:"bg-blue-500/10 border-blue-400/40 text-blue-100",warning:"bg-amber-500/10 border-amber-400/40 text-amber-100",critical:"bg-red-500/10 border-red-400/40 text-red-100"},Se=t=>typeof t!="number"||!Number.isFinite(t)?0:Math.max(0,Math.min(100,Math.round(t))),ee=({icon:t,label:y,value:f,percent:M,gradient:T="from-blue-500 via-cyan-500 to-blue-500",title:U,onClick:B})=>{const K=B?"button":"div",X=Se(M);return e.jsxs(K,{type:B?"button":void 0,onClick:B,title:U,className:`flex items-center gap-1.5 rounded-full border border-gray-700/60 bg-gray-800/60 px-2 py-1 text-xs text-gray-200 ${B?"cursor-pointer transition-colors hover:border-gray-500/70 focus:outline-none focus:ring-1 focus:ring-blue-400/40":""}`,children:[e.jsx(t,{size:12,className:"text-gray-400"}),e.jsx("span",{className:"font-semibold text-gray-100",children:y}),e.jsx("span",{className:"text-[11px] opacity-75",children:f}),e.jsx("div",{className:"h-1.5 w-14 overflow-hidden rounded-full bg-gray-700",children:e.jsx("div",{className:`h-full bg-gradient-to-r ${T}`,style:{width:`${X}%`}})})]})},N=({icon:t,label:y,description:f,variant:M="default",title:T,onClick:U,pulse:B=!1,loading:K=!1,className:X})=>{const Re={default:"border-gray-700/60 bg-gray-800/60 text-gray-200",positive:"border-emerald-500/30 bg-emerald-500/10 text-emerald-100",warning:"border-amber-500/30 bg-amber-500/10 text-amber-100",danger:"border-red-500/30 bg-red-500/10 text-red-100",info:"border-blue-500/30 bg-blue-500/10 text-blue-100"},$e=U?"button":"div";return e.jsxs($e,{type:U?"button":void 0,onClick:U,title:T,className:`${Re[M]} ${X??""} flex items-center gap-1.5 rounded-full px-2 py-1 text-xs ${U?"cursor-pointer transition-colors hover:border-gray-500/70 focus:outline-none focus:ring-1 focus:ring-blue-400/30":""}`,children:[e.jsx(t,{size:12,className:"opacity-80"}),e.jsx("span",{className:"font-medium",children:y}),f&&e.jsx("span",{className:"text-[11px] opacity-75",children:f}),K&&e.jsx("span",{className:"h-3 w-3 animate-spin rounded-full border border-current border-t-transparent"}),B&&e.jsx(z.span,{className:"inline-flex h-1.5 w-1.5 rounded-full bg-current",animate:{opacity:[.4,1,.4]},transition:{duration:1.6,repeat:1/0}})]})};l.useEffect(()=>{if(!k)return;const t=setTimeout(()=>{R(null)},2e4);return()=>clearTimeout(t)},[k]);const Ne=async t=>{try{t.type==="mode"&&t.mode?await C.efficiency.applyMode(t.mode):t.type==="hibernate"&&await C.efficiency.hibernateInactiveTabs()}catch(y){console.error("Efficiency action failed:",y)}finally{R(null)}},te=async()=>{if(!(!r.trim()||!a||o))try{i(!0),await C.agent.createTask({title:"User Prompt",role:"researcher",goal:r.trim(),budget:{tokens:4096,seconds:120,requests:20}}),s("")}catch(t){console.error("Failed to create agent task:",t)}finally{i(!1)}};l.useEffect(()=>{if(!d)return;const t={capture:!0},y=f=>{v.current&&(v.current.contains(f.target)||b(!1))};return document.addEventListener("mousedown",y,t),()=>document.removeEventListener("mousedown",y,t)},[d]);const ke=async()=>{try{m.enabled?(await C.dns.disableDoH(),p({enabled:!1,provider:"cloudflare"})):(await C.dns.enableDoH("cloudflare"),p({enabled:!0,provider:"cloudflare"}))}catch(t){console.error("Failed to toggle DoH:",t)}},Me=[x||null,typeof g.batteryPct=="number"?`${Math.round(g.batteryPct)}%`:null,typeof J=="number"?`${Math.round(J)} gCO₂/kWh`:null].filter(Boolean).join(" · "),Te=$.includes("Regen")?"positive":$.includes("Battery")?"info":"default",Ce=ge.replace(/^Tor:?\s*/i,""),Ee=c.stub?"warning":c.running?"info":"default",Ie=S.connected?S.type?S.type.toUpperCase():"Active":"Disconnected";return e.jsxs("div",{className:"px-4 py-2 bg-gray-900/90 backdrop-blur-sm border-t border-gray-700/50 flex flex-col gap-2","data-onboarding":"status-bar",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-gray-300",children:[e.jsx(Je,{}),e.jsx(ee,{icon:re,label:"CPU",value:`${w}%`,percent:w,title:"System CPU usage",gradient:"from-blue-500 via-cyan-500 to-blue-500"}),e.jsx(ee,{icon:ne,label:"RAM",value:`${n}%`,percent:n,title:"System memory usage",gradient:"from-green-500 via-emerald-500 to-green-500"}),e.jsx(N,{icon:se,label:$,description:Me||void 0,variant:Te,title:x??$}),e.jsx(N,{icon:ue,label:"Shadow",description:O?"Active":"Idle",variant:O?"info":"default",pulse:A,title:O?"Shadow Mode active":"Shadow Mode inactive"}),e.jsx(N,{icon:pe,label:"Mode",description:E,className:be[E],title:`Privacy mode: ${E}`}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[e.jsx(N,{icon:re,label:"CPU",description:`${w}%`,variant:w>70?"warning":"default",title:"CPU usage"}),e.jsx(N,{icon:ne,label:"RAM",description:`${n}%`,variant:n>75?"warning":"default",title:"Memory usage"}),e.jsx(N,{icon:Be,label:"Model",description:u?"Ready":"Loading",variant:u?"positive":"default",pulse:u,title:"Local model status"}),e.jsxs("div",{className:"relative w-60",children:[e.jsx("input",{type:"text",value:r,onChange:t=>s(t.target.value),onKeyDown:t=>{t.key==="Enter"&&te()},placeholder:"Prompt agent (e.g., 'summarize this page')...",disabled:o,className:`h-8 w-full rounded-full border border-gray-700/60 bg-gray-800/70 pl-3 pr-9 text-xs text-gray-200 placeholder-gray-400 focus:border-blue-500/60 focus:outline-none focus:ring-1 focus:ring-blue-500/40 ${o?"opacity-70 cursor-wait":""}`}),o?e.jsx(de,{className:"absolute right-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 animate-spin text-blue-300","aria-label":"Sending prompt"}):e.jsx("button",{type:"button",onClick:()=>void te(),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 transition-colors hover:text-gray-200",title:"Send prompt",children:e.jsx(Fe,{size:14})})]}),e.jsx(nt,{}),e.jsxs("div",{className:"relative",ref:v,children:[e.jsxs("button",{type:"button",className:"flex items-center gap-1 rounded-full border border-gray-700/50 bg-gray-800/60 px-3 py-1.5 text-xs text-gray-300 transition-colors hover:border-gray-600 hover:text-white",onClick:()=>b(t=>!t),title:"Security & network controls",children:[e.jsx(qe,{size:14}),"More"]}),e.jsx(G,{children:d&&e.jsx(z.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},exit:{opacity:0,y:6},transition:{duration:.16},className:"absolute right-0 mt-2 w-64 rounded-lg border border-gray-800 bg-slate-950/95 p-3 shadow-xl",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(N,{icon:ae,label:"Tor",description:Ce,variant:Ee,onClick:c.loading?void 0:()=>{c.running?ye():xe()},loading:c.loading,title:ve,className:`justify-start ${c.loading?"opacity-60 cursor-not-allowed":""}`}),c.running&&!c.stub&&e.jsxs("button",{type:"button",onClick:()=>{c.loading||fe()},className:"flex items-center gap-2 rounded-md border border-purple-500/40 bg-purple-500/10 px-3 py-1.5 text-[11px] text-purple-100 transition-colors hover:border-purple-400/60",children:[e.jsx(He,{size:12}),"Request new Tor identity"]}),e.jsx(N,{icon:Ve,label:"VPN",description:Ie,variant:S.connected?"positive":"default",onClick:S.loading?void 0:()=>void he(),loading:S.loading,title:we,className:`justify-start ${S.loading?"opacity-60 cursor-not-allowed":""}`}),e.jsx(N,{icon:ae,label:"DoH",description:m.enabled?m.provider:"Disabled",variant:m.enabled?"info":"default",onClick:ke,title:"Toggle DNS-over-HTTPS",className:"justify-start"}),e.jsx(N,{icon:se,label:"Efficiency",description:$||"Normal",variant:"default",className:"justify-start"})]})})})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-start gap-3",children:[e.jsx(G,{children:k&&e.jsxs(z.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},exit:{opacity:0,y:6},className:`flex w-full max-w-xl items-center gap-3 rounded-lg border px-3 py-2 shadow-inner ${je[k.severity]}`,children:[e.jsx(We,{size:14}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:"text-xs font-semibold",children:k.title}),e.jsx("span",{className:"text-[11px] opacity-80",children:k.message})]}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[k.actions.map(t=>e.jsx("button",{onClick:()=>Ne(t),className:"rounded bg-gray-900/60 px-2 py-1 text-[11px] font-medium transition-colors hover:bg-gray-900/80",children:t.label},t.id)),e.jsx("button",{onClick:()=>R(null),className:"p-1 text-xs opacity-70 transition-opacity hover:opacity-100","aria-label":"Dismiss efficiency alert",children:e.jsx(oe,{size:12})})]})]},"efficiency-alert")}),e.jsx(G,{children:h&&e.jsxs(z.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},exit:{opacity:0,y:6},className:"flex w-full max-w-xl items-start gap-3 rounded-lg border border-purple-500/40 bg-purple-500/10 px-3 py-2 text-xs text-purple-100 shadow-inner",children:[e.jsx(Ge,{size:14,className:"mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide",children:"Shadow Summary"}),e.jsx("button",{onClick:me,className:"p-1 text-[10px] text-purple-200/80 transition-colors hover:text-purple-50","aria-label":"Dismiss shadow summary",children:e.jsx(oe,{size:12})})]}),e.jsx("div",{className:"text-[11px] opacity-90",children:h.recommendations?.[0]??"Review your shadow session."}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-[10px] opacity-80",children:[e.jsxs("span",{children:[Math.round(h.durationMs/1e3),"s"]}),e.jsxs("span",{children:["Visits: ",h.totalVisits]}),e.jsxs("span",{children:["Domains: ",h.uniqueHosts]})]}),h.visited?.length>0&&e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("span",{className:"text-[10px] uppercase opacity-70",children:"Recent"}),e.jsx("ul",{className:"space-y-0.5",children:h.visited.slice(0,3).map(t=>e.jsx("li",{className:"truncate",children:e.jsx("a",{href:t.url,className:"text-[11px] text-purple-200 transition-colors hover:text-purple-50",title:t.url,children:t.title||t.url})},`${t.url}-${t.firstSeen}`))})]}),h.recommendations?.length>1&&e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("span",{className:"text-[10px] uppercase opacity-70",children:"Recommendations"}),e.jsx("ul",{className:"space-y-0.5",children:h.recommendations.slice(1).map((t,y)=>e.jsx("li",{className:"text-[11px] opacity-80",children:t},y))})]})]})]},"shadow-summary")})]})]})}export{$t as BottomStatus};
//# sourceMappingURL=BottomStatus-CFNjN9-z.js.map

import{r as m,j as e}from"./index-dj7m1cGj.js";import{useTrustDashboardStore as u}from"./trustDashboardStore-CE7KmIta.js";import{S as b}from"./shield-wz6Nan5a.js";import{C as d}from"./clock-C2CbMN6U.js";import{T as g}from"./triangle-alert-CX1V0b5r.js";import{S as j}from"./shield-alert-BDTTFe3x.js";import{C as v}from"./circle-check-J1xVWsPI.js";import{m as N}from"./proxy-C7NQ8sMs.js";import{C as y}from"./circle-x-DhN9FEyB.js";import{S as w}from"./shield-check-Drnm7Ghu.js";import{f as x}from"./formatDistanceToNow-Ctx6mZEP.js";const k={download:"Download file",form_submit:"Submit form",login:"Login request",scrape:"Scrape content",export_data:"Export data",access_clipboard:"Clipboard access",access_camera:"Camera access",access_microphone:"Microphone access",access_filesystem:"Filesystem access",ai_cloud:"Cloud AI call"};function C(){const{consentTimeline:n,refresh:c,loading:p}=u();m.useEffect(()=>{c();const t=setInterval(()=>{c()},3e4);return()=>clearInterval(t)},[c]);const h=m.useMemo(()=>{const t={},s=Date.now(),l=3600*1e3,o=24*l;return n.forEach(r=>{const i=s-r.timestamp;let a;i<l?a="Last hour":i<o?a="Today":i<7*o?a="This week":i<30*o?a="This month":a="Older",t[a]||(t[a]=[]),t[a].push(r)}),Object.entries(t).map(([r,i])=>({label:r,items:i.sort((a,f)=>f.timestamp-a.timestamp)}))},[n]);return p&&n.length===0?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"text-sm text-gray-400",children:"Loading consent timelineâ€¦"})}):e.jsx("div",{className:"h-full overflow-y-auto bg-[#0f111a] p-4 sm:p-6",children:e.jsxs("div",{className:"mx-auto max-w-4xl",children:[e.jsxs("header",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide text-emerald-300/80",children:[e.jsx(b,{size:14}),"Consent Timeline"]}),e.jsx("h1",{className:"mt-2 text-xl sm:text-2xl font-semibold text-white",children:"Privacy Decisions History"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"Complete audit trail of all consent requests and approvals"})]}),n.length===0?e.jsxs("div",{className:"rounded-2xl border border-slate-800/60 bg-slate-900/70 p-8 sm:p-12 text-center",children:[e.jsx(d,{size:48,className:"mx-auto mb-4 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"No consent activity yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Privacy decisions will appear here as you browse and interact with sites."})]}):e.jsx("div",{className:"space-y-6 sm:space-y-8",children:h.map(t=>e.jsxs("section",{className:"space-y-3",children:[e.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-gray-500",children:t.label}),e.jsx("div",{className:"space-y-2",children:t.items.map(s=>{const l=s.revokedAt?{label:"Revoked",icon:y,tone:"text-red-300 border-red-400/40 bg-red-500/10"}:s.approved?{label:"Approved",icon:w,tone:"text-emerald-300 border-emerald-400/40 bg-emerald-500/10"}:{label:"Pending",icon:d,tone:"text-amber-300 border-amber-400/40 bg-amber-500/10"},r=s.action.risk==="high"?g:s.action.risk==="medium"?j:v,i=l.icon;return e.jsx(N.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"rounded-xl border border-slate-800/60 bg-slate-900/70 p-3 sm:p-4 hover:bg-slate-900/90 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex h-10 w-10 sm:h-12 sm:w-12 shrink-0 items-center justify-center rounded-xl border border-slate-800/70 bg-slate-900/80",children:e.jsx(r,{size:18,className:"sm:w-5 sm:h-5 text-emerald-300"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sm sm:text-base text-gray-200",children:k[s.action.type]??s.action.type}),e.jsx("span",{className:"text-xs text-slate-500",children:x(s.timestamp,{addSuffix:!0})})]}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-400 mb-2",children:s.action.description}),s.action.target&&e.jsx("div",{className:"text-xs text-slate-500 truncate",title:s.action.target,children:s.action.target})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full border px-2 sm:px-2.5 py-1 text-xs ${l.tone}`,children:[e.jsx(i,{size:12}),e.jsx("span",{className:"hidden sm:inline",children:l.label})]}),s.revokedAt&&e.jsxs("span",{className:"text-xs text-red-400",children:["Revoked ",x(s.revokedAt,{addSuffix:!0})]})]})]})},s.id)})})]},t.label))})]})})}function P(){return e.jsx(C,{})}export{P as default};
//# sourceMappingURL=ConsentTimeline-CerjapF5.js.map

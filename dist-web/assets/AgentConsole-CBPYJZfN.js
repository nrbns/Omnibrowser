import{r as a,j as e,i as x}from"./index-DMKJqC5Z.js";import{i as p}from"./ipc-events-B-mtt1te.js";function N(){const[d,g]=a.useState(null),[h,u]=a.useState([]),[m,c]=a.useState(""),[r,i]=a.useState(null),o=a.useRef(JSON.stringify({goal:"Open example.com",steps:[{skill:"navigate",args:{url:"https://example.com"}}],output:{type:"json",schema:{}}},null,2));return a.useEffect(()=>{if(!window.agent)return;const t=s=>u(l=>[...l,s]),n=s=>u(l=>[...l,s]);window.agent.onToken(t),window.agent.onStep(n);const f=s=>{s.streamId===r&&(s.chunk.text&&c(l=>l+(s.chunk.text||"")),s.chunk.finished&&i(null))},w=p.on("agent:stream:chunk",f),b=p.on("agent:stream:done",s=>{s.streamId===r&&i(null)});return()=>{w(),b()}},[r]),e.jsxs("div",{className:"p-3 grid grid-cols-2 gap-3 h-full",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h3",{className:"font-medium",children:"Agent DSL"}),e.jsx("textarea",{className:"flex-1 bg-neutral-800 rounded p-2 text-xs",defaultValue:o.current,onChange:t=>o.current=t.target.value}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"bg-indigo-600 text-white px-3 py-1 rounded",onClick:async()=>{const t=JSON.parse(o.current),n=await window.agent?.start?.(t);n?.runId&&g(n.runId)},children:"Start"}),e.jsx("button",{className:"bg-neutral-700 text-white px-3 py-1 rounded",onClick:async()=>{d&&await window.agent?.stop?.(d)},children:"Stop"}),e.jsx("button",{className:"bg-neutral-700 text-white px-3 py-1 rounded",onClick:async()=>{await window.recorder?.start?.()},children:"Record"}),e.jsx("button",{className:"bg-neutral-700 text-white px-3 py-1 rounded",onClick:async()=>{await window.recorder?.stop?.();const t=await window.recorder?.getDsl?.();o.current=JSON.stringify(t,null,2),document.activeElement?.blur()},children:"Stop & Load"}),e.jsx("button",{className:"bg-emerald-600 text-white px-3 py-1 rounded",onClick:()=>{const t={goal:"Paginate, extract first table, export CSV",steps:[{skill:"paginate_and_extract",args:{url:"https://example.com",nextSelector:"a.next",maxPages:2}},{skill:"export_csv",args:{from:"last",filename:"demo.csv"}}],output:{type:"json",schema:{}}};o.current=JSON.stringify(t,null,2)},children:"Load Demo: Paginate→Extract→CSV"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h3",{className:"font-medium",children:"Live Logs"}),e.jsx("pre",{className:"flex-1 bg-neutral-900 rounded p-2 text-xs overflow-auto",children:JSON.stringify(h,null,2)}),m&&e.jsxs("div",{className:"mt-4 p-4 bg-neutral-800 rounded border border-blue-500/30",children:[e.jsx("h4",{className:"font-medium mb-2 text-blue-400",children:"Streaming Response:"}),e.jsx("div",{className:"text-sm text-gray-300 whitespace-pre-wrap max-h-60 overflow-y-auto",children:m}),e.jsx("button",{onClick:async()=>{r&&(await x.agent.stream.stop(r),i(null),c(""))},className:"mt-2 px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-xs",children:"Stop Stream"})]}),e.jsx("button",{onClick:async()=>{try{const t=prompt("Enter your query for streaming AI:");if(!t)return;c("");const n=await x.agent.stream.start(t,{model:"llama3.2",temperature:.7});n?.streamId&&i(n.streamId)}catch(t){console.error("Failed to start stream:",t),alert("Failed to start streaming. Check console for details.")}},className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 rounded text-sm font-medium",children:"Start Streaming AI"})]})]})}export{N as default};
//# sourceMappingURL=AgentConsole-CBPYJZfN.js.map

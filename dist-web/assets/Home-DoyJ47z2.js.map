{"version":3,"file":"Home-DoyJ47z2.js","sources":["../../node_modules/lucide-react/dist/esm/icons/archive.js","../../node_modules/lucide-react/dist/esm/icons/book-open-check.js","../../node_modules/lucide-react/dist/esm/icons/chevron-left.js","../../node_modules/lucide-react/dist/esm/icons/clock-3.js","../../node_modules/lucide-react/dist/esm/icons/cloud-upload.js","../../node_modules/lucide-react/dist/esm/icons/file-down.js","../../node_modules/lucide-react/dist/esm/icons/file-plus.js","../../node_modules/lucide-react/dist/esm/icons/git-branch.js","../../node_modules/lucide-react/dist/esm/icons/maximize.js","../../node_modules/lucide-react/dist/esm/icons/message-square.js","../../node_modules/lucide-react/dist/esm/icons/pen-line.js","../../node_modules/lucide-react/dist/esm/icons/pin.js","../../node_modules/lucide-react/dist/esm/icons/save.js","../../node_modules/lucide-react/dist/esm/icons/zoom-in.js","../../node_modules/lucide-react/dist/esm/icons/zoom-out.js","../../src/modes/trade/adapters.ts","../../src/modes/trade/index.tsx","../../src/modes/games/index.tsx","../../src/components/DocumentViewer/PDFViewer.tsx","../../src/components/DocumentViewer/CommentsPanel.tsx","../../src/modes/docs/index.tsx","../../src/modes/images/engines.ts","../../src/modes/images/index.tsx","../../src/modes/threats/index.tsx","../../src/modes/graphmind/index.tsx","../../src/components/layout/MainView.tsx","../../src/components/Panels/ResearchSplit.tsx","../../src/components/OmniDesk.tsx","../../src/routes/Home.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Archive = createLucideIcon(\"Archive\", [\n  [\"rect\", { width: \"20\", height: \"5\", x: \"2\", y: \"3\", rx: \"1\", key: \"1wp1u1\" }],\n  [\"path\", { d: \"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8\", key: \"1s80jp\" }],\n  [\"path\", { d: \"M10 12h4\", key: \"a56b0p\" }]\n]);\n\nexport { Archive as default };\n//# sourceMappingURL=archive.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BookOpenCheck = createLucideIcon(\"BookOpenCheck\", [\n  [\"path\", { d: \"M12 21V7\", key: \"gj6g52\" }],\n  [\"path\", { d: \"m16 12 2 2 4-4\", key: \"mdajum\" }],\n  [\n    \"path\",\n    {\n      d: \"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3\",\n      key: \"8arnkb\"\n    }\n  ]\n]);\n\nexport { BookOpenCheck as default };\n//# sourceMappingURL=book-open-check.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronLeft = createLucideIcon(\"ChevronLeft\", [\n  [\"path\", { d: \"m15 18-6-6 6-6\", key: \"1wnfg3\" }]\n]);\n\nexport { ChevronLeft as default };\n//# sourceMappingURL=chevron-left.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Clock3 = createLucideIcon(\"Clock3\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"polyline\", { points: \"12 6 12 12 16.5 12\", key: \"1aq6pp\" }]\n]);\n\nexport { Clock3 as default };\n//# sourceMappingURL=clock-3.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CloudUpload = createLucideIcon(\"CloudUpload\", [\n  [\"path\", { d: \"M12 13v8\", key: \"1l5pq0\" }],\n  [\"path\", { d: \"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242\", key: \"1pljnt\" }],\n  [\"path\", { d: \"m8 17 4-4 4 4\", key: \"1quai1\" }]\n]);\n\nexport { CloudUpload as default };\n//# sourceMappingURL=cloud-upload.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileDown = createLucideIcon(\"FileDown\", [\n  [\"path\", { d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\", key: \"1rqfz7\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }],\n  [\"path\", { d: \"M12 18v-6\", key: \"17g6i2\" }],\n  [\"path\", { d: \"m9 15 3 3 3-3\", key: \"1npd3o\" }]\n]);\n\nexport { FileDown as default };\n//# sourceMappingURL=file-down.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FilePlus = createLucideIcon(\"FilePlus\", [\n  [\"path\", { d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\", key: \"1rqfz7\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }],\n  [\"path\", { d: \"M9 15h6\", key: \"cctwl0\" }],\n  [\"path\", { d: \"M12 18v-6\", key: \"17g6i2\" }]\n]);\n\nexport { FilePlus as default };\n//# sourceMappingURL=file-plus.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst GitBranch = createLucideIcon(\"GitBranch\", [\n  [\"line\", { x1: \"6\", x2: \"6\", y1: \"3\", y2: \"15\", key: \"17qcm7\" }],\n  [\"circle\", { cx: \"18\", cy: \"6\", r: \"3\", key: \"1h7g24\" }],\n  [\"circle\", { cx: \"6\", cy: \"18\", r: \"3\", key: \"fqmcym\" }],\n  [\"path\", { d: \"M18 9a9 9 0 0 1-9 9\", key: \"n2h4wq\" }]\n]);\n\nexport { GitBranch as default };\n//# sourceMappingURL=git-branch.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Maximize = createLucideIcon(\"Maximize\", [\n  [\"path\", { d: \"M8 3H5a2 2 0 0 0-2 2v3\", key: \"1dcmit\" }],\n  [\"path\", { d: \"M21 8V5a2 2 0 0 0-2-2h-3\", key: \"1e4gt3\" }],\n  [\"path\", { d: \"M3 16v3a2 2 0 0 0 2 2h3\", key: \"wsl5sc\" }],\n  [\"path\", { d: \"M16 21h3a2 2 0 0 0 2-2v-3\", key: \"18trek\" }]\n]);\n\nexport { Maximize as default };\n//# sourceMappingURL=maximize.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MessageSquare = createLucideIcon(\"MessageSquare\", [\n  [\"path\", { d: \"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\", key: \"1lielz\" }]\n]);\n\nexport { MessageSquare as default };\n//# sourceMappingURL=message-square.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst PenLine = createLucideIcon(\"PenLine\", [\n  [\"path\", { d: \"M12 20h9\", key: \"t2du7b\" }],\n  [\n    \"path\",\n    {\n      d: \"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z\",\n      key: \"1ykcvy\"\n    }\n  ]\n]);\n\nexport { PenLine as default };\n//# sourceMappingURL=pen-line.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Pin = createLucideIcon(\"Pin\", [\n  [\"path\", { d: \"M12 17v5\", key: \"bb1du9\" }],\n  [\n    \"path\",\n    {\n      d: \"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z\",\n      key: \"1nkz8b\"\n    }\n  ]\n]);\n\nexport { Pin as default };\n//# sourceMappingURL=pin.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Save = createLucideIcon(\"Save\", [\n  [\n    \"path\",\n    {\n      d: \"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z\",\n      key: \"1c8476\"\n    }\n  ],\n  [\"path\", { d: \"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7\", key: \"1ydtos\" }],\n  [\"path\", { d: \"M7 3v4a1 1 0 0 0 1 1h7\", key: \"t51u73\" }]\n]);\n\nexport { Save as default };\n//# sourceMappingURL=save.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ZoomIn = createLucideIcon(\"ZoomIn\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"line\", { x1: \"21\", x2: \"16.65\", y1: \"21\", y2: \"16.65\", key: \"13gj7c\" }],\n  [\"line\", { x1: \"11\", x2: \"11\", y1: \"8\", y2: \"14\", key: \"1vmskp\" }],\n  [\"line\", { x1: \"8\", x2: \"14\", y1: \"11\", y2: \"11\", key: \"durymu\" }]\n]);\n\nexport { ZoomIn as default };\n//# sourceMappingURL=zoom-in.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ZoomOut = createLucideIcon(\"ZoomOut\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"line\", { x1: \"21\", x2: \"16.65\", y1: \"21\", y2: \"16.65\", key: \"13gj7c\" }],\n  [\"line\", { x1: \"8\", x2: \"14\", y1: \"11\", y2: \"11\", key: \"durymu\" }]\n]);\n\nexport { ZoomOut as default };\n//# sourceMappingURL=zoom-out.js.map\n","export interface BrokerAdapter {\r\n  getBalance(): number;\r\n  buy(symbol: string, qty: number): void;\r\n  sell(symbol: string, qty: number): void;\r\n}\r\n\r\nexport class MockBroker implements BrokerAdapter {\r\n  private balance = 10000;\r\n  getBalance() { return this.balance; }\r\n  buy(_symbol: string, qty: number) { this.balance -= qty * 100; }\r\n  sell(_symbol: string, qty: number) { this.balance += qty * 100; }\r\n}\r\n\r\n\r\n","import { useState } from 'react';\r\nimport { MockBroker } from './adapters';\r\n\r\ntype Chart = { id: string; symbol: string; timeframe: string };\r\n\r\nexport default function TradePanel() {\r\n  const broker = new MockBroker();\r\n  const [balance, setBalance] = useState(broker.getBalance());\r\n  const [charts, setCharts] = useState<Chart[]>([\r\n    { id: cryptoRandom(), symbol: 'AAPL', timeframe: '60' }\r\n  ]);\r\n  const [symbol, setSymbol] = useState('AAPL');\r\n  const [timeframe, setTimeframe] = useState('60');\r\n\r\n  const addChart = () => setCharts((c)=> [...c, { id: cryptoRandom(), symbol, timeframe }]);\r\n  const removeChart = (id: string) => setCharts((c)=> c.filter(x=> x.id !== id));\r\n  const layoutCols = charts.length >= 4 ? 2 : charts.length >= 2 ? 2 : 1;\r\n\r\n  return (\r\n    <div className=\"h-full w-full p-3 space-y-3\">\r\n      <div className=\"flex items-center gap-3 text-sm\">\r\n        <div>Paper Balance: ${balance.toFixed(2)}</div>\r\n        <button className=\"bg-green-600 text-white px-2 py-1 rounded\" onClick={()=>{ broker.buy(symbol, 1); setBalance(broker.getBalance()); }}>Buy 1</button>\r\n        <button className=\"bg-red-600 text-white px-2 py-1 rounded\" onClick={()=>{ broker.sell(symbol, 1); setBalance(broker.getBalance()); }}>Sell 1</button>\r\n        <div className=\"ml-auto flex items-center gap-2\">\r\n          <input className=\"bg-neutral-800 rounded px-2 py-1\" value={symbol} onChange={(e)=>setSymbol(e.target.value.toUpperCase())} placeholder=\"Symbol\" />\r\n          <select className=\"bg-neutral-800 rounded px-2 py-1\" value={timeframe} onChange={(e)=>setTimeframe(e.target.value)}>\r\n            <option value=\"1\">1m</option>\r\n            <option value=\"5\">5m</option>\r\n            <option value=\"15\">15m</option>\r\n            <option value=\"60\">1h</option>\r\n            <option value=\"240\">4h</option>\r\n            <option value=\"1D\">1D</option>\r\n          </select>\r\n          <button className=\"bg-indigo-600 text-white px-2 py-1 rounded\" onClick={addChart}>Add Chart</button>\r\n        </div>\r\n      </div>\r\n      <div className={`grid gap-3`} style={{ gridTemplateColumns: `repeat(${layoutCols}, minmax(0, 1fr))` }}>\r\n        {charts.map(c => (\r\n          <div key={c.id} className=\"relative bg-neutral-800 rounded overflow-hidden\">\r\n            <button className=\"absolute right-2 top-2 text-xs bg-neutral-900/70 px-2 py-1 rounded\" onClick={()=>removeChart(c.id)}>Close</button>\r\n            <TradingView symbol={c.symbol} timeframe={c.timeframe} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <AiAssistant symbol={symbol} />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction TradingView({ symbol, timeframe }: { symbol: string; timeframe: string }) {\r\n  const src = getTradingViewEmbed(symbol, timeframe);\r\n  return (\r\n    <iframe className=\"w-full h-[380px]\" src={src} title={`TV-${symbol}`} referrerPolicy=\"no-referrer\" />\r\n  );\r\n}\r\n\r\nfunction getTradingViewEmbed(symbol: string, timeframe: string) {\r\n  const sym = encodeURIComponent(symbol);\r\n  const interval = encodeURIComponent(timeframe);\r\n  return `https://s.tradingview.com/widgetembed/?frameElementId=tv_embed&symbol=${sym}&interval=${interval}&hidesidetoolbar=1&symboledit=1&saveimage=0&toolbarbg=rgba(0,0,0,1)&studies=[]&hideideas=1&theme=dark`;\r\n}\r\n\r\nfunction cryptoRandom() { return Math.random().toString(36).slice(2); }\r\n\r\nfunction AiAssistant({ symbol }: { symbol: string }) {\r\n  return (\r\n    <div className=\"border border-neutral-800 rounded p-3 text-sm\">\r\n      <div className=\"font-medium mb-1\">AI Helper</div>\r\n      <div className=\"text-neutral-300\">Suggestions for {symbol}: Mock signals and notes. Connect your provider later.</div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","import catalog from './catalog.json';\r\n\r\nexport default function GamesPanel() {\r\n  return (\r\n    <div className=\"p-3 space-y-2\">\r\n      <h3 className=\"font-medium\">Games</h3>\r\n      <ul className=\"space-y-1 text-sm\">\r\n        {catalog.map((g) => (\r\n          <li key={g.url}>\r\n            <a className=\"text-indigo-400\" href={g.url} onClick={(e)=>{ e.preventDefault(); window.api?.tabs?.create?.(g.url); }}>{g.name}</a>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","/**\r\n * PDF Viewer Component\r\n * Renders PDF documents with page navigation\r\n */\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { ChevronLeft, ChevronRight, ZoomIn, ZoomOut, Maximize } from 'lucide-react';\r\n\r\ninterface PDFViewerProps {\r\n  filePath: string;\r\n  onPageChange?: (page: number) => void;\r\n}\r\n\r\nexport function PDFViewer({ filePath, onPageChange }: PDFViewerProps) {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [zoom, setZoom] = useState(1.0);\r\n  const [loading, setLoading] = useState(true);\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n\r\n  useEffect(() => {\r\n    loadPDF();\r\n  }, [filePath]);\r\n\r\n  const loadPDF = async () => {\r\n    setLoading(true);\r\n    try {\r\n      // Use pdfjs-dist for PDF rendering\r\n      const pdfjsLib = require('pdfjs-dist');\r\n      \r\n      // For browser environment, use worker\r\n      if (typeof window !== 'undefined') {\r\n        pdfjsLib.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`;\r\n      }\r\n\r\n      // Load PDF (filePath should be accessible URL or data URL)\r\n      const loadingTask = pdfjsLib.getDocument(filePath);\r\n      const pdf = await loadingTask.promise;\r\n      \r\n      setTotalPages(pdf.numPages);\r\n      \r\n      // Render first page\r\n      if (canvasRef.current) {\r\n        const page = await pdf.getPage(1);\r\n        const viewport = page.getViewport({ scale: zoom });\r\n        const canvas = canvasRef.current;\r\n        const context = canvas.getContext('2d');\r\n        \r\n        canvas.height = viewport.height;\r\n        canvas.width = viewport.width;\r\n        \r\n        await page.render({\r\n          canvasContext: context,\r\n          viewport: viewport,\r\n        }).promise;\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load PDF:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const goToPage = (page: number) => {\r\n    if (page >= 1 && page <= totalPages) {\r\n      setCurrentPage(page);\r\n      onPageChange?.(page);\r\n    }\r\n  };\r\n\r\n  const zoomIn = () => setZoom(Math.min(zoom + 0.25, 3.0));\r\n  const zoomOut = () => setZoom(Math.max(zoom - 0.25, 0.5));\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-full bg-gray-900\">\r\n        <div className=\"text-gray-400\">Loading PDF...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-gray-900\">\r\n      {/* Toolbar */}\r\n      <div className=\"flex items-center justify-between px-4 py-2 bg-gray-800 border-b border-gray-700\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            onClick={() => goToPage(currentPage - 1)}\r\n            disabled={currentPage === 1}\r\n            className=\"p-2 rounded hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <ChevronLeft size={20} className=\"text-gray-300\" />\r\n          </button>\r\n          <span className=\"text-sm text-gray-300\">\r\n            Page {currentPage} of {totalPages}\r\n          </span>\r\n          <button\r\n            onClick={() => goToPage(currentPage + 1)}\r\n            disabled={currentPage === totalPages}\r\n            className=\"p-2 rounded hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <ChevronRight size={20} className=\"text-gray-300\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-2\">\r\n          <button onClick={zoomOut} className=\"p-2 rounded hover:bg-gray-700\">\r\n            <ZoomOut size={18} className=\"text-gray-300\" />\r\n          </button>\r\n          <span className=\"text-sm text-gray-400 w-16 text-center\">{Math.round(zoom * 100)}%</span>\r\n          <button onClick={zoomIn} className=\"p-2 rounded hover:bg-gray-700\">\r\n            <ZoomIn size={18} className=\"text-gray-300\" />\r\n          </button>\r\n          <button className=\"p-2 rounded hover:bg-gray-700\">\r\n            <Maximize size={18} className=\"text-gray-300\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* PDF Canvas */}\r\n      <div className=\"flex-1 overflow-auto flex items-center justify-center p-4\">\r\n        <motion.canvas\r\n          ref={canvasRef}\r\n          style={{ transform: `scale(${zoom})`, transformOrigin: 'center' }}\r\n          className=\"border border-gray-700 shadow-lg bg-white\"\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n","/**\r\n * Comments Panel - Side-by-side comments for PDF viewer\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { MessageSquare, Plus, X } from 'lucide-react';\r\n\r\nexport interface Comment {\r\n  id: string;\r\n  page: number;\r\n  x: number;\r\n  y: number;\r\n  text: string;\r\n  createdAt: number;\r\n}\r\n\r\ninterface CommentsPanelProps {\r\n  comments: Comment[];\r\n  onAddComment: (comment: Omit<Comment, 'id' | 'createdAt'>) => void;\r\n  onDeleteComment: (id: string) => void;\r\n  currentPage: number;\r\n}\r\n\r\nexport function CommentsPanel({ comments, onAddComment, onDeleteComment, currentPage }: CommentsPanelProps) {\r\n  const [newCommentText, setNewCommentText] = useState('');\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n\r\n  const pageComments = comments.filter(c => c.page === currentPage);\r\n\r\n  const handleAddComment = () => {\r\n    if (!newCommentText.trim()) return;\r\n\r\n    onAddComment({\r\n      page: currentPage,\r\n      x: 0, // Would be from click position\r\n      y: 0,\r\n      text: newCommentText,\r\n    });\r\n\r\n    setNewCommentText('');\r\n    setShowAddForm(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-80 h-full bg-gray-800 border-l border-gray-700 flex flex-col\">\r\n      <div className=\"px-4 py-3 border-b border-gray-700 flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <MessageSquare size={18} className=\"text-gray-400\" />\r\n          <h3 className=\"text-sm font-semibold text-gray-200\">Comments</h3>\r\n          <span className=\"text-xs text-gray-500\">({pageComments.length})</span>\r\n        </div>\r\n        <button\r\n          onClick={() => setShowAddForm(!showAddForm)}\r\n          className=\"p-1.5 rounded hover:bg-gray-700\"\r\n        >\r\n          <Plus size={16} className=\"text-gray-400\" />\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"flex-1 overflow-y-auto p-4\">\r\n        {showAddForm && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            className=\"mb-4 p-3 bg-gray-700/50 rounded-lg border border-gray-600\"\r\n          >\r\n            <textarea\r\n              value={newCommentText}\r\n              onChange={(e) => setNewCommentText(e.target.value)}\r\n              placeholder=\"Add a comment...\"\r\n              className=\"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded text-sm text-gray-100 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n              rows={3}\r\n            />\r\n            <div className=\"flex gap-2 mt-2\">\r\n              <button\r\n                onClick={handleAddComment}\r\n                className=\"px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded transition-colors\"\r\n              >\r\n                Add\r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  setShowAddForm(false);\r\n                  setNewCommentText('');\r\n                }}\r\n                className=\"px-3 py-1.5 bg-gray-700 hover:bg-gray-600 text-gray-300 text-sm rounded transition-colors\"\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n\r\n        {pageComments.length === 0 ? (\r\n          <div className=\"text-center text-gray-500 text-sm py-8\">\r\n            No comments on this page\r\n          </div>\r\n        ) : (\r\n          <div className=\"flex flex-col gap-3\">\r\n            {pageComments.map((comment) => (\r\n              <motion.div\r\n                key={comment.id}\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                className=\"p-3 bg-gray-700/30 rounded-lg border border-gray-600/50\"\r\n              >\r\n                <div className=\"flex items-start justify-between gap-2 mb-1\">\r\n                  <span className=\"text-xs text-gray-400\">Page {comment.page}</span>\r\n                  <button\r\n                    onClick={() => onDeleteComment(comment.id)}\r\n                    className=\"p-0.5 rounded hover:bg-gray-600\"\r\n                  >\r\n                    <X size={12} className=\"text-gray-500\" />\r\n                  </button>\r\n                </div>\r\n                <p className=\"text-sm text-gray-200\">{comment.text}</p>\r\n              </motion.div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n","// @ts-nocheck\r\n\r\nimport { useEffect, useMemo, useState } from 'react';\r\nimport {\r\n  FilePlus,\r\n  Globe,\r\n  Loader2,\r\n  Shield,\r\n  UploadCloud,\r\n  X,\r\n  Highlighter,\r\n  AlertTriangle,\r\n  GitBranch,\r\n  Clock3,\r\n  BookOpenCheck,\r\n} from 'lucide-react';\r\nimport { ipc } from '../../lib/ipc-typed';\r\nimport {\r\n  DocumentReview,\r\n  FactHighlight,\r\n  AssumptionHighlight,\r\n  AuditTrailEntry,\r\n} from '../../types/document-review';\r\nimport { PDFViewer } from '../../components/DocumentViewer/PDFViewer';\r\nimport { CommentsPanel, Comment } from '../../components/DocumentViewer/CommentsPanel';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { formatDistanceToNow } from 'date-fns';\r\n\r\ntype ViewMode = 'list' | 'review' | 'ingest';\r\ntype IngestType = 'pdf' | 'docx' | 'web';\r\n\r\nexport default function DocsPanel() {\r\n  const [viewMode, setViewMode] = useState<ViewMode>('list');\r\n  const [reviews, setReviews] = useState<DocumentReview[]>([]);\r\n  const [activeReview, setActiveReview] = useState<DocumentReview | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [ingestType, setIngestType] = useState<IngestType>('pdf');\r\n  const [ingestUrl, setIngestUrl] = useState('');\r\n  const [fileToIngest, setFileToIngest] = useState<File | null>(null);\r\n  const [uploadProgress, setUploadProgress] = useState<number | null>(null);\r\n\r\n  useEffect(() => {\r\n    const loadReviews = async () => {\r\n      try {\r\n        const list = await ipc.document.list();\r\n        setReviews(list as DocumentReview[]);\r\n      } catch (err) {\r\n        console.error('Failed to load document reviews', err);\r\n      }\r\n    };\r\n    void loadReviews();\r\n  }, []);\r\n\r\n  const handleSelectReview = (review: DocumentReview) => {\r\n    setActiveReview(review);\r\n    setViewMode('review');\r\n  };\r\n\r\n  const handleStartIngest = (type: IngestType) => {\r\n    setError(null);\r\n    setUploadProgress(null);\r\n    setFileToIngest(null);\r\n    setIngestUrl('');\r\n    setIngestType(type);\r\n    setViewMode('ingest');\r\n  };\r\n\r\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0] || null;\r\n    if (file) {\r\n      setFileToIngest(file);\r\n    }\r\n  };\r\n\r\n  const handleIngestCancel = () => {\r\n    setViewMode(activeReview ? 'review' : 'list');\r\n    setFileToIngest(null);\r\n    setError(null);\r\n  };\r\n\r\n  const handleIngest = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      setUploadProgress(5);\r\n\r\n      let payloadSource: string = '';\r\n      let payloadType: IngestType = ingestType;\r\n\r\n      if (ingestType === 'web') {\r\n        if (!ingestUrl.trim()) {\r\n          setError('Please enter a URL to ingest.');\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        payloadSource = ingestUrl.trim();\r\n      } else {\r\n        if (!fileToIngest) {\r\n          setError('Please choose a file to ingest.');\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        const buffer = await fileToIngest.arrayBuffer();\r\n        payloadSource = Buffer.from(buffer).toString('base64');\r\n        payloadType = fileToIngest.name.toLowerCase().endsWith('.docx') ? 'docx' : 'pdf';\r\n      }\r\n\r\n      setUploadProgress(30);\r\n      const review = await ipc.document.ingest(payloadSource, payloadType, fileToIngest?.name || ingestUrl || undefined);\r\n      setUploadProgress(90);\r\n\r\n      const reviewData = review as DocumentReview;\r\n      setReviews(prev => [reviewData, ...prev]);\r\n      setActiveReview(reviewData);\r\n      setViewMode('review');\r\n    } catch (err: any) {\r\n      console.error('Document ingest failed', err);\r\n      setError(err?.message || 'Failed to ingest document.');\r\n    } finally {\r\n      setUploadProgress(100);\r\n      setTimeout(() => setUploadProgress(null), 800);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteReview = async (review: DocumentReview) => {\r\n    if (!confirm(`Delete \"${review.title}\"?`)) return;\r\n    try {\r\n      await ipc.document.delete({ id: review.id });\r\n      setReviews(prev => prev.filter(r => r.id !== review.id));\r\n      if (activeReview?.id === review.id) {\r\n        setActiveReview(null);\r\n        setViewMode('list');\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to delete review', err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-full bg-[#1A1D28] text-gray-100 overflow-hidden\">\r\n      <Sidebar\r\n        reviews={reviews}\r\n        activeReview={activeReview}\r\n        onSelectReview={handleSelectReview}\r\n        onCreate={handleStartIngest}\r\n      />\r\n\r\n      <main className=\"flex-1 overflow-y-auto\">\r\n        {viewMode === 'list' && (\r\n          <EmptyState onCreate={handleStartIngest} />\r\n        )}\r\n\r\n        {viewMode === 'ingest' && (\r\n          <IngestForm\r\n            ingestType={ingestType}\r\n            ingestUrl={ingestUrl}\r\n            loading={loading}\r\n            uploadProgress={uploadProgress}\r\n            error={error}\r\n            fileToIngest={fileToIngest}\r\n            onTypeChange={setIngestType}\r\n            onUrlChange={setIngestUrl}\r\n            onFileSelect={handleFileSelect}\r\n            onSubmit={handleIngest}\r\n            onCancel={handleIngestCancel}\r\n          />\r\n        )}\r\n\r\n        {viewMode === 'review' && activeReview && (\r\n          <DocumentReviewView\r\n            review={activeReview}\r\n            onReverify={async () => {\r\n              try {\r\n                setLoading(true);\r\n                const updated = await ipc.document.reverify({ id: activeReview.id });\r\n                const newReview = updated as DocumentReview;\r\n                setActiveReview(newReview);\r\n                setReviews(prev => prev.map(r => (r.id === newReview.id ? newReview : r)));\r\n              } catch (err) {\r\n                console.error('Reverify failed', err);\r\n              } finally {\r\n                setLoading(false);\r\n              }\r\n            }}\r\n            onExport={async (format, style) => {\r\n              try {\r\n                setLoading(true);\r\n                const outputPath = window.prompt('Save to path', `~/Documents/${activeReview.title}.${format === 'markdown' ? 'md' : 'html'}`);\r\n                if (!outputPath) return;\r\n                await ipc.document.export(activeReview.id, format, outputPath, style);\r\n                alert('Export completed successfully');\r\n              } catch (err) {\r\n                console.error('Export failed', err);\r\n                alert('Export failed. Check console for details.');\r\n              } finally {\r\n                setLoading(false);\r\n              }\r\n            }}\r\n            onDelete={() => activeReview && handleDeleteReview(activeReview)}\r\n          />\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface SidebarProps {\r\n  reviews: DocumentReview[];\r\n  activeReview: DocumentReview | null;\r\n  onSelectReview(review: DocumentReview): void;\r\n  onCreate(type: IngestType): void;\r\n}\r\n\r\nfunction Sidebar({ reviews, activeReview, onSelectReview, onCreate }: SidebarProps) {\r\n  return (\r\n    <aside className=\"w-80 border-r border-gray-800/40 bg-[#161924] flex flex-col\">\r\n      <div className=\"p-4 border-b border-gray-800/40\">\r\n        <h1 className=\"text-lg font-semibold\">Document Review</h1>\r\n        <p className=\"text-xs text-gray-500\">Ingest, analyze, and verify documents</p>\r\n        <div className=\"mt-3 grid grid-cols-3 gap-2 text-xs\">\r\n          <button\r\n            onClick={() => onCreate('pdf')}\r\n            className=\"flex items-center justify-center gap-1 rounded border border-indigo-500/40 bg-indigo-500/10 px-2 py-1 text-indigo-200 hover:bg-indigo-500/20\"\r\n          >\r\n            <FilePlus size={12} />\r\n            PDF\r\n          </button>\r\n          <button\r\n            onClick={() => onCreate('docx')}\r\n            className=\"flex items-center justify-center gap-1 rounded border border-purple-500/40 bg-purple-500/10 px-2 py-1 text-purple-200 hover:bg-purple-500/20\"\r\n          >\r\n            <UploadCloud size={12} />\r\n            DOCX\r\n          </button>\r\n          <button\r\n            onClick={() => onCreate('web')}\r\n            className=\"flex items-center justify-center gap-1 rounded border border-emerald-500/40 bg-emerald-500/10 px-2 py-1 text-emerald-200 hover:bg-emerald-500/20\"\r\n          >\r\n            <Globe size={12} />\r\n            Web\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex-1 overflow-y-auto\">\r\n        {reviews.length === 0 ? (\r\n          <div className=\"p-4 text-xs text-gray-500\">\r\n            No documents yet. Ingest a PDF, DOCX, or web article to begin.\r\n          </div>\r\n        ) : (\r\n          <ul>\r\n            {reviews.map((review) => (\r\n              <li key={review.id}>\r\n                <button\r\n                  onClick={() => onSelectReview(review)}\r\n                  className={`w-full text-left px-4 py-3 border-b border-gray-800/40 hover:bg-gray-800/30 transition-colors ${activeReview?.id === review.id ? 'bg-gray-800/50' : ''}`}\r\n                >\r\n                  <div className=\"flex items-center justify-between text-xs text-gray-400\">\r\n                    <span className=\"uppercase tracking-wide text-[10px] text-gray-500\">{review.type}</span>\r\n                    <span>{formatDistanceToNow(review.updatedAt, { addSuffix: true })}</span>\r\n                  </div>\r\n                  <div className=\"mt-1 font-medium text-sm text-gray-100 line-clamp-2\">{review.title}</div>\r\n                  <div className=\"mt-2 text-[11px] text-gray-500\">\r\n                    {review.sections.length} sections • {review.claims.length} claims\r\n                  </div>\r\n                </button>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </div>\r\n    </aside>\r\n  );\r\n}\r\n\r\ninterface EmptyStateProps {\r\n  onCreate(type: IngestType): void;\r\n}\r\n\r\nfunction EmptyState({ onCreate }: EmptyStateProps) {\r\n  return (\r\n    <div className=\"flex h-full flex-col items-center justify-center gap-4 text-center text-sm text-gray-400\">\r\n      <div className=\"rounded-full border border-dashed border-gray-700/60 bg-gray-800/30 p-6\">\r\n        <Shield size={48} className=\"text-purple-400\" />\r\n      </div>\r\n      <div className=\"space-y-2\">\r\n        <h2 className=\"text-xl font-semibold text-gray-100\">Start your first review</h2>\r\n        <p>Upload a PDF/DOCX or ingest a web article to analyze claims, entities, and timelines.</p>\r\n      </div>\r\n      <div className=\"flex gap-3\">\r\n        <button\r\n          onClick={() => onCreate('pdf')}\r\n          className=\"rounded bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow hover:bg-indigo-500 transition-colors\"\r\n        >\r\n          Upload document\r\n        </button>\r\n        <button\r\n          onClick={() => onCreate('web')}\r\n          className=\"rounded border border-gray-700 px-4 py-2 text-sm font-medium text-gray-200 hover:border-gray-600\"\r\n        >\r\n          Ingest web page\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface IngestFormProps {\r\n  ingestType: IngestType;\r\n  ingestUrl: string;\r\n  loading: boolean;\r\n  uploadProgress: number | null;\r\n  error: string | null;\r\n  fileToIngest: File | null;\r\n  onTypeChange(type: IngestType): void;\r\n  onUrlChange(value: string): void;\r\n  onFileSelect(event: React.ChangeEvent<HTMLInputElement>): void;\r\n  onSubmit(): void;\r\n  onCancel(): void;\r\n}\r\n\r\nfunction IngestForm({\r\n  ingestType,\r\n  ingestUrl,\r\n  loading,\r\n  uploadProgress,\r\n  error,\r\n  fileToIngest,\r\n  onTypeChange,\r\n  onUrlChange,\r\n  onFileSelect,\r\n  onSubmit,\r\n  onCancel,\r\n}: IngestFormProps) {\r\n  return (\r\n    <div className=\"flex max-w-3xl flex-col gap-6 px-10 py-12\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-semibold text-gray-100\">Ingest document</h2>\r\n          <p className=\"text-sm text-gray-400\">\r\n            Ingest a file or web article to analyze claims and generate verification reports.\r\n          </p>\r\n        </div>\r\n        <button\r\n          onClick={onCancel}\r\n          className=\"rounded-full border border-gray-700 bg-gray-800/40 p-2 text-gray-400 hover:bg-gray-800/60\"\r\n        >\r\n          <X size={16} />\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"rounded border border-gray-800/60 bg-gray-900/40 p-6\">\r\n        <label className=\"mb-3 block text-xs font-semibold uppercase tracking-wide text-gray-500\">\r\n          Source type\r\n        </label>\r\n        <div className=\"flex gap-3\">\r\n          {(['pdf', 'docx', 'web'] as IngestType[]).map((type) => (\r\n            <button\r\n              key={type}\r\n              onClick={() => onTypeChange(type)}\r\n              className={`rounded-lg border px-3 py-2 text-sm capitalize transition-colors ${\r\n                ingestType === type\r\n                  ? 'border-purple-500/50 bg-purple-500/10 text-purple-200'\r\n                  : 'border-gray-700/50 bg-gray-800/40 text-gray-300 hover:border-gray-600'\r\n              }`}\r\n            >\r\n              {type}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {ingestType === 'web' ? (\r\n        <div className=\"rounded border border-gray-800/60 bg-gray-900/40 p-6\">\r\n          <label className=\"block text-sm font-medium text-gray-300\">\r\n            Web URL\r\n          </label>\r\n          <input\r\n            type=\"url\"\r\n            value={ingestUrl}\r\n            onChange={(e) => onUrlChange(e.target.value)}\r\n            placeholder=\"https://example.com/article\"\r\n            className=\"mt-2 w-full rounded border border-gray-700 bg-gray-800 px-3 py-2 text-sm text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n          />\r\n          <p className=\"mt-2 text-xs text-gray-500\">\r\n            OmniBrowser will fetch the article, strip boilerplate, and analyze claims.\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"rounded border border-dashed border-gray-700 bg-gray-900/30 p-6 text-center\">\r\n          <label className=\"block text-sm font-medium text-gray-300 mb-3\">\r\n            Upload {ingestType.toUpperCase()} file\r\n          </label>\r\n          <input\r\n            type=\"file\"\r\n            accept=\".pdf,.docx\"\r\n            onChange={onFileSelect}\r\n            className=\"mx-auto block text-sm text-gray-300\"\r\n          />\r\n          {fileToIngest && (\r\n            <p className=\"mt-3 text-xs text-gray-400\">\r\n              Selected: {fileToIngest.name} ({Math.round(fileToIngest.size / 1024)} KB)\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"rounded border border-red-500/40 bg-red-500/10 px-4 py-2 text-xs text-red-200\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex items-center gap-3\">\r\n        <button\r\n          onClick={onSubmit}\r\n          disabled={loading}\r\n          className=\"rounded bg-purple-600 px-4 py-2 text-sm font-medium text-white shadow hover:bg-purple-500 disabled:opacity-50\"\r\n        >\r\n          {loading ? 'Processing…' : 'Ingest'}\r\n        </button>\r\n        <button\r\n          onClick={onCancel}\r\n          className=\"rounded border border-gray-700 px-4 py-2 text-sm text-gray-300 hover:border-gray-600\"\r\n        >\r\n          Cancel\r\n        </button>\r\n        {uploadProgress !== null && (\r\n          <div className=\"flex items-center gap-2 text-xs text-gray-400\">\r\n            <Loader2 size={14} className=\"animate-spin text-purple-400\" />\r\n            <span>Progress {uploadProgress}%</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface DocumentReviewViewProps {\r\n  review: DocumentReview;\r\n  onReverify(): void;\r\n  onExport(format: 'markdown' | 'html', style: 'apa' | 'mla' | 'chicago' | 'ieee' | 'harvard'): void;\r\n  onDelete(): void;\r\n}\r\n\r\nfunction DocumentReviewView({ review, onReverify, onExport, onDelete }: DocumentReviewViewProps) {\r\n  const [selectedClaimId, setSelectedClaimId] = useState<string | null>(null);\r\n  const [showComments, setShowComments] = useState(true);\r\n  const [comments, setComments] = useState<Comment[]>([]);\r\n  const [pdfPath, setPdfPath] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (review.type === 'pdf') {\r\n      setPdfPath(`omnibrowser://document/${review.id}`);\r\n    } else {\r\n      setPdfPath(null);\r\n    }\r\n  }, [review]);\r\n\r\n  const timeline = review.timeline ?? [];\r\n  const factHighlights = review.factHighlights ?? [];\r\n  const assumptions = review.assumptions ?? [];\r\n  const auditTrail = review.auditTrail ?? [];\r\n  const entityGraph = useMemo(() => {\r\n    if (review.entityGraph) return review.entityGraph;\r\n    return review.entities.map((entity) => ({\r\n      name: entity.name,\r\n      count: entity.occurrences.length,\r\n      type: entity.type,\r\n      connections: review.claims\r\n        .filter((claim) => claim.text.toLowerCase().includes(entity.name.toLowerCase()))\r\n        .slice(0, 3)\r\n        .map((claim) => claim.id),\r\n    }));\r\n  }, [review.entityGraph, review.entities, review.claims]);\r\n\r\n  const highlightsBySection = useMemo(\r\n    () => groupHighlightsBySection(factHighlights, review.sections),\r\n    [factHighlights, review.sections]\r\n  );\r\n\r\n  const verificationSummary = useMemo(() => {\r\n    const total = review.claims.length;\r\n    const verified = review.claims.filter(c => c.verification.status === 'verified').length;\r\n    const disputed = review.claims.filter(c => c.verification.status === 'disputed').length;\r\n    const unverified = total - verified - disputed;\r\n    return {\r\n      total,\r\n      verified,\r\n      disputed,\r\n      unverified,\r\n    };\r\n  }, [review.claims]);\r\n\r\n  useEffect(() => {\r\n    if (!selectedClaimId) return;\r\n    const el = document.getElementById(`highlight-${selectedClaimId}`);\r\n    if (el) {\r\n      el.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n      el.classList.add('ring-2', 'ring-purple-400', 'ring-offset-1', 'ring-offset-[#1A1D28]');\r\n      const timeout = window.setTimeout(() => {\r\n        el.classList.remove('ring-2', 'ring-purple-400', 'ring-offset-1', 'ring-offset-[#1A1D28]');\r\n      }, 1800);\r\n      return () => window.clearTimeout(timeout);\r\n    }\r\n  }, [selectedClaimId]);\r\n\r\n  return (\r\n    <div className=\"flex h-full flex-col\">\r\n      <header className=\"flex items-start justify-between border-b border-gray-800/40 bg-gray-900/40 px-8 py-6\">\r\n        <div className=\"space-y-2\">\r\n          <h2 className=\"text-2xl font-semibold text-gray-100\">{review.title}</h2>\r\n          <div className=\"text-xs uppercase tracking-wide text-gray-500\">\r\n            {review.type.toUpperCase()} • {review.sections.length} sections • {review.entities.length} entities • {review.claims.length} claims\r\n          </div>\r\n          <div className=\"flex gap-3 text-xs text-gray-500\">\r\n            <span>Created {formatDistanceToNow(review.createdAt, { addSuffix: true })}</span>\r\n            <span>Updated {formatDistanceToNow(review.updatedAt, { addSuffix: true })}</span>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <button\r\n            onClick={onReverify}\r\n            className=\"rounded border border-purple-500/50 bg-purple-500/10 px-3 py-2 text-xs font-medium text-purple-200 hover:bg-purple-500/20\"\r\n          >\r\n            Re-run verification\r\n          </button>\r\n          <button\r\n            onClick={() => onExport('markdown', 'apa')}\r\n            className=\"rounded border border-gray-700 px-3 py-2 text-xs text-gray-300 hover:border-gray-500\"\r\n          >\r\n            Export Markdown\r\n          </button>\r\n          <button\r\n            onClick={() => onExport('html', 'apa')}\r\n            className=\"rounded border border-gray-700 px-3 py-2 text-xs text-gray-300 hover:border-gray-500\"\r\n          >\r\n            Export HTML\r\n          </button>\r\n          <button\r\n            onClick={onDelete}\r\n            className=\"rounded border border-red-500/40 bg-red-500/10 px-3 py-2 text-xs font-medium text-red-300 hover:bg-red-500/20\"\r\n          >\r\n            Delete\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"flex flex-1 overflow-hidden\">\r\n        <aside className=\"w-72 border-r border-gray-800/40 bg-[#181C27] overflow-y-auto\">\r\n          <section className=\"border-b border-gray-800/40 p-4\">\r\n            <span className=\"block text-xs uppercase tracking-wide text-gray-500\">\r\n              Verification summary\r\n            </span>\r\n            <div className=\"mt-3 space-y-2 text-xs\">\r\n              <SummaryRow label=\"Total claims\" value={verificationSummary.total} />\r\n              <SummaryRow label=\"Verified\" value={verificationSummary.verified} tone=\"success\" />\r\n              <SummaryRow label=\"Disputed\" value={verificationSummary.disputed} tone=\"warning\" />\r\n              <SummaryRow label=\"Unverified\" value={verificationSummary.unverified} tone=\"neutral\" />\r\n            </div>\r\n          </section>\r\n\r\n          {factHighlights.length > 0 && (\r\n            <FactHighlightsPanel\r\n              highlights={factHighlights}\r\n              selectedId={selectedClaimId}\r\n              onSelect={setSelectedClaimId}\r\n            />\r\n          )}\r\n\r\n          {assumptions.length > 0 && (\r\n            <AssumptionsPanel assumptions={assumptions} onSelect={setSelectedClaimId} />\r\n          )}\r\n\r\n          <EntityGraphPanel graph={entityGraph} onSelect={setSelectedClaimId} />\r\n          <TimelinePanel timeline={timeline} />\r\n        </aside>\r\n\r\n        <section className=\"flex-1 overflow-y-auto\">\r\n          <article className=\"space-y-6 p-8\">\r\n            {review.sections.map((section, idx) => {\r\n              const sectionHighlights = highlightsBySection.get(section.title) ?? [];\r\n              const headingSize = Math.max(2, 4 - Math.min(section.level, 3));\r\n              return (\r\n                <div key={section.title + idx} className=\"space-y-2\">\r\n                  <h3 className={`font-semibold text-gray-100 text-${headingSize}xl`}>\r\n                    {section.title}\r\n                  </h3>\r\n                  <p className=\"text-sm text-gray-300 leading-relaxed whitespace-pre-wrap\">\r\n                    {renderSectionContent(section, sectionHighlights, selectedClaimId)}\r\n                  </p>\r\n                </div>\r\n              );\r\n            })}\r\n          </article>\r\n\r\n          {auditTrail.length > 0 && (\r\n            <AuditTrailTable auditTrail={auditTrail} onSelect={setSelectedClaimId} />\r\n          )}\r\n        </section>\r\n\r\n        <aside className=\"w-96 border-l border-gray-800/40 bg-[#181C27] flex flex-col\">\r\n          <header className=\"flex items-center justify-between border-b border-gray-800/40 px-5 py-3\">\r\n            <h3 className=\"text-sm font-semibold text-gray-100\">Claim verification</h3>\r\n            <button\r\n              onClick={() => setShowComments(!showComments)}\r\n              className=\"text-xs text-gray-400 hover:text-gray-200\"\r\n            >\r\n              {showComments ? 'Hide comments' : 'Show comments'}\r\n            </button>\r\n          </header>\r\n\r\n          <div className=\"flex-1 overflow-y-auto\">\r\n            <ul className=\"divide-y divide-gray-800/40\">\r\n              {review.claims.map((claim) => (\r\n                <motion.li\r\n                  key={claim.id}\r\n                  layout\r\n                  className={`cursor-pointer px-5 py-4 hover:bg-gray-800/30 transition-colors ${\r\n                    selectedClaimId === claim.id ? 'bg-gray-800/50' : ''\r\n                  }`}\r\n                  onClick={() => setSelectedClaimId(claim.id)}\r\n                >\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-xs uppercase tracking-wide text-gray-500\">Claim</span>\r\n                    <StatusPill status={claim.verification.status} />\r\n                  </div>\r\n                  <p className=\"mt-2 text-sm text-gray-200 leading-relaxed line-clamp-3\">\r\n                    {claim.text}\r\n                  </p>\r\n                  <div className=\"mt-2 text-[11px] text-gray-500\">\r\n                    Confidence {(claim.verification.confidence * 100).toFixed(0)}% • {claim.section || 'Unknown section'}\r\n                  </div>\r\n                  <div className=\"mt-3 space-y-1\">\r\n                    {claim.verification.sources.slice(0, 3).map((source, idx) => (\r\n                      <div key={`${claim.id}-src-${idx}`} className=\"flex items-center gap-2 text-[11px] text-gray-400\">\r\n                        <span className={source.supports ? 'text-emerald-400' : 'text-amber-400'}>\r\n                          {source.supports ? 'Supports' : 'Disputes'}\r\n                        </span>\r\n                        <span className=\"line-clamp-1\">{source.title}</span>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </motion.li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n\r\n          {showComments && (\r\n            <CommentsPanel\r\n              comments={comments}\r\n              onAddComment={(comment) => {\r\n                setComments((prev) => [\r\n                  ...prev,\r\n                  {\r\n                    id: `comment_${Date.now()}`,\r\n                    createdAt: Date.now(),\r\n                    ...comment,\r\n                  },\r\n                ]);\r\n              }}\r\n              onDeleteComment={(id) => setComments((prev) => prev.filter((comment) => comment.id !== id))}\r\n              currentPage={1}\r\n            />\r\n          )}\r\n        </aside>\r\n      </div>\r\n\r\n      {pdfPath && (\r\n        <AnimatePresence>\r\n          <motion.div\r\n            key=\"pdf\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-6 z-50 overflow-hidden rounded-xl border border-gray-700/70 bg-[#0F131F]/95 shadow-2xl backdrop-blur\"\r\n          >\r\n            <header className=\"flex items-center justify-between border-b border-gray-800/60 px-4 py-2 text-sm text-gray-300\">\r\n              <span>Document viewer</span>\r\n              <button\r\n                onClick={() => setPdfPath(null)}\r\n                className=\"rounded-full border border-gray-700 bg-gray-800/50 p-1 text-gray-400 hover:bg-gray-800/70\"\r\n              >\r\n                <X size={14} />\r\n              </button>\r\n            </header>\r\n            <PDFViewer filePath={pdfPath} onPageChange={() => {}} />\r\n          </motion.div>\r\n        </AnimatePresence>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction groupHighlightsBySection(highlights: FactHighlight[], sections: DocumentReview['sections']) {\r\n  const map = new Map<string, FactHighlight[]>();\r\n  if (highlights.length === 0) return map;\r\n\r\n  highlights.forEach((highlight) => {\r\n    const section =\r\n      sections.find(\r\n        (sec) =>\r\n          highlight.position >= sec.startPosition && highlight.position < sec.endPosition\r\n      ) || sections.find((sec) => sec.title === highlight.section);\r\n    const key = section?.title || highlight.section || 'Document';\r\n    const list = map.get(key) ?? [];\r\n    list.push(highlight);\r\n    map.set(key, list);\r\n  });\r\n\r\n  return map;\r\n}\r\n\r\nconst highlightTone: Record<FactHighlight['importance'], string> = {\r\n  verified: 'bg-emerald-500/20 text-emerald-100 border border-emerald-500/30',\r\n  disputed: 'bg-amber-500/20 text-amber-100 border border-amber-500/30',\r\n  unverified: 'bg-slate-500/20 text-slate-100 border border-slate-500/30',\r\n};\r\n\r\nfunction renderSectionContent(\r\n  section: DocumentReview['sections'][number],\r\n  highlights: FactHighlight[],\r\n  activeClaimId: string | null\r\n) {\r\n  if (highlights.length === 0) return section.content.trim();\r\n\r\n  const content = section.content;\r\n  const lower = content.toLowerCase();\r\n  const sorted = [...highlights].sort((a, b) => a.position - b.position);\r\n  const nodes: Array<string | JSX.Element> = [];\r\n  let cursor = 0;\r\n\r\n  sorted.forEach((highlight) => {\r\n    const needle = highlight.text.trim();\r\n    if (!needle) return;\r\n\r\n    const search = needle.toLowerCase();\r\n    let index = lower.indexOf(search, cursor);\r\n    if (index === -1) {\r\n      index = lower.indexOf(search, 0);\r\n      if (index === -1) return;\r\n    }\r\n\r\n    if (index > cursor) {\r\n      nodes.push(content.slice(cursor, index));\r\n    }\r\n\r\n    const markedText = content.slice(index, index + needle.length);\r\n    nodes.push(\r\n      <mark\r\n        key={`${highlight.claimId}-${index}`}\r\n        id={`highlight-${highlight.claimId}`}\r\n        className={`rounded px-1 ${highlightTone[highlight.importance]} ${\r\n          activeClaimId === highlight.claimId ? 'ring-2 ring-purple-400 ring-offset-1 ring-offset-[#1A1D28]' : ''\r\n        }`}\r\n      >\r\n        {markedText}\r\n      </mark>\r\n    );\r\n    cursor = index + needle.length;\r\n  });\r\n\r\n  if (cursor < content.length) {\r\n    nodes.push(content.slice(cursor));\r\n  }\r\n\r\n  return nodes;\r\n}\r\n\r\nfunction FactHighlightsPanel({\r\n  highlights,\r\n  selectedId,\r\n  onSelect,\r\n}: {\r\n  highlights: FactHighlight[];\r\n  selectedId: string | null;\r\n  onSelect(id: string): void;\r\n}) {\r\n  const ordered = [...highlights].sort((a, b) => {\r\n    const rank = { verified: 0, disputed: 1, unverified: 2 } as const;\r\n    return rank[a.importance] - rank[b.importance];\r\n  });\r\n\r\n  return (\r\n    <section className=\"border-b border-gray-800/40 p-4 space-y-3\">\r\n      <div className=\"flex items-center gap-2 text-emerald-200\">\r\n        <Highlighter size={14} />\r\n        <span className=\"text-xs uppercase tracking-wide\">Fact highlights</span>\r\n      </div>\r\n      <ul className=\"space-y-2 text-xs\">\r\n        {ordered.map((highlight) => (\r\n          <li key={highlight.claimId}>\r\n            <button\r\n              onClick={() => onSelect(highlight.claimId)}\r\n              className={`w-full rounded border px-2 py-2 text-left transition-colors ${\r\n                selectedId === highlight.claimId\r\n                  ? 'border-purple-500/40 bg-purple-500/10 text-purple-100'\r\n                  : 'border-emerald-500/30 bg-emerald-500/5 text-emerald-100 hover:bg-emerald-500/10'\r\n              }`}\r\n            >\r\n              <div className=\"flex items-center justify-between gap-2\">\r\n                <span className=\"font-semibold\">{highlight.section || 'Document'}</span>\r\n                <span className=\"text-[10px] uppercase tracking-wide\">\r\n                  {highlight.importance}\r\n                </span>\r\n              </div>\r\n              <p className=\"mt-1 text-[11px] text-emerald-100/90 line-clamp-3\">{highlight.text}</p>\r\n            </button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </section>\r\n  );\r\n}\r\n\r\nconst assumptionTone: Record<AssumptionHighlight['severity'], string> = {\r\n  low: 'border-sky-500/30 bg-sky-500/5 text-sky-100',\r\n  medium: 'border-amber-500/30 bg-amber-500/10 text-amber-100',\r\n  high: 'border-red-500/40 bg-red-500/10 text-red-100',\r\n};\r\n\r\nfunction AssumptionsPanel({\r\n  assumptions,\r\n  onSelect,\r\n}: {\r\n  assumptions: AssumptionHighlight[];\r\n  onSelect(id: string): void;\r\n}) {\r\n  return (\r\n    <section className=\"border-b border-gray-800/40 p-4 space-y-3\">\r\n      <div className=\"flex items-center gap-2 text-amber-200\">\r\n        <AlertTriangle size={14} />\r\n        <span className=\"text-xs uppercase tracking-wide\">Assumptions & gaps</span>\r\n      </div>\r\n      <ul className=\"space-y-2 text-xs\">\r\n        {assumptions.map((assumption) => (\r\n          <li key={assumption.claimId}>\r\n            <button\r\n              onClick={() => onSelect(assumption.claimId)}\r\n              className={`w-full rounded border px-2 py-2 text-left ${assumptionTone[assumption.severity]} hover:opacity-90 transition-opacity`}\r\n            >\r\n              <div className=\"flex items-center justify-between gap-2\">\r\n                <span className=\"font-semibold\">{assumption.section || 'Document'}</span>\r\n                <span className=\"text-[10px] uppercase tracking-wide\">{assumption.severity}</span>\r\n              </div>\r\n              <p className=\"mt-1 text-[11px] opacity-90\">{assumption.text}</p>\r\n              <p className=\"mt-1 text-[10px] opacity-70\">{assumption.rationale}</p>\r\n            </button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </section>\r\n  );\r\n}\r\n\r\nfunction EntityGraphPanel({\r\n  graph,\r\n  onSelect,\r\n}: {\r\n  graph: NonNullable<DocumentReview['entityGraph']>;\r\n  onSelect(id: string): void;\r\n}) {\r\n  return (\r\n    <section className=\"border-b border-gray-800/40 p-4 space-y-3\">\r\n      <div className=\"flex items-center gap-2 text-blue-200\">\r\n        <GitBranch size={14} />\r\n        <span className=\"text-xs uppercase tracking-wide\">Entity graph</span>\r\n      </div>\r\n      <ul className=\"space-y-2 text-xs text-gray-300\">\r\n        {graph.slice(0, 12).map((node) => (\r\n          <li\r\n            key={node.name}\r\n            className=\"rounded border border-blue-500/30 bg-blue-500/5 px-2 py-2\"\r\n          >\r\n            <div className=\"flex items-center justify-between gap-2\">\r\n              <span className=\"font-semibold text-blue-100\">{node.name}</span>\r\n              <span className=\"text-[10px] uppercase tracking-wide text-blue-200\">\r\n                {node.type} • {node.count}\r\n              </span>\r\n            </div>\r\n            {node.connections.length > 0 && (\r\n              <div className=\"mt-1 flex flex-wrap gap-1\">\r\n                {node.connections.map((connection) => (\r\n                  <button\r\n                    key={connection}\r\n                    onClick={() => onSelect(connection)}\r\n                    className=\"rounded-full border border-blue-500/30 px-2 py-0.5 text-[10px] text-blue-100 hover:bg-blue-500/20\"\r\n                  >\r\n                    Jump to claim\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </section>\r\n  );\r\n}\r\n\r\nfunction TimelinePanel({ timeline }: { timeline: DocumentReview['timeline'] }) {\r\n  return (\r\n    <section className=\"p-4 space-y-3\">\r\n      <div className=\"flex items-center gap-2 text-gray-300\">\r\n        <Clock3 size={14} />\r\n        <span className=\"text-xs uppercase tracking-wide\">Timeline events</span>\r\n      </div>\r\n      {timeline.length === 0 ? (\r\n        <div className=\"text-xs text-gray-500\">No events detected.</div>\r\n      ) : (\r\n        <ul className=\"space-y-3 text-xs text-gray-300\">\r\n          {timeline.map((event, idx) => (\r\n            <li key={`${event.date}-${idx}`} className=\"relative pl-4\">\r\n              <span className=\"absolute left-0 top-1 h-2 w-2 rounded-full bg-purple-400\" />\r\n              <div className=\"font-semibold text-gray-200\">{event.date}</div>\r\n              <div className=\"text-[11px] text-gray-400\">{event.description}</div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n\r\nfunction AuditTrailTable({\r\n  auditTrail,\r\n  onSelect,\r\n}: {\r\n  auditTrail: AuditTrailEntry[];\r\n  onSelect(id: string): void;\r\n}) {\r\n  return (\r\n    <section className=\"px-8 pb-8\">\r\n      <div className=\"rounded border border-gray-800 bg-neutral-900/40\">\r\n        <header className=\"flex items-center justify-between border-b border-gray-800 px-4 py-3\">\r\n          <div className=\"flex items-center gap-2 text-gray-200\">\r\n            <BookOpenCheck size={16} />\r\n            <h3 className=\"text-sm font-semibold\">Audit trail</h3>\r\n          </div>\r\n          <span className=\"text-[11px] text-gray-500\">Linked to source evidence</span>\r\n        </header>\r\n        <div className=\"max-h-64 overflow-y-auto\">\r\n          <table className=\"min-w-full divide-y divide-gray-800 text-xs text-gray-300\">\r\n            <thead className=\"bg-neutral-900/80 text-[11px] uppercase tracking-wide text-gray-500\">\r\n              <tr>\r\n                <th className=\"px-3 py-2 text-left\">Claim</th>\r\n                <th className=\"px-3 py-2 text-left\">Location</th>\r\n                <th className=\"px-3 py-2 text-left\">Status</th>\r\n                <th className=\"px-3 py-2 text-left\">Source</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-800\">\r\n              {auditTrail.map((entry) => (\r\n                <tr key={entry.claimId} className=\"hover:bg-neutral-800/40\">\r\n                  <td className=\"px-3 py-2\">\r\n                    <button\r\n                      className=\"text-indigo-200 hover:text-indigo-100\"\r\n                      onClick={() => onSelect(entry.claimId)}\r\n                    >\r\n                      Claim {entry.claimId.split('_').pop()}\r\n                    </button>\r\n                  </td>\r\n                  <td className=\"px-3 py-2 text-[11px] text-gray-400\">\r\n                    {entry.section || '—'}\r\n                    {entry.page !== undefined && (\r\n                      <span className=\"ml-1\">• p.{entry.page}</span>\r\n                    )}\r\n                    {entry.line !== undefined && (\r\n                      <span className=\"ml-1\">• line {entry.line}</span>\r\n                    )}\r\n                  </td>\r\n                  <td className=\"px-3 py-2\">\r\n                    <StatusPill status={entry.status} />\r\n                  </td>\r\n                  <td className=\"px-3 py-2 text-[11px] text-gray-400\">\r\n                    {entry.link ? (\r\n                      <a href={entry.link} target=\"_blank\" rel=\"noreferrer\" className=\"text-indigo-300 hover:text-indigo-100\">\r\n                        Open source\r\n                      </a>\r\n                    ) : (\r\n                      '—'\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nfunction SummaryRow({\r\n  label,\r\n  value,\r\n  tone = 'neutral',\r\n}: {\r\n  label: string;\r\n  value: number;\r\n  tone?: 'neutral' | 'success' | 'warning';\r\n}) {\r\n  const color =\r\n    tone === 'success'\r\n      ? 'text-emerald-300'\r\n      : tone === 'warning'\r\n      ? 'text-amber-300'\r\n      : 'text-gray-300';\r\n  return (\r\n    <div className=\"flex items-center justify-between text-xs text-gray-400\">\r\n      <span>{label}</span>\r\n      <span className={`font-semibold ${color}`}>{value}</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction StatusPill({ status }: { status: DocumentReview['claims'][number]['verification']['status'] }) {\r\n  const tone =\r\n    status === 'verified'\r\n      ? 'bg-emerald-500/10 text-emerald-200 border-emerald-500/30'\r\n      : status === 'disputed'\r\n      ? 'bg-amber-500/10 text-amber-200 border-amber-500/30'\r\n      : 'bg-gray-500/10 text-gray-300 border-gray-500/30';\r\n  return (\r\n    <span className={`rounded-full border px-2 py-0.5 text-[10px] uppercase tracking-wide ${tone}`}>\r\n      {status}\r\n    </span>\r\n  );\r\n}\r\n","export interface ImageEngine {\r\n  generate(prompt: string): string[];\r\n}\r\n\r\nexport class MockImageEngine implements ImageEngine {\r\n  generate(prompt: string) {\r\n    const seed = encodeURIComponent(prompt || 'omni');\r\n    return [\r\n      `https://picsum.photos/seed/${seed}-1/512/384`,\r\n      `https://picsum.photos/seed/${seed}-2/512/384`,\r\n      `https://picsum.photos/seed/${seed}-3/512/384`,\r\n    ];\r\n  }\r\n}\r\n\r\n\r\n","import { useState } from 'react';\r\nimport { MockImageEngine } from './engines';\r\n\r\nexport default function ImagesPanel() {\r\n  const engine = new MockImageEngine();\r\n  const [prompt, setPrompt] = useState('a scenic mountain');\r\n  const [imgs, setImgs] = useState<string[]>([]);\r\n  return (\r\n    <div className=\"p-3 space-y-2\">\r\n      <form onSubmit={(e)=>{ e.preventDefault(); setImgs(engine.generate(prompt)); }}>\r\n        <input className=\"w-full bg-neutral-800 rounded px-3 py-2 text-sm\" value={prompt} onChange={(e)=>setPrompt(e.target.value)} />\r\n      </form>\r\n      <div className=\"grid grid-cols-3 gap-2\">\r\n        {imgs.map((src, i)=> (<div key={i} className=\"bg-neutral-800 h-32 flex items-center justify-center text-xs\">{src}</div>))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","import { useState } from 'react';\r\n\r\nexport default function ThreatsPanel() {\r\n  const [url, setUrl] = useState('');\r\n  const [result, setResult] = useState<any>(null);\r\n  return (\r\n    <div className=\"p-3 space-y-2\">\r\n      <form onSubmit={async (e)=>{ e.preventDefault(); const r = await window.api?.threats?.scanUrl?.(url); setResult(r); }}>\r\n        <input className=\"w-full bg-neutral-800 rounded px-3 py-2 text-sm\" value={url} onChange={(e)=>setUrl(e.target.value)} placeholder=\"Enter URL\" />\r\n      </form>\r\n      {result && (\r\n        <pre className=\"text-xs bg-neutral-900 p-2 rounded overflow-auto\">{JSON.stringify(result, null, 2)}</pre>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","import { useEffect, useState } from 'react';\r\n\r\ntype Node = { key: string; title?: string; type?: string };\r\ntype Edge = { src: string; dst: string; rel?: string };\r\n\r\nexport default function GraphMindPanel() {\r\n  const [nodes, setNodes] = useState<Node[]>([]);\r\n  const [edges, setEdges] = useState<Edge[]>([]);\r\n\r\n  useEffect(()=>{ (async ()=>{ const all = await (window as any).api?.graph?.all?.(); if (all) { setNodes(all.nodes); setEdges(all.edges);} })(); },[]);\r\n  useEffect(()=>{\r\n    const onAuto = async (payload: any)=>{\r\n      const g = (window as any).graph;\r\n      if (g && payload?.nodes) {\r\n        for (const n of payload.nodes) await g.add(n, []);\r\n        if (payload.edges?.length) await g.add({ key: payload.nodes[0]?.key || 'tmp' }, payload.edges);\r\n      }\r\n      const all = await (window as any).api?.graph?.all?.();\r\n      if (all) { setNodes(all.nodes); setEdges(all.edges);}    \r\n    };\r\n    (window as any).graph?.onAuto?.(onAuto);\r\n  },[]);\r\n\r\n  return (\r\n    <div className=\"h-full w-full p-3\">\r\n      <h3 className=\"font-medium mb-2\">GraphMind</h3>\r\n      <div className=\"text-xs text-neutral-300 mb-2\">Nodes: {nodes.length} · Edges: {edges.length}</div>\r\n      <div className=\"grid grid-cols-4 gap-2 text-sm\">\r\n        {nodes.map(n => (\r\n          <div key={n.key} className=\"border border-neutral-800 rounded p-2\">\r\n            <div className=\"font-medium\">{n.title || n.key}</div>\r\n            <div className=\"text-neutral-400\">{n.type}</div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","/**\r\n * MainView - Browser webview container with real-time updates\r\n * BrowserView is managed by Electron main process, we show it here\r\n */\r\n\r\nimport { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { useTabsStore } from '../../state/tabsStore';\r\nimport { ipcEvents } from '../../lib/ipc-events';\r\nimport { ipc } from '../../lib/ipc-typed';\r\nimport { isDevEnv } from '../../lib/env';\r\n\r\nexport function MainView() {\r\n  const { activeId, tabs } = useTabsStore();\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  // Initialize browserReady - if tabs exist, assume ready immediately\r\n  const [browserReady, setBrowserReady] = useState(() => tabs.length > 0);\r\n  const [activeTabUrl, setActiveTabUrl] = useState<string>('');\r\n  const [activeTabTitle, setActiveTabTitle] = useState<string>('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  const isElectron = useMemo(() => typeof window !== 'undefined' && Boolean((window as any).electron), []);\r\n  const isDev = useMemo(() => isDevEnv(), []);\r\n\r\n  const canEmbedInIframe = useMemo(() => {\r\n    if (!activeTabUrl) return false;\r\n    try {\r\n      const url = new URL(activeTabUrl, activeTabUrl.startsWith('http') ? undefined : 'https://localhost');\r\n      return url.protocol === 'http:' || url.protocol === 'https:';\r\n    } catch {\r\n      return false;\r\n    }\r\n  }, [activeTabUrl]);\r\n\r\n  // Update browser view bounds when container size changes\r\n  useEffect(() => {\r\n    if (!containerRef.current || !activeId) return;\r\n\r\n    const updateBounds = () => {\r\n      // BrowserView bounds are managed by main process via setupBrowserViewResize\r\n      // We just ensure the container exists and is ready\r\n      const container = containerRef.current;\r\n      if (container) {\r\n        // Container is ready for BrowserView positioning\r\n        // Main process will position BrowserView based on window bounds\r\n      }\r\n    };\r\n\r\n    updateBounds();\r\n\r\n    // Listen for window resize to trigger bounds update\r\n    const handleResize = () => {\r\n      updateBounds();\r\n    };\r\n    \r\n    window.addEventListener('resize', handleResize);\r\n    const resizeObserver = new ResizeObserver(updateBounds);\r\n    \r\n    if (containerRef.current) {\r\n      resizeObserver.observe(containerRef.current);\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n      resizeObserver.disconnect();\r\n    };\r\n  }, [activeId, tabs]);\r\n\r\n  // Listen for tab updates in real-time\r\n  useEffect(() => {\r\n    const handleTabUpdate = (tabList: any[]) => {\r\n      if (!Array.isArray(tabList)) return;\r\n      \r\n      const activeTab = tabList.find((t: any) => t.id === activeId);\r\n      if (activeTab) {\r\n        setActiveTabUrl(activeTab.url || '');\r\n        setActiveTabTitle(activeTab.title || 'New Tab');\r\n        // Mark as ready immediately when we have an active tab with content\r\n        // Don't wait for URL to load - BrowserView should be visible even for about:blank\r\n        setBrowserReady(true);\r\n        setIsLoading(false);\r\n      } else if (tabList.length > 0) {\r\n        // Tabs exist but no active one - mark as ready anyway\r\n        // The first tab will become active automatically\r\n        setBrowserReady(true);\r\n        setIsLoading(false);\r\n        const firstTab = tabList[0];\r\n        if (firstTab) {\r\n          setActiveTabUrl(firstTab.url || '');\r\n          setActiveTabTitle(firstTab.title || 'New Tab');\r\n        }\r\n      } else if (tabList.length === 0) {\r\n        // No tabs at all\r\n        setBrowserReady(false);\r\n        setIsLoading(false);\r\n        setActiveTabUrl('');\r\n        setActiveTabTitle('');\r\n      }\r\n    };\r\n\r\n    // Listen via IPC events\r\n    const unsubscribe = ipcEvents.on('tabs:updated', handleTabUpdate);\r\n\r\n    // Also listen for navigation state and progress\r\n    const unsubscribeProgress = ipcEvents.on<{ tabId: string; progress: number }>('tabs:progress', (data) => {\r\n      if (data.tabId === activeId || !data.tabId) {\r\n        setProgress(data.progress);\r\n        setIsLoading(data.progress > 0 && data.progress < 100);\r\n        // When progress starts or completes, BrowserView is ready\r\n        if (data.progress > 0 || data.progress === 100) {\r\n          setBrowserReady(true);\r\n        }\r\n      }\r\n    });\r\n\r\n    // Load initial tab data (wait for IPC to be ready)\r\n    const loadInitialData = async () => {\r\n      try {\r\n        // Wait for IPC to be ready before making calls\r\n        if (!window.ipc || typeof window.ipc.invoke !== 'function') {\r\n          // Wait a bit and retry\r\n          await new Promise(resolve => setTimeout(resolve, 500));\r\n        }\r\n        \r\n        const tabList = await ipc.tabs.list();\r\n        if (Array.isArray(tabList) && tabList.length > 0) {\r\n          handleTabUpdate(tabList);\r\n          setBrowserReady(true);\r\n          setIsLoading(false);\r\n        } else if (tabs.length > 0) {\r\n          // If store has tabs but IPC returned empty, use store data\r\n          setBrowserReady(true);\r\n          setIsLoading(false);\r\n        }\r\n      } catch {\r\n        // Silently handle - will retry on next update\r\n        // On error, if tabs exist in store, mark as ready to avoid stuck loading\r\n        if (tabs.length > 0 && activeId) {\r\n          setBrowserReady(true);\r\n          setIsLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Delay initial load slightly to allow IPC to initialize\r\n    setTimeout(() => {\r\n      loadInitialData();\r\n    }, 300);\r\n\r\n    return () => {\r\n      unsubscribe();\r\n      unsubscribeProgress();\r\n    };\r\n  }, [activeId]);\r\n\r\n  // Listen for page title updates\r\n  useEffect(() => {\r\n    if (!activeId) return;\r\n\r\n    const interval = setInterval(async () => {\r\n      try {\r\n        const tabList = await ipc.tabs.list();\r\n        const activeTab = tabList.find((t: any) => t.id === activeId);\r\n        if (activeTab) {\r\n          if (activeTab.title !== activeTabTitle) {\r\n            setActiveTabTitle(activeTab.title || 'New Tab');\r\n          }\r\n          if (activeTab.url !== activeTabUrl) {\r\n            setActiveTabUrl(activeTab.url || '');\r\n          }\r\n        }\r\n      } catch {\r\n        // Silent fail\r\n      }\r\n    }, 500); // Poll every 500ms for updates\r\n\r\n    return () => clearInterval(interval);\r\n  }, [activeId, activeTabTitle, activeTabUrl]);\r\n\r\n  // Auto-hide loading overlay immediately when tabs exist\r\n  useEffect(() => {\r\n    if (tabs.length > 0) {\r\n      // Tabs exist - BrowserView should be visible\r\n      setBrowserReady(true);\r\n      setIsLoading(false);\r\n    } else {\r\n      // No tabs, show empty state\r\n      setBrowserReady(false);\r\n      setIsLoading(false);\r\n    }\r\n  }, [tabs.length]);\r\n\r\n  // Show browser view container even when no active tab (for BrowserView positioning)\r\n  // Empty state overlay is handled by OmniDesk component\r\n\r\n  return (\r\n    <div ref={containerRef} className=\"flex-1 relative bg-white overflow-hidden w-full\">\r\n      {/* Browser Webview Container - Full Width */}\r\n      {/* BrowserView is rendered by Electron main process and positioned by window coordinates */}\r\n      {/* This container div is just for reference - BrowserView uses window coordinates, not DOM coordinates */}\r\n      <div\r\n        id=\"browser-view-container\"\r\n        style={{\r\n          position: 'absolute',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          width: '100%',\r\n          height: '100%',\r\n          pointerEvents: 'none',\r\n          zIndex: 0,\r\n        }}\r\n      />\r\n\r\n      {/* In non-Electron builds (e.g., web preview) render a safe iframe fallback */}\r\n      {!isElectron && canEmbedInIframe && (\r\n        <iframe\r\n          key={activeTabUrl}\r\n          src={activeTabUrl}\r\n          title={activeTabTitle || activeTabUrl}\r\n          className=\"absolute inset-0 h-full w-full border-0\"\r\n          style={{ zIndex: 1, pointerEvents: 'auto' }}\r\n          sandbox=\"allow-scripts allow-same-origin allow-forms allow-popups\"\r\n        />\r\n      )}\r\n\r\n      {!isElectron && !canEmbedInIframe && activeTabUrl && (\r\n        <div className=\"absolute inset-0 flex flex-col items-center justify-center gap-3 bg-white/95 px-6 text-center text-sm text-gray-600\" style={{ zIndex: 1 }}>\r\n          <span className=\"text-base font-medium text-gray-800\">Preview unavailable for this URL</span>\r\n          <p>\r\n            The current site cannot be embedded in a web preview. Open OmniBrowser desktop or copy the link below to view it.\r\n          </p>\r\n          <code className=\"max-w-full break-all rounded bg-gray-100 px-3 py-1 text-xs text-gray-700\">{activeTabUrl}</code>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Loading indicator overlay - Only show at top, don't block BrowserView */}\r\n      {isLoading && activeId && (\r\n        <div className=\"absolute top-0 left-0 right-0 h-1 bg-gray-200 z-50 pointer-events-none\">\r\n          <div \r\n            className=\"h-full bg-blue-500 transition-all duration-300\"\r\n            style={{ width: `${progress}%` }}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Fallback content when no active tab - Only show when truly no tabs */}\r\n      {(!activeId || tabs.length === 0) && (\r\n        <div className=\"absolute inset-0 h-full w-full flex items-center justify-center bg-white\" style={{ zIndex: 2, pointerEvents: 'auto' }}>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-6xl mb-4 animate-pulse\">🌐</div>\r\n            <h2 className=\"text-xl font-semibold text-gray-800 mb-2\">\r\n              OmniBrowser\r\n            </h2>\r\n            <p className=\"text-gray-500 text-sm\">\r\n              Enter a URL or search to get started\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Loading overlay - Only show briefly on initial load if no tabs exist yet */}\r\n      {/* Once tabs exist, BrowserView should be visible immediately */}\r\n      {tabs.length === 0 && !browserReady && (\r\n        <div \r\n          className=\"absolute inset-0 h-full w-full flex items-center justify-center bg-white transition-opacity duration-300\" \r\n          style={{ \r\n            zIndex: 2, \r\n            pointerEvents: 'none',\r\n          }}\r\n        >\r\n          <div className=\"text-center\">\r\n            <div className=\"text-6xl mb-4 animate-pulse\">🌐</div>\r\n            <h2 className=\"text-xl font-semibold text-gray-800 mb-2\">\r\n              OmniBrowser\r\n            </h2>\r\n            <p className=\"text-gray-500 text-sm\">\r\n              Initializing...\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n\r\n      {/* Debug info (can be removed in production) */}\r\n      {isDev && activeTabUrl && activeId && (\r\n        <div className=\"absolute bottom-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded opacity-50 hover:opacity-100 transition-opacity z-50 pointer-events-none\">\r\n          {activeTabTitle} - {activeTabUrl}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * ResearchSplit - Reader + Notes split pane for Research mode\r\n */\r\n\r\n// @ts-nocheck\r\n\r\nimport { useState, useEffect, useRef, useMemo } from 'react';\r\nimport { FileText, BookOpen, Save, X, PenLine, FileDown, Archive, Send } from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\nimport { useTabsStore } from '../../state/tabsStore';\r\nimport { ipc } from '../../lib/ipc-typed';\r\nimport { debounce } from 'lodash-es';\r\nimport { ResearchHighlight } from '../../types/research';\r\nimport { ipcEvents } from '../../lib/ipc-events';\r\n\r\nexport function ResearchSplit() {\r\n  const { activeId } = useTabsStore();\r\n  const [readerContent, setReaderContent] = useState<string>('');\r\n  const [notes, setNotes] = useState<string>('');\r\n  const [highlights, setHighlights] = useState<ResearchHighlight[]>([]);\r\n  const [currentUrl, setCurrentUrl] = useState<string>('');\r\n  const [exporting, setExporting] = useState<'markdown' | 'obsidian' | 'notion' | null>(null);\r\n  const readerRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Load content for current tab\r\n  useEffect(() => {\r\n    const loadContent = async () => {\r\n      if (!activeId) {\r\n        setReaderContent('');\r\n        setCurrentUrl('');\r\n        setNotes('');\r\n        setHighlights([]);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const tabs = await ipc.tabs.list();\r\n        const tab = tabs.find((t: any) => t.id === activeId);\r\n        if (!tab?.url) {\r\n          setReaderContent('');\r\n          setCurrentUrl('');\r\n          return;\r\n        }\r\n\r\n        const url = tab.url;\r\n        setCurrentUrl(url);\r\n\r\n        // Skip special pages\r\n        if (url.startsWith('about:') || url.startsWith('chrome:')) {\r\n          setReaderContent('');\r\n          setNotes('');\r\n          setHighlights([]);\r\n          return;\r\n        }\r\n\r\n        // Load saved notes for this URL\r\n        try {\r\n          const saved = (await ipc.research.getNotes(url)) as { notes?: string; highlights?: ResearchHighlight[] };\r\n          if (saved) {\r\n            setNotes(saved.notes || '');\r\n            if (Array.isArray(saved.highlights)) {\r\n              const mapped = saved.highlights.map((h) => ({\r\n                id: h.id || (crypto.randomUUID?.() ?? `hl-${Date.now()}`),\r\n                text: h.text || '',\r\n                color: h.color || '#facc15',\r\n                createdAt: h.createdAt || Date.now(),\r\n                note: h.note,\r\n              }));\r\n              setHighlights(mapped);\r\n            } else {\r\n              setHighlights([]);\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.error('Failed to load notes:', error);\r\n        }\r\n\r\n        // Extract readable content\r\n        setReaderContent('Extracting readable content...');\r\n        try {\r\n          const result = await ipc.research.extractContent(activeId) as any;\r\n          if (result?.html) {\r\n            setReaderContent(result.html);\r\n          } else if (result?.content) {\r\n            // Fallback: show plain text if no HTML\r\n            setReaderContent(`<div class=\"prose prose-invert\"><h1>${result.title || url}</h1><p>${result.content}</p></div>`);\r\n          } else {\r\n            setReaderContent('');\r\n          }\r\n        } catch (error) {\r\n          console.error('Failed to extract content:', error);\r\n          setReaderContent('');\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to load research content:', error);\r\n        setReaderContent('');\r\n      }\r\n    };\r\n\r\n    loadContent();\r\n    \r\n    // Listen for tab updates\r\n    const handleTabUpdate = () => {\r\n      loadContent();\r\n    };\r\n    \r\n    if ((window.ipc as any)?.on) {\r\n      (window.ipc as any).on('tabs:updated', handleTabUpdate);\r\n      return () => {\r\n        if ((window.ipc as any)?.removeListener) {\r\n          (window.ipc as any).removeListener('tabs:updated', handleTabUpdate);\r\n        }\r\n      };\r\n    }\r\n  }, [activeId]);\r\n\r\n  // Auto-save notes (debounced)\r\n  const saveNotes = useRef(\r\n    debounce(async (url: string, notesText: string, highlightsData: Highlight[]) => {\r\n      if (!url || url.startsWith('about:') || url.startsWith('chrome:')) return;\r\n      try {\r\n        await ipc.research.saveNotes(url, notesText, highlightsData);\r\n        console.log('Auto-saved notes for', url);\r\n      } catch (error) {\r\n        console.error('Failed to save notes:', error);\r\n      }\r\n    }, 1000)\r\n  ).current;\r\n\r\n  useEffect(() => {\r\n    if (currentUrl && (notes || highlights.length > 0)) {\r\n      saveNotes(currentUrl, notes, highlights);\r\n    }\r\n  }, [notes, highlights, currentUrl, saveNotes]);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = ipcEvents.on<{ url: string; highlight: ResearchHighlight }>('research:highlight-added', (payload) => {\r\n      if (!payload?.url || payload.url !== currentUrl) return;\r\n      setHighlights((prev) => [\r\n        ...prev,\r\n        {\r\n          id: payload.highlight.id,\r\n          text: payload.highlight.text,\r\n          color: payload.highlight.color || '#facc15',\r\n          createdAt: payload.highlight.createdAt || Date.now(),\r\n          note: payload.highlight.note,\r\n        },\r\n      ]);\r\n    });\r\n    return unsubscribe;\r\n  }, [currentUrl]);\r\n\r\n  const handleHighlightNoteChange = (id: string, nextNote: string) => {\r\n    setHighlights((prev) =>\r\n      prev.map((highlight) =>\r\n        highlight.id === id\r\n          ? {\r\n              ...highlight,\r\n              note: nextNote,\r\n            }\r\n          : highlight,\r\n      ),\r\n    );\r\n  };\r\n\r\n  const sortedHighlights = useMemo(\r\n    () => [...highlights].sort((a, b) => (b.createdAt ?? 0) - (a.createdAt ?? 0)),\r\n    [highlights],\r\n  );\r\n\r\n  const handleExport = async (format: 'markdown' | 'obsidian' | 'notion') => {\r\n    if (!currentUrl || currentUrl.startsWith('about:') || currentUrl.startsWith('chrome:')) {\r\n      return;\r\n    }\r\n\r\n    const maybeFlush = (saveNotes as any)?.flush;\r\n    if (typeof maybeFlush === 'function') {\r\n      maybeFlush();\r\n    }\r\n\r\n    try {\r\n      await ipc.research.saveNotes(currentUrl, notes, highlights);\r\n    } catch (error) {\r\n      console.error('Failed to sync notes before export:', error);\r\n    }\r\n\r\n    setExporting(format);\r\n    try {\r\n      const result = await ipc.research.export(format, [currentUrl], true);\r\n      if (result?.format === 'markdown' && result?.path) {\r\n        alert(`Markdown exported to ${result.path}`);\r\n      } else if (result?.format === 'obsidian' && result?.folder) {\r\n        alert(`Obsidian vault files saved to ${result.folder}`);\r\n      } else if (result?.format === 'notion' && Array.isArray(result?.notionPages)) {\r\n        const pages = result.notionPages\r\n          .map((page: any) => (page?.url ? `• ${page.title || 'Untitled'}\\n  ${page.url}` : `• ${page.title || 'Untitled'}`))\r\n          .join('\\n');\r\n        alert(`Synced to Notion:\\n${pages}`);\r\n      } else {\r\n        alert('Export completed.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to export:', error);\r\n      const message = error instanceof Error ? error.message : 'Failed to export';\r\n      alert(message);\r\n    } finally {\r\n      setExporting(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-full flex\">\r\n      {/* Reader Pane */}\r\n      <div className=\"flex-1 flex flex-col border-r border-gray-700/30 bg-gray-950 overflow-hidden\">\r\n        <div className=\"flex items-center justify-between px-4 py-2 border-b border-gray-800/50 bg-gray-900/50\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <BookOpen size={16} className=\"text-blue-400\" />\r\n            <span className=\"text-sm font-medium text-gray-300\">Reader</span>\r\n          </div>\r\n        </div>\r\n        <div\r\n          ref={readerRef}\r\n          className=\"flex-1 overflow-y-auto p-6 prose prose-invert max-w-none\"\r\n          style={{\r\n            color: '#e5e7eb',\r\n          }}\r\n        >\r\n          {readerContent ? (\r\n            <div\r\n              className=\"text-sm leading-relaxed\"\r\n              dangerouslySetInnerHTML={{ __html: readerContent }}\r\n            />\r\n          ) : (\r\n            <div className=\"text-center text-gray-500 py-12\">\r\n              <FileText size={48} className=\"mx-auto mb-4 opacity-50\" />\r\n              <p>No readable content available</p>\r\n              <p className=\"text-xs mt-2\">Navigate to a page to extract content</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Notes Pane */}\r\n      <div className=\"w-80 flex flex-col border-l border-gray-700/30 bg-gray-900/50 overflow-hidden\">\r\n        <div className=\"flex items-center justify-between px-4 py-2 border-b border-gray-800/50\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <FileText size={16} className=\"text-green-400\" />\r\n            <span className=\"text-sm font-medium text-gray-300\">Notes</span>\r\n          </div>\r\n          {currentUrl && (\r\n            <motion.span\r\n              className=\"text-xs text-gray-500 px-2 py-0.5 bg-gray-800/40 rounded\"\r\n              animate={{ opacity: [0.5, 1, 0.5] }}\r\n              transition={{ duration: 2, repeat: Infinity }}\r\n            >\r\n              Auto-saving...\r\n            </motion.span>\r\n          )}\r\n        </div>\r\n\r\n        {/* Highlights List */}\r\n        {sortedHighlights.length > 0 && (\r\n          <div className=\"border-b border-gray-800/50 p-3 space-y-3 max-h-52 overflow-y-auto\">\r\n            <div className=\"text-xs font-semibold text-gray-400 mb-1 flex items-center gap-2\">\r\n              <PenLine size={12} />\r\n              Highlights & notes\r\n            </div>\r\n            {sortedHighlights.map((highlight) => (\r\n              <div key={highlight.id} className=\"bg-gray-800/30 rounded-lg border border-gray-800/60 p-3 space-y-2\">\r\n                <div className=\"flex items-start gap-2\">\r\n                  <div\r\n                    className=\"px-2 py-1 rounded-md text-xs font-medium max-w-xs truncate\"\r\n                    style={{ backgroundColor: `${highlight.color}20`, color: highlight.color }}\r\n                    title={highlight.text}\r\n                  >\r\n                    {highlight.text.slice(0, 120)}\r\n                    {highlight.text.length > 120 ? '…' : ''}\r\n                  </div>\r\n                  <button\r\n                    onClick={() => setHighlights((prev) => prev.filter((h) => h.id !== highlight.id))}\r\n                    className=\"p-1 rounded-lg text-gray-500 hover:text-gray-300 hover:bg-gray-800/50 transition-colors\"\r\n                    aria-label=\"Remove highlight\"\r\n                  >\r\n                    <X size={12} />\r\n                  </button>\r\n                </div>\r\n                <textarea\r\n                  value={highlight.note ?? ''}\r\n                  onChange={(e) => handleHighlightNoteChange(highlight.id, e.target.value)}\r\n                  placeholder=\"Add a note for this highlight...\"\r\n                  className=\"w-full text-xs bg-gray-900/40 border border-gray-800/60 rounded-md px-2 py-1.5 text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-emerald-500/60\"\r\n                  rows={2}\r\n                />\r\n                <div className=\"text-[10px] text-gray-500\">\r\n                  Saved {new Date(highlight.createdAt).toLocaleString()}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {/* Notes Editor */}\r\n        <textarea\r\n          value={notes}\r\n          onChange={(e) => setNotes(e.target.value)}\r\n          placeholder=\"Take notes, add insights, save findings...\"\r\n          className=\"flex-1 p-4 bg-transparent text-sm text-gray-300 placeholder-gray-600 resize-none focus:outline-none\"\r\n        />\r\n\r\n        {/* Footer Actions */}\r\n        <div className=\"border-t border-gray-800/50 p-3 flex items-center gap-2\">\r\n          <motion.button\r\n            whileHover={{ scale: 1.05 }}\r\n            whileTap={{ scale: 0.95 }}\r\n            onClick={async () => {\r\n              if (currentUrl && !currentUrl.startsWith('about:') && !currentUrl.startsWith('chrome:')) {\r\n                saveNotes.flush();\r\n                try {\r\n                  await ipc.research.saveNotes(currentUrl, notes, highlights);\r\n                } catch (error) {\r\n                  console.error('Failed to save notes:', error);\r\n                }\r\n              }\r\n            }}\r\n            className=\"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-600/20 hover:bg-blue-600/30 border border-blue-500/30 rounded text-xs text-blue-400 transition-colors\"\r\n          >\r\n            <Save size={14} />\r\n            Save\r\n          </motion.button>\r\n          <motion.button\r\n            whileHover={{ scale: 1.05 }}\r\n            whileTap={{ scale: 0.95 }}\r\n            disabled={!!exporting}\r\n            onClick={() => handleExport('markdown')}\r\n            className={`px-3 py-2 bg-green-600/20 hover:bg-green-600/30 border border-green-500/30 rounded text-xs text-green-400 transition-colors flex items-center gap-2 ${\r\n              exporting ? 'opacity-60 cursor-wait' : ''\r\n            }`}\r\n            title=\"Export to Markdown\"\r\n          >\r\n            <FileDown size={14} />\r\n            {exporting === 'markdown' ? 'Exporting…' : 'Export Markdown'}\r\n          </motion.button>\r\n          <motion.button\r\n            whileHover={{ scale: 1.05 }}\r\n            whileTap={{ scale: 0.95 }}\r\n            disabled={!!exporting}\r\n            onClick={() => handleExport('obsidian')}\r\n            className={`px-3 py-2 bg-purple-600/20 hover:bg-purple-600/30 border border-purple-500/30 rounded text-xs text-purple-300 transition-colors flex items-center gap-2 ${\r\n              exporting ? 'opacity-60 cursor-wait' : ''\r\n            }`}\r\n            title=\"Export notes and highlights to Obsidian-compatible markdown files\"\r\n          >\r\n            <Archive size={14} />\r\n            {exporting === 'obsidian' ? 'Exporting…' : 'Obsidian Export'}\r\n          </motion.button>\r\n          <motion.button\r\n            whileHover={{ scale: 1.05 }}\r\n            whileTap={{ scale: 0.95 }}\r\n            disabled={!!exporting}\r\n            onClick={() => handleExport('notion')}\r\n            className={`px-3 py-2 bg-emerald-600/20 hover:bg-emerald-600/30 border border-emerald-500/30 rounded text-xs text-emerald-300 transition-colors flex items-center gap-2 ${\r\n              exporting ? 'opacity-60 cursor-wait' : ''\r\n            }`}\r\n            title=\"Sync notes and highlights to Notion\"\r\n          >\r\n            <Send size={14} />\r\n            {exporting === 'notion' ? 'Exporting…' : 'Sync to Notion'}\r\n          </motion.button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n","/**\r\n * OmniDesk - Central dashboard for empty state (no tabs open)\r\n * Think: ChatGPT home + Arc Spaces + Obsidian Quick Launch\r\n */\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Sparkles, Search, FileText, Workflow, Clock, Pin } from 'lucide-react';\r\nimport { useTabsStore } from '../state/tabsStore';\r\nimport { useAppStore } from '../state/appStore';\r\nimport { ipc } from '../lib/ipc-typed';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { ipcEvents } from '../lib/ipc-events';\r\n\r\nexport function OmniDesk() {\r\n  const { tabs, activeId } = useTabsStore();\r\n  const { setMode } = useAppStore();\r\n  const navigate = useNavigate();\r\n  const [recentWorkspaces, setRecentWorkspaces] = useState<any[]>([]);\r\n  const [continueSessions, setContinueSessions] = useState<any[]>([]);\r\n\r\n  // Load workspace and session data\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      // Wait for IPC to be ready\r\n      if (!window.ipc || typeof window.ipc.invoke !== 'function') {\r\n        // Retry after a delay\r\n        setTimeout(loadData, 500);\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        // Load recent workspaces\r\n        const workspaceResult = await ipc.workspaceV2.list();\r\n        const workspaces = (workspaceResult as any)?.workspaces || [];\r\n        setRecentWorkspaces(workspaces.slice(0, 3));\r\n      } catch {\r\n        // Silently handle - will retry if needed\r\n      }\r\n\r\n      try {\r\n        // Load recent sessions from session manager\r\n        const sessionsResult = await ipc.sessions.list();\r\n        const sessions = (sessionsResult as any) || [];\r\n        \r\n        // Transform sessions into continue format\r\n        const continueItems = sessions\r\n          .slice(0, 2)\r\n          .map((session: any) => ({\r\n            id: session.id,\r\n            type: session.name?.includes('Research') ? 'Research' : \r\n                  session.name?.includes('Trade') ? 'Trade' : 'Browse',\r\n            title: session.name || 'Untitled Session',\r\n            url: 'about:blank',\r\n            timestamp: session.createdAt || Date.now() - 3600000,\r\n            sessionId: session.id\r\n          }));\r\n        \r\n        if (continueItems.length > 0) {\r\n          setContinueSessions(continueItems);\r\n        } else {\r\n          // Fallback: Show mock sessions if none exist\r\n          setContinueSessions([\r\n            { \r\n              type: 'Research', \r\n              title: 'Quantum Computing Research', \r\n              url: 'about:blank', \r\n              timestamp: Date.now() - 3600000 \r\n            },\r\n            { \r\n              type: 'Trade', \r\n              title: 'Market Analysis', \r\n              url: 'about:blank', \r\n              timestamp: Date.now() - 7200000 \r\n            },\r\n          ]);\r\n        }\r\n      } catch {\r\n        // Silently handle - will retry if needed\r\n        // Fallback to mock data\r\n        setContinueSessions([\r\n          { \r\n            type: 'Research', \r\n            title: 'Quantum Computing Research', \r\n            url: 'about:blank', \r\n            timestamp: Date.now() - 3600000 \r\n          },\r\n          { \r\n            type: 'Trade', \r\n            title: 'Market Analysis', \r\n            url: 'about:blank', \r\n            timestamp: Date.now() - 7200000 \r\n          },\r\n        ]);\r\n      }\r\n    };\r\n\r\n    // Delay initial load to allow IPC to initialize\r\n    setTimeout(() => {\r\n      loadData();\r\n    }, 400);\r\n\r\n    // Listen for workspace updates\r\n    const unsubscribeWorkspace = ipcEvents.on('workspace:updated', () => {\r\n      loadData();\r\n    });\r\n\r\n    return () => {\r\n      unsubscribeWorkspace();\r\n    };\r\n  }, []);\r\n\r\n  const quickActions = [\r\n    { \r\n      icon: Sparkles, \r\n      label: 'Ask Agent', \r\n      action: async () => {\r\n        navigate('/agent');\r\n      }, \r\n    color: 'from-blue-500 to-cyan-500',\r\n    description: 'Open the agent console to start a guided workflow.'\r\n    },\r\n    { \r\n      icon: Search, \r\n      label: 'Search Topic', \r\n      action: async () => {\r\n        // Switch to research mode and open search\r\n        setMode('Research');\r\n        await ipc.tabs.create('about:blank');\r\n      }, \r\n    color: 'from-purple-500 to-pink-500',\r\n    description: 'Launch AI-powered research with citations-first results.'\r\n    },\r\n    { \r\n      icon: FileText, \r\n      label: 'Research Notes', \r\n      action: async () => {\r\n        setMode('Research');\r\n        await ipc.tabs.create('about:blank');\r\n      }, \r\n    color: 'from-green-500 to-emerald-500',\r\n    description: 'Capture structured notes that sync with your highlights.'\r\n    },\r\n    { \r\n      icon: Workflow, \r\n      label: 'Run Playbook', \r\n      action: () => {\r\n        navigate('/playbooks');\r\n      }, \r\n    color: 'from-orange-500 to-red-500',\r\n    description: 'Automate multi-step workflows with reusable recipes.'\r\n    },\r\n  ];\r\n\r\n  const handleContinueSession = async (session: any) => {\r\n    try {\r\n      let urlToLoad = session.url || 'about:blank';\r\n      \r\n      // Switch to the session first if it has a sessionId\r\n      if (session.sessionId) {\r\n        try {\r\n          await ipc.sessions.setActive({ sessionId: session.sessionId });\r\n          \r\n          // Wait a bit for session to switch\r\n          await new Promise(resolve => setTimeout(resolve, 200));\r\n          \r\n          // Check if session has tabs already\r\n          const tabs = await ipc.tabs.list();\r\n          if (tabs.length > 0) {\r\n            // Session has tabs, they should be visible now\r\n            // Activate the first tab if none is active\r\n            const activeTab = tabs.find(t => t.active);\r\n            if (!activeTab && tabs[0]) {\r\n              await ipc.tabs.activate({ id: tabs[0].id });\r\n            }\r\n            return; // Tabs exist, don't create new one\r\n          }\r\n          \r\n          // No tabs in session, create one with the session URL or default\r\n          if (!urlToLoad || urlToLoad === 'about:blank') {\r\n            // Try to get last visited URL from session or use default\r\n            urlToLoad = 'about:blank';\r\n          }\r\n        } catch (error) {\r\n          console.warn('Failed to set active session:', error);\r\n          // Continue with creating a tab\r\n        }\r\n      }\r\n      \r\n      // Set mode if specified\r\n      if (session.type === 'Research') {\r\n        setMode('Research');\r\n      } else if (session.type === 'Trade') {\r\n        setMode('Trade');\r\n      }\r\n      \r\n      // Create tab with the URL\r\n      const result = await ipc.tabs.create(urlToLoad);\r\n      if (!result) {\r\n        throw new Error('Failed to create tab');\r\n      }\r\n      \r\n      // Wait a bit for tab to be created and activated\r\n      await new Promise(resolve => setTimeout(resolve, 100));\r\n      \r\n    } catch (error) {\r\n      console.error('Failed to continue session:', error);\r\n      // Last resort: create a blank tab\r\n      try {\r\n        await ipc.tabs.create('about:blank');\r\n      } catch (e) {\r\n        console.error('Failed to create fallback tab:', e);\r\n      }\r\n    }\r\n  };\r\n\r\n  const activeTab = tabs.find((tab) => tab.id === activeId);\r\n  const shouldShowDashboard =\r\n    tabs.length === 0 ||\r\n    !activeTab ||\r\n    !activeTab.url ||\r\n    activeTab.url === 'about:blank' ||\r\n    activeTab.url.startsWith('ob://newtab') ||\r\n    activeTab.url.startsWith('ob://home');\r\n\r\n  if (!shouldShowDashboard) return null;\r\n\r\n  return (\r\n    <div className=\"absolute inset-0 h-full w-full bg-gradient-to-br from-[#1A1D28] via-[#1F2332] to-[#1A1D28] flex items-center justify-center p-8 overflow-auto z-10\">\r\n      <div className=\"max-w-5xl w-full space-y-8\">\r\n        {/* Header */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: -20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className=\"mb-10 space-y-3 text-left\"\r\n        >\r\n          <p className=\"text-xs uppercase tracking-[0.3em] text-gray-500\">\r\n            Command Center\r\n          </p>\r\n          <h1 className=\"text-4xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400\">\r\n            OmniBrowser\r\n          </h1>\r\n          <p className=\"max-w-2xl text-sm text-gray-400\">\r\n            Launch an agentic workspace, resume a saved session, or jump straight into a trusted playbook.\r\n          </p>\r\n        </motion.div>\r\n\r\n        {/* Quick Actions */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.1 }}\r\n          className=\"grid gap-3 sm:grid-cols-2 xl:grid-cols-4\"\r\n        >\r\n          {quickActions.map((action) => {\r\n            const Icon = action.icon;\r\n            return (\r\n              <motion.button\r\n                key={action.label}\r\n                onClick={action.action}\r\n                whileHover={{ y: -2 }}\r\n                whileTap={{ scale: 0.97 }}\r\n                className=\"group flex h-full flex-col items-start gap-3 rounded-xl border border-gray-700/50 bg-gray-800/60 px-4 py-5 text-left transition-all hover:border-gray-600 hover:bg-gray-800/80 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 focus-visible:ring-offset-gray-900\"\r\n              >\r\n                <span\r\n                  className={`inline-flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-br ${action.color} text-white shadow-lg shadow-black/20`}\r\n                >\r\n                  <Icon className=\"h-5 w-5\" />\r\n                </span>\r\n                <div className=\"space-y-1\">\r\n                  <div className=\"text-sm font-semibold text-gray-100 group-hover:text-white transition-colors\">\r\n                    {action.label}\r\n                  </div>\r\n                  {action.description ? (\r\n                    <p className=\"text-xs leading-snug text-gray-500 group-hover:text-gray-300 transition-colors\">\r\n                      {action.description}\r\n                    </p>\r\n                  ) : null}\r\n                </div>\r\n              </motion.button>\r\n            );\r\n          })}\r\n        </motion.div>\r\n\r\n        {/* Continue Sessions */}\r\n        {continueSessions.length > 0 && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0.2 }}\r\n            className=\"space-y-2\"\r\n          >\r\n            <h2 className=\"text-sm font-semibold text-gray-400 mb-3 flex items-center gap-2\">\r\n              <Clock size={16} />\r\n              Continue Last Session\r\n            </h2>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n              {continueSessions.map((session, idx) => (\r\n                <motion.button\r\n                  key={idx}\r\n                  onClick={() => handleContinueSession(session)}\r\n                  whileHover={{ scale: 1.02, x: 4 }}\r\n                  className=\"p-4 rounded-lg bg-gray-800/50 border border-gray-700/50 hover:border-gray-600 transition-all text-left group cursor-pointer\"\r\n                >\r\n                  <div className=\"flex items-center gap-2 mb-1\">\r\n                    <span className={`text-xs px-2 py-0.5 rounded ${\r\n                      session.type === 'Research' ? 'bg-purple-500/20 text-purple-400' :\r\n                      session.type === 'Trade' ? 'bg-green-500/20 text-green-400' :\r\n                      'bg-blue-500/20 text-blue-400'\r\n                    }`}>\r\n                      {session.type}\r\n                    </span>\r\n                    <span className=\"text-xs text-gray-500\">\r\n                      {new Date(session.timestamp).toLocaleTimeString()}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"text-sm font-medium text-gray-200 group-hover:text-white transition-colors\">\r\n                    {session.title}\r\n                  </div>\r\n                </motion.button>\r\n              ))}\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Recent Workspaces */}\r\n        {recentWorkspaces.length > 0 && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0.3 }}\r\n            className=\"space-y-2\"\r\n          >\r\n            <h2 className=\"text-sm font-semibold text-gray-400 mb-3 flex items-center gap-2\">\r\n              <Pin size={16} />\r\n              Recent Workspaces\r\n            </h2>\r\n            <div className=\"grid grid-cols-3 gap-3\">\r\n              {recentWorkspaces.map((workspace, idx) => (\r\n                <motion.button\r\n                  key={idx}\r\n                  onClick={() => navigate(`/w/${workspace.id}`)}\r\n                  whileHover={{ scale: 1.05 }}\r\n                  className=\"p-3 rounded-lg bg-gray-800/50 border border-gray-700/50 hover:border-gray-600 transition-all cursor-pointer\"\r\n                >\r\n                  <div className=\"text-sm font-medium text-gray-200 truncate\">\r\n                    {workspace.name}\r\n                  </div>\r\n                </motion.button>\r\n              ))}\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport { useAppStore } from '../state/appStore';\r\nimport { ipcEvents } from '../lib/ipc-events';\r\nimport TradePanel from '../modes/trade';\r\nimport GamesPanel from '../modes/games';\r\nimport DocsPanel from '../modes/docs';\r\nimport ImagesPanel from '../modes/images';\r\nimport ThreatsPanel from '../modes/threats';\r\nimport GraphMindPanel from '../modes/graphmind';\r\nimport { MainView } from '../components/layout/MainView';\r\nimport { ResearchSplit } from '../components/Panels/ResearchSplit';\r\nimport { OmniDesk } from '../components/OmniDesk';\r\n\r\nexport default function Home() {\r\n  const mode = useAppStore(s=>s.mode);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n\r\n  // Listen for fullscreen changes\r\n  useEffect(() => {\r\n    const handleFullscreen = (data: { fullscreen: boolean }) => {\r\n      setIsFullscreen(data.fullscreen);\r\n    };\r\n    \r\n    // Use the IPC event bus\r\n    const unsubscribe = ipcEvents.on<{ fullscreen: boolean }>('app:fullscreen-changed', handleFullscreen);\r\n    \r\n    return unsubscribe;\r\n  }, []);\r\n  \r\n  return (\r\n    <div className={`h-full w-full bg-[#1A1D28] flex flex-col ${isFullscreen ? 'absolute inset-0' : ''}`}>\r\n      {(mode === 'Browse' || !mode || mode === 'Research') && (\r\n        <div className=\"flex-1 w-full relative\">\r\n          <MainView />\r\n          {/* Show OmniDesk when no tabs */}\r\n          <OmniDesk />\r\n          {/* Show Research panel overlay when in Research mode and not fullscreen */}\r\n          {mode === 'Research' && !isFullscreen && (\r\n            <div className=\"absolute inset-0 pointer-events-none\">\r\n              <div className=\"pointer-events-auto h-full w-full\">\r\n                <ResearchSplit />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n      {mode === 'Trade' && <TradePanel />}\r\n      {mode === 'Games' && <GamesPanel />}\r\n      {mode === 'Docs' && <DocsPanel />}\r\n      {mode === 'Images' && <ImagesPanel />}\r\n      {mode === 'Threats' && <ThreatsPanel />}\r\n      {mode === 'GraphMind' && <GraphMindPanel />}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":["Archive","createLucideIcon","BookOpenCheck","ChevronLeft","Clock3","CloudUpload","FileDown","FilePlus","GitBranch","Maximize","MessageSquare","PenLine","Pin","Save","ZoomIn","ZoomOut","MockBroker","_symbol","qty","TradePanel","broker","balance","setBalance","useState","charts","setCharts","cryptoRandom","symbol","setSymbol","timeframe","setTimeframe","addChart","removeChart","id","c","x","layoutCols","jsxs","jsx","e","TradingView","AiAssistant","src","getTradingViewEmbed","sym","interval","GamesPanel","catalog","g","PDFViewer","filePath","onPageChange","currentPage","setCurrentPage","totalPages","setTotalPages","zoom","setZoom","loading","setLoading","canvasRef","useRef","useEffect","loadPDF","pdfjsLib","pdf","page","viewport","canvas","context","error","goToPage","zoomIn","zoomOut","ChevronRight","motion","CommentsPanel","comments","onAddComment","onDeleteComment","newCommentText","setNewCommentText","showAddForm","setShowAddForm","pageComments","handleAddComment","Plus","comment","X","DocsPanel","viewMode","setViewMode","reviews","setReviews","activeReview","setActiveReview","setError","ingestType","setIngestType","ingestUrl","setIngestUrl","fileToIngest","setFileToIngest","uploadProgress","setUploadProgress","list","ipc","err","handleSelectReview","review","handleStartIngest","type","handleFileSelect","event","file","handleIngestCancel","handleIngest","payloadSource","payloadType","buffer","reviewData","prev","handleDeleteReview","r","Sidebar","EmptyState","IngestForm","DocumentReviewView","newReview","format","style","outputPath","onSelectReview","onCreate","UploadCloud","Globe","formatDistanceToNow","Shield","onTypeChange","onUrlChange","onFileSelect","onSubmit","onCancel","Loader2","onReverify","onExport","onDelete","selectedClaimId","setSelectedClaimId","showComments","setShowComments","setComments","pdfPath","setPdfPath","timeline","factHighlights","assumptions","auditTrail","entityGraph","useMemo","entity","claim","highlightsBySection","groupHighlightsBySection","verificationSummary","total","verified","disputed","unverified","el","timeout","SummaryRow","FactHighlightsPanel","AssumptionsPanel","EntityGraphPanel","TimelinePanel","section","idx","sectionHighlights","headingSize","AuditTrailTable","StatusPill","source","AnimatePresence","highlights","sections","map","highlight","key","sec","highlightTone","renderSectionContent","activeClaimId","content","lower","sorted","a","nodes","cursor","needle","search","index","markedText","selectedId","onSelect","ordered","b","rank","Highlighter","assumptionTone","AlertTriangle","assumption","graph","node","connection","entry","label","value","tone","color","status","MockImageEngine","prompt","seed","ImagesPanel","engine","setPrompt","imgs","setImgs","i","ThreatsPanel","url","setUrl","result","setResult","GraphMindPanel","setNodes","edges","setEdges","all","onAuto","payload","n","MainView","activeId","tabs","useTabsStore","containerRef","browserReady","setBrowserReady","activeTabUrl","setActiveTabUrl","activeTabTitle","setActiveTabTitle","isLoading","setIsLoading","progress","setProgress","isElectron","isDev","isDevEnv","canEmbedInIframe","updateBounds","handleResize","resizeObserver","handleTabUpdate","tabList","activeTab","t","firstTab","unsubscribe","ipcEvents","unsubscribeProgress","data","loadInitialData","resolve","ResearchSplit","readerContent","setReaderContent","notes","setNotes","setHighlights","currentUrl","setCurrentUrl","exporting","setExporting","readerRef","loadContent","tab","saved","mapped","h","saveNotes","debounce","notesText","highlightsData","handleHighlightNoteChange","nextNote","sortedHighlights","handleExport","maybeFlush","pages","message","BookOpen","FileText","Send","OmniDesk","setMode","useAppStore","navigate","useNavigate","recentWorkspaces","setRecentWorkspaces","continueSessions","setContinueSessions","loadData","workspaces","continueItems","session","unsubscribeWorkspace","quickActions","Sparkles","Search","Workflow","handleContinueSession","urlToLoad","action","Icon","Clock","workspace","Home","mode","s","isFullscreen","setIsFullscreen","handleFullscreen"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]}
{"version":3,"file":"PlaybookForge-sz62P0nR.js","sources":["../../src/routes/PlaybookForge.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\n\r\ntype Playbook = { id: string; title: string; yaml: string; createdAt: number };\r\n\r\nconst KEY = 'omnib_playbooks_v1';\r\n\r\nfunction load(): Playbook[] { try { return JSON.parse(localStorage.getItem(KEY)||'[]'); } catch { return []; } }\r\nfunction save(items: Playbook[]) { localStorage.setItem(KEY, JSON.stringify(items)); }\r\n\r\nexport default function PlaybookForge() {\r\n  const [items, setItems] = useState<Playbook[]>(load());\r\n  const [title, setTitle] = useState('New Playbook');\r\n  const [yaml, setYaml] = useState('');\r\n\r\n  useEffect(()=>{ setItems(load()); },[]);\r\n\r\n  const addFromRecorder = async () => {\r\n    const dsl = await (window as any).recorder?.getDsl?.();\r\n    const y = typeof dsl === 'string' ? dsl : JSON.stringify(dsl, null, 2);\r\n    setYaml(y);\r\n  };\r\n\r\n  const saveItem = () => {\r\n    const next = [{ id: cryptoRandom(), title, yaml, createdAt: Date.now() }, ...items];\r\n    setItems(next); save(next);\r\n  };\r\n\r\n  const runItem = async (pb: Playbook) => {\r\n    try { const parsed = JSON.parse(pb.yaml); await (window as any).agent?.start?.(parsed); } catch { alert('Invalid JSON/YAML for this stub'); }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 grid grid-cols-2 gap-4 h-full\">\r\n      <div className=\"flex flex-col gap-2\">\r\n        <h3 className=\"font-medium\">Create Playbook</h3>\r\n        <input className=\"bg-neutral-800 rounded px-2 py-1\" value={title} onChange={(e)=>setTitle(e.target.value)} />\r\n        <textarea className=\"flex-1 bg-neutral-800 rounded p-2 text-xs\" value={yaml} onChange={(e)=>setYaml(e.target.value)} placeholder=\"Paste DSL (JSON/YAML) here\" />\r\n        <div className=\"flex gap-2\">\r\n          <button className=\"bg-neutral-800 px-2 py-1 rounded\" onClick={addFromRecorder}>Load from Recorder</button>\r\n          <button className=\"bg-indigo-600 text-white px-2 py-1 rounded\" onClick={saveItem}>Save</button>\r\n        </div>\r\n      </div>\r\n      <div className=\"flex flex-col gap-2\">\r\n        <h3 className=\"font-medium\">Library</h3>\r\n        <div className=\"space-y-2 overflow-auto\">\r\n          {items.map(pb => (\r\n            <div key={pb.id} className=\"border border-neutral-800 rounded p-2\">\r\n              <div className=\"flex items-center justify-between text-sm\">\r\n                <div className=\"font-medium\">{pb.title}</div>\r\n                <div className=\"text-xs text-neutral-400\">{new Date(pb.createdAt).toLocaleString()}</div>\r\n              </div>\r\n              <pre className=\"text-xs bg-neutral-900 rounded p-2 overflow-auto max-h-40\">{pb.yaml}</pre>\r\n              <div className=\"flex gap-2\">\r\n                <button className=\"bg-indigo-600 text-white px-2 py-1 rounded\" onClick={()=>runItem(pb)}>Run</button>\r\n                <button className=\"bg-neutral-800 px-2 py-1 rounded\" onClick={()=>{ const next = items.filter(x=>x.id!==pb.id); setItems(next); save(next); }}>Delete</button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction cryptoRandom() { return Math.random().toString(36).slice(2); }\r\n\r\n\r\n"],"names":["KEY","load","save","items","PlaybookForge","setItems","useState","title","setTitle","yaml","setYaml","useEffect","addFromRecorder","dsl","y","saveItem","next","cryptoRandom","runItem","pb","parsed","jsxs","jsx","x"],"mappings":"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"}
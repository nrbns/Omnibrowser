import{c as V,u as we,d as je,r as c,i as g,j as e}from"./index-BquUM_dP.js";import{i as ke}from"./ipc-events-CqodUROu.js";import{u as W,B as Ne}from"./agentStreamStore-BcjkWHdN.js";import{c as f,m as x}from"./proxy-BIEmBbur.js";import{C as Se}from"./cloud-BWs6gXbb.js";import{S as ee}from"./sparkles-B3IeNLsk.js";import{S as te}from"./search-RYizLTqL.js";import{A as ae}from"./index-TWPLI6s_.js";import{f as _}from"./formatDistanceToNow-Ctx6mZEP.js";import{C as Ce}from"./clock-gSt0ZU7N.js";import{R as Me}from"./refresh-cw-BV6giV6D.js";import{C as Te}from"./circle-check-DDsejJ4f.js";const Re=f("BatteryCharging",[["path",{d:"M15 7h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2",key:"1sdynx"}],["path",{d:"M6 7H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h1",key:"1gkd3k"}],["path",{d:"m11 7-3 5h4l-3 5",key:"b4a64w"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);const Le=f("CircleGauge",[["path",{d:"M15.6 2.7a10 10 0 1 0 5.7 5.7",key:"1e0p6d"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M13.4 10.6 19 5",key:"1kr7tw"}]]);const Ie=f("ClipboardCopy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]);const De=f("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Ae=f("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);const Ee=f("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const Pe=f("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);const $e=f("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);const ze=f("Sparkle",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}]]);const se=f("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const re=f("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Oe=f("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),We=V((i,l)=>({mode:"Browse",setMode:s=>i({mode:s}),graphDockOpen:!1,toggleGraphDock:()=>{const s=!l().graphDockOpen;i({graphDockOpen:s}),window.ui?.setRightDock?.(s?360:0)},ledgerDockOpen:!1,toggleLedgerDock:()=>{const s=!l().ledgerDockOpen;i({ledgerDockOpen:s}),window.ui?.setRightDock?.(s?360:0)}})),ne={normal:"Performance Mode","battery-saver":"Battery Saver Mode",extreme:"Regen Mode"},le={normal:null,"battery-saver":"+0.8hr battery",extreme:"+1.8hr battery"},oe={normal:"text-gray-400","battery-saver":"text-emerald-300",extreme:"text-amber-300"},_e={batteryPct:null,charging:null,ramMb:0,cpuLoad1:0,activeTabs:0,carbonIntensity:null,carbonRegion:null},ie="ob:ecoHistory:v1";function Fe(){if(typeof window>"u")return[];try{const i=window.localStorage.getItem(ie);if(!i)return[];const l=JSON.parse(i);return Array.isArray(l)?l.map(s=>({timestamp:typeof s.timestamp=="number"?s.timestamp:Date.now(),mode:s.mode??"normal",batteryPct:typeof s.batteryPct=="number"?s.batteryPct:null,carbonIntensity:typeof s.carbonIntensity=="number"||s.carbonIntensity===null?s.carbonIntensity:void 0,cpuLoad:typeof s.cpuLoad=="number"?s.cpuLoad:0,activeTabs:typeof s.activeTabs=="number"?s.activeTabs:0})).slice(-120):[]}catch(i){return console.warn("[efficiencyStore] Failed to load history",i),[]}}function He(i){if(!(typeof window>"u"))try{window.localStorage.setItem(ie,JSON.stringify(i))}catch(l){console.warn("[efficiencyStore] Failed to persist history",l)}}const Be=Fe(),$=V((i,l)=>({mode:"normal",label:ne.normal,badge:le.normal,colorClass:oe.normal,lastUpdated:null,snapshot:_e,history:Be,setEvent:s=>{const b={timestamp:s.timestamp,mode:s.mode,batteryPct:s.snapshot.batteryPct,carbonIntensity:s.snapshot.carbonIntensity,cpuLoad:s.snapshot.cpuLoad1,activeTabs:s.snapshot.activeTabs};let p=l().history;p=[...p,b].slice(-120),He(p);const m=s.mode;i({mode:m,label:s.label??ne[m],badge:s.badge??le[m],colorClass:oe[m],lastUpdated:s.timestamp,snapshot:s.snapshot,history:p})}})),ce=V(i=>({events:[],pushEvent:l=>i(s=>{const b=l.timestamp??Date.now(),p=l.id??`ws-${b}-${Math.random().toString(36).slice(2,8)}`;return{events:[...s.events,{id:p,timestamp:b,workspaceId:l.workspaceId??null,type:l.type,message:l.message,payload:l.payload}].slice(-100)}}),clear:l=>i(s=>l?{events:s.events.filter(b=>b.workspaceId!==l)}:{events:[]})})),Ue="https://duckduckgo.com/?q=",qe=["graph the AI ethics landscape","summarize today’s markets","compare battery life of M-series laptops","find regenerative design principles"];function Ge(i){return`${Ue}${encodeURIComponent(i)}`}function Ve(){const[i,l]=c.useState([]),[s,b]=c.useState([]),[p,m]=c.useState(!0),[z,R]=c.useState(!0),F=ce(h=>h.pushEvent),L=c.useCallback(async()=>{if(!window.ipc||typeof window.ipc.invoke!="function")return!1;m(!0),R(!0);try{const k=(await g.workspaceV2.list())?.workspaces||[];l(k.slice(0,4)),m(!1)}catch{l([]),m(!1)}try{const h=await g.sessions.list(),N=(Array.isArray(h)?h:[]).slice(0,3).map(y=>({id:y.id,type:y.name?.includes("Research")?"Research":y.name?.includes("Trade")?"Trade":"Browse",title:y.name||"Untitled Session",url:y.lastUrl||"about:blank",timestamp:y.updatedAt||y.createdAt||Date.now()-36e5,sessionId:y.id}));N.length>0?b(N):b([{type:"Research",title:"Quantum Computing Research",url:"about:blank",timestamp:Date.now()-36e5},{type:"Trade",title:"Market Analysis",url:"about:blank",timestamp:Date.now()-72e5}]),R(!1)}catch{b([{type:"Research",title:"Quantum Computing Research",url:"about:blank",timestamp:Date.now()-36e5},{type:"Trade",title:"Market Analysis",url:"about:blank",timestamp:Date.now()-72e5}]),R(!1)}return!0},[]);return c.useEffect(()=>{let h=!1;const k=()=>{h||L().then(O=>{!O&&!h&&setTimeout(k,500)})},N=setTimeout(k,350),y=ke.on("workspace:updated",()=>{F({type:"workspace:updated",message:"Workspace metadata refreshed"}),h||L()});return()=>{h=!0,clearTimeout(N),y()}},[L]),{recentWorkspaces:i,continueSessions:s,reload:L,loadingWorkspaces:p,loadingSessions:z}}function ot({variant:i="overlay",forceShow:l=!1}){const{tabs:s,activeId:b}=we(),{setMode:p}=We(),m=je(),{recentWorkspaces:z,continueSessions:R,reload:F,loadingWorkspaces:L,loadingSessions:h}=Ve(),[k,N]=c.useState(""),[y,O]=c.useState(!1),de=$(t=>t.label),Q=$(t=>t.badge),S=$(t=>t.snapshot),Y=$(t=>t.lastUpdated),H=$(t=>t.history),J=ce(t=>t.pushEvent),B=W(t=>t.status),K=W(t=>t.lastGoal),Z=W(t=>t.events),I=W(t=>t.transcript),M=c.useMemo(()=>{const t=Z.slice(-3).reverse(),a=t.length>0?t[0].timestamp:null,d=I.split(`
`).map(r=>r.trim()).filter(Boolean),o={idle:{label:"Idle",tone:"border-slate-700/60 bg-slate-800/60 text-slate-300"},connecting:{label:"Connecting",tone:"border-blue-500/40 bg-blue-500/15 text-blue-100"},live:{label:"Streaming",tone:"border-emerald-500/40 bg-emerald-500/15 text-emerald-100"},complete:{label:"Complete",tone:"border-purple-500/40 bg-purple-500/15 text-purple-100"},error:{label:"Error",tone:"border-rose-500/40 bg-rose-500/15 text-rose-100"}},w=o[B]??o.idle,n=t.map(r=>{switch(r.type){case"start":return{...r,label:"Run started",detail:r.content??"Agent boot sequence initiated.",variant:"border-blue-400/40 bg-blue-500/10 text-blue-100"};case"step":return{...r,label:`Step ${r.step??""}`.trim(),detail:r.content??r.status??"Executing tool call…",variant:"border-purple-400/40 bg-purple-500/10 text-purple-100"};case"log":return{...r,label:"Log update",detail:r.content??"Log appended.",variant:"border-slate-400/40 bg-slate-500/10 text-slate-100"};case"consent":return{...r,label:r.approved?"Consent granted":"Consent requested",detail:r.content??`Risk ${r.risk??"medium"} · ${r.approved?"approved":"pending"}`,variant:r.approved?"border-emerald-400/40 bg-emerald-500/10 text-emerald-100":"border-amber-400/40 bg-amber-500/10 text-amber-100"};case"done":return{...r,label:"Run complete",detail:r.content??"Outputs finalised.",variant:"border-emerald-400/40 bg-emerald-500/10 text-emerald-100"};case"error":return{...r,label:"Run error",detail:r.content??"Check diagnostics for details.",variant:"border-rose-400/40 bg-rose-500/10 text-rose-100"};default:return{...r,label:r.type,detail:r.content??"Event received.",variant:"border-slate-400/40 bg-slate-500/10 text-slate-100"}}}),j=n.map(r=>r.detail).filter(Boolean).slice(0,2),D=j.length>0?j:d.slice(-2);return{latestEvents:t,timeline:n,snippet:D,lastUpdated:a,statusTone:w}},[Z,I,B]),U=c.useMemo(()=>I.trim().length>0,[I]),[A,E]=c.useState("idle"),pe=c.useCallback(async()=>{if(!U||typeof navigator>"u"||!navigator.clipboard){E("error");return}try{E("copying"),await navigator.clipboard.writeText(I.trim()),E("copied")}catch(t){console.warn("[OmniDesk] Failed to copy transcript",t),E("error")}},[I,U]);c.useEffect(()=>{if(A!=="copied")return;const t=window.setTimeout(()=>E("idle"),2e3);return()=>window.clearTimeout(t)},[A]);const v=c.useMemo(()=>{const t=typeof S.batteryPct=="number"?Math.max(0,Math.min(100,Math.round(S.batteryPct))):null,a=typeof S.carbonIntensity=="number"?Math.max(0,Math.round(S.carbonIntensity)):null,d=Number.isFinite(S.cpuLoad1)?Math.max(0,Math.min(100,Math.round(S.cpuLoad1))):0,o=S.activeTabs??0,w=(()=>{const j=t!==null?t*.4:35,D=100-d,r=a!==null?Math.max(0,220-a)/220*100:50,T=Math.max(0,12-o)/12*100,G=.35*j+.25*D+.25*r+.15*T;return Math.round(Math.max(5,Math.min(98,G)))})(),n=[{id:"battery",label:t!==null?`${t}% battery reserve`:"Gathering battery telemetry",description:t!==null&&t>=60?"Great reserve for deep work.":"Stay plugged in to build reserve.",achieved:t!==null&&t>=60,icon:Re},{id:"carbon",label:a!==null?`${a} gCO₂/kWh grid intensity`:"Estimating regional carbon mix",description:a!==null&&a<=180?"Low-carbon window — ideal for heavy tasks.":"Carbon intensity elevated. Schedule net-heavy work later.",achieved:a!==null&&a<=180,icon:Se},{id:"tabs",label:`${o} active tabs`,description:o<=6?"Lean session profile — memory savings unlocked.":"Consider Hibernate to free resources.",achieved:o<=6,icon:ee}];return{batteryPctValue:t,carbonIntensityValue:a,cpuLoad:d,activeTabs:o,ecoScore:w,achievements:n}},[S]),u=c.useMemo(()=>{const t=H.slice(-24),a=t.map(n=>typeof n.batteryPct=="number"?n.batteryPct:null).filter(n=>n!==null),d=t.map(n=>typeof n.carbonIntensity=="number"?n.carbonIntensity:null).filter(n=>n!==null),o=n=>{if(n.length<2)return{delta:0,direction:"flat"};const j=n[n.length-1],D=Math.max(0,n.length-6),r=n[D],T=j-r;return{delta:T,direction:T>1?"up":T<-1?"down":"flat"}},w=n=>{if(n.length<2)return"";const j=Math.min(...n),r=Math.max(...n)-j||1;return n.map((T,G)=>{const ge=G/Math.max(n.length-1,1)*100,ve=100-(T-j)/r*80-10;return`${ge.toFixed(2)},${ve.toFixed(2)}`}).join(" ")};return{battery:{series:a,path:w(a),trend:o(a)},carbon:{series:d,path:w(d),trend:o(d)}}},[H]),me={idle:"Agent idle",connecting:"Connecting to Redix…",live:"Streaming answer in real time",complete:"Last run completed",error:"Run encountered an issue"},C=c.useMemo(()=>{const a=2*Math.PI*46,d=Math.max(0,Math.min(100,v.ecoScore)),o=a-d/100*a;return{radius:46,circumference:a,offset:o,clampedScore:d}},[v.ecoScore]),xe=[{icon:ee,label:"Ask Agent",action:async()=>{m("/agent")},color:"from-blue-500 to-cyan-500",description:"Open the agent console to start a guided workflow."},{icon:te,label:"Search Topic",action:async()=>{p("Research"),await g.tabs.create("about:blank")},color:"from-purple-500 to-pink-500",description:"Launch AI-powered research with citations-first results."},{icon:Ee,label:"Research Notes",action:async()=>{p("Research"),await g.tabs.create("about:blank")},color:"from-green-500 to-emerald-500",description:"Capture structured notes that sync with your highlights."},{icon:Oe,label:"Run Playbook",action:()=>{m("/playbooks")},color:"from-orange-500 to-red-500",description:"Automate multi-step workflows with reusable recipes."}],q=c.useMemo(()=>{const t=v.batteryPctValue!==null?`${v.batteryPctValue}%`:"—",a=v.carbonIntensityValue!==null?`${v.carbonIntensityValue} gCO₂/kWh`:"Syncing…",d=`${v.activeTabs}`;return{batteryPct:t,carbonIntensity:a,activeTabs:d}},[v]),ue=async t=>{try{let a=t.url||"about:blank";if(t.sessionId)try{await g.sessions.setActive({sessionId:t.sessionId}),await new Promise(w=>setTimeout(w,200));const o=await g.tabs.list();if(o.length>0){!o.find(n=>n.active)&&o[0]&&await g.tabs.activate({id:o[0].id});return}(!a||a==="about:blank")&&(a="about:blank")}catch(o){console.warn("Failed to set active session:",o)}if(t.type==="Research"?p("Research"):t.type==="Trade"&&p("Trade"),!await g.tabs.create(a))throw new Error("Failed to create tab");await new Promise(o=>setTimeout(o,100))}catch(a){console.error("Failed to continue session:",a);try{await g.tabs.create("about:blank"),J({type:"workspace:resume-session",workspaceId:t.sessionId??null,message:`Started fallback tab for session "${t.title}"`})}catch(d){console.error("Failed to create fallback tab:",d)}}},X=c.useCallback(async t=>{const a=t.trim();if(!a)return;const d=Ge(a);p("Research");try{await g.tabs.create(d),N("")}catch(o){console.warn("Search launch fallback:",o),typeof window<"u"&&window.open(d,"_blank","noopener,noreferrer")}},[p]),P=s.find(t=>t.id===b);if(!(l?!0:s.length===0||!P||!P.url||P.url==="about:blank"||P.url.startsWith("ob://newtab")||P.url.startsWith("ob://home")))return null;const be=i==="overlay"?"absolute inset-0 z-10 flex h-full w-full overflow-auto bg-gradient-to-br from-[#131722] via-[#171B2A] to-[#10131C] px-6 py-8":"flex h-full w-full overflow-auto bg-gradient-to-br from-[#0F121C] via-[#131827] to-[#0F121C] px-6 py-8",he=async()=>{O(!0);try{await F(),J({type:"workspace:manual-refresh",message:"Dashboard refreshed"})}finally{O(!1)}},ye=c.useMemo(()=>Array.from({length:2}),[]),fe=c.useMemo(()=>Array.from({length:3}),[]);return e.jsx("div",{className:be,"data-onboarding":"dashboard",children:e.jsxs("div",{className:"mx-auto flex h-full w-full max-w-6xl flex-col gap-6 xl:flex-row",children:[e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsxs(x.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.4},className:"rounded-3xl border border-slate-800/70 bg-slate-900/70 px-6 py-7 shadow-2xl shadow-black/30",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.32em] text-slate-400",children:"Regenerative Command Center"}),e.jsx("h1",{className:"mt-3 text-3xl font-semibold text-slate-100 sm:text-4xl",children:"Guide your next deep work session with OmniBrowser & Redix"}),e.jsx("p",{className:"mt-3 max-w-2xl text-sm text-slate-400",children:"Spin up an agent, resume an exploration, or launch a new search. Your flow state starts here."}),e.jsxs("form",{className:"mt-6 space-y-3",onSubmit:t=>{t.preventDefault(),X(k)},children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[e.jsxs("div",{className:"flex min-h-[52px] flex-1 items-center gap-3 rounded-2xl border border-slate-700/60 bg-slate-800/70 px-4 py-3 text-slate-200 focus-within:border-blue-500/60",children:[e.jsx(te,{size:18,className:"text-blue-400"}),e.jsx("input",{value:k,onChange:t=>N(t.target.value),placeholder:"Search the open web, knowledge base, or ask Redix…",className:"flex-1 bg-transparent text-sm outline-none placeholder:text-slate-500"})]}),e.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-2xl border border-blue-500/60 bg-blue-500/20 px-5 py-3 text-sm font-semibold text-blue-100 shadow-[0_10px_40px_-20px_rgba(59,130,246,0.8)] transition hover:border-blue-400 hover:bg-blue-500/30",children:"Launch Flow"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 text-xs text-slate-400",children:qe.map(t=>e.jsx("button",{type:"button",onClick:()=>{N(t),X(t)},className:"rounded-full border border-slate-700/60 bg-slate-800/60 px-3 py-1.5 transition hover:border-blue-500/50 hover:text-blue-200",children:t},t))})]})]}),e.jsx(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1,duration:.4},className:"grid gap-3 sm:grid-cols-2 xl:grid-cols-3",children:xe.map(t=>{const a=t.icon;return e.jsxs(x.button,{onClick:t.action,whileHover:{y:-4,scale:1.02},whileTap:{scale:.96},transition:{type:"spring",stiffness:400,damping:17},className:"group flex h-full flex-col justify-between gap-4 rounded-2xl border border-slate-800/70 bg-slate-900/60 px-5 py-6 text-left shadow-[0_12px_40px_-24px_rgba(15,23,42,0.9)] transition hover:border-slate-700/70 hover:bg-slate-900/80",children:[e.jsx("span",{className:`inline-flex h-11 w-11 items-center justify-center rounded-xl bg-gradient-to-br ${t.color} text-white shadow-[0_15px_30px_-20px_currentColor]`,children:e.jsx(a,{className:"h-5 w-5"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100 group-hover:text-white",children:t.label}),t.description?e.jsx("p",{className:"text-xs leading-snug text-slate-400 group-hover:text-slate-300",children:t.description}):null]})]},t.label)})}),e.jsxs(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.16,duration:.4},className:"rounded-3xl border border-violet-500/30 bg-violet-500/10 px-6 py-5 text-violet-100 shadow-[0_45px_120px_-60px_rgba(139,92,246,0.6)]",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[e.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-xl border border-violet-400/40 bg-violet-500/20",children:e.jsx(Ne,{size:16})}),"Live Redix Pulse"]}),e.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-[11px] ${M.statusTone.tone}`,children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-current"}),me[B]]})]}),e.jsxs("div",{className:"mt-4 space-y-3 text-sm text-purple-100/90",children:[K?e.jsxs("div",{className:"rounded-2xl border border-violet-400/30 bg-violet-500/10 px-4 py-3 text-xs text-purple-100/80",children:[e.jsx("span",{className:"text-[11px] uppercase tracking-[0.28em] text-purple-200/70",children:"Last goal"}),e.jsx("p",{className:"mt-2 text-sm text-purple-100",children:K})]}):null,e.jsxs("div",{className:"rounded-2xl border border-violet-400/20 bg-violet-500/10 px-4 py-4",children:[e.jsx("span",{className:"text-[11px] uppercase tracking-[0.3em] text-purple-200/70",children:"Preview"}),e.jsx("div",{className:"mt-2 text-xs text-purple-100/80",children:e.jsx(ae,{mode:"popLayout",children:M.snippet.length>0?M.snippet.map((t,a)=>e.jsx(x.p,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},exit:{opacity:0,y:-6},transition:{duration:.25},className:"leading-relaxed",children:t},`${t}-${a}`)):e.jsx(x.p,{initial:{opacity:.6},animate:{opacity:1},className:"text-purple-200/70",children:"No live transcript yet. Kick off a prompt to watch the agent stream."})})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-[11px]",children:[e.jsxs("button",{type:"button",onClick:pe,disabled:!U||A==="copying",className:"inline-flex items-center gap-1 rounded-full border border-violet-400/40 bg-violet-500/15 px-3 py-1 font-medium text-purple-100 transition hover:border-violet-300/60 hover:bg-violet-500/25 disabled:cursor-not-allowed disabled:opacity-60",children:[e.jsx(Ie,{size:12}),A==="copied"?"Copied!":A==="copying"?"Copying…":"Copy transcript"]}),e.jsxs("button",{type:"button",onClick:()=>m("/agent"),className:"inline-flex items-center gap-1 rounded-full border border-violet-400/40 bg-violet-500/15 px-3 py-1 font-medium text-purple-100 transition hover:border-violet-300/60 hover:bg-violet-500/25",children:[e.jsx(Ae,{size:12}),"View run log"]}),e.jsxs("button",{type:"button",onClick:()=>m("/agent"),className:"inline-flex items-center gap-1 rounded-full border border-violet-400/40 bg-violet-500/15 px-3 py-1 font-medium text-purple-100 transition hover:border-violet-300/60 hover:bg-violet-500/25",children:[e.jsx(ze,{size:12}),"Launch prompt"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[11px] uppercase tracking-[0.28em] text-purple-200/70",children:"Timeline"}),e.jsx("div",{className:"mt-2 space-y-2",children:e.jsx(ae,{initial:!1,children:M.timeline.length>0?M.timeline.map(t=>e.jsxs(x.div,{initial:{opacity:0,x:8},animate:{opacity:1,x:0},exit:{opacity:0,x:-8},transition:{duration:.2},className:`flex items-center justify-between rounded-xl px-3 py-2 text-[11px] ${t.variant}`,children:[e.jsx("span",{className:"capitalize",children:t.label}),e.jsx("span",{className:"text-purple-300/70",children:_(t.timestamp,{addSuffix:!0})})]},t.id)):e.jsx(x.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},className:"rounded-xl border border-dashed border-violet-400/30 px-4 py-3 text-[11px] text-purple-200/70",children:"No agent events yet — run a plan or quick prompt to populate this stream."})})})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap justify-between gap-2 text-xs",children:[e.jsx("div",{className:"text-purple-200/60",children:M.lastUpdated?`Updated ${_(M.lastUpdated,{addSuffix:!0})}`:"Awaiting first signal"}),e.jsx("button",{type:"button",onClick:()=>m("/agent"),className:"inline-flex items-center gap-2 rounded-full border border-violet-400/40 bg-violet-500/20 px-3 py-1.5 text-xs font-medium text-purple-100 hover:border-violet-300/60 hover:bg-violet-500/30",children:"Open agent console"})]})]}),e.jsx(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.4},className:"rounded-3xl border border-slate-800/60 bg-slate-900/60 px-6 py-5 shadow-lg",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-slate-400",children:[e.jsx(De,{size:16,className:"text-slate-300"}),e.jsx("span",{children:"Pro tip:"}),e.jsx("span",{className:"text-slate-300",children:"Drag any research tab into Redix MindMap to instantly connect ideas."})]})})]}),e.jsxs("aside",{className:"w-full flex-shrink-0 space-y-4 xl:w-[360px]",children:[e.jsxs(x.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},transition:{duration:.4},className:"rounded-2xl border border-slate-800/70 bg-slate-900/70 p-5 shadow-lg",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between text-sm font-semibold text-slate-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{size:16}),"Continue Session"]}),e.jsx("button",{onClick:he,className:"rounded-full border border-slate-700/60 p-1.5 text-slate-400 transition hover:border-slate-500/60 hover:text-slate-200",title:"Refresh",children:e.jsx(Me,{size:14,className:y?"animate-spin":""})})]}),e.jsx("div",{className:"space-y-3",children:h?ye.map((t,a)=>e.jsxs(x.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:a*.1,duration:.3},className:"h-[86px] w-full rounded-xl border border-slate-800/60 bg-slate-900/40 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"h-5 w-16 rounded-full bg-slate-800/60 animate-pulse"}),e.jsx("div",{className:"h-4 w-20 rounded-full bg-slate-800/60 animate-pulse"})]}),e.jsx("div",{className:"h-5 w-3/4 rounded bg-slate-800/60 animate-pulse"})]},`session-skeleton-${a}`)):R.length>0?R.map((t,a)=>e.jsxs("button",{onClick:()=>ue(t),className:"group w-full rounded-xl border border-slate-800/60 bg-slate-900/60 px-4 py-3 text-left transition hover:border-slate-600/60 hover:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[e.jsx("span",{className:`rounded-full px-2 py-0.5 text-[11px] ${t.type==="Research"?"bg-purple-500/20 text-purple-300":t.type==="Trade"?"bg-emerald-500/20 text-emerald-300":"bg-blue-500/20 text-blue-200"}`,children:t.type}),e.jsx("span",{children:_(t.timestamp,{addSuffix:!0})})]}),e.jsx("div",{className:"mt-2 text-sm font-medium text-slate-100 group-hover:text-white",children:t.title})]},a)):e.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/60 px-4 py-6 text-center text-xs text-slate-500",children:"We’ll keep your auto-snapshots here for quick handoffs."})})]}),e.jsxs(x.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},transition:{delay:.1,duration:.4},className:"rounded-2xl border border-slate-800/70 bg-slate-900/70 p-5 shadow-lg",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2 text-sm font-semibold text-slate-300",children:[e.jsx($e,{size:16}),"Recent Workspaces"]}),e.jsx("div",{className:"space-y-2",children:L?fe.map((t,a)=>e.jsx(x.div,{initial:{opacity:0,x:-8},animate:{opacity:1,x:0},transition:{delay:a*.08,duration:.3},className:"h-14 w-full rounded-xl border border-slate-800/60 bg-slate-900/40 p-3 flex items-center",children:e.jsx("div",{className:"h-4 w-2/3 rounded bg-slate-800/60 animate-pulse"})},`workspace-skeleton-${a}`)):z.length>0?z.map(t=>e.jsxs("button",{onClick:()=>m(`/w/${t.id}`),className:"flex w-full items-center justify-between rounded-xl border border-slate-800/60 bg-slate-900/60 px-4 py-3 text-left text-sm text-slate-200 transition hover:border-slate-600/70 hover:text-white",children:[e.jsx("span",{className:"truncate",children:t.name}),e.jsx("span",{className:"text-xs text-slate-500",children:"Open"})]},t.id)):e.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/60 px-4 py-6 text-center text-xs text-slate-500",children:"Create a workspace to keep your Redix graph evolving."})})]}),e.jsxs(x.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},transition:{delay:.2,duration:.4},className:"overflow-hidden rounded-2xl border border-emerald-500/30 bg-gradient-to-br from-emerald-950/80 via-emerald-900/70 to-emerald-950/90 p-5 text-emerald-100 shadow-lg shadow-emerald-900/50",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[e.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-xl border border-emerald-400/40 bg-emerald-500/10",children:e.jsx(Pe,{size:16})}),"Eco Scoreboard"]}),e.jsxs("div",{className:"text-right text-xs text-emerald-200/70",children:[e.jsx("div",{className:"uppercase tracking-[0.3em] text-emerald-300/60",children:"Eco score"}),e.jsx("div",{className:"text-xl font-semibold text-emerald-100",children:C.clampedScore})]})]}),e.jsxs("div",{className:"mt-5 grid gap-5 md:grid-cols-[150px,1fr]",children:[e.jsxs("div",{className:"relative mx-auto flex h-36 w-36 items-center justify-center",children:[e.jsxs("svg",{width:"150",height:"150",viewBox:"0 0 150 150",className:"absolute inset-0 text-emerald-500/40",children:[e.jsx("circle",{cx:"75",cy:"75",r:C.radius,stroke:"currentColor",strokeWidth:"10",fill:"none",className:"opacity-30"}),e.jsx(x.circle,{cx:"75",cy:"75",r:C.radius,stroke:"url(#ecoGradient)",strokeWidth:"10",strokeLinecap:"round",fill:"none",strokeDasharray:C.circumference,strokeDashoffset:C.offset,initial:{strokeDashoffset:C.circumference},animate:{strokeDashoffset:C.offset},transition:{duration:.8,ease:"easeOut"},transform:"rotate(-90 75 75)"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"ecoGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#34d399"}),e.jsx("stop",{offset:"100%",stopColor:"#22d3ee"})]})})]}),e.jsxs("div",{className:"relative z-10 text-center",children:[e.jsx(Le,{size:28,className:"mx-auto text-emerald-300"}),e.jsx("div",{className:"mt-2 text-3xl font-semibold text-emerald-50",children:C.clampedScore}),e.jsx("div",{className:"text-[11px] uppercase tracking-[0.28em] text-emerald-200/70",children:"Regenerative"})]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 rounded-2xl border border-emerald-400/20 bg-emerald-500/5 p-4 text-xs text-emerald-100/80",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.28em] text-emerald-200/70",children:"Battery"}),e.jsx("p",{className:"mt-2 text-lg font-semibold text-emerald-50",children:q.batteryPct})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.28em] text-emerald-200/70",children:"Carbon"}),e.jsx("p",{className:"mt-2 text-sm font-semibold text-emerald-50 leading-tight",children:q.carbonIntensity})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.28em] text-emerald-200/70",children:"Active Tabs"}),e.jsx("p",{className:"mt-2 text-lg font-semibold text-emerald-50",children:q.activeTabs})]})]}),e.jsx("div",{className:"space-y-2",children:v.achievements.map(t=>{const a=t.icon;return e.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-emerald-400/20 bg-emerald-500/10 px-4 py-3 text-xs text-emerald-100/80",children:[e.jsx("span",{className:`mt-0.5 inline-flex h-7 w-7 items-center justify-center rounded-xl border ${t.achieved?"border-emerald-400/60 bg-emerald-500/20 text-emerald-200":"border-emerald-400/20 bg-emerald-500/5 text-emerald-200/60"}`,children:t.achieved?e.jsx(Te,{size:14}):e.jsx(a,{size:14})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-emerald-100",children:t.label}),e.jsx("div",{className:"mt-1 text-[11px] text-emerald-200/70",children:t.description})]})]},t.id)})}),e.jsxs("div",{className:"rounded-2xl border border-emerald-400/20 bg-emerald-500/10 px-4 py-4 text-xs text-emerald-100/80",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-semibold text-emerald-100",children:"Trends"}),e.jsxs("span",{className:"text-[11px] uppercase tracking-[0.28em] text-emerald-200/70",children:["Last ",Math.min(H.length,24)," samples"]})]}),e.jsxs("div",{className:"mt-3 grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-emerald-100",children:["Battery",u.battery.trend.direction==="up"?e.jsx(re,{size:12,className:"text-emerald-300"}):u.battery.trend.direction==="down"?e.jsx(se,{size:12,className:"text-amber-300"}):null,e.jsxs("span",{className:"text-[11px] text-emerald-200/70",children:[u.battery.trend.delta>0?`+${u.battery.trend.delta.toFixed(1)}`:u.battery.trend.delta.toFixed(1),"%"]})]}),e.jsx("div",{className:"relative h-16 overflow-hidden rounded-xl border border-emerald-400/20 bg-emerald-500/10",children:u.battery.path?e.jsx("svg",{viewBox:"0 0 100 100",className:"absolute inset-0 h-full w-full text-emerald-300",children:e.jsx("polyline",{fill:"none",stroke:"currentColor",strokeWidth:"3",points:u.battery.path})}):e.jsx("div",{className:"flex h-full items-center justify-center text-[11px] text-emerald-200/60",children:"Not enough data"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-emerald-100",children:["Carbon",u.carbon.trend.direction==="down"?e.jsx(se,{size:12,className:"text-emerald-300"}):u.carbon.trend.direction==="up"?e.jsx(re,{size:12,className:"text-amber-300"}):null,e.jsxs("span",{className:"text-[11px] text-emerald-200/70",children:[u.carbon.trend.delta>0?`+${u.carbon.trend.delta.toFixed(0)}`:u.carbon.trend.delta.toFixed(0)," ","g"]})]}),e.jsx("div",{className:"relative h-16 overflow-hidden rounded-xl border border-emerald-400/20 bg-emerald-500/10",children:u.carbon.path?e.jsx("svg",{viewBox:"0 0 100 100",className:"absolute inset-0 h-full w-full text-emerald-200",children:e.jsx("polyline",{fill:"none",stroke:"currentColor",strokeWidth:"3",points:u.carbon.path})}):e.jsx("div",{className:"flex h-full items-center justify-center text-[11px] text-emerald-200/60",children:"Awaiting carbon samples"})})]})]})]})]})]}),Y&&e.jsxs("p",{className:"mt-5 text-[11px] text-emerald-100/60",children:["Updated ",_(Y,{addSuffix:!0})]}),e.jsxs("p",{className:"mt-1 text-[11px] text-emerald-100/70",children:[de,Q?` • ${Q}`:""]})]})]})]})})}export{Re as B,Ee as F,Pe as L,ot as O,re as T,Oe as W,se as a,$ as b,We as u};
//# sourceMappingURL=OmniDesk-BdBOPLft.js.map

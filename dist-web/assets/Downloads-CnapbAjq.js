import{r as c,j as e,i as v,d as se,b as O}from"./index-dj7m1cGj.js";import{P as re,V as ae}from"./Portal-Cws6ez_F.js";import{A as ne}from"./index-D3V9pHtR.js";import{c as j,m as p}from"./proxy-C7NQ8sMs.js";import{X as V}from"./x-kCWGjBIF.js";import{P as G}from"./play-Cjit1YSa.js";import{C as W}from"./circle-play-C6hzx54j.js";import{M as le,a as oe}from"./minimize-2-DOMoKNhN.js";import{D as R}from"./download-B1WlPeuz.js";import{C as X}from"./clock-C2CbMN6U.js";import{C as K}from"./circle-x-DhN9FEyB.js";import{C as ie}from"./circle-check-big-CnSYYo6U.js";const ce=j("AudioLines",[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]]);const de=j("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);const ue=j("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);const U=j("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);const me=j("MonitorPlay",[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]]);const _=j("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);const xe=j("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);const pe=j("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);const he=j("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),ge=["mp4","m4v","mov","webm","mkv","avi","mpg","mpeg","ogv"],fe=["mp3","m4a","aac","wav","flac","ogg","opus","aiff","oga"];function ye(o){if(!o)return"";if(o.startsWith("file://"))return o;let i=o.replace(/\\/g,"/");return/^[a-zA-Z]:/.test(i)?i=`/${i}`:i.startsWith("/")||(i=`/${i}`),encodeURI(`file://${i}`)}function Q(o){if(!o)return null;const i=o.split(".").pop()?.toLowerCase();return i?ge.includes(i)?"video":fe.includes(i)?"audio":null:null}function be({filePath:o,fileName:i,autoPlay:w=!0,onClose:N}){const d=c.useMemo(()=>Q(i||o),[i,o]),h=c.useMemo(()=>ye(o),[o]),m=c.useRef(null),[M,k]=c.useState(w),[S,P]=c.useState(0),[g,$]=c.useState(0),[L,z]=c.useState(1),[A,t]=c.useState(!1),[r,a]=c.useState(!1),[u,l]=c.useState(!1),[x,y]=c.useState(!1);c.useEffect(()=>{const s=n=>{n.key==="Escape"&&N()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[N]),c.useEffect(()=>{const s=m.current;if(!s)return;const n=()=>{$(s.duration||0),z(s.volume),t(s.muted)},b=()=>P(s.currentTime||0),F=()=>k(!0),B=()=>k(!1),I=()=>{z(s.volume),t(s.muted)};if(s.addEventListener("loadedmetadata",n),s.addEventListener("timeupdate",b),s.addEventListener("play",F),s.addEventListener("pause",B),s.addEventListener("volumechange",I),w){const D=s.play();D&&typeof D.then=="function"&&D.catch(()=>{k(!1)})}return y(d==="video"&&typeof document<"u"?!!document.pictureInPictureEnabled:!1),()=>{s.removeEventListener("loadedmetadata",n),s.removeEventListener("timeupdate",b),s.removeEventListener("play",F),s.removeEventListener("pause",B),s.removeEventListener("volumechange",I),s.pause()}},[w,d,h]);const E=c.useCallback(()=>{const s=m.current;if(s)if(s.paused){const n=s.play();n&&typeof n.then=="function"&&n.catch(()=>k(!1))}else s.pause()},[]),f=c.useCallback(()=>{const s=m.current;s&&(s.muted=!s.muted)},[]),C=s=>{const n=m.current;if(!n)return;const b=Math.min(1,Math.max(0,s));n.volume=b,n.muted=b===0},T=s=>{const n=m.current;!n||!Number.isFinite(g)||g<=0||(n.currentTime=s/100*g,P(n.currentTime))},q=s=>{const n=m.current;n&&(n.currentTime=Math.min(Math.max(0,n.currentTime+s),g||n.currentTime))},Z=async()=>{if(d!=="video")return;const s=m.current;if(!(!s||typeof s.requestPictureInPicture!="function"))try{const n=document;n.pictureInPictureElement?await n.exitPictureInPicture?.():await s.requestPictureInPicture()}catch(n){se()&&console.warn("[MediaPlayer] Failed to request Picture-in-Picture:",n)}},J=()=>{const s=document.getElementById("ob-media-player-container");if(!s)return;u?document.exitFullscreen?.().then(()=>l(!1)).catch(()=>{}):s.requestFullscreen?.().then(()=>l(!0)).catch(()=>{})};c.useEffect(()=>{const s=()=>{l(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",s),()=>document.removeEventListener("fullscreenchange",s)},[]);const Y=()=>{o&&v.downloads.openFile(o).catch(()=>{})},ee=()=>{o&&v.downloads.showInFolder(o).catch(()=>{})},H=s=>{if(!Number.isFinite(s))return"0:00";const n=Math.max(0,Math.round(s)),b=Math.floor(n/60),F=n%60,B=Math.floor(b/60);if(B>0){const I=b%60;return`${B}:${I.toString().padStart(2,"0")}:${F.toString().padStart(2,"0")}`}return`${b}:${F.toString().padStart(2,"0")}`},te=g>0?Math.min(100,Math.max(0,S/g*100)):0;return e.jsx(re,{children:e.jsx(ne,{children:e.jsx(p.div,{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/70 backdrop-blur-sm px-6 py-8",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:N,children:e.jsxs(p.div,{id:"ob-media-player-container",className:"relative w-full max-w-4xl overflow-hidden rounded-2xl border border-gray-700/60 bg-gray-950/90 shadow-2xl",initial:{y:40,opacity:0},animate:{y:0,opacity:1},exit:{y:40,opacity:0},transition:{type:"spring",damping:22,stiffness:180},onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-800/60 bg-gray-900/70 px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-100",children:i||o.split(/[\\/]/).pop()||"Media file"}),e.jsxs("p",{className:"text-xs text-gray-400",children:[d?d.toUpperCase():"Unknown"," • ",H(g)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:Y,className:"rounded-lg border border-gray-700/70 bg-gray-800/70 px-3 py-1.5 text-xs text-gray-200 transition hover:border-blue-500/60 hover:text-blue-300",children:"Open"}),e.jsx("button",{onClick:ee,className:"rounded-lg border border-gray-700/70 bg-gray-800/70 px-3 py-1.5 text-xs text-gray-200 transition hover:border-blue-500/60 hover:text-blue-300",children:"Reveal"}),e.jsx("button",{onClick:N,className:"rounded-lg border border-gray-700/70 bg-gray-800/70 p-1.5 text-gray-300 transition hover:border-red-500/60 hover:text-red-300",children:e.jsx(V,{size:16})})]})]}),e.jsxs("div",{className:`relative flex flex-col items-center justify-center bg-black ${d==="audio"?"py-12":"py-4"}`,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[d==="video"&&h?e.jsx("video",{ref:m,src:h,className:"max-h-[60vh] w-full bg-black object-contain",autoPlay:w,controls:!1}):null,d==="audio"&&h?e.jsxs("div",{className:"flex w-full flex-col items-center gap-6 px-8",children:[e.jsx("div",{className:"mt-4 flex h-32 w-32 items-center justify-center rounded-3xl bg-gradient-to-br from-blue-500/30 to-purple-500/30 text-blue-200",children:e.jsx(ce,{size:64})}),e.jsx("audio",{ref:m,src:h,autoPlay:w,controls:!1})]}):null,!d||!h?e.jsxs("div",{className:"flex h-48 w-full flex-col items-center justify-center gap-3 text-center text-gray-400",children:[e.jsx(me,{size:40,className:"text-gray-600"}),e.jsx("p",{className:"text-sm",children:"Unable to load media preview"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Unsupported format or missing file reference."})]}):null,d&&h?e.jsx(p.div,{className:"absolute bottom-3 left-1/2 z-10 w-[92%] -translate-x-1/2 rounded-xl border border-gray-800/80 bg-gray-900/95 px-4 py-3 shadow-xl backdrop-blur",animate:{opacity:r||!M?1:.85},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:E,className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-600/90 text-white transition hover:bg-blue-500",children:M?e.jsx(_,{size:18}):e.jsx(G,{size:18})}),e.jsxs("div",{className:"flex flex-col gap-1 text-xs text-gray-400",children:[e.jsx("span",{className:"font-mono text-sm text-gray-100",children:H(S)}),e.jsxs("span",{className:"font-mono text-[11px] text-gray-500",children:[H(g-S)," remaining"]})]}),e.jsx("input",{type:"range",min:0,max:100,value:te,onChange:s=>T(Number(s.target.value)),className:"flex-1 accent-blue-500"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>q(-10),className:"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300",title:"Back 10 seconds",children:e.jsx(xe,{size:16})}),e.jsx("button",{onClick:()=>q(10),className:"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300",title:"Forward 10 seconds",children:e.jsx(pe,{size:16})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:f,className:"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300",children:A||L===0?e.jsx(he,{size:16}):e.jsx(ae,{size:16})}),e.jsx("input",{type:"range",min:0,max:100,value:A?0:Math.round(L*100),onChange:s=>C(Number(s.target.value)/100),className:"w-24 accent-blue-500"})]}),x?e.jsx("button",{onClick:Z,className:"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300",title:"Toggle picture-in-picture",children:e.jsx(W,{size:16})}):null,e.jsx("button",{onClick:J,className:"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300",title:u?"Exit fullscreen":"Enter fullscreen",children:u?e.jsx(le,{size:16}):e.jsx(oe,{size:16})})]})]})}):null]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-800/60 bg-gray-900/70 px-4 py-3 text-xs text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{size:14,className:"text-blue-300"}),e.jsx("span",{children:"Secure local playback"})]}),e.jsx("span",{children:o})]})]})})})})}function Pe(){const[o,i]=c.useState([]),[w,N]=c.useState(!0),[d,h]=c.useState(null);c.useEffect(()=>{(async()=>{try{const l=await v.downloads.list();Array.isArray(l)&&i(l.sort((x,y)=>y.createdAt-x.createdAt))}catch(l){console.error("Failed to load downloads:",l)}finally{N(!1)}})();const r=l=>{l?.id&&i(x=>{const y=x.findIndex(f=>f.id===l.id),E={id:l.id,url:l.url,filename:l.filename,status:l.status||"downloading",path:l.path,checksum:l.checksum,createdAt:l.createdAt||Date.now(),progress:l.progress,receivedBytes:l.receivedBytes,totalBytes:l.totalBytes,safety:l.safety,speedBytesPerSec:l.speedBytesPerSec,etaSeconds:l.etaSeconds};if(y>=0){const f=[...x];return f[y]={...f[y],...E,createdAt:f[y].createdAt||E.createdAt},f.sort((C,T)=>T.createdAt-C.createdAt)}return[E,...x].sort((f,C)=>C.createdAt-f.createdAt)})},a=O.on("downloads:progress",r),u=O.on("downloads:done",r);return()=>{a(),u()}},[]);const m=t=>{if(!t)return"Unknown";if(t===0)return"0 Bytes";const r=1024,a=["Bytes","KB","MB","GB"],u=Math.floor(Math.log(t)/Math.log(r));return Math.round(t/Math.pow(r,u)*100)/100+" "+a[u]},M=t=>typeof t.progress=="number"?Math.min(100,Math.max(0,Math.round(t.progress*100))):t.totalBytes&&t.totalBytes>0?Math.min(100,Math.round((t.receivedBytes||0)/t.totalBytes*100)):t.status==="completed"||t.status==="verifying"?100:0,k=t=>{if(!t||!Number.isFinite(t)||t<=0)return"—";const r=["B/s","KB/s","MB/s","GB/s"],a=Math.min(r.length-1,Math.floor(Math.log(t)/Math.log(1024))),u=t/Math.pow(1024,a);return`${u>=100?Math.round(u):Math.round(u*10)/10} ${r[a]}`},S=t=>{if(t===void 0||!Number.isFinite(t)||t<=0)return"—";const r=Math.max(0,Math.round(t)),a=Math.floor(r/3600),u=Math.floor(r%3600/60),l=r%60,x=[];return a>0&&x.push(`${a}h`),(u>0||a>0)&&x.push(`${u}m`),x.push(`${l}s`),x.join(" ")},P=t=>!t?.path||t.status!=="completed"?!1:!!Q(t.filename||t.path),g=t=>{switch(t){case"completed":return e.jsx(ie,{size:16,className:"text-green-400"});case"failed":case"blocked":return e.jsx(K,{size:16,className:"text-red-400"});case"downloading":case"paused":case"verifying":return e.jsx(U,{size:16,className:"text-blue-400 animate-spin"});case"cancelled":return e.jsx(K,{size:16,className:"text-gray-500"});default:return e.jsx(X,{size:16,className:"text-gray-400"})}},$=t=>{t&&v.downloads.openFile?.(t).catch(console.error)},L=t=>{t&&v.downloads.showInFolder?.(t).catch(console.error)},z=t=>{if(!t)return null;const r="px-2 py-0.5 rounded-full text-[10px] font-semibold uppercase tracking-wide border";switch(t.status){case"clean":return e.jsx("span",{className:`${r} bg-emerald-500/15 border-emerald-500/30 text-emerald-200`,children:"Scanned Clean"});case"warning":return e.jsx("span",{className:`${r} bg-amber-500/15 border-amber-500/30 text-amber-200`,children:"Review Recommended"});case"blocked":return e.jsx("span",{className:`${r} bg-red-500/15 border-red-500/40 text-red-200`,children:"Quarantined"});case"pending":return e.jsx("span",{className:`${r} bg-blue-500/15 border-blue-500/30 text-blue-200`,children:"Scanning…"});default:return e.jsx("span",{className:`${r} bg-gray-500/15 border-gray-600/40 text-gray-300`,children:"Scan Unavailable"})}},A=t=>t?e.jsxs("div",{className:"text-xs text-gray-500 space-y-1 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[z(t),t.threatLevel&&e.jsxs("span",{className:"text-[10px] uppercase text-gray-400",children:["Threat level: ",t.threatLevel]})]}),t.details&&e.jsx("div",{children:t.details}),t.recommendations&&t.recommendations.length>0&&e.jsx("ul",{className:"list-disc list-inside text-[11px] space-y-0.5",children:t.recommendations.slice(0,3).map((r,a)=>e.jsx("li",{children:r},`${t.scannedAt}-${a}`))}),t.status==="blocked"&&t.quarantinePath&&e.jsxs("div",{className:"text-[11px] text-red-300",children:["File moved to quarantine: ",e.jsx("span",{className:"font-mono",children:t.quarantinePath})]})]}):null;return w?e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-[#1A1D28]",children:e.jsx(U,{size:24,className:"text-blue-400 animate-spin"})}):e.jsxs("div",{className:"h-full w-full bg-[#1A1D28] text-gray-100 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800/50",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Downloads"}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[o.length," ",o.length===1?"download":"downloads"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:o.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx(R,{size:48,className:"text-gray-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"No downloads yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Files you download will appear here"})]}):e.jsx("div",{className:"space-y-3",children:o.map(t=>e.jsx(p.div,{"data-testid":"download-card","data-download-id":t.id,"data-filename":t.filename||"",initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gray-900/60 backdrop-blur-sm border border-gray-800/50 rounded-lg p-4 hover:bg-gray-900/80 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g(t.status),e.jsx("span",{className:"font-medium text-gray-200 truncate",children:t.filename||t.url.split("/").pop()||"Download"}),z(t.safety)]}),t.status==="downloading"||t.status==="paused"?e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-300 mb-1.5",children:[e.jsxs("span",{className:"font-medium",children:[m(t.receivedBytes)," / ",m(t.totalBytes)]}),e.jsxs("span",{className:"font-semibold text-blue-400",children:[M(t),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-800 rounded-full h-2.5 overflow-hidden mb-2",children:e.jsx(p.div,{className:"h-full bg-gradient-to-r from-blue-500 to-cyan-500",initial:{width:0},animate:{width:`${M(t)}%`},transition:{duration:.3}})}),e.jsxs("div",{className:"flex items-center gap-4 text-xs font-medium",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-blue-500/10 border border-blue-500/30",children:[e.jsx("span",{className:"text-blue-300",children:"Speed:"}),e.jsx("span",{className:"text-blue-200 font-semibold",children:k(t.speedBytesPerSec)})]}),e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-purple-500/10 border border-purple-500/30",children:[e.jsx(X,{size:12,className:"text-purple-300"}),e.jsx("span",{className:"text-purple-300",children:"ETA:"}),e.jsx("span",{className:"text-purple-200 font-semibold",children:S(t.etaSeconds)})]})]})]}):null,t.status==="verifying"&&e.jsxs("div",{className:"mb-2 text-xs text-blue-300 flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Verifying download integrity…"})]}),e.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"truncate",children:t.url})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{children:new Date(t.createdAt).toLocaleString()}),e.jsx("span",{className:"capitalize",children:t.status}),t.path&&e.jsx("span",{className:"truncate max-w-xs",title:t.path,children:t.path.replace(/^.*[\\\/]/,"")})]}),t.checksum&&e.jsxs("div",{className:"text-xs text-gray-500 truncate",title:`SHA-256: ${t.checksum}`,children:["SHA-256: ",t.checksum.slice(0,12),"…"]}),A(t.safety)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.status==="downloading"&&e.jsxs(e.Fragment,{children:[e.jsxs(p.button,{onClick:async()=>{try{await v.downloads.pause(t.id),i(r=>r.map(a=>a.id===t.id?{...a,status:"paused"}:a))}catch(r){console.error("Failed to pause download:",r)}},whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-amber-500/20 hover:bg-amber-500/30 border border-amber-500/40 text-amber-200 font-medium text-xs transition-colors",title:"Pause download",children:[e.jsx(_,{size:16}),e.jsx("span",{children:"Pause"})]}),e.jsxs(p.button,{onClick:async()=>{try{await v.downloads.cancel(t.id),i(r=>r.map(a=>a.id===t.id?{...a,status:"cancelled"}:a))}catch(r){console.error("Failed to stop download:",r)}},whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-500/20 hover:bg-red-500/30 border border-red-500/40 text-red-200 font-medium text-xs transition-colors",title:"Stop download",children:[e.jsx(V,{size:16}),e.jsx("span",{children:"Stop"})]})]}),t.status==="paused"&&e.jsxs(e.Fragment,{children:[e.jsxs(p.button,{onClick:async()=>{try{await v.downloads.resume(t.id),i(r=>r.map(a=>a.id===t.id?{...a,status:"downloading"}:a))}catch(r){console.error("Failed to resume download:",r)}},whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-green-500/20 hover:bg-green-500/30 border border-green-500/40 text-green-200 font-medium text-xs transition-colors",title:"Resume download",children:[e.jsx(G,{size:16}),e.jsx("span",{children:"Resume"})]}),e.jsxs(p.button,{onClick:async()=>{try{await v.downloads.cancel(t.id),i(r=>r.map(a=>a.id===t.id?{...a,status:"cancelled"}:a))}catch(r){console.error("Failed to stop download:",r)}},whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-500/20 hover:bg-red-500/30 border border-red-500/40 text-red-200 font-medium text-xs transition-colors",title:"Stop download",children:[e.jsx(V,{size:16}),e.jsx("span",{children:"Stop"})]})]}),(t.status==="completed"||t.status==="failed"||t.status==="cancelled"||t.status==="blocked")&&t.path&&e.jsxs(e.Fragment,{children:[t.status!=="blocked"&&e.jsx(p.button,{onClick:()=>$(t.path),whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 rounded-lg bg-gray-800/60 hover:bg-gray-800 border border-gray-700/50 text-gray-300 hover:text-blue-400 transition-colors",title:"Open file",children:e.jsx(R,{size:18})}),t.status==="completed"&&t.path&&P(t)&&e.jsx(p.button,{onClick:()=>h(t),whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 rounded-lg bg-gray-800/60 hover:bg-gray-800 border border-gray-700/50 text-gray-300 hover:text-purple-400 transition-colors",title:"Preview media",children:e.jsx(W,{size:18})}),e.jsx(p.button,{onClick:()=>L(t.path),whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 rounded-lg bg-gray-800/60 hover:bg-gray-800 border border-gray-700/50 text-gray-300 hover:text-blue-400 transition-colors",title:"Show in folder",children:e.jsx(de,{size:18})})]})]})]})},t.id))})}),d&&d.path&&e.jsx(be,{filePath:d.path,fileName:d.filename,onClose:()=>h(null)})]})}export{Pe as default};
//# sourceMappingURL=Downloads-CnapbAjq.js.map

import{r as c,j as e,i as j,b as te}from"./index-BquUM_dP.js";import{i as O}from"./ipc-events-CqodUROu.js";import{P as se,V as re}from"./Portal-BzN9CTBx.js";import{A as ae}from"./index-TWPLI6s_.js";import{c as p,m as h}from"./proxy-BIEmBbur.js";import{X as V}from"./x-C_5K_ivr.js";import{P as K}from"./play-BpEGLF92.js";import{C as G}from"./circle-play-ojLLp3EH.js";import{D as R}from"./download-B_E2bknD.js";import{C as ne}from"./clock-gSt0ZU7N.js";import{C as X}from"./circle-x-DE3GrI7J.js";import{C as le}from"./circle-check-big-DljQtsCI.js";const oe=p("AudioLines",[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]]);const ie=p("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);const ce=p("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);const U=p("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);const de=p("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const ue=p("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const xe=p("MonitorPlay",[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]]);const W=p("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);const me=p("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);const he=p("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);const pe=p("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),ye=["mp4","m4v","mov","webm","mkv","avi","mpg","mpeg","ogv"],ge=["mp3","m4a","aac","wav","flac","ogg","opus","aiff","oga"];function fe(o){if(!o)return"";if(o.startsWith("file://"))return o;let i=o.replace(/\\/g,"/");return/^[a-zA-Z]:/.test(i)?i=`/${i}`:i.startsWith("/")||(i=`/${i}`),encodeURI(`file://${i}`)}function _(o){if(!o)return null;const i=o.split(".").pop()?.toLowerCase();return i?ye.includes(i)?"video":ge.includes(i)?"audio":null:null}function be({filePath:o,fileName:i,autoPlay:w=!0,onClose:k}){const d=c.useMemo(()=>_(i||o),[i,o]),y=c.useMemo(()=>fe(o),[o]),x=c.useRef(null),[M,N]=c.useState(w),[S,L]=c.useState(0),[g,$]=c.useState(0),[P,z]=c.useState(1),[A,t]=c.useState(!1),[r,a]=c.useState(!1),[u,l]=c.useState(!1),[m,b]=c.useState(!1);c.useEffect(()=>{const s=n=>{n.key==="Escape"&&k()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[k]),c.useEffect(()=>{const s=x.current;if(!s)return;const n=()=>{$(s.duration||0),z(s.volume),t(s.muted)},v=()=>L(s.currentTime||0),F=()=>N(!0),B=()=>N(!1),I=()=>{z(s.volume),t(s.muted)};if(s.addEventListener("loadedmetadata",n),s.addEventListener("timeupdate",v),s.addEventListener("play",F),s.addEventListener("pause",B),s.addEventListener("volumechange",I),w){const D=s.play();D&&typeof D.then=="function"&&D.catch(()=>{N(!1)})}return b(d==="video"&&typeof document<"u"?!!document.pictureInPictureEnabled:!1),()=>{s.removeEventListener("loadedmetadata",n),s.removeEventListener("timeupdate",v),s.removeEventListener("play",F),s.removeEventListener("pause",B),s.removeEventListener("volumechange",I),s.pause()}},[w,d,y]);const C=c.useCallback(()=>{const s=x.current;if(s)if(s.paused){const n=s.play();n&&typeof n.then=="function"&&n.catch(()=>N(!1))}else s.pause()},[]),f=c.useCallback(()=>{const s=x.current;s&&(s.muted=!s.muted)},[]),E=s=>{const n=x.current;if(!n)return;const v=Math.min(1,Math.max(0,s));n.volume=v,n.muted=v===0},T=s=>{const n=x.current;!n||!Number.isFinite(g)||g<=0||(n.currentTime=s/100*g,L(n.currentTime))},q=s=>{const n=x.current;n&&(n.currentTime=Math.min(Math.max(0,n.currentTime+s),g||n.currentTime))},Q=async()=>{if(d!=="video")return;const s=x.current;if(!(!s||typeof s.requestPictureInPicture!="function"))try{const n=document;n.pictureInPictureElement?await n.exitPictureInPicture?.():await s.requestPictureInPicture()}catch(n){te()&&console.warn("[MediaPlayer] Failed to request Picture-in-Picture:",n)}},Z=()=>{const s=document.getElementById("ob-media-player-container");if(!s)return;u?document.exitFullscreen?.().then(()=>l(!1)).catch(()=>{}):s.requestFullscreen?.().then(()=>l(!0)).catch(()=>{})};c.useEffect(()=>{const s=()=>{l(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",s),()=>document.removeEventListener("fullscreenchange",s)},[]);const J=()=>{o&&j.downloads.openFile(o).catch(()=>{})},Y=()=>{o&&j.downloads.showInFolder(o).catch(()=>{})},H=s=>{if(!Number.isFinite(s))return"0:00";const n=Math.max(0,Math.round(s)),v=Math.floor(n/60),F=n%60,B=Math.floor(v/60);if(B>0){const I=v%60;return`${B}:${I.toString().padStart(2,"0")}:${F.toString().padStart(2,"0")}`}return`${v}:${F.toString().padStart(2,"0")}`},ee=g>0?Math.min(100,Math.max(0,S/g*100)):0;return e.jsx(se,{children:e.jsx(ae,{children:e.jsx(h.div,{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/70 backdrop-blur-sm px-6 py-8",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:k,children:e.jsxs(h.div,{id:"ob-media-player-container",className:"relative w-full max-w-4xl overflow-hidden rounded-2xl border border-gray-700/60 bg-gray-950/90 shadow-2xl",initial:{y:40,opacity:0},animate:{y:0,opacity:1},exit:{y:40,opacity:0},transition:{type:"spring",damping:22,stiffness:180},onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-800/60 bg-gray-900/70 px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-100",children:i||o.split(/[\\/]/).pop()||"Media file"}),e.jsxs("p",{className:"text-xs text-gray-400",children:[d?d.toUpperCase():"Unknown"," • ",H(g)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:J,className:"rounded-lg border border-gray-700/70 bg-gray-800/70 px-3 py-1.5 text-xs text-gray-200 transition hover:border-blue-500/60 hover:text-blue-300",children:"Open"}),e.jsx("button",{onClick:Y,className:"rounded-lg border border-gray-700/70 bg-gray-800/70 px-3 py-1.5 text-xs text-gray-200 transition hover:border-blue-500/60 hover:text-blue-300",children:"Reveal"}),e.jsx("button",{onClick:k,className:"rounded-lg border border-gray-700/70 bg-gray-800/70 p-1.5 text-gray-300 transition hover:border-red-500/60 hover:text-red-300",children:e.jsx(V,{size:16})})]})]}),e.jsxs("div",{className:`relative flex flex-col items-center justify-center bg-black ${d==="audio"?"py-12":"py-4"}`,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[d==="video"&&y?e.jsx("video",{ref:x,src:y,className:"max-h-[60vh] w-full bg-black object-contain",autoPlay:w,controls:!1}):null,d==="audio"&&y?e.jsxs("div",{className:"flex w-full flex-col items-center gap-6 px-8",children:[e.jsx("div",{className:"mt-4 flex h-32 w-32 items-center justify-center rounded-3xl bg-gradient-to-br from-blue-500/30 to-purple-500/30 text-blue-200",children:e.jsx(oe,{size:64})}),e.jsx("audio",{ref:x,src:y,autoPlay:w,controls:!1})]}):null,!d||!y?e.jsxs("div",{className:"flex h-48 w-full flex-col items-center justify-center gap-3 text-center text-gray-400",children:[e.jsx(xe,{size:40,className:"text-gray-600"}),e.jsx("p",{className:"text-sm",children:"Unable to load media preview"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Unsupported format or missing file reference."})]}):null,d&&y?e.jsx(h.div,{className:"absolute bottom-3 left-1/2 z-10 w-[92%] -translate-x-1/2 rounded-xl border border-gray-800/80 bg-gray-900/95 px-4 py-3 shadow-xl backdrop-blur",animate:{opacity:r||!M?1:.85},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:C,className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-600/90 text-white transition hover:bg-blue-500",children:M?e.jsx(W,{size:18}):e.jsx(K,{size:18})}),e.jsxs("div",{className:"flex flex-col gap-1 text-xs text-gray-400",children:[e.jsx("span",{className:"font-mono text-sm text-gray-100",children:H(S)}),e.jsxs("span",{className:"font-mono text-[11px] text-gray-500",children:[H(g-S)," remaining"]})]}),e.jsx("input",{type:"range",min:0,max:100,value:ee,onChange:s=>T(Number(s.target.value)),className:"flex-1 accent-blue-500"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>q(-10),className:"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300",title:"Back 10 seconds",children:e.jsx(me,{size:16})}),e.jsx("button",{onClick:()=>q(10),className:"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300",title:"Forward 10 seconds",children:e.jsx(he,{size:16})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:f,className:"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300",children:A||P===0?e.jsx(pe,{size:16}):e.jsx(re,{size:16})}),e.jsx("input",{type:"range",min:0,max:100,value:A?0:Math.round(P*100),onChange:s=>E(Number(s.target.value)/100),className:"w-24 accent-blue-500"})]}),m?e.jsx("button",{onClick:Q,className:"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300",title:"Toggle picture-in-picture",children:e.jsx(G,{size:16})}):null,e.jsx("button",{onClick:Z,className:"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300",title:u?"Exit fullscreen":"Enter fullscreen",children:u?e.jsx(ue,{size:16}):e.jsx(de,{size:16})})]})]})}):null]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-800/60 bg-gray-900/70 px-4 py-3 text-xs text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{size:14,className:"text-blue-300"}),e.jsx("span",{children:"Secure local playback"})]}),e.jsx("span",{children:o})]})]})})})})}function Le(){const[o,i]=c.useState([]),[w,k]=c.useState(!0),[d,y]=c.useState(null);c.useEffect(()=>{(async()=>{try{const l=await j.downloads.list();Array.isArray(l)&&i(l.sort((m,b)=>b.createdAt-m.createdAt))}catch(l){console.error("Failed to load downloads:",l)}finally{k(!1)}})();const r=l=>{l?.id&&i(m=>{const b=m.findIndex(f=>f.id===l.id),C={id:l.id,url:l.url,filename:l.filename,status:l.status||"downloading",path:l.path,checksum:l.checksum,createdAt:l.createdAt||Date.now(),progress:l.progress,receivedBytes:l.receivedBytes,totalBytes:l.totalBytes,safety:l.safety,speedBytesPerSec:l.speedBytesPerSec,etaSeconds:l.etaSeconds};if(b>=0){const f=[...m];return f[b]={...f[b],...C,createdAt:f[b].createdAt||C.createdAt},f.sort((E,T)=>T.createdAt-E.createdAt)}return[C,...m].sort((f,E)=>E.createdAt-f.createdAt)})},a=O.on("downloads:progress",r),u=O.on("downloads:done",r);return()=>{a(),u()}},[]);const x=t=>{if(!t)return"Unknown";if(t===0)return"0 Bytes";const r=1024,a=["Bytes","KB","MB","GB"],u=Math.floor(Math.log(t)/Math.log(r));return Math.round(t/Math.pow(r,u)*100)/100+" "+a[u]},M=t=>typeof t.progress=="number"?Math.min(100,Math.max(0,Math.round(t.progress*100))):t.totalBytes&&t.totalBytes>0?Math.min(100,Math.round((t.receivedBytes||0)/t.totalBytes*100)):t.status==="completed"||t.status==="verifying"?100:0,N=t=>{if(!t||!Number.isFinite(t)||t<=0)return"—";const r=["B/s","KB/s","MB/s","GB/s"],a=Math.min(r.length-1,Math.floor(Math.log(t)/Math.log(1024))),u=t/Math.pow(1024,a);return`${u>=100?Math.round(u):Math.round(u*10)/10} ${r[a]}`},S=t=>{if(t===void 0||!Number.isFinite(t)||t<=0)return"—";const r=Math.max(0,Math.round(t)),a=Math.floor(r/3600),u=Math.floor(r%3600/60),l=r%60,m=[];return a>0&&m.push(`${a}h`),(u>0||a>0)&&m.push(`${u}m`),m.push(`${l}s`),m.join(" ")},L=t=>!t?.path||t.status!=="completed"?!1:!!_(t.filename||t.path),g=t=>{switch(t){case"completed":return e.jsx(le,{size:16,className:"text-green-400"});case"failed":case"blocked":return e.jsx(X,{size:16,className:"text-red-400"});case"downloading":case"paused":case"verifying":return e.jsx(U,{size:16,className:"text-blue-400 animate-spin"});case"cancelled":return e.jsx(X,{size:16,className:"text-gray-500"});default:return e.jsx(ne,{size:16,className:"text-gray-400"})}},$=t=>{t&&j.downloads.openFile?.(t).catch(console.error)},P=t=>{t&&j.downloads.showInFolder?.(t).catch(console.error)},z=t=>{if(!t)return null;const r="px-2 py-0.5 rounded-full text-[10px] font-semibold uppercase tracking-wide border";switch(t.status){case"clean":return e.jsx("span",{className:`${r} bg-emerald-500/15 border-emerald-500/30 text-emerald-200`,children:"Scanned Clean"});case"warning":return e.jsx("span",{className:`${r} bg-amber-500/15 border-amber-500/30 text-amber-200`,children:"Review Recommended"});case"blocked":return e.jsx("span",{className:`${r} bg-red-500/15 border-red-500/40 text-red-200`,children:"Quarantined"});case"pending":return e.jsx("span",{className:`${r} bg-blue-500/15 border-blue-500/30 text-blue-200`,children:"Scanning…"});default:return e.jsx("span",{className:`${r} bg-gray-500/15 border-gray-600/40 text-gray-300`,children:"Scan Unavailable"})}},A=t=>t?e.jsxs("div",{className:"text-xs text-gray-500 space-y-1 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[z(t),t.threatLevel&&e.jsxs("span",{className:"text-[10px] uppercase text-gray-400",children:["Threat level: ",t.threatLevel]})]}),t.details&&e.jsx("div",{children:t.details}),t.recommendations&&t.recommendations.length>0&&e.jsx("ul",{className:"list-disc list-inside text-[11px] space-y-0.5",children:t.recommendations.slice(0,3).map((r,a)=>e.jsx("li",{children:r},`${t.scannedAt}-${a}`))}),t.status==="blocked"&&t.quarantinePath&&e.jsxs("div",{className:"text-[11px] text-red-300",children:["File moved to quarantine: ",e.jsx("span",{className:"font-mono",children:t.quarantinePath})]})]}):null;return w?e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-[#1A1D28]",children:e.jsx(U,{size:24,className:"text-blue-400 animate-spin"})}):e.jsxs("div",{className:"h-full w-full bg-[#1A1D28] text-gray-100 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800/50",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Downloads"}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[o.length," ",o.length===1?"download":"downloads"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:o.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx(R,{size:48,className:"text-gray-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"No downloads yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Files you download will appear here"})]}):e.jsx("div",{className:"space-y-3",children:o.map(t=>e.jsx(h.div,{"data-testid":"download-card","data-download-id":t.id,"data-filename":t.filename||"",initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gray-900/60 backdrop-blur-sm border border-gray-800/50 rounded-lg p-4 hover:bg-gray-900/80 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g(t.status),e.jsx("span",{className:"font-medium text-gray-200 truncate",children:t.filename||t.url.split("/").pop()||"Download"}),z(t.safety)]}),t.status==="downloading"||t.status==="paused"?e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-1",children:[e.jsxs("span",{children:[x(t.receivedBytes)," / ",x(t.totalBytes)]}),e.jsxs("span",{children:[M(t),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-800 rounded-full h-2 overflow-hidden",children:e.jsx(h.div,{className:"h-full bg-blue-500",initial:{width:0},animate:{width:`${M(t)}%`},transition:{duration:.3}})}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mt-1",children:[e.jsxs("span",{children:["Speed: ",N(t.speedBytesPerSec)]}),e.jsxs("span",{children:["ETA: ",S(t.etaSeconds)]})]})]}):null,t.status==="verifying"&&e.jsxs("div",{className:"mb-2 text-xs text-blue-300 flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Verifying download integrity…"})]}),e.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"truncate",children:t.url})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{children:new Date(t.createdAt).toLocaleString()}),e.jsx("span",{className:"capitalize",children:t.status}),t.path&&e.jsx("span",{className:"truncate max-w-xs",title:t.path,children:t.path.replace(/^.*[\\\/]/,"")})]}),t.checksum&&e.jsxs("div",{className:"text-xs text-gray-500 truncate",title:`SHA-256: ${t.checksum}`,children:["SHA-256: ",t.checksum.slice(0,12),"…"]}),A(t.safety)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.status==="downloading"&&e.jsxs(e.Fragment,{children:[e.jsx(h.button,{onClick:async()=>{try{await j.downloads.pause(t.id),i(r=>r.map(a=>a.id===t.id?{...a,status:"paused"}:a))}catch(r){console.error("Failed to pause download:",r)}},whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 rounded-lg bg-gray-800/60 hover:bg-gray-800 border border-gray-700/50 text-gray-300 hover:text-yellow-400 transition-colors",title:"Pause download",children:e.jsx(W,{size:18})}),e.jsx(h.button,{onClick:async()=>{try{await j.downloads.cancel(t.id),i(r=>r.map(a=>a.id===t.id?{...a,status:"cancelled"}:a))}catch(r){console.error("Failed to cancel download:",r)}},whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 rounded-lg bg-gray-800/60 hover:bg-gray-800 border border-gray-700/50 text-gray-300 hover:text-red-400 transition-colors",title:"Cancel download",children:e.jsx(V,{size:18})})]}),t.status==="paused"&&e.jsx(h.button,{onClick:async()=>{try{await j.downloads.resume(t.id),i(r=>r.map(a=>a.id===t.id?{...a,status:"downloading"}:a))}catch(r){console.error("Failed to resume download:",r)}},whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 rounded-lg bg-gray-800/60 hover:bg-gray-800 border border-gray-700/50 text-gray-300 hover:text-green-400 transition-colors",title:"Resume download",children:e.jsx(K,{size:18})}),t.status==="paused"&&e.jsx(h.button,{onClick:async()=>{try{await j.downloads.cancel(t.id),i(r=>r.map(a=>a.id===t.id?{...a,status:"cancelled"}:a))}catch(r){console.error("Failed to cancel download:",r)}},whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 rounded-lg bg-gray-800/60 hover:bg-gray-800 border border-gray-700/50 text-gray-300 hover:text-red-400 transition-colors",title:"Cancel download",children:e.jsx(V,{size:18})}),(t.status==="completed"||t.status==="failed"||t.status==="cancelled"||t.status==="blocked")&&t.path&&e.jsxs(e.Fragment,{children:[t.status!=="blocked"&&e.jsx(h.button,{onClick:()=>$(t.path),whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 rounded-lg bg-gray-800/60 hover:bg-gray-800 border border-gray-700/50 text-gray-300 hover:text-blue-400 transition-colors",title:"Open file",children:e.jsx(R,{size:18})}),t.status==="completed"&&t.path&&L(t)&&e.jsx(h.button,{onClick:()=>y(t),whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 rounded-lg bg-gray-800/60 hover:bg-gray-800 border border-gray-700/50 text-gray-300 hover:text-purple-400 transition-colors",title:"Preview media",children:e.jsx(G,{size:18})}),e.jsx(h.button,{onClick:()=>P(t.path),whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 rounded-lg bg-gray-800/60 hover:bg-gray-800 border border-gray-700/50 text-gray-300 hover:text-blue-400 transition-colors",title:"Show in folder",children:e.jsx(ie,{size:18})})]})]})]})},t.id))})}),d&&d.path&&e.jsx(be,{filePath:d.path,fileName:d.filename,onClose:()=>y(null)})]})}export{Le as default};
//# sourceMappingURL=Downloads-D3EcjRtQ.js.map

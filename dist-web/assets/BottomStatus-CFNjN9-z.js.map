{"version":3,"file":"BottomStatus-CFNjN9-z.js","sources":["../../node_modules/lucide-react/dist/esm/icons/ellipsis.js","../../node_modules/lucide-react/dist/esm/icons/frown.js","../../node_modules/lucide-react/dist/esm/icons/meh.js","../../node_modules/lucide-react/dist/esm/icons/memory-stick.js","../../node_modules/lucide-react/dist/esm/icons/mic-off.js","../../node_modules/lucide-react/dist/esm/icons/rocket.js","../../node_modules/lucide-react/dist/esm/icons/smile.js","../../src/state/shadowStore.ts","../../src/components/PrivacySwitch.tsx","../../src/state/efficiencyStore.ts","../../src/state/voiceCompanionStore.ts","../../src/components/voice/SymbioticVoiceCompanion.tsx","../../src/components/layout/BottomStatus.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Ellipsis = createLucideIcon(\"Ellipsis\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"1\", key: \"41hilf\" }],\n  [\"circle\", { cx: \"19\", cy: \"12\", r: \"1\", key: \"1wjl8i\" }],\n  [\"circle\", { cx: \"5\", cy: \"12\", r: \"1\", key: \"1pcz8c\" }]\n]);\n\nexport { Ellipsis as default };\n//# sourceMappingURL=ellipsis.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Frown = createLucideIcon(\"Frown\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M16 16s-1.5-2-4-2-4 2-4 2\", key: \"epbg0q\" }],\n  [\"line\", { x1: \"9\", x2: \"9.01\", y1: \"9\", y2: \"9\", key: \"yxxnd0\" }],\n  [\"line\", { x1: \"15\", x2: \"15.01\", y1: \"9\", y2: \"9\", key: \"1p4y9e\" }]\n]);\n\nexport { Frown as default };\n//# sourceMappingURL=frown.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Meh = createLucideIcon(\"Meh\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"8\", x2: \"16\", y1: \"15\", y2: \"15\", key: \"1xb1d9\" }],\n  [\"line\", { x1: \"9\", x2: \"9.01\", y1: \"9\", y2: \"9\", key: \"yxxnd0\" }],\n  [\"line\", { x1: \"15\", x2: \"15.01\", y1: \"9\", y2: \"9\", key: \"1p4y9e\" }]\n]);\n\nexport { Meh as default };\n//# sourceMappingURL=meh.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MemoryStick = createLucideIcon(\"MemoryStick\", [\n  [\"path\", { d: \"M6 19v-3\", key: \"1nvgqn\" }],\n  [\"path\", { d: \"M10 19v-3\", key: \"iu8nkm\" }],\n  [\"path\", { d: \"M14 19v-3\", key: \"kcehxu\" }],\n  [\"path\", { d: \"M18 19v-3\", key: \"1vh91z\" }],\n  [\"path\", { d: \"M8 11V9\", key: \"63erz4\" }],\n  [\"path\", { d: \"M16 11V9\", key: \"fru6f3\" }],\n  [\"path\", { d: \"M12 11V9\", key: \"ha00sb\" }],\n  [\"path\", { d: \"M2 15h20\", key: \"16ne18\" }],\n  [\n    \"path\",\n    {\n      d: \"M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1.1a2 2 0 0 0 0 3.837V17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5.1a2 2 0 0 0 0-3.837Z\",\n      key: \"lhddv3\"\n    }\n  ]\n]);\n\nexport { MemoryStick as default };\n//# sourceMappingURL=memory-stick.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MicOff = createLucideIcon(\"MicOff\", [\n  [\"line\", { x1: \"2\", x2: \"22\", y1: \"2\", y2: \"22\", key: \"a6p6uj\" }],\n  [\"path\", { d: \"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2\", key: \"80xlxr\" }],\n  [\"path\", { d: \"M5 10v2a7 7 0 0 0 12 5\", key: \"p2k8kg\" }],\n  [\"path\", { d: \"M15 9.34V5a3 3 0 0 0-5.68-1.33\", key: \"1gzdoj\" }],\n  [\"path\", { d: \"M9 9v3a3 3 0 0 0 5.12 2.12\", key: \"r2i35w\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"19\", y2: \"22\", key: \"x3vr5v\" }]\n]);\n\nexport { MicOff as default };\n//# sourceMappingURL=mic-off.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Rocket = createLucideIcon(\"Rocket\", [\n  [\n    \"path\",\n    {\n      d: \"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z\",\n      key: \"m3kijz\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z\",\n      key: \"1fmvmk\"\n    }\n  ],\n  [\"path\", { d: \"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0\", key: \"1f8sc4\" }],\n  [\"path\", { d: \"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5\", key: \"qeys4\" }]\n]);\n\nexport { Rocket as default };\n//# sourceMappingURL=rocket.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Smile = createLucideIcon(\"Smile\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M8 14s1.5 2 4 2 4-2 4-2\", key: \"1y1vjs\" }],\n  [\"line\", { x1: \"9\", x2: \"9.01\", y1: \"9\", y2: \"9\", key: \"yxxnd0\" }],\n  [\"line\", { x1: \"15\", x2: \"15.01\", y1: \"9\", y2: \"9\", key: \"1p4y9e\" }]\n]);\n\nexport { Smile as default };\n//# sourceMappingURL=smile.js.map\n","import { create } from 'zustand';\r\nimport { ipc } from '../lib/ipc-typed';\r\nimport type { ShadowSessionSummaryEvent, ShadowSessionEndedEvent } from '../lib/ipc-events';\r\n\r\ntype ShadowState = {\r\n  activeSessionId: string | null;\r\n  windowId: number | null;\r\n  loading: boolean;\r\n  error: string | null;\r\n  summary: ShadowSessionSummaryEvent | null;\r\n  startShadowSession: (options?: { url?: string; persona?: string; summary?: boolean }) => Promise<void>;\r\n  endShadowSession: (options?: { forensic?: boolean }) => Promise<void>;\r\n  handleSessionEnded: (payload: ShadowSessionEndedEvent) => void;\r\n  clearSummary: () => void;\r\n  setError: (error: string | null) => void;\r\n};\r\n\r\nexport const useShadowStore = create<ShadowState>((set, get) => ({\r\n  activeSessionId: null,\r\n  windowId: null,\r\n  loading: false,\r\n  error: null,\r\n  summary: null,\r\n  async startShadowSession(options) {\r\n    if (get().loading) return;\r\n    set({ loading: true, error: null, summary: null });\r\n    try {\r\n      const response = await ipc.private.createShadowSession(options ?? {});\r\n      if (!response || typeof response !== 'object') {\r\n        throw new Error('Shadow session failed to start');\r\n      }\r\n      const sessionResponse = response as { sessionId?: string | null; windowId?: number | null };\r\n      set({\r\n        activeSessionId: sessionResponse.sessionId ?? null,\r\n        windowId: typeof sessionResponse.windowId === 'number' ? sessionResponse.windowId : null,\r\n        loading: false,\r\n        summary: null,\r\n      });\r\n    } catch (error) {\r\n      set({\r\n        loading: false,\r\n        error: error instanceof Error ? error.message : String(error),\r\n      });\r\n      throw error;\r\n    }\r\n  },\r\n  async endShadowSession(options) {\r\n    const sessionId = get().activeSessionId;\r\n    if (!sessionId) return;\r\n    set({ loading: true, error: null });\r\n    try {\r\n      const response = await ipc.private.endShadowSession(sessionId, options);\r\n      const endResponse = response as { summary?: ShadowSessionSummaryEvent | null } | null;\r\n      set({\r\n        activeSessionId: null,\r\n        windowId: null,\r\n        loading: false,\r\n        summary: endResponse?.summary ?? null,\r\n      });\r\n    } catch (error) {\r\n      set({\r\n        loading: false,\r\n        error: error instanceof Error ? error.message : String(error),\r\n      });\r\n      throw error;\r\n    }\r\n  },\r\n  handleSessionEnded(payload) {\r\n    set((state) => {\r\n      const shouldClear = state.activeSessionId === payload.sessionId;\r\n      return {\r\n        activeSessionId: shouldClear ? null : state.activeSessionId,\r\n        windowId: shouldClear ? null : state.windowId,\r\n        loading: false,\r\n        summary: payload.summary ?? null,\r\n      };\r\n    });\r\n  },\r\n  clearSummary() {\r\n    set({ summary: null });\r\n  },\r\n  setError(error) {\r\n    set({ error });\r\n  },\r\n}));\r\n\r\n\r\n","/**\r\n * PrivacySwitch - Toggle between Normal/Private/Ghost modes\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Lock, Eye, Network, MoonStar } from 'lucide-react';\r\nimport { useProfileStore } from '../state/profileStore';\r\nimport { useShadowStore } from '../state/shadowStore';\r\n\r\ntype PrivacyMode = 'Normal' | 'Private' | 'Ghost';\r\n\r\nexport function PrivacySwitch() {\r\n  const [mode, setMode] = useState<PrivacyMode>('Normal');\r\n  const policy = useProfileStore((state) => state.policies[state.activeProfileId]);\r\n  const {\r\n    activeSessionId: shadowSessionId,\r\n    startShadowSession,\r\n    endShadowSession,\r\n    loading: shadowLoading,\r\n  } = useShadowStore();\r\n\r\n  const privateDisabled = policy ? !policy.allowPrivateWindows : false;\r\n  const ghostDisabled = policy ? !policy.allowGhostTabs : false;\r\n  const shadowDisabled = policy ? !policy.allowPrivateWindows : false;\r\n\r\n  const modes: Array<{ value: PrivacyMode; icon: typeof Lock; label: string; color: string; disabled?: boolean }> = [\r\n    { value: 'Normal', icon: Lock, label: 'Normal', color: 'text-gray-400' },\r\n    { value: 'Private', icon: Eye, label: 'Private', color: 'text-blue-400', disabled: privateDisabled },\r\n    { value: 'Ghost', icon: Network, label: 'Ghost', color: 'text-purple-400', disabled: ghostDisabled },\r\n  ];\r\n\r\n  const handleModeChange = async (newMode: PrivacyMode) => {\r\n    if (newMode === mode) return;\r\n\r\n    const target = modes.find((m) => m.value === newMode);\r\n    if (target?.disabled) {\r\n      return;\r\n    }\r\n\r\n    if (newMode === 'Private') {\r\n      try {\r\n        if ((window as any).ipc?.invoke) {\r\n          await (window as any).ipc.invoke('ob://ipc/v1/private:createWindow', { url: 'about:blank' });\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to create private window:', error);\r\n        return;\r\n      }\r\n    } else if (newMode === 'Ghost') {\r\n      try {\r\n        if ((window as any).ipc?.invoke) {\r\n          await (window as any).ipc.invoke('ob://ipc/v1/private:createGhostTab', { url: 'about:blank' });\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to create ghost tab:', error);\r\n        return;\r\n      }\r\n    }\r\n\r\n    setMode(newMode);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-1 bg-gray-800/50 rounded-lg p-1 border border-gray-700/50\">\r\n      {modes.map((m) => {\r\n        const Icon = m.icon;\r\n        const isActive = mode === m.value;\r\n        return (\r\n          <motion.button\r\n            key={m.value}\r\n            onClick={() => handleModeChange(m.value)}\r\n            whileHover={{ scale: 1.05 }}\r\n            whileTap={{ scale: 0.95 }}\r\n            className={`px-3 py-1.5 rounded-md text-xs font-medium transition-all flex items-center gap-1.5 ${\r\n              isActive\r\n                ? `${m.color.replace('text-', 'bg-')} bg-opacity-20 text-white`\r\n                : m.disabled\r\n                ? 'text-gray-600 cursor-not-allowed'\r\n                : 'text-gray-400 hover:text-gray-300'\r\n            }`}\r\n            disabled={m.disabled}\r\n            title={\r\n              m.disabled\r\n                ? `${m.label} disabled by profile policy`\r\n                : `Switch to ${m.label}`\r\n            }\r\n          >\r\n            <Icon size={14} />\r\n            <span>{m.label}</span>\r\n          </motion.button>\r\n        );\r\n      })}\r\n      <motion.button\r\n        key=\"Shadow\"\r\n        whileHover={{ scale: shadowLoading || shadowDisabled ? 1 : 1.05 }}\r\n        whileTap={{ scale: shadowLoading || shadowDisabled ? 1 : 0.95 }}\r\n        disabled={shadowDisabled || shadowLoading}\r\n        onClick={async () => {\r\n          if (shadowDisabled || shadowLoading) return;\r\n          try {\r\n            if (shadowSessionId) {\r\n              await endShadowSession();\r\n            } else {\r\n              await startShadowSession({ summary: true });\r\n            }\r\n          } catch (error) {\r\n            console.error('Shadow session error:', error);\r\n          }\r\n        }}\r\n        className={`px-3 py-1.5 rounded-md text-xs font-medium transition-all flex items-center gap-1.5 ${\r\n          shadowSessionId\r\n            ? 'bg-purple-500/20 text-purple-200 border border-purple-400/30'\r\n            : shadowDisabled\r\n            ? 'text-gray-600 cursor-not-allowed'\r\n            : 'text-gray-400 hover:text-gray-300'\r\n        }`}\r\n        title={\r\n          shadowDisabled\r\n            ? 'Shadow Mode disabled by profile policy'\r\n            : shadowSessionId\r\n            ? 'End Shadow Mode session'\r\n            : 'Start Shadow Mode (simulated private browsing)'\r\n        }\r\n      >\r\n        <MoonStar size={14} />\r\n        <span>{shadowSessionId ? 'Shadow On' : 'Shadow'}</span>\r\n      </motion.button>\r\n    </div>\r\n  );\r\n}\r\n\r\n","import { create } from 'zustand';\r\n\r\nexport type EfficiencyMode = 'normal' | 'battery-saver' | 'extreme';\r\n\r\nconst MODE_LABELS: Record<EfficiencyMode, string> = {\r\n  normal: 'Performance Mode',\r\n  'battery-saver': 'Battery Saver Mode',\r\n  extreme: 'Regen Mode',\r\n};\r\n\r\nconst MODE_BADGES: Record<EfficiencyMode, string | null> = {\r\n  normal: null,\r\n  'battery-saver': '+0.8hr battery',\r\n  extreme: '+1.8hr battery',\r\n};\r\n\r\nconst MODE_COLORS: Record<EfficiencyMode, string> = {\r\n  normal: 'text-gray-400',\r\n  'battery-saver': 'text-emerald-300',\r\n  extreme: 'text-amber-300',\r\n};\r\n\r\ntype Snapshot = {\r\n  batteryPct: number | null;\r\n  charging: boolean | null;\r\n  ramMb: number;\r\n  cpuLoad1: number;\r\n  activeTabs: number;\r\n  carbonIntensity?: number | null;\r\n  carbonRegion?: string | null;\r\n};\r\n\r\ntype EfficiencyState = {\r\n  mode: EfficiencyMode;\r\n  label: string;\r\n  badge: string | null;\r\n  colorClass: string;\r\n  lastUpdated: number | null;\r\n  snapshot: Snapshot;\r\n  setEvent: (event: {\r\n    mode: EfficiencyMode;\r\n    label?: string | null;\r\n    badge?: string | null;\r\n    timestamp: number;\r\n    snapshot: Snapshot;\r\n  }) => void;\r\n};\r\n\r\nconst defaultSnapshot: Snapshot = {\r\n  batteryPct: null,\r\n  charging: null,\r\n  ramMb: 0,\r\n  cpuLoad1: 0,\r\n  activeTabs: 0,\r\n  carbonIntensity: null,\r\n  carbonRegion: null,\r\n};\r\n\r\nexport const useEfficiencyStore = create<EfficiencyState>((set) => ({\r\n  mode: 'normal',\r\n  label: MODE_LABELS.normal,\r\n  badge: MODE_BADGES.normal,\r\n  colorClass: MODE_COLORS.normal,\r\n  lastUpdated: null,\r\n  snapshot: defaultSnapshot,\r\n  setEvent: (event) => {\r\n    const nextMode = event.mode;\r\n    set({\r\n      mode: nextMode,\r\n      label: event.label ?? MODE_LABELS[nextMode],\r\n      badge: event.badge ?? MODE_BADGES[nextMode],\r\n      colorClass: MODE_COLORS[nextMode],\r\n      lastUpdated: event.timestamp,\r\n      snapshot: event.snapshot,\r\n    });\r\n  },\r\n}));\r\n","import { create } from 'zustand';\r\nimport { ipc } from '../lib/ipc-typed';\r\n\r\nexport type CompanionMood = 'calm' | 'positive' | 'concerned' | 'motivated';\r\n\r\nexport interface VoiceMessage {\r\n  role: 'user' | 'companion';\r\n  text: string;\r\n  timestamp: number;\r\n  mood?: CompanionMood;\r\n}\r\n\r\ninterface VoiceCompanionState {\r\n  open: boolean;\r\n  listening: boolean;\r\n  transcript: string;\r\n  mood: CompanionMood;\r\n  messages: VoiceMessage[];\r\n  loadingReply: boolean;\r\n  error: string | null;\r\n  setOpen: (open: boolean) => void;\r\n  setListening: (listening: boolean) => void;\r\n  setTranscript: (text: string) => void;\r\n  setMood: (mood: CompanionMood) => void;\r\n  pushMessage: (message: VoiceMessage) => void;\r\n  sendToCompanion: (text: string, mood: CompanionMood) => Promise<void>;\r\n  clearConversation: () => void;\r\n  setError: (error: string | null) => void;\r\n}\r\n\r\nexport const useVoiceCompanionStore = create<VoiceCompanionState>((set) => ({\r\n  open: false,\r\n  listening: false,\r\n  transcript: '',\r\n  mood: 'calm',\r\n  messages: [],\r\n  loadingReply: false,\r\n  error: null,\r\n  setOpen(open) {\r\n    set({ open });\r\n  },\r\n  setListening(listening) {\r\n    set({ listening });\r\n  },\r\n  setTranscript(text) {\r\n    set({ transcript: text });\r\n  },\r\n  setMood(mood) {\r\n    set({ mood });\r\n  },\r\n  pushMessage(message) {\r\n    set((state) => ({ messages: [...state.messages, message] }));\r\n  },\r\n  async sendToCompanion(text, mood) {\r\n    if (!text.trim()) return;\r\n    const timestamp = Date.now();\r\n    const userMessage: VoiceMessage = {\r\n      role: 'user',\r\n      text,\r\n      timestamp,\r\n      mood,\r\n    };\r\n    set((state) => ({\r\n      messages: [...state.messages, userMessage],\r\n      loadingReply: true,\r\n      error: null,\r\n    }));\r\n\r\n    try {\r\n      const prompt = `You are Symbiotic, OmniBrowser's empathic voice companion. The user mood is ${mood}. Respond concisely (<=3 sentences) in a friendly tone, with optional short actionable tip.`;\r\n      const response = await ipc.agent.ask(prompt, {\r\n        text,\r\n      });\r\n      const reply: VoiceMessage = {\r\n        role: 'companion',\r\n        text: response?.answer ?? 'I hear you. Let me know how else I can help.',\r\n        timestamp: Date.now(),\r\n        mood,\r\n      };\r\n      set((state) => ({\r\n        messages: [...state.messages, reply],\r\n        loadingReply: false,\r\n      }));\r\n    } catch (error) {\r\n      set({\r\n        error: error instanceof Error ? error.message : String(error),\r\n        loadingReply: false,\r\n      });\r\n    }\r\n  },\r\n  clearConversation() {\r\n    set({ messages: [], transcript: '', mood: 'calm', error: null });\r\n  },\r\n  setError(error) {\r\n    set({ error });\r\n  },\r\n}));\r\n","import { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { AnimatePresence, motion } from 'framer-motion';\r\nimport { Mic, MicOff, Sparkles, Loader2, Smile, Meh, Frown, Rocket } from 'lucide-react';\r\nimport { useVoiceCompanionStore, CompanionMood } from '../../state/voiceCompanionStore';\r\nimport { Portal } from '../common/Portal';\r\n\r\nconst positiveWords = ['great', 'awesome', 'excited', 'happy', 'love', 'fantastic', 'wonderful'];\r\nconst negativeWords = ['frustrated', 'angry', 'annoyed', 'stuck', 'hate', 'upset'];\r\nconst urgencyWords = ['plan', 'launch', 'deadline', 'urgent', 'quick', 'fast'];\r\n\r\nfunction detectMood(text: string): CompanionMood {\r\n  const lowered = text.toLowerCase();\r\n  if (negativeWords.some((w) => lowered.includes(w))) {\r\n    return 'concerned';\r\n  }\r\n  if (urgencyWords.some((w) => lowered.includes(w))) {\r\n    return 'motivated';\r\n  }\r\n  if (positiveWords.some((w) => lowered.includes(w))) {\r\n    return 'positive';\r\n  }\r\n  return 'calm';\r\n}\r\n\r\nfunction moodIcon(mood: CompanionMood) {\r\n  switch (mood) {\r\n    case 'positive':\r\n      return <Smile size={16} className=\"text-emerald-300\" />;\r\n    case 'concerned':\r\n      return <Frown size={16} className=\"text-amber-300\" />;\r\n    case 'motivated':\r\n      return <Rocket size={16} className=\"text-cyan-300\" />;\r\n    default:\r\n      return <Meh size={16} className=\"text-slate-300\" />;\r\n  }\r\n}\r\n\r\nexport function SymbioticVoiceCompanion() {\r\n  const {\r\n    open,\r\n    listening,\r\n    transcript,\r\n    mood,\r\n    messages,\r\n    loadingReply,\r\n    error,\r\n    setOpen,\r\n    setListening,\r\n    setTranscript,\r\n    setMood,\r\n    sendToCompanion,\r\n    clearConversation,\r\n    setError,\r\n  } = useVoiceCompanionStore();\r\n\r\n  const recogRef = useRef<any>(null);\r\n  const [speechSupported, setSpeechSupported] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const SR: any = (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition;\r\n    if (SR) {\r\n      const recognizer = new SR();\r\n      recognizer.continuous = false;\r\n      recognizer.interimResults = true;\r\n      recognizer.lang = 'en-US';\r\n      recognizer.onresult = (event: any) => {\r\n        const interim = Array.from(event.results)\r\n          .map((res: any) => res[0].transcript)\r\n          .join(' ');\r\n        setTranscript(interim);\r\n        if (event.results[0].isFinal) {\r\n          const finalText = interim.trim();\r\n          const detectedMood = detectMood(finalText);\r\n          setMood(detectedMood);\r\n          setTranscript('');\r\n          setListening(false);\r\n          void sendToCompanion(finalText, detectedMood);\r\n        }\r\n      };\r\n      recognizer.onerror = (e: any) => {\r\n        setListening(false);\r\n        setError(e?.error ?? 'Voice recognition error');\r\n      };\r\n      recognizer.onend = () => {\r\n        setListening(false);\r\n      };\r\n      recogRef.current = recognizer;\r\n      setSpeechSupported(true);\r\n    } else {\r\n      setSpeechSupported(false);\r\n    }\r\n  }, [setListening, setTranscript, setMood, sendToCompanion, setError]);\r\n\r\n  const startListening = () => {\r\n    if (!speechSupported || !recogRef.current) {\r\n      setError('Speech recognition not available in this environment.');\r\n      return;\r\n    }\r\n    try {\r\n      setError(null);\r\n      setTranscript('');\r\n      setListening(true);\r\n      recogRef.current.start();\r\n    } catch (error) {\r\n      setError(error instanceof Error ? error.message : String(error));\r\n      setListening(false);\r\n    }\r\n  };\r\n\r\n  const stopListening = () => {\r\n    if (recogRef.current && listening) {\r\n      try {\r\n        recogRef.current.stop();\r\n      } catch {}\r\n    }\r\n    setListening(false);\r\n  };\r\n\r\n  const moodLabel = useMemo(() => {\r\n    switch (mood) {\r\n      case 'positive':\r\n        return 'Upbeat';\r\n      case 'concerned':\r\n        return 'Checking in';\r\n      case 'motivated':\r\n        return 'In the zone';\r\n      default:\r\n        return 'Calm';\r\n    }\r\n  }, [mood]);\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => setOpen(!open)}\r\n        className={`flex items-center gap-1 rounded-full border border-purple-400/30 bg-purple-500/10 px-3 py-1.5 text-xs font-medium text-purple-100 transition-colors hover:bg-purple-500/20`}\r\n        title=\"Open Symbiotic Voice Companion\"\r\n      >\r\n        <Sparkles size={14} /> Voice Companion\r\n      </button>\r\n\r\n      <AnimatePresence>\r\n        {open && (\r\n          <Portal>\r\n            <div className=\"fixed inset-0 z-[120] flex items-end justify-end bg-transparent pointer-events-none\">\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 40 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: 40 }}\r\n                transition={{ duration: 0.2 }}\r\n                className=\"pointer-events-auto m-6 w-[360px] max-w-[92vw] rounded-3xl border border-purple-400/30 bg-slate-950/96 p-4 shadow-[0_20px_80px_rgba(124,58,237,0.35)]\"\r\n              >\r\n                <div className=\"flex items-start justify-between gap-2\">\r\n                  <div>\r\n                    <div className=\"text-xs uppercase tracking-wide text-purple-200/80\">Symbiotic Companion</div>\r\n                    <div className=\"flex items-center gap-2 text-sm font-semibold text-purple-100\">\r\n                      {moodIcon(mood)} {moodLabel}\r\n                    </div>\r\n                    <div className=\"text-[11px] text-purple-200/60\">Speak your mind and Symbiotic will respond empathetically.</div>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={clearConversation}\r\n                      className=\"rounded-lg border border-purple-400/30 bg-purple-500/10 px-2 py-1 text-[10px] text-purple-100 hover:bg-purple-500/20\"\r\n                    >\r\n                      Clear\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        stopListening();\r\n                        setOpen(false);\r\n                      }}\r\n                      className=\"rounded-lg border border-purple-400/30 bg-purple-500/10 px-2 py-1 text-[10px] text-purple-100 hover:bg-purple-500/20\"\r\n                    >\r\n                      Close\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"mt-4 h-48 overflow-y-auto rounded-2xl border border-purple-500/10 bg-slate-900/60 p-3\">\r\n                  {messages.length === 0 && !transcript ? (\r\n                    <div className=\"text-[11px] text-purple-200/70\">\r\n                      Tap the mic to start talking. I can help summarize, brainstorm, or keep you focused.\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"flex flex-col gap-3 text-[11px]\">\r\n                      {messages.map((message) => (\r\n                        <div\r\n                          key={`${message.role}-${message.timestamp}`}\r\n                          className={`flex flex-col gap-1 ${message.role === 'user' ? 'items-end text-right' : 'items-start text-left'}`}\r\n                        >\r\n                          <div\r\n                            className={`max-w-[85%] rounded-2xl px-3 py-2 shadow-sm ${\r\n                              message.role === 'user'\r\n                                ? 'bg-purple-500/20 text-purple-100'\r\n                                : 'bg-slate-800/70 text-purple-50'\r\n                            }`}\r\n                          >\r\n                            {message.text}\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                      {transcript && (\r\n                        <div className=\"flex justify-end text-[11px] text-purple-200/70\">\r\n                          {transcript}\r\n                        </div>\r\n                      )}\r\n                      {loadingReply && (\r\n                        <div className=\"flex items-center gap-2 text-[11px] text-purple-200/70\">\r\n                          <Loader2 size={14} className=\"animate-spin\" />\r\n                          Formulating a response…\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {error && (\r\n                  <div className=\"mt-2 rounded-lg border border-rose-500/40 bg-rose-500/10 px-3 py-1 text-[11px] text-rose-100\">\r\n                    {error}\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"mt-4 flex items-center justify-between gap-2\">\r\n                  <div className=\"flex items-center gap-2 text-[11px] text-purple-200/70\">\r\n                    {speechSupported ? 'Ready for voice input.' : 'Voice capture not available.'}\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={listening ? stopListening : startListening}\r\n                      disabled={!speechSupported}\r\n                      className={`flex items-center gap-2 rounded-full px-3 py-1.5 text-xs transition-colors ${\r\n                        listening\r\n                          ? 'bg-red-500/30 text-red-100 border border-red-500/40'\r\n                          : 'bg-purple-500/20 text-purple-100 border border-purple-400/30 hover:bg-purple-500/30'\r\n                      } ${speechSupported ? '' : 'opacity-60 cursor-not-allowed'}`}\r\n                    >\r\n                      {listening ? <MicOff size={14} /> : <Mic size={14} />}\r\n                      {listening ? 'Stop listening' : 'Start listening'}\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </motion.div>\r\n            </div>\r\n          </Portal>\r\n        )}\r\n      </AnimatePresence>\r\n    </>\r\n  );\r\n}\r\n","/**\r\n * BottomStatus - Status bar with live indicators and AI prompt\r\n */\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport type { LucideIcon } from 'lucide-react';\r\nimport { Send, Cpu, MemoryStick, Network, Brain, Shield, Activity, AlertTriangle, X, RefreshCw, Wifi, MoonStar, FileText, Loader2, MoreHorizontal } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { ipc } from '../../lib/ipc-typed';\r\nimport { useTabsStore } from '../../state/tabsStore';\r\nimport { EfficiencyModeEvent, NetworkStatus, EfficiencyAlert, EfficiencyAlertAction, ShadowSessionEndedEvent } from '../../lib/ipc-events';\r\nimport { useIPCEvent } from '../../lib/use-ipc-event';\r\nimport { PrivacySwitch } from '../PrivacySwitch';\r\nimport { useEfficiencyStore } from '../../state/efficiencyStore';\r\nimport { usePrivacyStore } from '../../state/privacyStore';\r\nimport { useShadowStore } from '../../state/shadowStore';\r\nimport { SymbioticVoiceCompanion } from '../voice';\r\n\r\nexport function BottomStatus() {\r\n  const { activeId } = useTabsStore();\r\n  const [prompt, setPrompt] = useState('');\r\n  const [promptLoading, setPromptLoading] = useState(false);\r\n  const [extraOpen, setExtraOpen] = useState(false);\r\n  const extraRef = useRef<HTMLDivElement | null>(null);\r\n  const [dohStatus, setDohStatus] = useState({ enabled: false, provider: 'cloudflare' });\r\n  const [cpuUsage, setCpuUsage] = useState(0);\r\n  const [memoryUsage, setMemoryUsage] = useState(0);\r\n  const [modelReady] = useState(true);\r\n  const [privacyMode, setPrivacyMode] = useState<'Normal' | 'Ghost' | 'Tor'>('Normal');\r\n  const [efficiencyAlert, setEfficiencyAlert] = useState<EfficiencyAlert | null>(null);\r\n  const efficiencyLabel = useEfficiencyStore((state) => state.label);\r\n  const efficiencyBadge = useEfficiencyStore((state) => state.badge);\r\n  const efficiencySnapshot = useEfficiencyStore((state) => state.snapshot);\r\n  const setEfficiencyEvent = useEfficiencyStore((state) => state.setEvent);\r\n  const shadowSessionId = useShadowStore((state) => state.activeSessionId);\r\n  const shadowLoading = useShadowStore((state) => state.loading);\r\n  const shadowSummary = useShadowStore((state) => state.summary);\r\n  const handleShadowEnded = useShadowStore((state) => state.handleSessionEnded);\r\n  const clearShadowSummary = useShadowStore((state) => state.clearSummary);\r\n  const carbonIntensity = efficiencySnapshot.carbonIntensity ?? null;\r\n  const torStatus = usePrivacyStore((state) => state.tor);\r\n  const vpnStatus = usePrivacyStore((state) => state.vpn);\r\n  const refreshTor = usePrivacyStore((state) => state.refreshTor);\r\n  const refreshVpn = usePrivacyStore((state) => state.refreshVpn);\r\n  const startTor = usePrivacyStore((state) => state.startTor);\r\n  const stopTor = usePrivacyStore((state) => state.stopTor);\r\n  const newTorIdentity = usePrivacyStore((state) => state.newTorIdentity);\r\n  const checkVpn = usePrivacyStore((state) => state.checkVpn);\r\n\r\n  // Listen for network status\r\n  useIPCEvent<NetworkStatus>('net:status', (status) => {\r\n    if (status.doh) {\r\n      setDohStatus(status.doh);\r\n    }\r\n    if (status.tor?.enabled && status.tor.circuitEstablished) {\r\n      setPrivacyMode('Tor');\r\n    } else if (status.proxy?.enabled) {\r\n      setPrivacyMode('Ghost');\r\n    } else {\r\n      setPrivacyMode('Normal');\r\n    }\r\n  }, []);\r\n\r\n  useIPCEvent<EfficiencyModeEvent>('efficiency:mode', (event) => {\r\n    setEfficiencyEvent(event);\r\n  }, [setEfficiencyEvent]);\r\n\r\n  useIPCEvent<EfficiencyAlert>('efficiency:alert', (alert) => {\r\n    setEfficiencyAlert(alert);\r\n  }, []);\r\n\r\n  useIPCEvent<ShadowSessionEndedEvent>('private:shadow:ended', (payload) => {\r\n    handleShadowEnded(payload);\r\n  }, [handleShadowEnded]);\r\n\r\n  useEffect(() => {\r\n    void refreshTor();\r\n    void refreshVpn();\r\n    const interval = window.setInterval(() => {\r\n      void refreshTor();\r\n      void refreshVpn();\r\n    }, 20000);\r\n    return () => window.clearInterval(interval);\r\n  }, [refreshTor, refreshVpn]);\r\n\r\n  // Update CPU and memory (throttled) - use ref to prevent infinite loops\r\n  const statsUpdateRef = useRef<number>(0);\r\n  \r\n  useEffect(() => {\r\n    const updateSystemStats = () => {\r\n      try {\r\n        // Would use actual IPC call to get process stats\r\n        // const stats = await ipc.system.getStats();\r\n        // setCpuUsage(stats.cpu);\r\n        // setMemoryUsage(stats.memory);\r\n        \r\n        // Mock for now - only update if interval has passed to prevent loops\r\n        const now = Date.now();\r\n        if (now - statsUpdateRef.current >= 1000) {\r\n          statsUpdateRef.current = now;\r\n          setCpuUsage(prev => {\r\n            const newVal = Math.floor(Math.random() * 30) + 5;\r\n            return prev !== newVal ? newVal : prev;\r\n          });\r\n          setMemoryUsage(prev => {\r\n            const newVal = Math.floor(Math.random() * 60) + 20;\r\n            return prev !== newVal ? newVal : prev;\r\n          });\r\n        }\r\n      } catch {}\r\n    };\r\n\r\n    updateSystemStats();\r\n    const interval = setInterval(updateSystemStats, 1000); // Throttled to 1s\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    \r\n    // Wait a bit for IPC to be ready before making calls\r\n    const initStatus = async () => {\r\n      if (!isMounted) return;\r\n      \r\n      // Wait for IPC to be ready\r\n      if (!window.ipc || typeof window.ipc.invoke !== 'function') {\r\n        // Retry after a delay\r\n        setTimeout(initStatus, 500);\r\n        return;\r\n      }\r\n      \r\n      // Load DoH status\r\n      try {\r\n        const status = await ipc.dns.status();\r\n        if (isMounted && status && typeof status === 'object') {\r\n          setDohStatus(status as any);\r\n        }\r\n      } catch {\r\n        // Silently handle - set default state on error\r\n        if (isMounted) {\r\n          setDohStatus({ enabled: false, provider: 'cloudflare' });\r\n        }\r\n      }\r\n\r\n      // Check model status (would check Ollama heartbeat)\r\n      // ipc.agent.getModelStatus().then(status => {\r\n      //   setModelReady(status.ready);\r\n      // }).catch(() => {});\r\n    };\r\n    \r\n    // Delay initial load to allow IPC to initialize\r\n    setTimeout(initStatus, 400);\r\n    \r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []);\r\n\r\n  const privacyModeColors = {\r\n    Normal: 'text-gray-400',\r\n    Ghost: 'text-blue-400',\r\n    Tor: 'text-purple-400',\r\n  };\r\n\r\n  const torStatusLabel = torStatus.stub\r\n    ? 'Tor: Stub'\r\n    : torStatus.running\r\n      ? torStatus.circuitEstablished\r\n        ? 'Tor: On'\r\n        : `Tor: ${Math.round(torStatus.progress)}%`\r\n      : 'Tor: Off';\r\n  const torTooltip = torStatus.error\r\n    ? `Tor warning: ${torStatus.error}`\r\n    : torStatus.stub\r\n      ? 'Tor binary not found; using stub mode for UI only.'\r\n      : torStatus.running\r\n        ? torStatus.circuitEstablished\r\n          ? 'Tor circuit established. Click to stop.'\r\n          : 'Tor starting up. Click to stop.'\r\n        : 'Route traffic through Tor. Click to enable.';\r\n\r\n  const vpnTooltip = vpnStatus.connected\r\n    ? `VPN connected${vpnStatus.name ? ` (${vpnStatus.name})` : ''}. Click to re-check.`\r\n    : 'Check whether a system VPN is active.';\r\n\r\n  const severityStyles: Record<'info' | 'warning' | 'critical', string> = {\r\n    info: 'bg-blue-500/10 border-blue-400/40 text-blue-100',\r\n    warning: 'bg-amber-500/10 border-amber-400/40 text-amber-100',\r\n    critical: 'bg-red-500/10 border-red-400/40 text-red-100',\r\n  };\r\n \r\n  const clampPercent = (value?: number | null) => {\r\n    if (typeof value !== 'number' || !Number.isFinite(value)) {\r\n      return 0;\r\n    }\r\n    return Math.max(0, Math.min(100, Math.round(value)));\r\n  };\r\n\r\n  const StatusMeter = ({\r\n    icon: Icon,\r\n    label,\r\n    value,\r\n    percent,\r\n    gradient = 'from-blue-500 via-cyan-500 to-blue-500',\r\n    title,\r\n    onClick,\r\n  }: {\r\n    icon: LucideIcon;\r\n    label: string;\r\n    value: string;\r\n    percent?: number;\r\n    gradient?: string;\r\n    title?: string;\r\n    onClick?: () => void;\r\n  }) => {\r\n    const Component = onClick ? 'button' : 'div';\r\n    const pct = clampPercent(percent);\r\n\r\n    return (\r\n      <Component\r\n        type={onClick ? 'button' : undefined}\r\n        onClick={onClick}\r\n        title={title}\r\n        className={`flex items-center gap-1.5 rounded-full border border-gray-700/60 bg-gray-800/60 px-2 py-1 text-xs text-gray-200 ${\r\n          onClick ? 'cursor-pointer transition-colors hover:border-gray-500/70 focus:outline-none focus:ring-1 focus:ring-blue-400/40' : ''\r\n        }`}\r\n      >\r\n        <Icon size={12} className=\"text-gray-400\" />\r\n        <span className=\"font-semibold text-gray-100\">{label}</span>\r\n        <span className=\"text-[11px] opacity-75\">{value}</span>\r\n        <div className=\"h-1.5 w-14 overflow-hidden rounded-full bg-gray-700\">\r\n          <div className={`h-full bg-gradient-to-r ${gradient}`} style={{ width: `${pct}%` }} />\r\n        </div>\r\n      </Component>\r\n    );\r\n  };\r\n\r\n  const StatusBadge = ({\r\n    icon: Icon,\r\n    label,\r\n    description,\r\n    variant = 'default',\r\n    title,\r\n    onClick,\r\n    pulse = false,\r\n    loading = false,\r\n    className,\r\n  }: {\r\n    icon: LucideIcon;\r\n    label: string;\r\n    description?: string;\r\n    variant?: 'default' | 'positive' | 'warning' | 'danger' | 'info';\r\n    title?: string;\r\n    onClick?: () => void;\r\n    pulse?: boolean;\r\n    loading?: boolean;\r\n    className?: string;\r\n  }) => {\r\n    const palette: Record<string, string> = {\r\n      default: 'border-gray-700/60 bg-gray-800/60 text-gray-200',\r\n      positive: 'border-emerald-500/30 bg-emerald-500/10 text-emerald-100',\r\n      warning: 'border-amber-500/30 bg-amber-500/10 text-amber-100',\r\n      danger: 'border-red-500/30 bg-red-500/10 text-red-100',\r\n      info: 'border-blue-500/30 bg-blue-500/10 text-blue-100',\r\n    };\r\n\r\n    const Component = onClick ? 'button' : 'div';\r\n\r\n    return (\r\n      <Component\r\n        type={onClick ? 'button' : undefined}\r\n        onClick={onClick}\r\n        title={title}\r\n        className={`${palette[variant]} ${className ?? ''} flex items-center gap-1.5 rounded-full px-2 py-1 text-xs ${\r\n          onClick ? 'cursor-pointer transition-colors hover:border-gray-500/70 focus:outline-none focus:ring-1 focus:ring-blue-400/30' : ''\r\n        }`}\r\n      >\r\n        <Icon size={12} className=\"opacity-80\" />\r\n        <span className=\"font-medium\">{label}</span>\r\n        {description && <span className=\"text-[11px] opacity-75\">{description}</span>}\r\n        {loading && <span className=\"h-3 w-3 animate-spin rounded-full border border-current border-t-transparent\" />}\r\n        {pulse && (\r\n          <motion.span\r\n            className=\"inline-flex h-1.5 w-1.5 rounded-full bg-current\"\r\n            animate={{ opacity: [0.4, 1, 0.4] }}\r\n            transition={{ duration: 1.6, repeat: Infinity }}\r\n          />\r\n        )}\r\n      </Component>\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!efficiencyAlert) return;\r\n    const timer = setTimeout(() => {\r\n      setEfficiencyAlert(null);\r\n    }, 20000);\r\n    return () => clearTimeout(timer);\r\n  }, [efficiencyAlert]);\r\n\r\n  const handleEfficiencyAction = async (action: EfficiencyAlertAction) => {\r\n    try {\r\n      if (action.type === 'mode' && action.mode) {\r\n        await ipc.efficiency.applyMode(action.mode);\r\n      } else if (action.type === 'hibernate') {\r\n        await ipc.efficiency.hibernateInactiveTabs();\r\n      }\r\n    } catch (error) {\r\n      console.error('Efficiency action failed:', error);\r\n    } finally {\r\n      setEfficiencyAlert(null);\r\n    }\r\n  };\r\n\r\n  const handlePromptSubmit = async () => {\r\n    if (!prompt.trim() || !activeId || promptLoading) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setPromptLoading(true);\r\n      await ipc.agent.createTask({\r\n        title: 'User Prompt',\r\n        role: 'researcher',\r\n        goal: prompt.trim(),\r\n        budget: { tokens: 4096, seconds: 120, requests: 20 },\r\n      });\r\n      setPrompt('');\r\n    } catch (error) {\r\n      console.error('Failed to create agent task:', error);\r\n    } finally {\r\n      setPromptLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!extraOpen) return;\r\n    const listenerOptions: AddEventListenerOptions = { capture: true };\r\n    const handleOutside = (event: MouseEvent) => {\r\n      if (!extraRef.current) return;\r\n      if (extraRef.current.contains(event.target as Node)) return;\r\n      setExtraOpen(false);\r\n    };\r\n    document.addEventListener('mousedown', handleOutside, listenerOptions);\r\n    return () => document.removeEventListener('mousedown', handleOutside, listenerOptions);\r\n  }, [extraOpen]);\r\n\r\n  const handleDoHToggle = async () => {\r\n    try {\r\n      if (dohStatus.enabled) {\r\n        await ipc.dns.disableDoH();\r\n        setDohStatus({ enabled: false, provider: 'cloudflare' });\r\n      } else {\r\n        await ipc.dns.enableDoH('cloudflare');\r\n        setDohStatus({ enabled: true, provider: 'cloudflare' });\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to toggle DoH:', error);\r\n    }\r\n  };\r\n\r\n  const efficiencyDetails = [\r\n    efficiencyBadge || null,\r\n    typeof efficiencySnapshot.batteryPct === 'number' ? `${Math.round(efficiencySnapshot.batteryPct)}%` : null,\r\n    typeof carbonIntensity === 'number' ? `${Math.round(carbonIntensity)} gCO₂/kWh` : null,\r\n  ]\r\n    .filter(Boolean)\r\n    .join(' · ');\r\n\r\n  const efficiencyVariant: 'default' | 'positive' | 'info' = efficiencyLabel.includes('Regen')\r\n    ? 'positive'\r\n    : efficiencyLabel.includes('Battery')\r\n    ? 'info'\r\n    : 'default';\r\n\r\n  const torBadgeDescription = torStatusLabel.replace(/^Tor:?\\s*/i, '');\r\n  const torBadgeVariant: 'default' | 'positive' | 'warning' | 'info' = torStatus.stub\r\n    ? 'warning'\r\n    : torStatus.running\r\n    ? 'info'\r\n    : 'default';\r\n\r\n  const vpnBadgeDescription = vpnStatus.connected\r\n    ? vpnStatus.type\r\n      ? vpnStatus.type.toUpperCase()\r\n      : 'Active'\r\n    : 'Disconnected';\r\n\r\n \r\n  return (\r\n    <div\r\n      className=\"px-4 py-2 bg-gray-900/90 backdrop-blur-sm border-t border-gray-700/50 flex flex-col gap-2\"\r\n      data-onboarding=\"status-bar\"\r\n    >\r\n      <div className=\"flex flex-wrap items-center gap-3 text-xs text-gray-300\">\r\n        <PrivacySwitch />\r\n\r\n        <StatusMeter\r\n          icon={Cpu}\r\n          label=\"CPU\"\r\n          value={`${cpuUsage}%`}\r\n          percent={cpuUsage}\r\n          title=\"System CPU usage\"\r\n          gradient=\"from-blue-500 via-cyan-500 to-blue-500\"\r\n        />\r\n\r\n        <StatusMeter\r\n          icon={MemoryStick}\r\n          label=\"RAM\"\r\n          value={`${memoryUsage}%`}\r\n          percent={memoryUsage}\r\n          title=\"System memory usage\"\r\n          gradient=\"from-green-500 via-emerald-500 to-green-500\"\r\n        />\r\n\r\n        <StatusBadge\r\n          icon={Activity}\r\n          label={efficiencyLabel}\r\n          description={efficiencyDetails || undefined}\r\n          variant={efficiencyVariant}\r\n          title={efficiencyBadge ?? efficiencyLabel}\r\n        />\r\n\r\n        <StatusBadge\r\n          icon={MoonStar}\r\n          label=\"Shadow\"\r\n          description={shadowSessionId ? 'Active' : 'Idle'}\r\n          variant={shadowSessionId ? 'info' : 'default'}\r\n          pulse={shadowLoading}\r\n          title={shadowSessionId ? 'Shadow Mode active' : 'Shadow Mode inactive'}\r\n        />\r\n\r\n        <StatusBadge\r\n          icon={Network}\r\n          label=\"Mode\"\r\n          description={privacyMode}\r\n          className={privacyModeColors[privacyMode]}\r\n          title={`Privacy mode: ${privacyMode}`}\r\n        />\r\n\r\n        <div className=\"ml-auto flex items-center gap-2\">\r\n          <StatusBadge\r\n            icon={Cpu}\r\n            label=\"CPU\"\r\n            description={`${cpuUsage}%`}\r\n            variant={cpuUsage > 70 ? 'warning' : 'default'}\r\n            title=\"CPU usage\"\r\n          />\r\n          <StatusBadge\r\n            icon={MemoryStick}\r\n            label=\"RAM\"\r\n            description={`${memoryUsage}%`}\r\n            variant={memoryUsage > 75 ? 'warning' : 'default'}\r\n            title=\"Memory usage\"\r\n          />\r\n          <StatusBadge\r\n            icon={Brain}\r\n            label=\"Model\"\r\n            description={modelReady ? 'Ready' : 'Loading'}\r\n            variant={modelReady ? 'positive' : 'default'}\r\n            pulse={modelReady}\r\n            title=\"Local model status\"\r\n          />\r\n\r\n          <div className=\"relative w-60\">\r\n            <input\r\n              type=\"text\"\r\n              value={prompt}\r\n              onChange={(e) => setPrompt(e.target.value)}\r\n              onKeyDown={(e) => {\r\n                if (e.key === 'Enter') {\r\n                  void handlePromptSubmit();\r\n                }\r\n              }}\r\n              placeholder=\"Prompt agent (e.g., 'summarize this page')...\"\r\n              disabled={promptLoading}\r\n              className={`h-8 w-full rounded-full border border-gray-700/60 bg-gray-800/70 pl-3 pr-9 text-xs text-gray-200 placeholder-gray-400 focus:border-blue-500/60 focus:outline-none focus:ring-1 focus:ring-blue-500/40 ${promptLoading ? 'opacity-70 cursor-wait' : ''}`}\r\n            />\r\n            {promptLoading ? (\r\n              <Loader2 className=\"absolute right-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 animate-spin text-blue-300\" aria-label=\"Sending prompt\" />\r\n            ) : (\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => void handlePromptSubmit()}\r\n                className=\"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 transition-colors hover:text-gray-200\"\r\n                title=\"Send prompt\"\r\n              >\r\n                <Send size={14} />\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          <SymbioticVoiceCompanion />\r\n\r\n          <div className=\"relative\" ref={extraRef}>\r\n            <button\r\n              type=\"button\"\r\n              className=\"flex items-center gap-1 rounded-full border border-gray-700/50 bg-gray-800/60 px-3 py-1.5 text-xs text-gray-300 transition-colors hover:border-gray-600 hover:text-white\"\r\n              onClick={() => setExtraOpen((prev) => !prev)}\r\n              title=\"Security & network controls\"\r\n            >\r\n              <MoreHorizontal size={14} />\r\n              More\r\n            </button>\r\n            <AnimatePresence>\r\n              {extraOpen && (\r\n                <motion.div\r\n                  initial={{ opacity: 0, y: 6 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  exit={{ opacity: 0, y: 6 }}\r\n                  transition={{ duration: 0.16 }}\r\n                  className=\"absolute right-0 mt-2 w-64 rounded-lg border border-gray-800 bg-slate-950/95 p-3 shadow-xl\"\r\n                >\r\n                  <div className=\"grid gap-2\">\r\n                    <StatusBadge\r\n                      icon={Shield}\r\n                      label=\"Tor\"\r\n                      description={torBadgeDescription}\r\n                      variant={torBadgeVariant}\r\n                      onClick={!torStatus.loading ? () => {\r\n                        if (torStatus.running) {\r\n                          void stopTor();\r\n                        } else {\r\n                          void startTor();\r\n                        }\r\n                      } : undefined}\r\n                      loading={torStatus.loading}\r\n                      title={torTooltip}\r\n                      className={`justify-start ${torStatus.loading ? 'opacity-60 cursor-not-allowed' : ''}`}\r\n                    />\r\n                    {torStatus.running && !torStatus.stub && (\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => {\r\n                          if (!torStatus.loading) {\r\n                            void newTorIdentity();\r\n                          }\r\n                        }}\r\n                        className=\"flex items-center gap-2 rounded-md border border-purple-500/40 bg-purple-500/10 px-3 py-1.5 text-[11px] text-purple-100 transition-colors hover:border-purple-400/60\"\r\n                      >\r\n                        <RefreshCw size={12} />\r\n                        Request new Tor identity\r\n                      </button>\r\n                    )}\r\n                    <StatusBadge\r\n                      icon={Wifi}\r\n                      label=\"VPN\"\r\n                      description={vpnBadgeDescription}\r\n                      variant={vpnStatus.connected ? 'positive' : 'default'}\r\n                      onClick={!vpnStatus.loading ? () => void checkVpn() : undefined}\r\n                      loading={vpnStatus.loading}\r\n                      title={vpnTooltip}\r\n                      className={`justify-start ${vpnStatus.loading ? 'opacity-60 cursor-not-allowed' : ''}`}\r\n                    />\r\n                    <StatusBadge\r\n                      icon={Shield}\r\n                      label=\"DoH\"\r\n                      description={dohStatus.enabled ? dohStatus.provider : 'Disabled'}\r\n                      variant={dohStatus.enabled ? 'info' : 'default'}\r\n                      onClick={handleDoHToggle}\r\n                      title=\"Toggle DNS-over-HTTPS\"\r\n                      className=\"justify-start\"\r\n                    />\r\n                    <StatusBadge\r\n                      icon={Activity}\r\n                      label=\"Efficiency\"\r\n                      description={efficiencyLabel || 'Normal'}\r\n                      variant=\"default\"\r\n                      className=\"justify-start\"\r\n                    />\r\n                  </div>\r\n                </motion.div>\r\n              )}\r\n            </AnimatePresence>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex flex-wrap items-start gap-3\">\r\n        <AnimatePresence>\r\n          {efficiencyAlert && (\r\n            <motion.div\r\n              key=\"efficiency-alert\"\r\n              initial={{ opacity: 0, y: 6 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: 6 }}\r\n              className={`flex w-full max-w-xl items-center gap-3 rounded-lg border px-3 py-2 shadow-inner ${severityStyles[efficiencyAlert.severity]}`}\r\n            >\r\n              <AlertTriangle size={14} />\r\n              <div className=\"flex flex-col gap-0.5\">\r\n                <span className=\"text-xs font-semibold\">{efficiencyAlert.title}</span>\r\n                <span className=\"text-[11px] opacity-80\">{efficiencyAlert.message}</span>\r\n              </div>\r\n              <div className=\"ml-auto flex items-center gap-2\">\r\n                {efficiencyAlert.actions.map((action) => (\r\n                  <button\r\n                    key={action.id}\r\n                    onClick={() => handleEfficiencyAction(action)}\r\n                    className=\"rounded bg-gray-900/60 px-2 py-1 text-[11px] font-medium transition-colors hover:bg-gray-900/80\"\r\n                  >\r\n                    {action.label}\r\n                  </button>\r\n                ))}\r\n                <button\r\n                  onClick={() => setEfficiencyAlert(null)}\r\n                  className=\"p-1 text-xs opacity-70 transition-opacity hover:opacity-100\"\r\n                  aria-label=\"Dismiss efficiency alert\"\r\n                >\r\n                  <X size={12} />\r\n                </button>\r\n              </div>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n\r\n        <AnimatePresence>\r\n          {shadowSummary && (\r\n            <motion.div\r\n              key=\"shadow-summary\"\r\n              initial={{ opacity: 0, y: 6 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: 6 }}\r\n              className=\"flex w-full max-w-xl items-start gap-3 rounded-lg border border-purple-500/40 bg-purple-500/10 px-3 py-2 text-xs text-purple-100 shadow-inner\"\r\n            >\r\n              <FileText size={14} className=\"mt-0.5 flex-shrink-0\" />\r\n              <div className=\"flex-1 space-y-1\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-[11px] font-semibold uppercase tracking-wide\">Shadow Summary</span>\r\n                  <button\r\n                    onClick={clearShadowSummary}\r\n                    className=\"p-1 text-[10px] text-purple-200/80 transition-colors hover:text-purple-50\"\r\n                    aria-label=\"Dismiss shadow summary\"\r\n                  >\r\n                    <X size={12} />\r\n                  </button>\r\n                </div>\r\n                <div className=\"text-[11px] opacity-90\">\r\n                  {shadowSummary.recommendations?.[0] ?? 'Review your shadow session.'}\r\n                </div>\r\n                <div className=\"flex flex-wrap gap-2 text-[10px] opacity-80\">\r\n                  <span>{Math.round(shadowSummary.durationMs / 1000)}s</span>\r\n                  <span>Visits: {shadowSummary.totalVisits}</span>\r\n                  <span>Domains: {shadowSummary.uniqueHosts}</span>\r\n                </div>\r\n                {shadowSummary.visited?.length > 0 && (\r\n                  <div className=\"space-y-0.5\">\r\n                    <span className=\"text-[10px] uppercase opacity-70\">Recent</span>\r\n                    <ul className=\"space-y-0.5\">\r\n                      {shadowSummary.visited.slice(0, 3).map((entry) => (\r\n                        <li key={`${entry.url}-${entry.firstSeen}`} className=\"truncate\">\r\n                          <a\r\n                            href={entry.url}\r\n                            className=\"text-[11px] text-purple-200 transition-colors hover:text-purple-50\"\r\n                            title={entry.url}\r\n                          >\r\n                            {entry.title || entry.url}\r\n                          </a>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n                {shadowSummary.recommendations?.length > 1 && (\r\n                  <div className=\"space-y-0.5\">\r\n                    <span className=\"text-[10px] uppercase opacity-70\">Recommendations</span>\r\n                    <ul className=\"space-y-0.5\">\r\n                      {shadowSummary.recommendations.slice(1).map((rec, idx) => (\r\n                        <li key={idx} className=\"text-[11px] opacity-80\">\r\n                          {rec}\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["Ellipsis","createLucideIcon","Frown","Meh","MemoryStick","MicOff","Rocket","Smile","useShadowStore","create","set","get","options","response","ipc","sessionResponse","error","sessionId","endResponse","payload","state","shouldClear","PrivacySwitch","mode","setMode","useState","policy","useProfileStore","shadowSessionId","startShadowSession","endShadowSession","shadowLoading","privateDisabled","ghostDisabled","shadowDisabled","modes","Lock","Eye","Network","handleModeChange","newMode","m","jsxs","Icon","isActive","motion","jsx","MoonStar","MODE_LABELS","MODE_BADGES","MODE_COLORS","defaultSnapshot","useEfficiencyStore","event","nextMode","useVoiceCompanionStore","open","listening","text","mood","message","timestamp","userMessage","prompt","reply","positiveWords","negativeWords","urgencyWords","detectMood","lowered","w","moodIcon","SymbioticVoiceCompanion","transcript","messages","loadingReply","setOpen","setListening","setTranscript","setMood","sendToCompanion","clearConversation","setError","recogRef","useRef","speechSupported","setSpeechSupported","useEffect","SR","recognizer","interim","res","finalText","detectedMood","e","startListening","stopListening","moodLabel","useMemo","Fragment","Sparkles","AnimatePresence","Portal","Loader2","Mic","BottomStatus","activeId","useTabsStore","setPrompt","promptLoading","setPromptLoading","extraOpen","setExtraOpen","extraRef","dohStatus","setDohStatus","cpuUsage","setCpuUsage","memoryUsage","setMemoryUsage","modelReady","privacyMode","setPrivacyMode","efficiencyAlert","setEfficiencyAlert","efficiencyLabel","efficiencyBadge","efficiencySnapshot","setEfficiencyEvent","shadowSummary","handleShadowEnded","clearShadowSummary","carbonIntensity","torStatus","usePrivacyStore","vpnStatus","refreshTor","refreshVpn","startTor","stopTor","newTorIdentity","checkVpn","useIPCEvent","status","alert","interval","statsUpdateRef","updateSystemStats","now","prev","newVal","isMounted","initStatus","privacyModeColors","torStatusLabel","torTooltip","vpnTooltip","severityStyles","clampPercent","value","StatusMeter","label","percent","gradient","title","onClick","Component","pct","StatusBadge","description","variant","pulse","loading","className","palette","timer","handleEfficiencyAction","action","handlePromptSubmit","listenerOptions","handleOutside","handleDoHToggle","efficiencyDetails","efficiencyVariant","torBadgeDescription","torBadgeVariant","vpnBadgeDescription","Cpu","Activity","Brain","Send","MoreHorizontal","Shield","RefreshCw","Wifi","AlertTriangle","X","FileText","entry","rec","idx"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6]}